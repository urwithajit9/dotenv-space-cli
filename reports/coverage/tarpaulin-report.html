<!doctype html>
<html>
<head>
    <meta charset="utf-8">
    <style>:root {
  --color: black;
  --bg: white;
  --head-bg: white;
  --link: #338;

  --blue: #ccf;
  --red: #fcc;
  --yellow: #ffc;
  --green: #cfc;
}

[data-theme='dark'] {
  --color: white;
  --bg: black;
  --head-bg: #333;
  --link: #aaf;

  --blue: #225;
  --red: #522;
  --yellow: #552;
  --green: #252;
}

html,
body {
  margin: 0;
  padding: 0;
  color: var(--color);
  background: var(--bg);
}

.app {
  margin: 10px;
  padding: 0;
}

.files-list {
  margin: 10px 0 0;
  width: 100%;
  border-collapse: collapse;
}
.files-list__head {
  border: 1px solid #999;
}
.files-list__head > tr > th {
  padding: 10px;
  border: 1px solid #999;
  text-align: left;
  font-weight: normal;
  background: var(--head-bg);
}
.files-list__body {
}
.files-list__file {
  cursor: pointer;
}
.files-list__file:hover {
  background: var(--blue);
}
.files-list__file > td {
  padding: 10px;
  border: 1px solid #999;
}
.files-list__file > td:first-child::before {
  content: '\01F4C4';
  margin-right: 1em;
}
.files-list__file_low {
  background: var(--red);
}
.files-list__file_medium {
  background: var(--yellow);
}
.files-list__file_high {
  background: var(--green);
}
.files-list__file_folder > td:first-child::before {
  content: '\01F4C1';
  margin-right: 1em;
}

.file-header {
  border: 1px solid #999;
  display: flex;
  justify-content: space-between;
  align-items: center;
  position: sticky;
  top: 0;
  background: var(--bg);
}

.file-header__back {
  margin: 10px;
  cursor: pointer;
  flex-shrink: 0;
  flex-grow: 0;
  text-decoration: underline;
  color: var(--link);
}

.file-header__name {
  margin: 10px;
  flex-shrink: 2;
  flex-grow: 2;
}

.file-header__stat {
  margin: 10px;
  flex-shrink: 0;
  flex-grow: 0;
}

.file-content {
  margin: 10px 0 0;
  border: 1px solid #999;
  padding: 10px;
  counter-reset: line;
  display: flex;
  flex-direction: column;
}

.code-line::before {
  content: counter(line);
  margin-right: 72px;
}
.code-line {
  margin: 0;
  height: 1em;
  counter-increment: line;

  position: absolute;
  padding: 0 0.3em 0.3em 0.3em;
  display: inherit;
  width: 100%;
}
.code-line_covered {
  background: var(--green);
}
.code-line_uncovered {
  background: var(--red);
}

.code-text-container {
  position: relative;
  height: 1em;
  padding: 0.3em 0;
}

.cover-indicator {
  display: flex;
  width: 100%;
  position: absolute;
  justify-content: end;
  height: 1em;
  align-items: center;
  padding: 0 0.3em 0.3em 0.3em;
}

.cover-indicator.check-cover::after {
  content: "\2713";
  font-weight: bold;
  background-color: var(--green);
  height: 1em;
}

.cover-indicator.no-cover::after {
  content: "\2716";
  font-weight: bold;
  background-color: var(--red);
  height: 1em;
}

.stat-line-hit {
  max-width: 48px;
  overflow: hidden;
  font-weight: bold;
  margin-right: 4px;
  background-color: var(--green);
  position: relative;
  top: 0.1em;
}

#theme-toggle-label {
  margin-left: 1ch;
}
</style>
</head>
<body>
    <div id="root"></div>
    <script>
        var data = {"files":[{"path":["/","home","ajit","Documents","dotenv-space-cli","benches","cli_benchmarks.rs"],"content":"/// Benchmarks for evnx (formely dotenv-space) CLI\n///\n/// Run with: cargo bench\nuse criterion::{black_box, criterion_group, criterion_main, BenchmarkId, Criterion};\nuse evnx::core::{Parser, ParserConfig};\nuse std::collections::HashMap;\n\n// Sample .env content for benchmarking\nconst SMALL_ENV: \u0026str = r#\"\nDATABASE_URL=postgresql://localhost:5432/db\nSECRET_KEY=abc123\nDEBUG=True\n\"#;\n\nconst MEDIUM_ENV: \u0026str = r#\"\n# Database\nDATABASE_URL=postgresql://user:pass@localhost:5432/mydb\nDB_POOL_SIZE=10\nDB_TIMEOUT=30\n\n# Cache\nREDIS_URL=redis://localhost:6379/0\nREDIS_POOL_SIZE=5\n\n# Application\nSECRET_KEY=my-secret-key-here\nDEBUG=True\nLOG_LEVEL=info\nAPP_NAME=MyApp\nAPP_VERSION=1.0.0\n\n# AWS\nAWS_ACCESS_KEY_ID=AKIAIOSFODNN7EXAMPLE\nAWS_SECRET_ACCESS_KEY=wJalrXUtnFEMI/K7MDENG/bPxRfiCYEXAMPLEKEY\nAWS_REGION=us-east-1\nAWS_BUCKET=my-bucket\n\n# Third-party\nSTRIPE_SECRET_KEY=sk_test_123\nSTRIPE_PUBLISHABLE_KEY=pk_test_456\nSENTRY_DSN=https://abc@sentry.io/123\n\"#;\n\nfn generate_large_env(size: usize) -\u003e String {\n    let mut content = String::new();\n    for i in 0..size {\n        content.push_str(\u0026format!(\"VAR_{:04}=value_{:04}\\n\", i, i));\n    }\n    content\n}\n\n// ============================================================================\n// PARSER BENCHMARKS\n// ============================================================================\n\nfn bench_parser_small(c: \u0026mut Criterion) {\n    c.bench_function(\"parser_small\", |b| {\n        let parser = Parser::default();\n        b.iter(|| {\n            parser.parse_content(black_box(SMALL_ENV)).unwrap();\n        });\n    });\n}\n\nfn bench_parser_medium(c: \u0026mut Criterion) {\n    c.bench_function(\"parser_medium\", |b| {\n        let parser = Parser::default();\n        b.iter(|| {\n            parser.parse_content(black_box(MEDIUM_ENV)).unwrap();\n        });\n    });\n}\n\nfn bench_parser_large(c: \u0026mut Criterion) {\n    let mut group = c.benchmark_group(\"parser_large\");\n\n    for size in [100, 500, 1000].iter() {\n        let env_content = generate_large_env(*size);\n        group.bench_with_input(BenchmarkId::from_parameter(size), size, |b, _| {\n            let parser = Parser::default();\n            b.iter(|| {\n                parser.parse_content(black_box(\u0026env_content)).unwrap();\n            });\n        });\n    }\n\n    group.finish();\n}\n\nfn bench_parser_with_expansion(c: \u0026mut Criterion) {\n    let content = r#\"\nBASE=http://localhost\nAPI_URL=${BASE}/api\nFULL_URL=${API_URL}/v1\nNESTED=${FULL_URL}/nested\n\"#;\n\n    c.bench_function(\"parser_with_expansion\", |b| {\n        let parser = Parser::default();\n        b.iter(|| {\n            parser.parse_content(black_box(content)).unwrap();\n        });\n    });\n}\n\nfn bench_parser_no_expansion(c: \u0026mut Criterion) {\n    let content = r#\"\nBASE=http://localhost\nAPI_URL=${BASE}/api\nFULL_URL=${API_URL}/v1\nNESTED=${FULL_URL}/nested\n\"#;\n\n    c.bench_function(\"parser_no_expansion\", |b| {\n        let mut config = ParserConfig::default();\n        config.allow_expansion = false;\n        let parser = Parser::new(config);\n        b.iter(|| {\n            parser.parse_content(black_box(content)).unwrap();\n        });\n    });\n}\n\n// ============================================================================\n// SECRET SCANNING BENCHMARKS\n// ============================================================================\n\nfn bench_secret_detection(c: \u0026mut Criterion) {\n    use dotenv_space::utils::patterns::detect_secret;\n\n    let test_cases = vec![\n        (\"AWS_KEY\", \"AKIA4OZRMFJ3VREALKEY\"),\n        (\"STRIPE\", \"sk_live_51Habc123def456ghi789jkl\"),\n        (\"GITHUB\", \"ghp_abc123def456ghi789jkl012mno345pqr678\"),\n        (\"NORMAL\", \"just-a-normal-value\"),\n    ];\n\n    c.bench_function(\"secret_detection\", |b| {\n        b.iter(|| {\n            for (key, value) in \u0026test_cases {\n                detect_secret(black_box(value), black_box(key));\n            }\n        });\n    });\n}\n\nfn bench_entropy_calculation(c: \u0026mut Criterion) {\n    use dotenv_space::utils::patterns::calculate_entropy;\n\n    let test_strings = vec![\"aaaaaaa\", \"abcdefg\", \"a1b2c3d4e5f6g7h8\", \"aB3$xY9!zQ2#mK7\"];\n\n    c.bench_function(\"entropy_calculation\", |b| {\n        b.iter(|| {\n            for s in \u0026test_strings {\n                calculate_entropy(black_box(s));\n            }\n        });\n    });\n}\n\n// ============================================================================\n// CONVERTER BENCHMARKS\n// ============================================================================\n\nfn bench_convert_to_json(c: \u0026mut Criterion) {\n    use dotenv_space::core::converter::{ConvertOptions, Converter};\n    use dotenv_space::formats::json::JsonConverter;\n\n    let mut vars = HashMap::new();\n    for i in 0..50 {\n        vars.insert(format!(\"KEY_{}\", i), format!(\"value_{}\", i));\n    }\n\n    c.bench_function(\"convert_to_json\", |b| {\n        let converter = JsonConverter;\n        let options = ConvertOptions::default();\n        b.iter(|| {\n            converter\n                .convert(black_box(\u0026vars), black_box(\u0026options))\n                .unwrap();\n        });\n    });\n}\n\nfn bench_convert_with_filtering(c: \u0026mut Criterion) {\n    use dotenv_space::core::converter::{ConvertOptions, Converter};\n    use dotenv_space::formats::json::JsonConverter;\n\n    let mut vars = HashMap::new();\n    for i in 0..50 {\n        vars.insert(format!(\"AWS_{}\", i), format!(\"value_{}\", i));\n        vars.insert(format!(\"DB_{}\", i), format!(\"value_{}\", i));\n    }\n\n    c.bench_function(\"convert_with_filtering\", |b| {\n        let converter = JsonConverter;\n        let mut options = ConvertOptions::default();\n        options.include_pattern = Some(\"AWS_*\".to_string());\n        b.iter(|| {\n            converter\n                .convert(black_box(\u0026vars), black_box(\u0026options))\n                .unwrap();\n        });\n    });\n}\n\n// ============================================================================\n// VALIDATION BENCHMARKS\n// ============================================================================\n\nfn bench_placeholder_detection(c: \u0026mut Criterion) {\n    let test_values = vec![\n        \"YOUR_KEY_HERE\",\n        \"sk_test_CHANGE_ME\",\n        \"generate-with-openssl\",\n        \"sk_live_51Hrealkey\",\n        \"postgresql://localhost:5432/db\",\n    ];\n\n    c.bench_function(\"placeholder_detection\", |b| {\n        b.iter(|| {\n            for value in \u0026test_values {\n                // Simulate placeholder check logic\n                let lower = value.to_lowercase();\n                let _is_placeholder = lower.contains(\"your_key_here\")\n                    || lower.contains(\"change_me\")\n                    || lower.contains(\"generate-with\");\n            }\n        });\n    });\n}\n\ncriterion_group!(\n    parser_benches,\n    bench_parser_small,\n    bench_parser_medium,\n    bench_parser_large,\n    bench_parser_with_expansion,\n    bench_parser_no_expansion\n);\n\ncriterion_group!(\n    scanner_benches,\n    bench_secret_detection,\n    bench_entropy_calculation\n);\n\ncriterion_group!(\n    converter_benches,\n    bench_convert_to_json,\n    bench_convert_with_filtering\n);\n\ncriterion_group!(validation_benches, bench_placeholder_detection);\n\ncriterion_main!(\n    parser_benches,\n    scanner_benches,\n    converter_benches,\n    validation_benches\n);\n","traces":[],"covered":0,"coverable":0},{"path":["/","home","ajit","Documents","dotenv-space-cli","src","cli.rs"],"content":"use clap::{Parser, Subcommand};\n\n#[derive(Parser)]\n#[command(\n    name = \"evnx\",\n    about = \"Manage .env files — validation, secret scanning, and format conversion\",\n    version,\n    author\n)]\npub struct Cli {\n    #[command(subcommand)]\n    pub command: Commands,\n\n    #[arg(short, long, global = true)]\n    pub verbose: bool,\n\n    #[arg(short, long, global = true)]\n    pub quiet: bool,\n\n    #[arg(long, global = true)]\n    pub no_color: bool,\n}\n\n#[derive(Subcommand)]\npub enum Commands {\n    /// Interactive project setup — generates .env.example\n    Init {\n        /// Project stack (python, nodejs, rust, go, php)\n        #[arg(long)]\n        stack: Option\u003cString\u003e,\n\n        /// Services to include (comma-separated)\n        #[arg(long)]\n        services: Option\u003cString\u003e,\n\n        /// Output path for .env.example\n        #[arg(long, default_value = \".\")]\n        path: String,\n\n        /// Skip all prompts and use defaults\n        #[arg(short, long)]\n        yes: bool,\n    },\n\n    /// Check .env against .env.example, find issues\n    Validate {\n        /// Path to .env file\n        #[arg(long, default_value = \".env\")]\n        env: String,\n\n        /// Path to .env.example file\n        #[arg(long, default_value = \".env.example\")]\n        example: String,\n\n        /// Fail on warnings, not just errors\n        #[arg(long)]\n        strict: bool,\n\n        /// Auto-fix safe issues\n        #[arg(long)]\n        fix: bool,\n\n        /// Output format (pretty, json, github-actions)\n        #[arg(long, default_value = \"pretty\")]\n        format: String,\n\n        /// Always exit with 0 (useful in CI)\n        #[arg(long)]\n        exit_zero: bool,\n    },\n\n    /// Detect secrets that look real (AWS keys, tokens, etc.)\n    Scan {\n        /// Files/directories to scan\n        #[arg(default_value = \".\")]\n        path: Vec\u003cString\u003e,\n\n        /// Exclude files matching pattern\n        #[arg(long, default_value = \".env.example\")]\n        exclude: Vec\u003cString\u003e,\n\n        /// Only scan for specific patterns (aws, stripe, github, all)\n        #[arg(long)]\n        pattern: Vec\u003cString\u003e,\n\n        /// Skip obvious placeholders\n        #[arg(long)]\n        ignore_placeholders: bool,\n\n        /// Output format (pretty, json, sarif)\n        #[arg(long, default_value = \"pretty\")]\n        format: String,\n\n        /// Don't fail CI even if secrets found\n        #[arg(long)]\n        exit_zero: bool,\n    },\n\n    /// Compare .env vs .env.example — show missing/extra vars\n    Diff {\n        /// Path to .env file\n        #[arg(long, default_value = \".env\")]\n        env: String,\n\n        /// Path to .env.example file\n        #[arg(long, default_value = \".env.example\")]\n        example: String,\n\n        /// Show actual values (default: hide for security)\n        #[arg(long)]\n        show_values: bool,\n\n        /// Output format (pretty, json, patch)\n        #[arg(long, default_value = \"pretty\")]\n        format: String,\n\n        /// Reverse comparison (.env.example vs .env)\n        #[arg(long)]\n        reverse: bool,\n    },\n\n    /// Transform to different formats (JSON, YAML, shell, etc.)\n    Convert {\n        /// Input .env file\n        #[arg(long, default_value = \".env\")]\n        env: String,\n\n        /// Target format (required in non-interactive mode)\n        #[arg(long)]\n        to: Option\u003cString\u003e,\n\n        /// Output file (default: stdout)\n        #[arg(long)]\n        output: Option\u003cString\u003e,\n\n        /// Include only matching vars (glob pattern)\n        #[arg(long)]\n        include: Option\u003cString\u003e,\n\n        /// Exclude matching vars\n        #[arg(long)]\n        exclude: Option\u003cString\u003e,\n\n        /// Base64-encode all values\n        #[arg(long)]\n        base64: bool,\n\n        /// Add prefix to all keys\n        #[arg(long)]\n        prefix: Option\u003cString\u003e,\n\n        /// Key transform (uppercase, lowercase, camelCase, snake_case)\n        #[arg(long)]\n        transform: Option\u003cString\u003e,\n    },\n\n    /// Full migration workflow to secret managers\n    #[cfg(feature = \"migrate\")]\n    Migrate {\n        /// Source type (env-file, aws, gcp, github, doppler)\n        #[arg(long)]\n        from: Option\u003cString\u003e,\n\n        /// Destination type\n        #[arg(long)]\n        to: Option\u003cString\u003e,\n\n        /// Source .env file\n        #[arg(long, default_value = \".env\")]\n        source_file: String,\n\n        /// GitHub repository (OWNER/REPO)\n        #[arg(long)]\n        repo: Option\u003cString\u003e,\n\n        /// Secret name for AWS/GCP single-secret storage\n        #[arg(long)]\n        secret_name: Option\u003cString\u003e,\n\n        /// Show what would happen without making changes\n        #[arg(long)]\n        dry_run: bool,\n\n        /// Skip variables that already exist\n        #[arg(long)]\n        skip_existing: bool,\n\n        /// Overwrite existing secrets\n        #[arg(long)]\n        overwrite: bool,\n\n        /// GitHub Personal Access Token\n        #[arg(long, env = \"GITHUB_TOKEN\")]\n        github_token: Option\u003cString\u003e,\n\n        /// AWS profile to use\n        #[arg(long)]\n        aws_profile: Option\u003cString\u003e,\n    },\n\n    /// Keep .env and .env.example in sync\n    Sync {\n        /// Direction (forward: .env → .env.example, reverse: .env.example → .env)\n        #[arg(long, default_value = \"forward\")]\n        direction: String,\n\n        /// Add with placeholder values\n        #[arg(long)]\n        placeholder: bool,\n    },\n\n    /// Generate config files from templates   \n    Template {\n        /// Input template file\n        #[arg(long)]\n        input: String,\n\n        /// Output file\n        #[arg(long)]\n        output: String,\n\n        /// .env file to use for values\n        #[arg(long, default_value = \".env\")]\n        env: String,\n    },\n\n    /// Create encrypted backup of .env\n    #[cfg(feature = \"backup\")]\n    Backup {\n        /// .env file to backup\n        #[arg(default_value = \".env\")]\n        env: String,\n\n        /// Output file\n        #[arg(long)]\n        output: Option\u003cString\u003e,\n    },\n\n    /// Restore from encrypted backup\n    #[cfg(feature = \"backup\")]\n    Restore {\n        /// Backup file\n        backup: String,\n\n        /// Output file\n        #[arg(long, default_value = \".env\")]\n        output: String,\n    },\n\n    /// Diagnose common setup issues   \n    Doctor {\n        /// Project directory to diagnose\n        #[arg(default_value = \".\")]\n        path: String,\n    },\n\n    /// Generate shell completions\n    Completions {\n        /// Shell type (bash, zsh, fish, powershell)\n        shell: String,\n    },\n}\n","traces":[],"covered":0,"coverable":0},{"path":["/","home","ajit","Documents","dotenv-space-cli","src","commands","backup.rs"],"content":"//! Backup command — create an encrypted backup of a `.env` file.\n//!\n//! # Security model\n//!\n//! Encryption uses **AES-256-GCM** (authenticated encryption) with a key derived\n//! from a user-supplied password via **Argon2id** (memory-hard KDF). Every backup\n//! uses a freshly generated random salt and nonce, so two backups of the same file\n//! with the same password always produce different ciphertext.\n//!\n//! ## Binary format (version 1)\n//!\n//! ```text\n//! ┌─────────┬────────────┬──────────┬────────────────────────────────┐\n//! │ version │    salt    │  nonce   │  AES-256-GCM ciphertext        │\n//! │  1 byte │  32 bytes  │ 12 bytes │  variable (JSON envelope)      │\n//! └─────────┴────────────┴──────────┴────────────────────────────────┘\n//! ```\n//!\n//! The entire structure is Base64-encoded (standard alphabet) before being written\n//! to disk. The ciphertext is the AES-256-GCM encryption of a JSON envelope:\n//!\n//! ```json\n//! {\n//!   \"version\": 1,\n//!   \"created_at\": \"2025-02-24T10:00:00Z\",\n//!   \"original_file\": \".env\",\n//!   \"tool_version\": \"0.1.0\",\n//!   \"content\": \"DATABASE_URL=...\\nSECRET_KEY=...\"\n//! }\n//! ```\n//!\n//! Embedding metadata *inside* the encrypted payload means it is both confidential\n//! (an attacker without the password cannot learn the filename or timestamp) and\n//! tamper-evident (altering metadata invalidates the GCM authentication tag).\n//!\n//! ## Argon2id parameters\n//!\n//! | Parameter   | Value    | Rationale                                 |\n//! |-------------|----------|-------------------------------------------|\n//! | variant     | Argon2id | Resistant to GPU and side-channel attacks |\n//! | memory      | 64 MiB   | Slows brute-force on commodity hardware   |\n//! | iterations  | 3        | Adds time cost on top of memory cost      |\n//! | parallelism | 1        | Single-threaded CLI usage                 |\n//! | output len  | 32 bytes | Exactly one AES-256 key                   |\n//!\n//! # Example\n//!\n//! ```bash\n//! evnx backup\n//! evnx backup --env .env.production --output prod.backup\n//! ```\n//!\n//! # Future work\n//!\n//! - `--key-file` flag: derive the key from a file instead of a password\n//!   (useful for automated/CI backup pipelines).\n//! - `--recipient` flag: asymmetric encryption (age / NaCl sealed boxes) so a\n//!   backup can be decrypted by a public-key holder without knowing the password.\n//! - Backup rotation: keep N most recent backups, auto-prune older ones.\n//! - Integrity manifest: store a SHA-256 hash of the plaintext so the restore\n//!   command can verify it was not silently corrupted after writing.\n\nuse anyhow::{anyhow, Context, Result};\nuse colored::*;\n\n/// Entry point for the `backup` subcommand.\n///\n/// When the `backup` feature is **not** enabled this prints a helpful message\n/// and exits cleanly — it does **not** panic or return an error.\n///\n/// # Arguments\n///\n/// * `env`     — Path to the `.env` file to back up (default: `.env`).\n/// * `output`  — Destination path for the encrypted backup (default: `\u003cenv\u003e.backup`).\n/// * `verbose` — Print extra diagnostic information during the run.\npub fn run(env: String, output: Option\u003cString\u003e, verbose: bool) -\u003e Result\u003c()\u003e {\n    // ── Feature-disabled stub ────────────────────────────────────────────────\n    #[cfg(not(feature = \"backup\"))]\n    {\n        // Reference parameters explicitly to silence unused-variable warnings\n        // without renaming them, keeping the signature consistent with main.rs.\n        let _ = (\u0026env, \u0026output, verbose);\n        println!(\"{} Backup feature not enabled\", \"✗\".red());\n        println!(\"Rebuild with: cargo build --features backup\");\n        return Ok(());\n    }\n\n    // ── Full implementation (feature = \"backup\") ─────────────────────────────\n    #[cfg(feature = \"backup\")]\n    {\n        use dialoguer::Password;\n        use std::fs;\n        use std::path::Path;\n\n        if verbose {\n            println!(\"{}\", \"Running backup in verbose mode\".dimmed());\n        }\n\n        println!(\n            \"\\n{}\",\n            \"┌─ Create encrypted backup ───────────────────────────┐\".cyan()\n        );\n        println!(\n            \"{}\",\n            \"│ Your .env will be encrypted with AES-256-GCM        │\".cyan()\n        );\n        println!(\n            \"{}\",\n            \"│ Key derived via Argon2id (64 MiB, 3 iterations)     │\".cyan()\n        );\n        println!(\n            \"{}\\n\",\n            \"└──────────────────────────────────────────────────────┘\".cyan()\n        );\n\n        // ── Validate source file ─────────────────────────────────────────────\n        if !Path::new(\u0026env).exists() {\n            return Err(anyhow!(\"File not found: {}\", env));\n        }\n\n        let content =\n            fs::read_to_string(\u0026env).with_context(|| format!(\"Failed to read {}\", env))?;\n\n        // Warn — but do not abort — if the file does not look like a .env file.\n        // The user might intentionally be backing up a non-standard file.\n        if !looks_like_dotenv(\u0026content) {\n            println!(\n                \"{} File does not look like a standard .env file — backing up anyway\",\n                \"⚠️\".yellow()\n            );\n        }\n\n        println!(\"{} Read {} bytes from {}\", \"✓\".green(), content.len(), env);\n\n        // ── Password prompt ──────────────────────────────────────────────────\n        let password = Password::new()\n            .with_prompt(\"Enter encryption password\")\n            .interact()?;\n\n        if password.is_empty() {\n            return Err(anyhow!(\"Password must not be empty\"));\n        }\n\n        // Minimum length check — Argon2id makes short passwords expensive to\n        // brute-force, but we still enforce a floor as a sanity guard.\n        if password.len() \u003c 8 {\n            return Err(anyhow!(\n                \"Password must be at least 8 characters (got {})\",\n                password.len()\n            ));\n        }\n\n        let password_confirm = Password::new().with_prompt(\"Confirm password\").interact()?;\n\n        if password != password_confirm {\n            return Err(anyhow!(\"Passwords do not match\"));\n        }\n\n        println!(\"{} Password accepted\", \"✓\".green());\n\n        // ── Encrypt ──────────────────────────────────────────────────────────\n        println!(\"Encrypting… (this may take a moment due to Argon2id key derivation)\");\n\n        let original_filename = Path::new(\u0026env)\n            .file_name()\n            .and_then(|n| n.to_str())\n            .unwrap_or(\".env\")\n            .to_string();\n\n        let encrypted = encrypt_content(\u0026content, \u0026password, \u0026original_filename)\n            .context(\"Encryption failed\")?;\n\n        // ── Write backup ─────────────────────────────────────────────────────\n        let output_path = output.unwrap_or_else(|| format!(\"{}.backup\", env));\n\n        fs::write(\u0026output_path, \u0026encrypted)\n            .with_context(|| format!(\"Failed to write backup to {}\", output_path))?;\n\n        let backup_size = std::fs::metadata(\u0026output_path)\n            .map(|m| m.len().to_string())\n            .unwrap_or_else(|_| \"unknown\".to_string());\n\n        println!(\"{} Backup created at {}\", \"✓\".green(), output_path);\n        println!(\"    Size: {} bytes (encrypted + Base64)\", backup_size);\n\n        println!(\"\\n{}\", \"⚠️  Important:\".yellow().bold());\n        println!(\"  • Keep your password safe — it cannot be recovered\");\n        println!(\"  • Store the backup in a secure, separate location\");\n        println!(\n            \"  • To restore: evnx restore {} --output {}\",\n            output_path, env\n        );\n        println!(\"  • Test the restore before deleting the original .env\");\n\n        Ok(())\n    }\n}\n\n// ── Encryption ────────────────────────────────────────────────────────────────\n\n/// Encrypt the plaintext content of a `.env` file.\n///\n/// Produces a Base64-encoded string containing the complete binary envelope:\n/// `version(1) || salt(32) || nonce(12) || AES-256-GCM-ciphertext`.\n///\n/// The ciphertext decrypts to a JSON envelope containing the `.env` content\n/// and metadata (see module-level documentation for the schema).\n///\n/// # Arguments\n///\n/// * `plaintext`          — The raw `.env` file content.\n/// * `password`           — User-supplied encryption password.\n/// * `original_filename`  — The filename (e.g. `.env`) stored in the metadata envelope so restore can surface it to the user.\n///\n/// # Errors\n///\n/// Returns an error if Argon2id key derivation or AES-256-GCM encryption fails.\n/// In practice these only fail with invalid parameters, which are hardcoded here.\n#[cfg(feature = \"backup\")]\nfn encrypt_content(plaintext: \u0026str, password: \u0026str, original_filename: \u0026str) -\u003e Result\u003cString\u003e {\n    use aes_gcm::{\n        aead::{rand_core::RngCore, Aead, KeyInit, OsRng},\n        Aes256Gcm, Nonce,\n    };\n    use argon2::{Algorithm, Argon2, Params, PasswordHasher, Version};\n    use base64::{engine::general_purpose, Engine as _};\n\n    // ── JSON metadata envelope ────────────────────────────────────────────────\n    // Stored inside the ciphertext so it is confidential and tamper-evident.\n    let created_at = chrono::Utc::now().format(\"%Y-%m-%dT%H:%M:%SZ\").to_string();\n    let envelope = serde_json::json!({\n        \"version\": 1,\n        \"created_at\": created_at,\n        \"original_file\": original_filename,\n        \"tool_version\": env!(\"CARGO_PKG_VERSION\"),\n        \"content\": plaintext,\n    });\n    let envelope_bytes =\n        serde_json::to_vec(\u0026envelope).context(\"Failed to serialise metadata envelope\")?;\n\n    // ── Argon2id key derivation ───────────────────────────────────────────────\n    // A fresh 32-byte salt is generated for every backup so two encryptions of\n    // the same file with the same password produce different ciphertext.\n    let mut salt_bytes = [0u8; 32];\n    OsRng.fill_bytes(\u0026mut salt_bytes);\n\n    // Explicit parameters pin the KDF behaviour regardless of library defaults.\n    // output_len = 32 guarantees exactly one AES-256 key's worth of material.\n    let params =\n        Params::new(65536, 3, 1, Some(32)).map_err(|e| anyhow!(\"Invalid Argon2 params: {}\", e))?;\n    let argon2 = Argon2::new(Algorithm::Argon2id, Version::V0x13, params);\n\n    let salt_string = argon2::password_hash::SaltString::encode_b64(\u0026salt_bytes)\n        .map_err(|e| anyhow!(\"Failed to encode salt for Argon2: {}\", e))?;\n\n    let password_hash = argon2\n        .hash_password(password.as_bytes(), \u0026salt_string)\n        .map_err(|e| anyhow!(\"Argon2id key derivation failed: {}\", e))?;\n\n    let hash_output = password_hash\n        .hash\n        .ok_or_else(|| anyhow!(\"Argon2id did not produce a hash output\"))?;\n\n    let key_bytes = hash_output.as_bytes();\n    if key_bytes.len() \u003c 32 {\n        return Err(anyhow!(\n            \"Derived key too short: {} bytes (expected 32)\",\n            key_bytes.len()\n        ));\n    }\n    let key: \u0026[u8; 32] = key_bytes[..32]\n        .try_into()\n        .map_err(|_| anyhow!(\"Key slice conversion failed\"))?;\n\n    // ── AES-256-GCM encryption ────────────────────────────────────────────────\n    let cipher = Aes256Gcm::new(key.into());\n\n    let mut nonce_bytes = [0u8; 12];\n    OsRng.fill_bytes(\u0026mut nonce_bytes);\n    let nonce = Nonce::from_slice(\u0026nonce_bytes);\n\n    let ciphertext = cipher\n        .encrypt(nonce, envelope_bytes.as_ref())\n        .map_err(|e| anyhow!(\"AES-256-GCM encryption failed: {}\", e))?;\n\n    // ── Assemble binary envelope ──────────────────────────────────────────────\n    // Layout: version(1) || salt(32) || nonce(12) || ciphertext(variable)\n    let mut result: Vec\u003cu8\u003e = Vec::with_capacity(1 + 32 + 12 + ciphertext.len());\n    result.push(1u8); // Version byte — increment when format changes\n    result.extend_from_slice(\u0026salt_bytes);\n    result.extend_from_slice(\u0026nonce_bytes);\n    result.extend_from_slice(\u0026ciphertext);\n\n    Ok(general_purpose::STANDARD.encode(\u0026result))\n}\n\n// ── Decryption (pub — used by restore.rs) ─────────────────────────────────────\n\n/// Decrypt a backup envelope produced by [`encrypt_content`].\n///\n/// This function is `pub` so that `restore.rs` can call it directly. Both\n/// commands live in the same `commands` module, keeping format logic in one\n/// place. If the binary format ever changes, bump the version byte here and\n/// add a new match arm — do **not** break decryption of existing version-1 files.\n///\n/// # Returns\n///\n/// A tuple of `(plaintext, metadata)`:\n/// - `plaintext` — The original `.env` file content.\n/// - `metadata`  — [`BackupMetadata`] with the original filename, creation timestamp, and tool version extracted from the JSON envelope.\n///\n/// # Errors\n///\n/// Returns a descriptive [`anyhow::Error`] for:\n/// - Base64 decode failure (not a evnx backup, or file is truncated).\n/// - Unknown format version (backup was made by a newer tool version).\n/// - Argon2id key derivation failure (should not occur with valid inputs).\n/// - AES-256-GCM decryption failure — almost always wrong password or tampered\n///   file; the error message deliberately does not distinguish these two cases\n///   to avoid leaking information.\n/// - JSON deserialisation failure (encrypted payload is internally corrupt).\n#[cfg(feature = \"backup\")]\npub fn decrypt_content(encoded: \u0026str, password: \u0026str) -\u003e Result\u003c(String, BackupMetadata)\u003e {\n    use aes_gcm::{\n        aead::{Aead, KeyInit},\n        Aes256Gcm, Nonce,\n    };\n    use argon2::{Algorithm, Argon2, Params, PasswordHasher, Version};\n    use base64::{engine::general_purpose, Engine as _};\n\n    // ── Base64 decode ─────────────────────────────────────────────────────────\n    let raw = general_purpose::STANDARD.decode(encoded.trim()).context(\n        \"Failed to Base64-decode the backup file. \\\n             Is this a valid evnx backup?\",\n    )?;\n\n    // Minimum valid size: 1 (version) + 32 (salt) + 12 (nonce) + 16 (GCM tag)\n    const MIN_LEN: usize = 1 + 32 + 12 + 16;\n    if raw.len() \u003c MIN_LEN {\n        return Err(anyhow!(\n            \"Backup file is too short ({} bytes, minimum {}). File may be corrupt.\",\n            raw.len(),\n            MIN_LEN\n        ));\n    }\n\n    // ── Parse binary envelope ─────────────────────────────────────────────────\n    let version = raw[0];\n    if version != 1 {\n        return Err(anyhow!(\n            \"Unsupported backup format version: {}. \\\n             This backup was created by a newer version of evnx. \\\n             Please upgrade the tool and try again.\",\n            version\n        ));\n    }\n\n    // Slice layout mirrors encrypt_content exactly.\n    let salt_bytes = \u0026raw[1..33]; // 32 bytes\n    let nonce_bytes = \u0026raw[33..45]; // 12 bytes\n    let ciphertext = \u0026raw[45..]; // remainder = GCM ciphertext + 16-byte tag\n\n    // ── Argon2id key re-derivation ────────────────────────────────────────────\n    // Same parameters as encrypt_content — if these ever change, add a version\n    // branch above and keep the old params here for backward compatibility.\n    let params =\n        Params::new(65536, 3, 1, Some(32)).map_err(|e| anyhow!(\"Invalid Argon2 params: {}\", e))?;\n    let argon2 = Argon2::new(Algorithm::Argon2id, Version::V0x13, params);\n\n    let salt_string = argon2::password_hash::SaltString::encode_b64(salt_bytes)\n        .map_err(|e| anyhow!(\"Failed to encode salt: {}\", e))?;\n\n    let password_hash = argon2\n        .hash_password(password.as_bytes(), \u0026salt_string)\n        .map_err(|e| anyhow!(\"Argon2id key derivation failed: {}\", e))?;\n\n    let hash_output = password_hash\n        .hash\n        .ok_or_else(|| anyhow!(\"Argon2id did not produce a hash output\"))?;\n\n    let key_bytes = hash_output.as_bytes();\n    if key_bytes.len() \u003c 32 {\n        return Err(anyhow!(\"Derived key too short: {} bytes\", key_bytes.len()));\n    }\n    let key: \u0026[u8; 32] = key_bytes[..32]\n        .try_into()\n        .map_err(|_| anyhow!(\"Key slice conversion failed\"))?;\n\n    // ── AES-256-GCM decryption ────────────────────────────────────────────────\n    let cipher = Aes256Gcm::new(key.into());\n    let nonce = Nonce::from_slice(nonce_bytes);\n\n    // Intentionally vague error — distinguishing \"wrong password\" from \"tampered\n    // file\" would leak information about which part of authentication failed.\n    let plaintext_bytes = cipher.decrypt(nonce, ciphertext).map_err(|_| {\n        anyhow!(\"Decryption failed. The password may be incorrect or the backup file is corrupt.\")\n    })?;\n\n    // ── Deserialise JSON envelope ─────────────────────────────────────────────\n    let envelope: serde_json::Value = serde_json::from_slice(\u0026plaintext_bytes)\n        .context(\"Decrypted payload is not valid JSON. The backup envelope may be corrupt.\")?;\n\n    let content = envelope[\"content\"]\n        .as_str()\n        .ok_or_else(|| anyhow!(\"Backup envelope is missing the 'content' field.\"))?\n        .to_string();\n\n    let metadata = BackupMetadata {\n        created_at: envelope[\"created_at\"]\n            .as_str()\n            .unwrap_or(\"unknown\")\n            .to_string(),\n        original_file: envelope[\"original_file\"]\n            .as_str()\n            .unwrap_or(\".env\")\n            .to_string(),\n        tool_version: envelope[\"tool_version\"]\n            .as_str()\n            .unwrap_or(\"unknown\")\n            .to_string(),\n    };\n\n    Ok((content, metadata))\n}\n\n// ── Supporting types ──────────────────────────────────────────────────────────\n\n/// Metadata extracted from a decrypted backup envelope.\n///\n/// Returned by [`decrypt_content`] so the `restore` command can display\n/// information about the backup before writing any files.\n#[cfg(feature = \"backup\")]\n#[derive(Debug)]\npub struct BackupMetadata {\n    /// ISO 8601 UTC timestamp recorded when the backup was created.\n    pub created_at: String,\n    /// The original filename (e.g. `.env`, `.env.production`).\n    pub original_file: String,\n    /// The `CARGO_PKG_VERSION` of the tool that created this backup.\n    pub tool_version: String,\n}\n\n// ── Helpers ───────────────────────────────────────────────────────────────────\n\n/// Heuristically check whether `content` resembles a `.env` file.\n///\n/// A file is considered valid if at least **80%** of its non-empty lines are:\n/// - blank lines,\n/// - comments beginning with `#`, or\n/// - `KEY=VALUE` assignments where KEY contains only alphanumerics and `_`.\n///\n/// This check is intentionally lenient — it exists to warn the user if they\n/// accidentally pass the wrong file, not to enforce strict `.env` grammar.\nfn looks_like_dotenv(content: \u0026str) -\u003e bool {\n    if content.trim().is_empty() {\n        return true;\n    }\n\n    let valid_line = |line: \u0026str| -\u003e bool {\n        let line = line.trim();\n        line.is_empty()\n            || line.starts_with('#')\n            || line\n                .split_once('=')\n                .map(|(key, _)| {\n                    !key.trim().is_empty()\n                        \u0026\u0026 key.trim().chars().all(|c| c.is_alphanumeric() || c == '_')\n                })\n                .unwrap_or(false)\n    };\n\n    let non_empty: Vec\u003c\u0026str\u003e = content.lines().filter(|l| !l.trim().is_empty()).collect();\n    if non_empty.is_empty() {\n        return true;\n    }\n    let valid_count = non_empty.iter().filter(|\u0026\u0026l| valid_line(l)).count();\n    // Integer equivalent of valid_count / total \u003e= 0.8\n    valid_count * 10 \u003e= non_empty.len() * 8\n}\n\n// ── Tests ─────────────────────────────────────────────────────────────────────\n\n#[cfg(test)]\nmod tests {\n    use super::*;\n\n    // ── looks_like_dotenv ─────────────────────────────────────────────────────\n\n    #[test]\n    fn test_looks_like_dotenv_valid() {\n        assert!(looks_like_dotenv(\n            \"# Database\\nDATABASE_URL=postgresql://localhost\\nSECRET_KEY=abc123\\n\"\n        ));\n    }\n\n    #[test]\n    fn test_looks_like_dotenv_empty() {\n        assert!(looks_like_dotenv(\"\"));\n        assert!(looks_like_dotenv(\"  \\n  \"));\n    }\n\n    #[test]\n    fn test_looks_like_dotenv_rejects_prose() {\n        assert!(!looks_like_dotenv(\n            \"This is just a plain text file.\\nWith no env vars at all.\\nWhatsoever.\"\n        ));\n    }\n\n    #[test]\n    fn test_looks_like_dotenv_comments_and_blanks() {\n        assert!(looks_like_dotenv(\"# Comment\\n\\n# Another\\nKEY=value\\n\"));\n    }\n\n    // ── Encrypt / decrypt roundtrip ───────────────────────────────────────────\n\n    #[test]\n    #[cfg(feature = \"backup\")]\n    fn test_roundtrip() {\n        let plaintext = \"DATABASE_URL=postgresql://localhost:5432/db\\nSECRET_KEY=abc123\\n\";\n        let password = \"correct-horse-battery-staple\";\n        let filename = \".env\";\n\n        let encrypted =\n            encrypt_content(plaintext, password, filename).expect(\"encryption must succeed\");\n\n        assert!(!encrypted.is_empty());\n        assert_ne!(encrypted, plaintext);\n\n        let (decrypted, metadata) =\n            decrypt_content(\u0026encrypted, password).expect(\"decryption must succeed\");\n\n        assert_eq!(\n            decrypted, plaintext,\n            \"roundtrip must recover original content\"\n        );\n        assert_eq!(metadata.original_file, filename);\n        assert_eq!(metadata.tool_version, env!(\"CARGO_PKG_VERSION\"));\n        assert!(!metadata.created_at.is_empty());\n    }\n\n    #[test]\n    #[cfg(feature = \"backup\")]\n    fn test_wrong_password_returns_error() {\n        let encrypted =\n            encrypt_content(\"KEY=val\\n\", \"correct\", \".env\").expect(\"encryption must succeed\");\n\n        let result = decrypt_content(\u0026encrypted, \"wrong\");\n        assert!(result.is_err(), \"wrong password must return an error\");\n\n        // Error message must be user-friendly and not expose internal details.\n        let msg = result.unwrap_err().to_string();\n        assert!(\n            msg.contains(\"incorrect\") || msg.contains(\"corrupt\"),\n            \"unexpected error message: {msg}\"\n        );\n    }\n\n    #[test]\n    #[cfg(feature = \"backup\")]\n    fn test_tampered_ciphertext_is_rejected() {\n        use base64::{engine::general_purpose, Engine as _};\n\n        let encrypted =\n            encrypt_content(\"KEY=value\\n\", \"password\", \".env\").expect(\"encryption must succeed\");\n\n        let mut raw = general_purpose::STANDARD.decode(\u0026encrypted).unwrap();\n        // Flip a byte well into the ciphertext region (after the 45-byte header).\n        let idx = raw.len() - 5;\n        raw[idx] ^= 0xFF;\n        let tampered = general_purpose::STANDARD.encode(\u0026raw);\n\n        assert!(\n            decrypt_content(\u0026tampered, \"password\").is_err(),\n            \"tampered ciphertext must be rejected\"\n        );\n    }\n\n    #[test]\n    #[cfg(feature = \"backup\")]\n    fn test_two_encryptions_produce_different_ciphertext() {\n        // Random salt + nonce mean identical inputs → different outputs.\n        let a = encrypt_content(\"KEY=value\\n\", \"password\", \".env\").unwrap();\n        let b = encrypt_content(\"KEY=value\\n\", \"password\", \".env\").unwrap();\n        assert_ne!(a, b);\n    }\n\n    #[test]\n    #[cfg(feature = \"backup\")]\n    fn test_metadata_round_trips() {\n        let (_, meta) = decrypt_content(\n            \u0026encrypt_content(\"KEY=val\\n\", \"pass12345\", \".env.production\").unwrap(),\n            \"pass12345\",\n        )\n        .unwrap();\n\n        assert_eq!(meta.original_file, \".env.production\");\n        assert!(!meta.created_at.is_empty());\n        assert_eq!(meta.tool_version, env!(\"CARGO_PKG_VERSION\"));\n    }\n}\n","traces":[{"line":76,"address":[5463536,5463896],"length":1,"stats":{"Line":0}},{"line":83,"address":[5463564,5463638],"length":1,"stats":{"Line":0}},{"line":84,"address":[5463776],"length":1,"stats":{"Line":0}},{"line":454,"address":[5463513,5463024,5463519],"length":1,"stats":{"Line":1}},{"line":455,"address":[5463057],"length":1,"stats":{"Line":2}},{"line":456,"address":[5463168],"length":1,"stats":{"Line":1}},{"line":459,"address":[6290416],"length":1,"stats":{"Line":1}},{"line":460,"address":[6290461],"length":1,"stats":{"Line":2}},{"line":461,"address":[6290492,6290528],"length":1,"stats":{"Line":3}},{"line":462,"address":[6290511],"length":1,"stats":{"Line":2}},{"line":464,"address":[6290545],"length":1,"stats":{"Line":1}},{"line":465,"address":[6290615,6290608,6290561],"length":1,"stats":{"Line":5}},{"line":466,"address":[6290642,6290717],"length":1,"stats":{"Line":2}},{"line":467,"address":[5421888,5421952,5421980],"length":1,"stats":{"Line":5}},{"line":469,"address":[6290572],"length":1,"stats":{"Line":1}},{"line":472,"address":[6290368,6290382],"length":1,"stats":{"Line":5}},{"line":473,"address":[5463153,5463223],"length":1,"stats":{"Line":2}},{"line":474,"address":[5463255],"length":1,"stats":{"Line":0}},{"line":476,"address":[6290333,6290320],"length":1,"stats":{"Line":6}},{"line":478,"address":[5463370,5463481],"length":1,"stats":{"Line":1}}],"covered":16,"coverable":20},{"path":["/","home","ajit","Documents","dotenv-space-cli","src","commands","convert.rs"],"content":"//! Convert command - transform .env to different formats\nuse anyhow::{Context, Result};\nuse colored::*;\nuse dialoguer::Select;\nuse std::fs;\n\nuse crate::core::{\n    converter::{ConvertOptions, Converter, KeyTransform},\n    Parser,\n};\nuse crate::formats;\n\n// Run the convert command\n//\n// Converts .env file to various output formats with optional filtering and transformation.\n//\n// # Arguments\n//\n// * `env` - Path to .env file\n// * `to` - Target format (None = interactive mode)\n// * `output` - Optional output file (None = stdout)\n// * `include` - Include only matching vars (glob pattern)\n// * `exclude` - Exclude matching vars (glob pattern)\n// * `base64` - Base64-encode all values\n// * `prefix` - Add prefix to all keys\n// * `transform` - Key transformation (uppercase/lowercase/camelCase/snake_case)\n// * `verbose` - Enable verbose output\n//\n// # Supported Formats (14)\n//\n// **Generic:** json, yaml, shell\n// **Cloud:** aws-secrets, gcp-secrets, azure-keyvault\n// **CI/CD:** github-actions\n// **Containers:** docker-compose, kubernetes\n// **IaC:** terraform\n// **Secret Managers:** doppler, heroku, vercel, railway\n#[allow(clippy::too_many_arguments)]\npub fn run(\n    env: String,\n    to: Option\u003cString\u003e,\n    output: Option\u003cString\u003e,\n    include: Option\u003cString\u003e,\n    exclude: Option\u003cString\u003e,\n    base64: bool,\n    prefix: Option\u003cString\u003e,\n    transform: Option\u003cString\u003e,\n    verbose: bool,\n) -\u003e Result\u003c()\u003e {\n    if verbose {\n        println!(\"{}\", \"Running convert in verbose mode\".dimmed());\n    }\n\n    // Parse .env file\n    let parser = Parser::default();\n    let env_file = parser\n        .parse_file(\u0026env)\n        .with_context(|| format!(\"Failed to parse {}\", env))?;\n\n    if verbose {\n        println!(\"Loaded {} variables from {}\", env_file.vars.len(), env);\n    }\n\n    // // Build conversion options\n    // let mut options = ConvertOptions::default();\n    // options.include_pattern = include;\n    // options.exclude_pattern = exclude;\n    // options.base64 = base64;\n    // options.prefix = prefix;\n    // options.transform = transform.as_ref().and_then(|t| match t.as_str() {\n    //     \"uppercase\" =\u003e Some(KeyTransform::Uppercase),\n    //     \"lowercase\" =\u003e Some(KeyTransform::Lowercase),\n    //     \"camelCase\" =\u003e Some(KeyTransform::CamelCase),\n    //     \"snake_case\" =\u003e Some(KeyTransform::SnakeCase),\n    //     _ =\u003e None,\n    // });\n    let options = ConvertOptions {\n        include_pattern: include,\n        exclude_pattern: exclude,\n        base64,\n        prefix,\n        transform: transform.as_ref().and_then(|t| match t.as_str() {\n            \"uppercase\" =\u003e Some(KeyTransform::Uppercase),\n            \"lowercase\" =\u003e Some(KeyTransform::Lowercase),\n            \"camelCase\" =\u003e Some(KeyTransform::CamelCase),\n            \"snake_case\" =\u003e Some(KeyTransform::SnakeCase),\n            _ =\u003e None,\n        }),\n    };\n\n    // Determine format\n    let format = match to {\n        Some(f) =\u003e f,\n        None =\u003e {\n            // Interactive mode\n            println!(\n                \"\\n{}\",\n                \"┌─ Convert environment variables ─────────────────────┐\".cyan()\n            );\n            println!(\n                \"{}\",\n                \"│ Transform .env into different formats               │\".cyan()\n            );\n            println!(\n                \"{}\\n\",\n                \"└──────────────────────────────────────────────────────┘\".cyan()\n            );\n\n            let formats = vec![\n                // Generic formats (always show first)\n                \"json - Generic JSON key-value object\",\n                \"yaml - Generic YAML key-value format\",\n                \"shell - Shell export script (bash/zsh)\",\n                // Cloud providers\n                \"aws-secrets - AWS Secrets Manager (CLI commands)\",\n                \"gcp-secrets - GCP Secret Manager (gcloud commands)\",\n                \"azure-keyvault - Azure Key Vault (az CLI commands)\",\n                // CI/CD platforms\n                \"github-actions - GitHub Actions secrets (ready to paste)\",\n                // Container platforms\n                \"docker-compose - Docker Compose YAML environment\",\n                \"kubernetes - Kubernetes Secret YAML (base64 encoded)\",\n                // Infrastructure as Code\n                \"terraform - Terraform .tfvars file\",\n                // Secret management platforms\n                \"doppler - Doppler secrets JSON format\",\n                \"heroku - Heroku config vars (CLI commands)\",\n                \"vercel - Vercel environment variables JSON\",\n                \"railway - Railway variables JSON format\",\n            ];\n\n            let selection = Select::new()\n                .with_prompt(\"Select output format\")\n                .items(\u0026formats)\n                .default(0)\n                .interact()?;\n\n            // Extract format name (everything before first dash and space)\n            formats[selection]\n                .split('-')\n                .next()\n                .unwrap()\n                .trim()\n                .to_string()\n        }\n    };\n\n    // Get converter\n    // Note: Using qualified paths (formats::JsonConverter) instead of\n    // full paths (formats::json::JsonConverter) to avoid import warnings\n    let converter: Box\u003cdyn Converter\u003e = match format.as_str() {\n        // Generic formats\n        \"json\" =\u003e Box::new(formats::JsonConverter),\n        \"yaml\" | \"yml\" =\u003e Box::new(formats::YamlConverter),\n        \"shell\" | \"bash\" | \"export\" =\u003e Box::new(formats::ShellExportConverter),\n\n        // Cloud providers\n        \"aws\" | \"aws-secrets\" | \"aws-secrets-manager\" =\u003e Box::new(formats::AwsSecretsConverter),\n        \"gcp\" | \"gcp-secrets\" | \"gcp-secret-manager\" =\u003e {\n            Box::new(formats::GcpSecretConverter::default())\n        }\n        \"azure\" | \"azure-keyvault\" | \"azure-key-vault\" =\u003e {\n            Box::new(formats::AzureKeyVaultConverter::default())\n        }\n\n        // CI/CD platforms\n        \"github\" | \"github-actions\" | \"gh-actions\" =\u003e {\n            Box::new(formats::GitHubActionsConverter::default())\n        }\n\n        // Container platforms\n        \"docker\" | \"docker-compose\" | \"compose\" =\u003e Box::new(formats::DockerComposeConverter),\n        \"kubernetes\" | \"k8s\" | \"kubectl\" =\u003e Box::new(formats::KubernetesSecretConverter::default()),\n\n        // Infrastructure as Code\n        \"terraform\" | \"tfvars\" | \"tf\" =\u003e Box::new(formats::TerraformConverter),\n\n        // Secret management platforms\n        \"doppler\" =\u003e Box::new(formats::DopplerConverter),\n        \"heroku\" =\u003e Box::new(formats::HerokuConfigConverter::default()),\n        \"vercel\" =\u003e Box::new(formats::VercelEnvConverter),\n        \"railway\" =\u003e Box::new(formats::RailwayConverter),\n\n        // Unknown format\n        _ =\u003e {\n            eprintln!(\"{} Unknown format: {}\", \"✗\".red(), format);\n            eprintln!();\n            eprintln!(\"{}\", \"Supported formats:\".bold());\n            eprintln!();\n            eprintln!(\"  {}\", \"Generic:\".yellow());\n            eprintln!(\"    json, yaml, shell\");\n            eprintln!();\n            eprintln!(\"  {}\", \"Cloud providers:\".yellow());\n            eprintln!(\"    aws-secrets, gcp-secrets, azure-keyvault\");\n            eprintln!();\n            eprintln!(\"  {}\", \"CI/CD:\".yellow());\n            eprintln!(\"    github-actions\");\n            eprintln!();\n            eprintln!(\"  {}\", \"Containers:\".yellow());\n            eprintln!(\"    docker-compose, kubernetes\");\n            eprintln!();\n            eprintln!(\"  {}\", \"Infrastructure:\".yellow());\n            eprintln!(\"    terraform\");\n            eprintln!();\n            eprintln!(\"  {}\", \"Secret managers:\".yellow());\n            eprintln!(\"    doppler, heroku, vercel, railway\");\n            eprintln!();\n            eprintln!(\"  {}\", \"Aliases:\".dimmed());\n            eprintln!(\"    k8s → kubernetes, tf → terraform, yml → yaml\");\n            eprintln!(\"    gh-actions → github-actions, compose → docker-compose\");\n            std::process::exit(1);\n        }\n    };\n\n    if verbose {\n        println!(\"Converting to {} format...\", converter.name());\n    }\n\n    // Convert\n    let result = converter.convert(\u0026env_file.vars, \u0026options)?;\n\n    // Output\n    match output {\n        Some(path) =\u003e {\n            fs::write(\u0026path, \u0026result).with_context(|| format!(\"Failed to write to {}\", path))?;\n            println!(\"{} Converted successfully\", \"✓\".green());\n            println!(\"Output written to: {}\", path);\n        }\n        None =\u003e {\n            println!(\"{}\", result);\n        }\n    }\n\n    Ok(())\n}\n\n#[cfg(test)]\nmod tests {\n    use super::*;\n\n    #[test]\n    fn test_key_transform_uppercase() {\n        let mut options = ConvertOptions::default();\n        options.transform = Some(KeyTransform::Uppercase);\n        // ConvertOptions tests are in core/converter.rs\n    }\n}\n","traces":[{"line":38,"address":[6338177,6330616,6327184],"length":1,"stats":{"Line":0}},{"line":49,"address":[5386908],"length":1,"stats":{"Line":0}},{"line":50,"address":[6327438,6327521],"length":1,"stats":{"Line":0}},{"line":54,"address":[6327416],"length":1,"stats":{"Line":0}},{"line":55,"address":[6337525,6327750,6327830],"length":1,"stats":{"Line":0}},{"line":56,"address":[6327688],"length":1,"stats":{"Line":0}},{"line":57,"address":[5387315,5387382],"length":1,"stats":{"Line":0}},{"line":59,"address":[6327918],"length":1,"stats":{"Line":0}},{"line":60,"address":[6328073,6328160],"length":1,"stats":{"Line":0}},{"line":81,"address":[6328051,6328380],"length":1,"stats":{"Line":0}},{"line":91,"address":[6328581],"length":1,"stats":{"Line":0}},{"line":92,"address":[5388173],"length":1,"stats":{"Line":0}},{"line":95,"address":[6328717],"length":1,"stats":{"Line":0}},{"line":99,"address":[6328995],"length":1,"stats":{"Line":0}},{"line":103,"address":[6329193],"length":1,"stats":{"Line":0}},{"line":108,"address":[6329362],"length":1,"stats":{"Line":0}},{"line":131,"address":[6330118,6330545,6330207,6329997,6329795],"length":1,"stats":{"Line":0}},{"line":133,"address":[6330005,6330594,6329905],"length":1,"stats":{"Line":0}},{"line":138,"address":[6330252],"length":1,"stats":{"Line":0}},{"line":150,"address":[6335290,6330682,6330511],"length":1,"stats":{"Line":0}},{"line":152,"address":[6330785,6335871,6330704],"length":1,"stats":{"Line":0}},{"line":153,"address":[6330814,6335835,6330759],"length":1,"stats":{"Line":0}},{"line":154,"address":[6335799,6330913],"length":1,"stats":{"Line":0}},{"line":157,"address":[6331100,6335763],"length":1,"stats":{"Line":0}},{"line":158,"address":[6331287,6331397],"length":1,"stats":{"Line":0}},{"line":159,"address":[6331368,6335698],"length":1,"stats":{"Line":0}},{"line":161,"address":[6331474,6331584],"length":1,"stats":{"Line":0}},{"line":162,"address":[5391072,5395114],"length":1,"stats":{"Line":0}},{"line":166,"address":[6331771,6331661],"length":1,"stats":{"Line":0}},{"line":167,"address":[6331742,6335584],"length":1,"stats":{"Line":0}},{"line":171,"address":[6331848,6335556],"length":1,"stats":{"Line":0}},{"line":172,"address":[6332035,6335491],"length":1,"stats":{"Line":0}},{"line":175,"address":[6332222,6335463],"length":1,"stats":{"Line":0}},{"line":178,"address":[6332490,6332409,6335427],"length":1,"stats":{"Line":0}},{"line":179,"address":[6332569,6335365,6332516,6332464],"length":1,"stats":{"Line":0}},{"line":180,"address":[6332628,6332538,6332583,6335340],"length":1,"stats":{"Line":0}},{"line":181,"address":[6332651,6332688,6335260,6332605],"length":1,"stats":{"Line":0}},{"line":185,"address":[6332657,6332715],"length":1,"stats":{"Line":0}},{"line":186,"address":[6332933],"length":1,"stats":{"Line":0}},{"line":187,"address":[6332978],"length":1,"stats":{"Line":0}},{"line":188,"address":[6333176],"length":1,"stats":{"Line":0}},{"line":189,"address":[5392698],"length":1,"stats":{"Line":0}},{"line":190,"address":[5392896],"length":1,"stats":{"Line":0}},{"line":191,"address":[5392941],"length":1,"stats":{"Line":0}},{"line":192,"address":[5392986],"length":1,"stats":{"Line":0}},{"line":193,"address":[5393184],"length":1,"stats":{"Line":0}},{"line":194,"address":[6333752],"length":1,"stats":{"Line":0}},{"line":195,"address":[6333797],"length":1,"stats":{"Line":0}},{"line":196,"address":[6333995],"length":1,"stats":{"Line":0}},{"line":197,"address":[5393517],"length":1,"stats":{"Line":0}},{"line":198,"address":[5393562],"length":1,"stats":{"Line":0}},{"line":199,"address":[5393760],"length":1,"stats":{"Line":0}},{"line":200,"address":[5393805],"length":1,"stats":{"Line":0}},{"line":201,"address":[6334373],"length":1,"stats":{"Line":0}},{"line":202,"address":[5394048],"length":1,"stats":{"Line":0}},{"line":203,"address":[6334616],"length":1,"stats":{"Line":0}},{"line":204,"address":[6334661],"length":1,"stats":{"Line":0}},{"line":205,"address":[6334859],"length":1,"stats":{"Line":0}},{"line":206,"address":[5394381],"length":1,"stats":{"Line":0}},{"line":207,"address":[6334949],"length":1,"stats":{"Line":0}},{"line":208,"address":[6335147],"length":1,"stats":{"Line":0}},{"line":209,"address":[6335192],"length":1,"stats":{"Line":0}},{"line":210,"address":[6335237],"length":1,"stats":{"Line":0}},{"line":214,"address":[6335322],"length":1,"stats":{"Line":0}},{"line":215,"address":[6335950,6336038],"length":1,"stats":{"Line":0}},{"line":219,"address":[6335899,6337406,6336163],"length":1,"stats":{"Line":0}},{"line":222,"address":[5395818],"length":1,"stats":{"Line":0}},{"line":223,"address":[6336413],"length":1,"stats":{"Line":0}},{"line":224,"address":[5904080,5904101],"length":1,"stats":{"Line":0}},{"line":225,"address":[6336842],"length":1,"stats":{"Line":0}},{"line":226,"address":[6337048],"length":1,"stats":{"Line":0}},{"line":229,"address":[6336558,6336487],"length":1,"stats":{"Line":0}},{"line":233,"address":[6336629],"length":1,"stats":{"Line":0}}],"covered":0,"coverable":73},{"path":["/","home","ajit","Documents","dotenv-space-cli","src","commands","diff.rs"],"content":"/// Diff command - compare .env and .env.example\n///\n/// Shows missing, extra, and different variables between two env files\nuse anyhow::{Context, Result};\nuse colored::*;\nuse serde::{Deserialize, Serialize};\nuse std::collections::{HashMap, HashSet};\n\nuse crate::core::Parser;\n\n#[derive(Debug, Serialize, Deserialize)]\npub struct DiffResult {\n    pub missing: Vec\u003cString\u003e,\n    pub extra: Vec\u003cString\u003e,\n    pub different: Vec\u003cDiffItem\u003e,\n}\n\n#[derive(Debug, Serialize, Deserialize)]\npub struct DiffItem {\n    pub key: String,\n    pub example_value: String,\n    pub env_value: String,\n}\n\npub fn run(\n    env: String,\n    example: String,\n    show_values: bool,\n    format: String,\n    reverse: bool,\n    verbose: bool,\n) -\u003e Result\u003c()\u003e {\n    if verbose {\n        println!(\"{}\", \"Running diff in verbose mode\".dimmed());\n    }\n\n    println!(\n        \"\\n{}\",\n        \"┌─ Comparing .env ↔ .env.example ─────────────────────┐\".cyan()\n    );\n    println!(\n        \"{}\\n\",\n        \"└──────────────────────────────────────────────────────┘\".cyan()\n    );\n\n    let parser = Parser::default();\n\n    let env_file = parser\n        .parse_file(\u0026env)\n        .with_context(|| format!(\"Failed to parse {}\", env))?;\n\n    let example_file = parser\n        .parse_file(\u0026example)\n        .with_context(|| format!(\"Failed to parse {}\", example))?;\n\n    let (left, right, left_name, right_name) = if reverse {\n        (\u0026example_file.vars, \u0026env_file.vars, \u0026example, \u0026env)\n    } else {\n        (\u0026env_file.vars, \u0026example_file.vars, \u0026env, \u0026example)\n    };\n\n    let diff = compute_diff(left, right);\n\n    match format.as_str() {\n        \"json\" =\u003e output_json(\u0026diff)?,\n        \"patch\" =\u003e output_patch(\u0026diff, left, right)?,\n        _ =\u003e output_pretty(\u0026diff, left, right, left_name, right_name, show_values)?,\n    }\n\n    Ok(())\n}\n\nfn compute_diff(left: \u0026HashMap\u003cString, String\u003e, right: \u0026HashMap\u003cString, String\u003e) -\u003e DiffResult {\n    let left_keys: HashSet\u003c_\u003e = left.keys().cloned().collect();\n    let right_keys: HashSet\u003c_\u003e = right.keys().cloned().collect();\n\n    let missing: Vec\u003cString\u003e = right_keys.difference(\u0026left_keys).cloned().collect();\n\n    let extra: Vec\u003cString\u003e = left_keys.difference(\u0026right_keys).cloned().collect();\n\n    let mut different = Vec::new();\n    for key in left_keys.intersection(\u0026right_keys) {\n        let left_val = left.get(key).unwrap();\n        let right_val = right.get(key).unwrap();\n\n        if left_val != right_val {\n            different.push(DiffItem {\n                key: key.clone(),\n                example_value: right_val.clone(),\n                env_value: left_val.clone(),\n            });\n        }\n    }\n\n    DiffResult {\n        missing,\n        extra,\n        different,\n    }\n}\n\nfn output_pretty(\n    diff: \u0026DiffResult,\n    left: \u0026HashMap\u003cString, String\u003e,\n    right: \u0026HashMap\u003cString, String\u003e,\n    left_name: \u0026str,\n    right_name: \u0026str,\n    show_values: bool,\n) -\u003e Result\u003c()\u003e {\n    let has_changes =\n        !diff.missing.is_empty() || !diff.extra.is_empty() || !diff.different.is_empty();\n\n    if !has_changes {\n        println!(\"{} Files are identical\", \"✓\".green());\n        return Ok(());\n    }\n\n    if !diff.missing.is_empty() {\n        println!(\n            \"{}\",\n            format!(\"Missing from {} (present in {}):\", left_name, right_name).bold()\n        );\n        for key in \u0026diff.missing {\n            if show_values {\n                if let Some(val) = right.get(key) {\n                    println!(\"  {} {} = {}\", \"+\".green(), key.bold(), val.dimmed());\n                }\n            } else {\n                println!(\"  {} {}\", \"+\".green(), key.bold());\n            }\n        }\n        println!();\n    }\n\n    if !diff.extra.is_empty() {\n        println!(\n            \"{}\",\n            format!(\"Extra in {} (not in {}):\", left_name, right_name).bold()\n        );\n        for key in \u0026diff.extra {\n            if show_values {\n                if let Some(val) = left.get(key) {\n                    println!(\"  {} {} = {}\", \"-\".red(), key.bold(), val.dimmed());\n                }\n            } else {\n                println!(\"  {} {}\", \"-\".red(), key.bold());\n            }\n        }\n        println!();\n    }\n\n    if !diff.different.is_empty() {\n        println!(\"{}\", \"Different values:\".bold());\n        for item in \u0026diff.different {\n            println!(\"  {} {}\", \"~\".yellow(), item.key.bold());\n            if show_values {\n                println!(\"    {}: {}\", right_name, item.example_value.dimmed());\n                println!(\"    {}: {}\", left_name, item.env_value.dimmed());\n            }\n        }\n        println!();\n    }\n\n    println!(\"{}\", \"Summary:\".bold());\n    println!(\"  {} missing (add to {})\", diff.missing.len(), left_name);\n    println!(\n        \"  {} extra (consider removing or adding to {})\",\n        diff.extra.len(),\n        right_name\n    );\n    println!(\"  {} different values\", diff.different.len());\n\n    Ok(())\n}\n\nfn output_json(diff: \u0026DiffResult) -\u003e Result\u003c()\u003e {\n    let json = serde_json::to_string_pretty(diff)?;\n    println!(\"{}\", json);\n    Ok(())\n}\n\nfn output_patch(\n    diff: \u0026DiffResult,\n    left: \u0026HashMap\u003cString, String\u003e,\n    right: \u0026HashMap\u003cString, String\u003e,\n) -\u003e Result\u003c()\u003e {\n    println!(\"# Add these to .env:\");\n    for key in \u0026diff.missing {\n        if let Some(val) = right.get(key) {\n            println!(\"+ {}={}\", key, val);\n        }\n    }\n\n    println!(\"\\n# Remove these from .env:\");\n    for key in \u0026diff.extra {\n        if let Some(val) = left.get(key) {\n            println!(\"- {}={}\", key, val);\n        }\n    }\n\n    println!(\"\\n# Update these in .env:\");\n    for item in \u0026diff.different {\n        println!(\"- {}={}\", item.key, item.env_value);\n        println!(\"+ {}={}\", item.key, item.example_value);\n    }\n\n    Ok(())\n}\n\n#[cfg(test)]\nmod tests {\n    use super::*;\n\n    #[test]\n    fn test_compute_diff() {\n        let mut left = HashMap::new();\n        left.insert(\"KEY1\".to_string(), \"value1\".to_string());\n        left.insert(\"KEY2\".to_string(), \"value2\".to_string());\n        left.insert(\"EXTRA\".to_string(), \"extra\".to_string());\n\n        let mut right = HashMap::new();\n        right.insert(\"KEY1\".to_string(), \"value1\".to_string());\n        right.insert(\"KEY2\".to_string(), \"different\".to_string());\n        right.insert(\"MISSING\".to_string(), \"missing\".to_string());\n\n        let diff = compute_diff(\u0026left, \u0026right);\n\n        assert_eq!(diff.missing, vec![\"MISSING\"]);\n        assert_eq!(diff.extra, vec![\"EXTRA\"]);\n        assert_eq!(diff.different.len(), 1);\n        assert_eq!(diff.different[0].key, \"KEY2\");\n    }\n}\n","traces":[{"line":25,"address":[5656122,5653264,5656023],"length":1,"stats":{"Line":0}},{"line":33,"address":[5480947],"length":1,"stats":{"Line":0}},{"line":34,"address":[5653385,5653468],"length":1,"stats":{"Line":0}},{"line":37,"address":[5653635],"length":1,"stats":{"Line":0}},{"line":41,"address":[5653833],"length":1,"stats":{"Line":0}},{"line":46,"address":[5653992],"length":1,"stats":{"Line":0}},{"line":48,"address":[5654161,5656074,5654081],"length":1,"stats":{"Line":0}},{"line":49,"address":[5654019],"length":1,"stats":{"Line":0}},{"line":50,"address":[5481729,5481662],"length":1,"stats":{"Line":0}},{"line":52,"address":[5654544,5654464,5656037],"length":1,"stats":{"Line":0}},{"line":53,"address":[5654358],"length":1,"stats":{"Line":0}},{"line":54,"address":[5482025,5482092],"length":1,"stats":{"Line":0}},{"line":56,"address":[5654632,5654782,5654708],"length":1,"stats":{"Line":0}},{"line":57,"address":[5482286],"length":1,"stats":{"Line":0}},{"line":59,"address":[5654652],"length":1,"stats":{"Line":0}},{"line":62,"address":[5654886],"length":1,"stats":{"Line":0}},{"line":64,"address":[5654945,5655025],"length":1,"stats":{"Line":0}},{"line":65,"address":[5482688,5482599,5483480,5483194],"length":1,"stats":{"Line":0}},{"line":66,"address":[5482713,5482654,5482771,5483077],"length":1,"stats":{"Line":0}},{"line":67,"address":[5655506,5655175,5655265],"length":1,"stats":{"Line":0}},{"line":70,"address":[5483011],"length":1,"stats":{"Line":0}},{"line":73,"address":[5645955,5645949,5644496],"length":1,"stats":{"Line":1}},{"line":74,"address":[5644539],"length":1,"stats":{"Line":1}},{"line":75,"address":[5644630,5644675],"length":1,"stats":{"Line":2}},{"line":77,"address":[5644729,5644805],"length":1,"stats":{"Line":2}},{"line":79,"address":[5644935,5644859],"length":1,"stats":{"Line":2}},{"line":81,"address":[5644989],"length":1,"stats":{"Line":1}},{"line":82,"address":[5645052,5645125],"length":1,"stats":{"Line":2}},{"line":83,"address":[5645511,5645272],"length":1,"stats":{"Line":2}},{"line":84,"address":[5645557],"length":1,"stats":{"Line":1}},{"line":86,"address":[5645614],"length":1,"stats":{"Line":1}},{"line":87,"address":[5473439],"length":1,"stats":{"Line":1}},{"line":88,"address":[5645663],"length":1,"stats":{"Line":1}},{"line":89,"address":[5645682],"length":1,"stats":{"Line":1}},{"line":90,"address":[5645753],"length":1,"stats":{"Line":1}},{"line":102,"address":[5647754,5647760,5647296],"length":1,"stats":{"Line":0}},{"line":110,"address":[5647417],"length":1,"stats":{"Line":0}},{"line":113,"address":[5647490],"length":1,"stats":{"Line":0}},{"line":114,"address":[5647500,5647599],"length":1,"stats":{"Line":0}},{"line":115,"address":[5647726],"length":1,"stats":{"Line":0}},{"line":118,"address":[5647580],"length":1,"stats":{"Line":0}},{"line":119,"address":[5475719,5475380],"length":1,"stats":{"Line":0}},{"line":123,"address":[5475927,5475949],"length":1,"stats":{"Line":0}},{"line":124,"address":[5476033],"length":1,"stats":{"Line":0}},{"line":125,"address":[5476532,5476155],"length":1,"stats":{"Line":0}},{"line":126,"address":[5648958],"length":1,"stats":{"Line":0}},{"line":129,"address":[5476208,5476079],"length":1,"stats":{"Line":0}},{"line":132,"address":[5648440],"length":1,"stats":{"Line":0}},{"line":135,"address":[5475636],"length":1,"stats":{"Line":0}},{"line":136,"address":[5649825,5649912],"length":1,"stats":{"Line":0}},{"line":140,"address":[5650093,5650119],"length":1,"stats":{"Line":0}},{"line":141,"address":[5650200],"length":1,"stats":{"Line":0}},{"line":142,"address":[5478278,5477907],"length":1,"stats":{"Line":0}},{"line":143,"address":[5650703],"length":1,"stats":{"Line":0}},{"line":146,"address":[5477843,5477960],"length":1,"stats":{"Line":0}},{"line":149,"address":[5650206],"length":1,"stats":{"Line":0}},{"line":152,"address":[5477400],"length":1,"stats":{"Line":0}},{"line":153,"address":[5478846,5478981],"length":1,"stats":{"Line":0}},{"line":154,"address":[5479141,5479116],"length":1,"stats":{"Line":0}},{"line":155,"address":[5651620,5651711],"length":1,"stats":{"Line":0}},{"line":156,"address":[5652031],"length":1,"stats":{"Line":0}},{"line":157,"address":[5479639],"length":1,"stats":{"Line":0}},{"line":158,"address":[5479899],"length":1,"stats":{"Line":0}},{"line":161,"address":[5479265],"length":1,"stats":{"Line":0}},{"line":164,"address":[5478912,5480156],"length":1,"stats":{"Line":0}},{"line":165,"address":[5652697],"length":1,"stats":{"Line":0}},{"line":166,"address":[5480514],"length":1,"stats":{"Line":0}},{"line":171,"address":[5653111],"length":1,"stats":{"Line":0}},{"line":173,"address":[5480835],"length":1,"stats":{"Line":0}},{"line":176,"address":[5644144,5644474,5644480],"length":1,"stats":{"Line":0}},{"line":177,"address":[5644162],"length":1,"stats":{"Line":0}},{"line":178,"address":[5644304,5644372],"length":1,"stats":{"Line":0}},{"line":179,"address":[5472166],"length":1,"stats":{"Line":0}},{"line":182,"address":[5645968],"length":1,"stats":{"Line":0}},{"line":187,"address":[5473630],"length":1,"stats":{"Line":0}},{"line":188,"address":[5646064,5646048],"length":1,"stats":{"Line":0}},{"line":189,"address":[5473739,5474695],"length":1,"stats":{"Line":0}},{"line":190,"address":[5647099],"length":1,"stats":{"Line":0}},{"line":194,"address":[5473794],"length":1,"stats":{"Line":0}},{"line":195,"address":[5646245,5646219],"length":1,"stats":{"Line":0}},{"line":196,"address":[5646319,5646879],"length":1,"stats":{"Line":0}},{"line":197,"address":[5646895],"length":1,"stats":{"Line":0}},{"line":201,"address":[5646381],"length":1,"stats":{"Line":0}},{"line":202,"address":[5646447,5646421],"length":1,"stats":{"Line":0}},{"line":203,"address":[5646525],"length":1,"stats":{"Line":0}},{"line":204,"address":[5646696],"length":1,"stats":{"Line":0}}],"covered":14,"coverable":86},{"path":["/","home","ajit","Documents","dotenv-space-cli","src","commands","doctor.rs"],"content":"/// Doctor command - diagnose environment setup issues\nuse anyhow::Result;\nuse colored::*;\nuse std::path::Path;\n\npub fn run(_path: String, _verbose: bool) -\u003e Result\u003c()\u003e {\n    println!(\n        \"\\n{}\",\n        \"┌─ Diagnosing environment setup ──────────────────────┐\".cyan()\n    );\n    println!(\n        \"{}\\n\",\n        \"└──────────────────────────────────────────────────────┘\".cyan()\n    );\n\n    let mut issues = 0;\n    let mut warnings = 0;\n\n    // Check .env file\n    println!(\"{}\", \"Checking .env file...\".bold());\n    if Path::new(\".env\").exists() {\n        println!(\"  {} File exists at .env\", \"✓\".green());\n\n        // Check permissions (Unix only)\n        #[cfg(unix)]\n        {\n            use std::os::unix::fs::PermissionsExt;\n            let metadata = std::fs::metadata(\".env\")?;\n            let mode = metadata.permissions().mode();\n            if mode \u0026 0o044 != 0 {\n                println!(\n                    \"  {} File has {:o} permissions (should be 600 for security)\",\n                    \"⚠️\".yellow(),\n                    mode \u0026 0o777\n                );\n                warnings += 1;\n            } else {\n                println!(\"  {} File has secure permissions (600)\", \"✓\".green());\n            }\n        }\n\n        // Check if in .gitignore\n        if Path::new(\".gitignore\").exists() {\n            let gitignore = std::fs::read_to_string(\".gitignore\")?;\n            if gitignore.contains(\".env\") {\n                println!(\"  {} File is in .gitignore\", \"✓\".green());\n            } else {\n                println!(\"  {} File is NOT in .gitignore (should be)\", \"✗\".red());\n                issues += 1;\n            }\n        }\n    } else {\n        println!(\"  {} File does not exist\", \"✗\".red());\n        issues += 1;\n    }\n\n    // Check .env.example\n    println!(\"\\n{}\", \"Checking .env.example...\".bold());\n    if Path::new(\".env.example\").exists() {\n        println!(\"  {} File exists\", \"✓\".green());\n\n        // Check if tracked in Git\n        if std::process::Command::new(\"git\")\n            .args([\"ls-files\", \"--error-unmatch\", \".env.example\"])\n            .output()\n            .map(|o| o.status.success())\n            .unwrap_or(false)\n        {\n            println!(\"  {} File is tracked in Git\", \"✓\".green());\n        } else {\n            println!(\"  {} File is NOT tracked in Git (should be)\", \"✗\".red());\n            issues += 1;\n        }\n    }\n\n    // Check project structure\n    println!(\"\\n{}\", \"Checking project structure...\".bold());\n    if Path::new(\"requirements.txt\").exists() {\n        println!(\n            \"  {} Detected Python project (requirements.txt)\",\n            \"✓\".green()\n        );\n\n        // Check for python-dotenv\n        let req = std::fs::read_to_string(\"requirements.txt\")?;\n        if req.contains(\"python-dotenv\") {\n            println!(\"  {} python-dotenv is installed\", \"✓\".green());\n        } else {\n            println!(\"  {} python-dotenv not in requirements.txt\", \"⚠️\".yellow());\n            warnings += 1;\n        }\n    } else if Path::new(\"package.json\").exists() {\n        println!(\"  {} Detected Node.js project (package.json)\", \"✓\".green());\n    } else if Path::new(\"Cargo.toml\").exists() {\n        println!(\"  {} Detected Rust project (Cargo.toml)\", \"✓\".green());\n    }\n\n    // Check Docker\n    if Path::new(\"docker-compose.yml\").exists() || Path::new(\"Dockerfile\").exists() {\n        println!(\"  {} Docker files detected\", \"ℹ️\".cyan());\n    }\n\n    // Summary\n    println!(\"\\n{}\", \"Summary:\".bold());\n    if issues == 0 \u0026\u0026 warnings == 0 {\n        println!(\"  {} 0 issues found\", \"✓\".green());\n        println!(\"\\nOverall health: {} Excellent\", \"✓\".green());\n    } else {\n        if issues \u003e 0 {\n            println!(\"  🚨 {} critical issues\", issues);\n        }\n        if warnings \u003e 0 {\n            println!(\"  ⚠️  {} warnings\", warnings);\n        }\n        println!(\"\\nOverall health: {} Needs attention\", \"⚠️\".yellow());\n    }\n\n    if issues \u003e 0 {\n        println!(\"\\n{}\", \"Recommendations:\".bold());\n        println!(\"  1. Add .env to .gitignore if not present\");\n        println!(\"  2. Track .env.example in Git\");\n        println!(\"  3. Set secure permissions: chmod 600 .env\");\n    }\n\n    Ok(())\n}\n","traces":[{"line":6,"address":[6342327,6334448,6335548],"length":1,"stats":{"Line":0}},{"line":7,"address":[6334490],"length":1,"stats":{"Line":0}},{"line":11,"address":[6736585],"length":1,"stats":{"Line":0}},{"line":16,"address":[6736783],"length":1,"stats":{"Line":0}},{"line":17,"address":[6736794],"length":1,"stats":{"Line":0}},{"line":20,"address":[6736805],"length":1,"stats":{"Line":0}},{"line":21,"address":[6737352,6737003],"length":1,"stats":{"Line":0}},{"line":22,"address":[6737422,6737116],"length":1,"stats":{"Line":0}},{"line":28,"address":[6342317,6335721],"length":1,"stats":{"Line":0}},{"line":29,"address":[6737816],"length":1,"stats":{"Line":0}},{"line":30,"address":[6336570,6336012],"length":1,"stats":{"Line":0}},{"line":31,"address":[6738189],"length":1,"stats":{"Line":0}},{"line":36,"address":[6738407,6738447],"length":1,"stats":{"Line":0}},{"line":38,"address":[6737888,6737961],"length":1,"stats":{"Line":0}},{"line":43,"address":[6738120,6738484],"length":1,"stats":{"Line":0}},{"line":44,"address":[6744219,6738514],"length":1,"stats":{"Line":0}},{"line":45,"address":[6738726,6738809,6739119],"length":1,"stats":{"Line":0}},{"line":46,"address":[6739172,6738883],"length":1,"stats":{"Line":0}},{"line":48,"address":[6738852,6738925],"length":1,"stats":{"Line":0}},{"line":49,"address":[6739121,6739084],"length":1,"stats":{"Line":0}},{"line":53,"address":[6737085,6737158],"length":1,"stats":{"Line":0}},{"line":54,"address":[6737317,6737354],"length":1,"stats":{"Line":0}},{"line":58,"address":[6739342,6737374],"length":1,"stats":{"Line":0}},{"line":59,"address":[6739501],"length":1,"stats":{"Line":0}},{"line":60,"address":[6739617],"length":1,"stats":{"Line":0}},{"line":63,"address":[6740095,6740375,6739815],"length":1,"stats":{"Line":0}},{"line":64,"address":[6739846],"length":1,"stats":{"Line":0}},{"line":66,"address":[5904992,5905001],"length":1,"stats":{"Line":0}},{"line":69,"address":[6740401],"length":1,"stats":{"Line":0}},{"line":71,"address":[6740142],"length":1,"stats":{"Line":0}},{"line":72,"address":[6740340,6740380],"length":1,"stats":{"Line":0}},{"line":77,"address":[6739583,6740610],"length":1,"stats":{"Line":0}},{"line":78,"address":[6740769],"length":1,"stats":{"Line":0}},{"line":79,"address":[6741462],"length":1,"stats":{"Line":0}},{"line":85,"address":[6741621,6744187],"length":1,"stats":{"Line":0}},{"line":86,"address":[6741830,6741901,6742199],"length":1,"stats":{"Line":0}},{"line":87,"address":[6742252,6741969],"length":1,"stats":{"Line":0}},{"line":89,"address":[6340022,6340095],"length":1,"stats":{"Line":0}},{"line":90,"address":[6340254,6340285],"length":1,"stats":{"Line":0}},{"line":92,"address":[6740851,6741847,6742222,6740928],"length":1,"stats":{"Line":0}},{"line":93,"address":[6339074,6339380],"length":1,"stats":{"Line":0}},{"line":94,"address":[6339045,6339118],"length":1,"stats":{"Line":0}},{"line":95,"address":[6741083],"length":1,"stats":{"Line":0}},{"line":99,"address":[6742424,6741047,6742519],"length":1,"stats":{"Line":0}},{"line":100,"address":[6340558,6340662],"length":1,"stats":{"Line":0}},{"line":104,"address":[6340832,6340620],"length":1,"stats":{"Line":0}},{"line":105,"address":[6340991],"length":1,"stats":{"Line":0}},{"line":106,"address":[6341030],"length":1,"stats":{"Line":0}},{"line":107,"address":[6743148],"length":1,"stats":{"Line":0}},{"line":109,"address":[6742931],"length":1,"stats":{"Line":0}},{"line":110,"address":[6743389],"length":1,"stats":{"Line":0}},{"line":112,"address":[6341445],"length":1,"stats":{"Line":0}},{"line":113,"address":[6743526],"length":1,"stats":{"Line":0}},{"line":115,"address":[6341567,6341715],"length":1,"stats":{"Line":0}},{"line":118,"address":[6743346],"length":1,"stats":{"Line":0}},{"line":119,"address":[6743828],"length":1,"stats":{"Line":0}},{"line":120,"address":[6744026],"length":1,"stats":{"Line":0}},{"line":121,"address":[6744071],"length":1,"stats":{"Line":0}},{"line":122,"address":[6744116],"length":1,"stats":{"Line":0}},{"line":125,"address":[6743805],"length":1,"stats":{"Line":0}}],"covered":0,"coverable":60},{"path":["/","home","ajit","Documents","dotenv-space-cli","src","commands","init-backup.rs"],"content":"use anyhow::{Context, Result};\nuse colored::*;\nuse dialoguer::{Confirm, Input, MultiSelect, Select};\nuse std::fs;\nuse std::path::Path;\n\n/// Interactive project setup — generates .env.example\npub fn run(\n    stack: Option\u003cString\u003e,\n    services: Option\u003cString\u003e,\n    path: String,\n    yes: bool,\n    verbose: bool,\n) -\u003e Result\u003c()\u003e {\n    if verbose {\n        println!(\"{}\", \"Running init in verbose mode\".dimmed());\n    }\n\n    println!(\n        \"\\n{}\",\n        \"┌─ dotenv-space init ─────────────────────────────────┐\".cyan()\n    );\n    println!(\n        \"{}\",\n        \"│ Let's set up environment variables for your project │\".cyan()\n    );\n    println!(\n        \"{}\\n\",\n        \"└──────────────────────────────────────────────────────┘\".cyan()\n    );\n\n    // Determine stack (interactive or from flag)\n    let selected_stack = if let Some(s) = stack {\n        s\n    } else if yes {\n        \"python\".to_string()\n    } else {\n        let stacks = vec![\n            \"Python (Django/FastAPI)\",\n            \"Node.js (Next.js/Express)\",\n            \"Rust\",\n            \"Go\",\n            \"PHP (Laravel)\",\n            \"Other\",\n        ];\n        let selection = Select::new()\n            .with_prompt(\"What's your primary stack?\")\n            .items(\u0026stacks)\n            .default(0)\n            .interact()?;\n\n        match selection {\n            0 =\u003e \"python\",\n            1 =\u003e \"nodejs\",\n            2 =\u003e \"rust\",\n            3 =\u003e \"go\",\n            4 =\u003e \"php\",\n            _ =\u003e \"other\",\n        }\n        .to_string()\n    };\n\n    // Determine services (interactive or from flag)\n    let selected_services = if let Some(s) = services {\n        s.split(',').map(|s| s.trim().to_string()).collect()\n    } else if yes {\n        vec![\"postgresql\".to_string(), \"redis\".to_string()]\n    } else {\n        let services = vec![\n            \"PostgreSQL\",\n            \"Redis\",\n            \"MongoDB\",\n            \"AWS S3\",\n            \"Stripe\",\n            \"Twilio\",\n            \"SendGrid\",\n            \"Sentry\",\n            \"OpenAI\",\n        ];\n        let selections = MultiSelect::new()\n            .with_prompt(\"Which services will you use? (Space to select, Enter to confirm)\")\n            .items(\u0026services)\n            .interact()?;\n\n        selections\n            .iter()\n            .map(|\u0026i| services[i].to_lowercase().replace(\" \", \"_\"))\n            .collect()\n    };\n\n    // Determine output path\n    let output_path = if yes {\n        path.clone()\n    } else {\n        Input::new()\n            .with_prompt(\"Where should I create .env.example?\")\n            .default(path)\n            .interact_text()?\n    };\n\n    // Generate .env.example content\n    let env_example_content = generate_env_example(\u0026selected_stack, \u0026selected_services);\n    let env_example_path = Path::new(\u0026output_path).join(\".env.example\");\n\n    // Check if file already exists\n    if env_example_path.exists() \u0026\u0026 !yes {\n        let overwrite = Confirm::new()\n            .with_prompt(format!(\n                \"{} already exists. Overwrite?\",\n                env_example_path.display()\n            ))\n            .default(false)\n            .interact()?;\n\n        if !overwrite {\n            println!(\"{}\", \"Aborted.\".yellow());\n            return Ok(());\n        }\n    }\n\n    // Write .env.example\n    fs::write(\u0026env_example_path, env_example_content.trim())\n        .context(\"Failed to write .env.example\")?;\n\n    let var_count = env_example_content\n        .lines()\n        .filter(|l| l.contains('='))\n        .count();\n    println!(\n        \"{} Created .env.example with {} variables\",\n        \"✓\".green(),\n        var_count\n    );\n\n    // Create .env from template\n    let env_path = Path::new(\u0026output_path).join(\".env\");\n    if !env_path.exists() {\n        let mut env_content =\n            \"# TODO: Replace all placeholder values with real credentials\\n\\n\".to_string();\n        env_content.push_str(\u0026env_example_content);\n        fs::write(\u0026env_path, env_content).context(\"Failed to write .env\")?;\n        println!(\n            \"{} Created .env from template (fill in real values)\",\n            \"✓\".green()\n        );\n    }\n\n    // Update .gitignore\n    let gitignore_path = Path::new(\u0026output_path).join(\".gitignore\");\n    if gitignore_path.exists() {\n        let gitignore_content = fs::read_to_string(\u0026gitignore_path)?;\n        if !gitignore_content.contains(\".env\") {\n            let mut updated = gitignore_content;\n            updated.push_str(\"\\n# Environment files\\n.env\\n.env.local\\n.env.*.local\\n\");\n            fs::write(\u0026gitignore_path, updated)?;\n            println!(\"{} Added .env to .gitignore\", \"✓\".green());\n        }\n    } else {\n        fs::write(\n            \u0026gitignore_path,\n            \"# Environment files\\n.env\\n.env.local\\n.env.*.local\\n\",\n        )?;\n        println!(\"{} Created .gitignore\", \"✓\".green());\n    }\n\n    // Print next steps\n    println!(\"\\n{}\", \"Next steps:\".bold());\n    println!(\"  1. Edit .env and replace placeholder values\");\n    println!(\"  2. Never commit .env to Git\");\n    println!(\"  3. Run 'dotenv-space validate' to check for issues\");\n\n    Ok(())\n}\n\nfn generate_env_example(stack: \u0026str, services: \u0026[String]) -\u003e String {\n    let mut content = String::new();\n\n    // Stack-specific variables\n    match stack {\n        \"python\" =\u003e {\n            content.push_str(\"# Django/FastAPI\\n\");\n            content.push_str(\"SECRET_KEY=generate-with-openssl-rand-hex-32\\n\");\n            content.push_str(\"DEBUG=True\\n\");\n            content.push_str(\"ALLOWED_HOSTS=localhost,127.0.0.1\\n\\n\");\n        }\n        \"nodejs\" =\u003e {\n            content.push_str(\"# Node.js\\n\");\n            content.push_str(\"NODE_ENV=development\\n\");\n            content.push_str(\"PORT=3000\\n\\n\");\n        }\n        \"rust\" =\u003e {\n            content.push_str(\"# Rust\\n\");\n            content.push_str(\"APP__ENVIRONMENT=development\\n\");\n            content.push_str(\"APP__PORT=8080\\n\\n\");\n        }\n        _ =\u003e {\n            content.push_str(\"# Application\\n\");\n            content.push_str(\"APP_ENV=development\\n\\n\");\n        }\n    }\n\n    // Service-specific variables\n    for service in services {\n        match service.as_str() {\n            \"postgresql\" =\u003e {\n                content.push_str(\"# Database\\n\");\n                content\n                    .push_str(\"DATABASE_URL=postgresql://user:password@localhost:5432/dbname\\n\\n\");\n            }\n            \"redis\" =\u003e {\n                content.push_str(\"# Cache\\n\");\n                content.push_str(\"REDIS_URL=redis://localhost:6379/0\\n\\n\");\n            }\n            \"mongodb\" =\u003e {\n                content.push_str(\"# Database\\n\");\n                content.push_str(\"MONGODB_URI=mongodb://localhost:27017/mydb\\n\\n\");\n            }\n            \"aws_s3\" =\u003e {\n                content.push_str(\"# AWS S3\\n\");\n                content.push_str(\"AWS_ACCESS_KEY_ID=AKIAIOSFODNN7EXAMPLE\\n\");\n                content\n                    .push_str(\"AWS_SECRET_ACCESS_KEY=wJalrXUtnFEMI/K7MDENG/bPxRfiCYEXAMPLEKEY\\n\");\n                content.push_str(\"AWS_STORAGE_BUCKET_NAME=your-bucket-name\\n\");\n                content.push_str(\"AWS_REGION=us-east-1\\n\\n\");\n            }\n            \"stripe\" =\u003e {\n                content.push_str(\"# Stripe\\n\");\n                content.push_str(\"STRIPE_SECRET_KEY=sk_test_YOUR_KEY_HERE\\n\");\n                content.push_str(\"STRIPE_PUBLISHABLE_KEY=pk_test_YOUR_KEY_HERE\\n\");\n                content.push_str(\"STRIPE_WEBHOOK_SECRET=whsec_YOUR_WEBHOOK_SECRET\\n\\n\");\n            }\n            \"sendgrid\" =\u003e {\n                content.push_str(\"# SendGrid\\n\");\n                content.push_str(\"SENDGRID_API_KEY=SG.YOUR_API_KEY_HERE\\n\\n\");\n            }\n            \"sentry\" =\u003e {\n                content.push_str(\"# Sentry\\n\");\n                content.push_str(\"SENTRY_DSN=https://YOUR_SENTRY_DSN@sentry.io/PROJECT_ID\\n\\n\");\n            }\n            \"openai\" =\u003e {\n                content.push_str(\"# OpenAI\\n\");\n                content.push_str(\"OPENAI_API_KEY=sk-proj-YOUR_KEY_HERE\\n\\n\");\n            }\n            _ =\u003e {}\n        }\n    }\n\n    // Add generation footer\n    content.push_str(\u0026format!(\n        \"# Generated by dotenv-space v{} on {}\\n\",\n        env!(\"CARGO_PKG_VERSION\"),\n        chrono::Local::now().format(\"%Y-%m-%d\")\n    ));\n\n    content\n}\n","traces":[],"covered":0,"coverable":0},{"path":["/","home","ajit","Documents","dotenv-space-cli","src","commands","init.rs"],"content":"use anyhow::{Context, Result};\nuse colored::*;\nuse dialoguer::{Confirm, Input, MultiSelect, Select};\nuse std::fs;\nuse std::path::Path;\n\nuse crate::config::registry;\nuse crate::generators::template::EnvTemplateBuilder;\nuse crate::utils::file_ops;\n\n/// Interactive project setup — generates .env.example\n#[allow(clippy::too_many_arguments)]\npub fn run(\n    stack: Option\u003cString\u003e,\n    services: Option\u003cString\u003e,\n    path: String,\n    yes: bool,\n    verbose: bool,\n) -\u003e Result\u003c()\u003e {\n    if verbose {\n        println!(\"{}\", \"Running init in verbose mode\".dimmed());\n    }\n\n    print_header();\n\n    let reg = registry();\n\n    // Determine stack (interactive or from flag)\n    let selected_stack_id = resolve_stack(stack, yes, reg)?;\n\n    // Determine services (interactive or from flag)\n    let selected_service_ids = resolve_services(services, yes, reg)?;\n\n    // Determine output path\n    let output_path = resolve_output_path(path, yes)?;\n\n    // Ensure output directory exists\n    file_ops::ensure_dir(Path::new(\u0026output_path))\n        .with_context(|| format!(\"Failed to create directory: {}\", output_path))?;\n\n    // Build environment template\n    let stack_gen = reg\n        .get_stack(\u0026selected_stack_id)\n        .context(format!(\"Unknown stack: {}\", selected_stack_id))?;\n\n    let service_gens: Vec\u003c_\u003e = selected_service_ids\n        .iter()\n        .filter_map(|id| reg.get_service(id))\n        .collect();\n\n    let env_example_content = EnvTemplateBuilder::new()\n        .with_stack(stack_gen)\n        .with_services(service_gens)\n        .build()?;\n\n    let env_example_path = Path::new(\u0026output_path).join(\".env.example\");\n\n    // Check if file already exists\n    if env_example_path.exists() \u0026\u0026 !yes {\n        let overwrite = Confirm::new()\n            .with_prompt(format!(\n                \"{} already exists. Overwrite?\",\n                env_example_path.display()\n            ))\n            .default(false)\n            .interact()?;\n\n        if !overwrite {\n            println!(\"{}\", \"Aborted.\".yellow());\n            return Ok(());\n        }\n    }\n\n    // Write .env.example\n    fs::write(\u0026env_example_path, env_example_content.trim())\n        .context(\"Failed to write .env.example\")?;\n\n    let var_count = env_example_content\n        .lines()\n        .filter(|line| line.contains('='))\n        .count();\n\n    println!(\n        \"{} Created .env.example with {} variables\",\n        \"✓\".green(),\n        var_count\n    );\n\n    // Create .env from template\n    create_env_file(\u0026output_path, \u0026env_example_content)?;\n\n    // Update .gitignore\n    update_gitignore(\u0026output_path)?;\n\n    // Print next steps\n    print_next_steps();\n\n    Ok(())\n}\n\nfn print_header() {\n    println!(\n        \"\\n{}\",\n        \"┌─ dotenv-space init ─────────────────────────────────┐\".cyan()\n    );\n    println!(\n        \"{}\",\n        \"│ Let's set up environment variables for your project │\".cyan()\n    );\n    println!(\n        \"{}\\n\",\n        \"└──────────────────────────────────────────────────────┘\".cyan()\n    );\n}\n\nfn resolve_stack(\n    flag: Option\u003cString\u003e,\n    yes: bool,\n    reg: \u0026crate::config::registry::GeneratorRegistry,\n) -\u003e Result\u003cString\u003e {\n    if let Some(s) = flag {\n        return Ok(s);\n    }\n\n    if yes {\n        return Ok(\"python\".to_string());\n    }\n\n    let stacks: Vec\u003c_\u003e = reg.list_stacks();\n    let display_names: Vec\u003c_\u003e = stacks\n        .iter()\n        .filter_map(|\u0026id| reg.get_stack(id).map(|g| g.display_name()))\n        .collect();\n\n    let selection = Select::new()\n        .with_prompt(\"What's your primary stack?\")\n        .items(\u0026display_names)\n        .default(0)\n        .interact()?;\n\n    Ok(stacks[selection].to_string())\n}\n\nfn resolve_services(\n    flag: Option\u003cString\u003e,\n    yes: bool,\n    reg: \u0026crate::config::registry::GeneratorRegistry,\n) -\u003e Result\u003cVec\u003cString\u003e\u003e {\n    if let Some(s) = flag {\n        return Ok(s.split(',').map(|s| s.trim().to_string()).collect());\n    }\n\n    if yes {\n        return Ok(vec![\"postgresql\".to_string(), \"redis\".to_string()]);\n    }\n\n    let services: Vec\u003c_\u003e = reg.list_services();\n    let display_names: Vec\u003c_\u003e = services\n        .iter()\n        .filter_map(|\u0026id| reg.get_service(id).map(|g| g.display_name()))\n        .collect();\n\n    let selections = MultiSelect::new()\n        .with_prompt(\"Which services will you use? (Space to select, Enter to confirm)\")\n        .items(\u0026display_names)\n        .interact()?;\n\n    Ok(selections\n        .iter()\n        .map(|\u0026idx| services[idx].to_string())\n        .collect())\n}\n\nfn resolve_output_path(default_path: String, yes: bool) -\u003e Result\u003cString\u003e {\n    if yes {\n        return Ok(default_path);\n    }\n\n    Input::new()\n        .with_prompt(\"Where should I create .env.example?\")\n        .default(default_path)\n        .interact_text()\n        .context(\"Failed to read output path\")\n}\n\nfn create_env_file(output_path: \u0026str, template_content: \u0026str) -\u003e Result\u003c()\u003e {\n    let env_path = Path::new(output_path).join(\".env\");\n\n    if !env_path.exists() {\n        let mut env_content =\n            \"# TODO: Replace all placeholder values with real credentials\\n\\n\".to_string();\n        env_content.push_str(template_content);\n\n        fs::write(\u0026env_path, env_content).context(\"Failed to write .env\")?;\n\n        println!(\n            \"{} Created .env from template (fill in real values)\",\n            \"✓\".green()\n        );\n    }\n    Ok(())\n}\n\nfn update_gitignore(output_path: \u0026str) -\u003e Result\u003c()\u003e {\n    let gitignore_path = Path::new(output_path).join(\".gitignore\");\n    let gitignore_entry = \"\\n# Environment files\\n.env\\n.env.local\\n.env.*.local\\n\";\n\n    if gitignore_path.exists() {\n        let content = fs::read_to_string(\u0026gitignore_path).context(\"Failed to read .gitignore\")?;\n\n        if !content.contains(\".env\") {\n            let mut updated = content;\n            updated.push_str(gitignore_entry);\n            fs::write(\u0026gitignore_path, updated).context(\"Failed to update .gitignore\")?;\n            println!(\"{} Added .env to .gitignore\", \"✓\".green());\n        }\n    } else {\n        fs::write(\u0026gitignore_path, gitignore_entry.trim_start())\n            .context(\"Failed to create .gitignore\")?;\n        println!(\"{} Created .gitignore\", \"✓\".green());\n    }\n    Ok(())\n}\n\nfn print_next_steps() {\n    println!(\"\\n{}\", \"Next steps:\".bold());\n    println!(\"  1. Edit .env and replace placeholder values\");\n    println!(\"  2. Never commit .env to Git\");\n    println!(\"  3. Run 'dotenv-space validate' to check for issues\");\n}\n","traces":[{"line":13,"address":[5988448,5991887,5993460],"length":1,"stats":{"Line":0}},{"line":20,"address":[5896895],"length":1,"stats":{"Line":0}},{"line":21,"address":[5897053,5896973],"length":1,"stats":{"Line":0}},{"line":24,"address":[5896963],"length":1,"stats":{"Line":0}},{"line":26,"address":[5897212],"length":1,"stats":{"Line":0}},{"line":29,"address":[5901828,5897262],"length":1,"stats":{"Line":0}},{"line":32,"address":[5901798,5897622,5897518],"length":1,"stats":{"Line":0}},{"line":35,"address":[5901761,5897810,5897914],"length":1,"stats":{"Line":0}},{"line":38,"address":[5989898,5989683,5989820,5989766,5993184],"length":1,"stats":{"Line":0}},{"line":39,"address":[5898209,5898310],"length":1,"stats":{"Line":0}},{"line":42,"address":[5901706,5898647,5898721],"length":1,"stats":{"Line":0}},{"line":43,"address":[5898363],"length":1,"stats":{"Line":0}},{"line":44,"address":[5898477,5898705],"length":1,"stats":{"Line":0}},{"line":46,"address":[5990350],"length":1,"stats":{"Line":0}},{"line":48,"address":[6646624,6646651],"length":1,"stats":{"Line":0}},{"line":51,"address":[5898954,5899159,5901647,5899239],"length":1,"stats":{"Line":0}},{"line":52,"address":[5990586],"length":1,"stats":{"Line":0}},{"line":53,"address":[5899057],"length":1,"stats":{"Line":0}},{"line":56,"address":[5899332,5899427],"length":1,"stats":{"Line":0}},{"line":59,"address":[5899467,5899618,5899550],"length":1,"stats":{"Line":0}},{"line":60,"address":[5900397,5899624,5899929,5900032,5900095],"length":1,"stats":{"Line":0}},{"line":61,"address":[5899937,5899802,5899643],"length":1,"stats":{"Line":0}},{"line":63,"address":[5899739,5899659],"length":1,"stats":{"Line":0}},{"line":68,"address":[5991647],"length":1,"stats":{"Line":0}},{"line":69,"address":[5900151],"length":1,"stats":{"Line":0}},{"line":70,"address":[5900349],"length":1,"stats":{"Line":0}},{"line":75,"address":[5901597,5900640,5899585,5900558,5900445],"length":1,"stats":{"Line":0}},{"line":78,"address":[5900677,5900787],"length":1,"stats":{"Line":0}},{"line":80,"address":[5900731],"length":1,"stats":{"Line":0}},{"line":83,"address":[5900834],"length":1,"stats":{"Line":0}},{"line":90,"address":[5901576,5901060],"length":1,"stats":{"Line":0}},{"line":93,"address":[5901269,5901558],"length":1,"stats":{"Line":0}},{"line":96,"address":[5901415],"length":1,"stats":{"Line":0}},{"line":98,"address":[5901422],"length":1,"stats":{"Line":0}},{"line":101,"address":[5890080,5890660,5890654],"length":1,"stats":{"Line":0}},{"line":102,"address":[5890123],"length":1,"stats":{"Line":0}},{"line":106,"address":[5890301],"length":1,"stats":{"Line":0}},{"line":110,"address":[5890495],"length":1,"stats":{"Line":0}},{"line":116,"address":[5891753,5890688],"length":1,"stats":{"Line":0}},{"line":121,"address":[5890741],"length":1,"stats":{"Line":0}},{"line":122,"address":[5890826],"length":1,"stats":{"Line":0}},{"line":125,"address":[5890867],"length":1,"stats":{"Line":0}},{"line":126,"address":[5982714],"length":1,"stats":{"Line":0}},{"line":129,"address":[5890894],"length":1,"stats":{"Line":0}},{"line":130,"address":[5890921],"length":1,"stats":{"Line":0}},{"line":132,"address":[5982883],"length":1,"stats":{"Line":0}},{"line":135,"address":[5891149,5891530,5891448,5891339],"length":1,"stats":{"Line":0}},{"line":137,"address":[5891347,5891259,5891731],"length":1,"stats":{"Line":0}},{"line":141,"address":[5891567],"length":1,"stats":{"Line":0}},{"line":144,"address":[5893279,5892896],"length":1,"stats":{"Line":0}},{"line":149,"address":[5984702],"length":1,"stats":{"Line":0}},{"line":150,"address":[6646240,6646293],"length":1,"stats":{"Line":0}},{"line":153,"address":[5893061],"length":1,"stats":{"Line":0}},{"line":154,"address":[5985093,5985997],"length":1,"stats":{"Line":0}},{"line":157,"address":[5893303],"length":1,"stats":{"Line":0}},{"line":158,"address":[5985062],"length":1,"stats":{"Line":0}},{"line":160,"address":[5985238],"length":1,"stats":{"Line":0}},{"line":163,"address":[5893544,5893800,5893734,5893888],"length":1,"stats":{"Line":0}},{"line":165,"address":[5985374,5985967,5985478],"length":1,"stats":{"Line":0}},{"line":168,"address":[5893973,5894149],"length":1,"stats":{"Line":0}},{"line":169,"address":[5894056],"length":1,"stats":{"Line":0}},{"line":170,"address":[5778042,5778016],"length":1,"stats":{"Line":0}},{"line":171,"address":[5894114],"length":1,"stats":{"Line":0}},{"line":174,"address":[5988436,5988064,5988408],"length":1,"stats":{"Line":0}},{"line":175,"address":[5988099],"length":1,"stats":{"Line":0}},{"line":176,"address":[5988143],"length":1,"stats":{"Line":0}},{"line":179,"address":[5896487,5896781],"length":1,"stats":{"Line":0}},{"line":181,"address":[5988288],"length":1,"stats":{"Line":0}},{"line":186,"address":[5983536,5984317,5984251],"length":1,"stats":{"Line":0}},{"line":187,"address":[5983585],"length":1,"stats":{"Line":0}},{"line":189,"address":[5891950,5892506,5891882],"length":1,"stats":{"Line":0}},{"line":190,"address":[5983727,5983790],"length":1,"stats":{"Line":0}},{"line":192,"address":[5983803],"length":1,"stats":{"Line":0}},{"line":194,"address":[5892521,5892095],"length":1,"stats":{"Line":0}},{"line":196,"address":[5892300],"length":1,"stats":{"Line":0}},{"line":201,"address":[5891999],"length":1,"stats":{"Line":0}},{"line":204,"address":[5894656,5895340,5896405],"length":1,"stats":{"Line":0}},{"line":205,"address":[5894679],"length":1,"stats":{"Line":0}},{"line":206,"address":[5894747],"length":1,"stats":{"Line":0}},{"line":208,"address":[5894774,5894857,5896328],"length":1,"stats":{"Line":0}},{"line":209,"address":[5894907,5895378,5896395],"length":1,"stats":{"Line":0}},{"line":211,"address":[5987331,5987904,5987263],"length":1,"stats":{"Line":0}},{"line":212,"address":[5895708],"length":1,"stats":{"Line":0}},{"line":213,"address":[5895756],"length":1,"stats":{"Line":0}},{"line":214,"address":[5896269,5895843],"length":1,"stats":{"Line":0}},{"line":215,"address":[5987698],"length":1,"stats":{"Line":0}},{"line":218,"address":[5894878,5895085,5895351,5894947,5895009],"length":1,"stats":{"Line":0}},{"line":220,"address":[5895111],"length":1,"stats":{"Line":0}},{"line":222,"address":[5895309],"length":1,"stats":{"Line":0}},{"line":225,"address":[5892882,5892592,5892876],"length":1,"stats":{"Line":0}},{"line":226,"address":[5892599],"length":1,"stats":{"Line":0}},{"line":227,"address":[5892763],"length":1,"stats":{"Line":0}},{"line":228,"address":[5892798],"length":1,"stats":{"Line":0}},{"line":229,"address":[5892833],"length":1,"stats":{"Line":0}}],"covered":0,"coverable":94},{"path":["/","home","ajit","Documents","dotenv-space-cli","src","commands","migrate.rs"],"content":"//! Migrate command - migrate secrets between different secret management systems\n//!\n//! # Overview\n//!\n//! Facilitates migration of secrets from .env files or environment variables\n//! to cloud secret managers like GitHub Actions, AWS Secrets Manager, Doppler, etc.\n//!\n//! # Architecture\n//!\n//! ```text\n//! Source (.env, env vars) → Load → Filter → Transform → Upload to Destination\n//! ```\n//!\n//! # Supported Sources\n//!\n//! - **env-file** - Read from .env file\n//! - **environment** - Read from current environment variables\n//!\n//! # Supported Destinations\n//!\n//! - **github-actions** - GitHub Actions Secrets (requires `migrate` feature)\n//! - **aws-secrets-manager** - AWS Secrets Manager (generates CLI commands)\n//! - **doppler** - Doppler secrets platform\n//! - **infisical** - Infisical secrets platform\n//! - **gcp-secret-manager** - Google Cloud Secret Manager (manual upload)\n//!\n//! # Features\n//!\n//! - Dry-run mode to preview changes\n//! - Conflict detection and resolution\n//! - Progress tracking with progress bars\n//! - Encrypted upload to GitHub Actions\n//! - Filtering and transformation support\n//!\n//! # Examples\n//!\n//! ```bash\n//! # Interactive migration\n//! evnx migrate\n//!\n//! # Direct migration to GitHub Actions\n//! evnx migrate \\\n//!   --from env-file \\\n//!   --to github-actions \\\n//!   --repo owner/repo \\\n//!   --source-file .env\n//!\n//! # Dry run\n//! evnx migrate --to aws-secrets-manager --dry-run\n//! ```\n\nuse anyhow::{anyhow, Context, Result};\nuse colored::*;\nuse dialoguer::{Confirm, Input, Password, Select};\nuse std::collections::HashMap;\n\n// Feature-gated imports (only when migrate feature is enabled)\n#[cfg(feature = \"migrate\")]\nuse indicatif::{ProgressBar, ProgressStyle};\n#[cfg(feature = \"migrate\")]\nuse reqwest::blocking::Client;\n#[cfg(feature = \"migrate\")]\nuse serde::{Deserialize, Serialize};\n#[cfg(feature = \"migrate\")]\nuse std::time::Duration;\n\nuse crate::core::Parser;\n\ntype MigrationDiff = (Vec\u003c(String, String)\u003e, Vec\u003cString\u003e, Vec\u003cString\u003e);\n\n// Main entry point for migrate command\n//\n// # Arguments\n//\n// * `from` - Source system (env-file, aws, gcp, environment)\n// * `to` - Destination system (github-actions, aws-secrets-manager, doppler, etc.)\n// * `source_file` - Path to source .env file\n// * `repo` - GitHub repository (owner/repo) for GitHub Actions\n// * `secret_name` - Secret name for AWS Secrets Manager\n// * `dry_run` - Preview changes without uploading\n// * `skip_existing` - Skip secrets that already exist\n// * `overwrite` - Overwrite existing secrets without prompting\n// * `github_token` - GitHub Personal Access Token\n// * `aws_profile` - AWS CLI profile to use\n// * `verbose` - Enable verbose output\n#[allow(clippy::too_many_arguments)]\npub fn run(\n    from: Option\u003cString\u003e,\n    to: Option\u003cString\u003e,\n    source_file: String,\n    repo: Option\u003cString\u003e,\n    secret_name: Option\u003cString\u003e,\n    dry_run: bool,\n    skip_existing: bool,\n    overwrite: bool,\n    github_token: Option\u003cString\u003e,\n    aws_profile: Option\u003cString\u003e,\n    verbose: bool,\n) -\u003e Result\u003c()\u003e {\n    if verbose {\n        println!(\"{}\", \"Running migrate in verbose mode\".dimmed());\n    }\n\n    // Display banner\n    print_banner();\n\n    // Determine source and destination\n    let source = from.unwrap_or_else(select_source);\n    let destination = to.unwrap_or_else(select_destination);\n\n    // Load secrets from source\n    let secrets = load_secrets(\u0026source, \u0026source_file, verbose)?;\n\n    println!(\n        \"\\n{} Loaded {} secrets from {}\",\n        \"✓\".green(),\n        secrets.len(),\n        source\n    );\n\n    if secrets.is_empty() {\n        println!(\"{} No secrets found to migrate\", \"⚠️\".yellow());\n        return Ok(());\n    }\n\n    // Migrate based on destination\n    match destination.as_str() {\n        \"github-actions\" | \"github\" =\u003e {\n            #[cfg(feature = \"migrate\")]\n            {\n                migrate_to_github_actions(\n                    \u0026secrets,\n                    repo,\n                    github_token,\n                    dry_run,\n                    skip_existing,\n                    overwrite,\n                    verbose,\n                )?;\n            }\n\n            #[cfg(not(feature = \"migrate\"))]\n            {\n                println!(\n                    \"{} GitHub Actions migration requires the migrate feature.\",\n                    \"✗\".red()\n                );\n                println!(\"Rebuild with: cargo build --features migrate\");\n                return Err(anyhow!(\"migrate feature not enabled\"));\n            }\n        }\n        \"aws-secrets-manager\" | \"aws\" =\u003e {\n            migrate_to_aws(\u0026secrets, secret_name, aws_profile, dry_run, verbose)?;\n        }\n        \"doppler\" =\u003e {\n            migrate_to_doppler(\u0026secrets, dry_run, verbose)?;\n        }\n        \"infisical\" =\u003e {\n            migrate_to_infisical(\u0026secrets, dry_run, verbose)?;\n        }\n        \"gcp-secret-manager\" | \"gcp\" =\u003e {\n            migrate_to_gcp(\u0026secrets, dry_run, verbose)?;\n        }\n        _ =\u003e {\n            return Err(anyhow!(\"Unsupported destination: {}\", destination));\n        }\n    }\n\n    Ok(())\n}\n\n// Display migration banner\nfn print_banner() {\n    println!(\n        \"\\n{}\",\n        \"┌─ Migrate secrets to a new system ───────────────────┐\".cyan()\n    );\n    println!(\n        \"{}\",\n        \"│ Move from .env to secret managers or between        │\".cyan()\n    );\n    println!(\n        \"{}\",\n        \"│ secret management systems                           │\".cyan()\n    );\n    println!(\n        \"{}\\n\",\n        \"└──────────────────────────────────────────────────────┘\".cyan()\n    );\n}\n\n// Interactive source selection\nfn select_source() -\u003e String {\n    let options = vec![\n        \"env-file - Read from .env file\",\n        \"environment - Read from environment variables\",\n    ];\n    let selection = Select::new()\n        .with_prompt(\"What are you migrating from?\")\n        .items(\u0026options)\n        .default(0)\n        .interact()\n        .unwrap_or(0);\n\n    options[selection]\n        .split('-')\n        .next()\n        .unwrap()\n        .trim()\n        .to_string()\n}\n\n// Interactive destination selection\nfn select_destination() -\u003e String {\n    let options = vec![\n        \"github-actions - GitHub Actions Secrets\",\n        \"aws-secrets-manager - AWS Secrets Manager\",\n        \"doppler - Doppler secrets platform\",\n        \"infisical - Infisical secrets platform\",\n        \"gcp-secret-manager - Google Cloud Secret Manager\",\n    ];\n    let selection = Select::new()\n        .with_prompt(\"What are you migrating to?\")\n        .items(\u0026options)\n        .default(0)\n        .interact()\n        .unwrap_or(0);\n\n    options[selection]\n        .split('-')\n        .next()\n        .unwrap()\n        .trim()\n        .to_string()\n}\n\n// Load secrets from source\nfn load_secrets(source: \u0026str, file: \u0026str, verbose: bool) -\u003e Result\u003cHashMap\u003cString, String\u003e\u003e {\n    if verbose {\n        println!(\"Loading secrets from {} ({})\", source, file);\n    }\n\n    match source {\n        \"env-file\" | \"env\" =\u003e {\n            let parser = Parser::default();\n            let env_file = parser\n                .parse_file(file)\n                .with_context(|| format!(\"Failed to parse {}\", file))?;\n            Ok(env_file.vars)\n        }\n        \"environment\" =\u003e {\n            let mut secrets = HashMap::new();\n            for (key, value) in std::env::vars() {\n                // Skip common system variables\n                if !is_system_variable(\u0026key) {\n                    secrets.insert(key, value);\n                }\n            }\n            Ok(secrets)\n        }\n        _ =\u003e Err(anyhow!(\"Unsupported source: {}\", source)),\n    }\n}\n\n// Check if a variable is a common system variable\nfn is_system_variable(key: \u0026str) -\u003e bool {\n    matches!(\n        key,\n        \"PATH\" | \"HOME\" | \"USER\" | \"SHELL\" | \"PWD\" | \"TERM\" | \"LANG\" | \"LOGNAME\"\n    )\n}\n\n// Migrate to GitHub Actions Secrets\n//\n// Uses GitHub REST API to upload secrets with proper encryption\n#[cfg(feature = \"migrate\")]\n#[allow(clippy::too_many_arguments)]\nfn migrate_to_github_actions(\n    secrets: \u0026HashMap\u003cString, String\u003e,\n    repo: Option\u003cString\u003e,\n    token: Option\u003cString\u003e,\n    dry_run: bool,\n    skip_existing: bool,\n    overwrite: bool,\n    verbose: bool,\n) -\u003e Result\u003c()\u003e {\n    println!(\"\\n{} Migrating to GitHub Actions\", \"🚀\".cyan());\n\n    // Get repository\n    let repository = repo\n        .or_else(|| {\n            Input::new()\n                .with_prompt(\"GitHub repository (owner/repo)\")\n                .interact_text()\n                .ok()\n        })\n        .ok_or_else(|| anyhow!(\"Repository is required\"))?;\n\n    // Validate repository format\n    if !repository.contains('/') {\n        return Err(anyhow!(\n            \"Repository must be in format 'owner/repo', got: {}\",\n            repository\n        ));\n    }\n\n    // Get GitHub token\n    let github_token = token\n        .or_else(|| std::env::var(\"GITHUB_TOKEN\").ok())\n        .or_else(|| {\n            Password::new()\n                .with_prompt(\"GitHub Personal Access Token\")\n                .interact()\n                .ok()\n        })\n        .ok_or_else(|| anyhow!(\"GitHub token is required\"))?;\n\n    println!(\"\\n{} Analyzing migration...\", \"🔍\".cyan());\n\n    // Check existing secrets\n    let existing_secrets = if !dry_run {\n        fetch_existing_github_secrets(\u0026repository, \u0026github_token, verbose)?\n    } else {\n        vec![]\n    };\n\n    // Plan migration\n    let (to_upload, to_skip, conflicts) =\n        plan_migration(secrets, \u0026existing_secrets, skip_existing, overwrite)?;\n\n    // Show migration plan\n    print_migration_plan(\n        secrets.len(),\n        \u0026existing_secrets,\n        \u0026to_upload,\n        \u0026to_skip,\n        \u0026conflicts,\n    );\n\n    if dry_run {\n        println!(\"\\n{} Dry run mode - no changes made\", \"ℹ️\".cyan());\n        return Ok(());\n    }\n\n    // Confirm migration\n    println!();\n    if !Confirm::new()\n        .with_prompt(\"Proceed with migration?\")\n        .default(true)\n        .interact()?\n    {\n        println!(\"{} Migration cancelled\", \"ℹ️\".cyan());\n        return Ok(());\n    }\n\n    // Upload secrets\n    let (uploaded, failed) =\n        upload_secrets_to_github(\u0026repository, \u0026github_token, \u0026to_upload, verbose)?;\n\n    // Print summary\n    print_upload_summary(uploaded, to_upload.len(), \u0026to_skip, failed);\n\n    Ok(())\n}\n\n// Plan the migration (which secrets to upload, skip, or have conflicts)\n#[cfg(feature = \"migrate\")]\nfn plan_migration(\n    secrets: \u0026HashMap\u003cString, String\u003e,\n    existing_secrets: \u0026[String],\n    skip_existing: bool,\n    overwrite: bool,\n) -\u003e Result\u003cMigrationDiff\u003e {\n    let mut to_upload = Vec::new();\n    let mut to_skip = Vec::new();\n    let mut conflicts = Vec::new();\n\n    for (key, value) in secrets {\n        if existing_secrets.contains(key) {\n            if skip_existing {\n                to_skip.push(key.clone());\n            } else if overwrite {\n                to_upload.push((key.clone(), value.clone()));\n                conflicts.push(key.clone());\n            } else {\n                // Ask user\n                if Confirm::new()\n                    .with_prompt(format!(\"Overwrite existing secret '{}'?\", key))\n                    .default(false)\n                    .interact()?\n                {\n                    to_upload.push((key.clone(), value.clone()));\n                    conflicts.push(key.clone());\n                } else {\n                    to_skip.push(key.clone());\n                }\n            }\n        } else {\n            to_upload.push((key.clone(), value.clone()));\n        }\n    }\n\n    Ok((to_upload, to_skip, conflicts))\n}\n\n// Print migration plan\n#[cfg(feature = \"migrate\")]\nfn print_migration_plan(\n    total_secrets: usize,\n    existing_secrets: \u0026[String],\n    to_upload: \u0026[(String, String)],\n    to_skip: \u0026[String],\n    conflicts: \u0026[String],\n) {\n    println!(\n        \"\\n{} Read {} variables from source\",\n        \"✓\".green(),\n        total_secrets\n    );\n\n    if !existing_secrets.is_empty() {\n        println!(\n            \"{} Repository has {} existing secrets\",\n            \"ℹ️\".cyan(),\n            existing_secrets.len()\n        );\n    }\n\n    println!(\"\\n{}\", \"Migration plan:\".bold());\n    println!(\"  • {} secrets to upload\", to_upload.len());\n\n    if !to_skip.is_empty() {\n        println!(\"  • {} existing secrets will be skipped\", to_skip.len());\n    }\n\n    if !conflicts.is_empty() {\n        println!(\"  • {} conflicts (will overwrite)\", conflicts.len());\n    }\n}\n\n// Upload secrets to GitHub with progress tracking\n#[cfg(feature = \"migrate\")]\nfn upload_secrets_to_github(\n    repository: \u0026str,\n    github_token: \u0026str,\n    to_upload: \u0026[(String, String)],\n    verbose: bool,\n) -\u003e Result\u003c(usize, usize)\u003e {\n    println!(\"\\n{} Uploading to GitHub Actions Secrets...\", \"📤\".cyan());\n\n    let pb = ProgressBar::new(to_upload.len() as u64);\n    pb.set_style(\n        ProgressStyle::default_bar()\n            .template(\"{spinner:.green} [{bar:40.cyan/blue}] {pos}/{len} {msg}\")\n            .unwrap()\n            .progress_chars(\"#\u003e-\"),\n    );\n\n    let mut uploaded = 0;\n    let mut failed = 0;\n\n    for (key, value) in to_upload {\n        pb.set_message(key.clone());\n\n        match upload_github_secret(repository, github_token, key, value, verbose) {\n            Ok(()) =\u003e {\n                uploaded += 1;\n                pb.println(format!(\"  {} {}\", \"✓\".green(), key));\n            }\n            Err(e) =\u003e {\n                failed += 1;\n                pb.println(format!(\"  {} {} - {}\", \"✗\".red(), key, e));\n            }\n        }\n\n        pb.inc(1);\n        std::thread::sleep(Duration::from_millis(100)); // Rate limiting\n    }\n\n    pb.finish_with_message(\"Done\");\n\n    Ok((uploaded, failed))\n}\n\n// Print upload summary\n#[cfg(feature = \"migrate\")]\nfn print_upload_summary(uploaded: usize, total: usize, skipped: \u0026[String], failed: usize) {\n    println!(\"\\n{}\", \"Summary:\".bold());\n    println!(\"  {}/{} secrets uploaded successfully\", uploaded, total);\n\n    if !skipped.is_empty() {\n        println!(\"  {} existing secrets preserved\", skipped.len());\n    }\n\n    if failed \u003e 0 {\n        println!(\"  {} errors\", failed);\n    }\n\n    if uploaded \u003e 0 {\n        println!(\"\\n{}\", \"Next steps:\".bold());\n        println!(\"  1. Update GitHub Actions workflows to use these secrets\");\n        println!(\"  2. Delete or encrypt your local .env file\");\n        println!(\"  3. Update .env.example if variable names changed\");\n    }\n}\n\n// Fetch existing GitHub secrets\n#[cfg(feature = \"migrate\")]\nfn fetch_existing_github_secrets(repo: \u0026str, token: \u0026str, verbose: bool) -\u003e Result\u003cVec\u003cString\u003e\u003e {\n    if verbose {\n        println!(\"Fetching existing secrets from {}\", repo);\n    }\n\n    let url = format!(\"https://api.github.com/repos/{}/actions/secrets\", repo);\n\n    let client = Client::new();\n    let response = client\n        .get(\u0026url)\n        .header(\"Authorization\", format!(\"Bearer {}\", token))\n        .header(\"Accept\", \"application/vnd.github.v3+json\")\n        .header(\"User-Agent\", \"evnx\")\n        .send()\n        .context(\"Failed to fetch existing secrets\")?;\n\n    if !response.status().is_success() {\n        return Err(anyhow!(\n            \"GitHub API error: {} - {}\",\n            response.status(),\n            response.text().unwrap_or_default()\n        ));\n    }\n\n    #[derive(Deserialize)]\n    struct SecretsResponse {\n        secrets: Vec\u003cSecretItem\u003e,\n    }\n\n    #[derive(Deserialize)]\n    struct SecretItem {\n        name: String,\n    }\n\n    let secrets_response: SecretsResponse = response.json()?;\n    Ok(secrets_response\n        .secrets\n        .iter()\n        .map(|s| s.name.clone())\n        .collect())\n}\n\n// Upload a single secret to GitHub Actions\n#[cfg(feature = \"migrate\")]\nfn upload_github_secret(\n    repo: \u0026str,\n    token: \u0026str,\n    key: \u0026str,\n    value: \u0026str,\n    verbose: bool,\n) -\u003e Result\u003c()\u003e {\n    if verbose {\n        println!(\"Uploading secret: {}\", key);\n    }\n\n    // Get public key for encryption\n    let public_key = fetch_github_public_key(repo, token)?;\n\n    // Encrypt the value\n    let encrypted_value = encrypt_for_github(\u0026public_key.key, value)?;\n\n    // Upload the encrypted secret\n    let url = format!(\n        \"https://api.github.com/repos/{}/actions/secrets/{}\",\n        repo, key\n    );\n\n    #[derive(Serialize)]\n    struct SecretPayload {\n        encrypted_value: String,\n        key_id: String,\n    }\n\n    let payload = SecretPayload {\n        encrypted_value,\n        key_id: public_key.key_id,\n    };\n\n    let client = Client::new();\n    let response = client\n        .put(\u0026url)\n        .header(\"Authorization\", format!(\"Bearer {}\", token))\n        .header(\"Accept\", \"application/vnd.github.v3+json\")\n        .header(\"User-Agent\", \"evnx\")\n        .json(\u0026payload)\n        .send()?;\n\n    if response.status().is_success() || response.status() == reqwest::StatusCode::CREATED {\n        Ok(())\n    } else {\n        Err(anyhow!(\n            \"Upload failed: {} - {}\",\n            response.status(),\n            response.text().unwrap_or_default()\n        ))\n    }\n}\n\n// Fetch GitHub repository's public key for encryption\n#[cfg(feature = \"migrate\")]\nfn fetch_github_public_key(repo: \u0026str, token: \u0026str) -\u003e Result\u003cPublicKey\u003e {\n    let pub_key_url = format!(\n        \"https://api.github.com/repos/{}/actions/secrets/public-key\",\n        repo\n    );\n\n    let client = Client::new();\n    let pub_key_response = client\n        .get(\u0026pub_key_url)\n        .header(\"Authorization\", format!(\"Bearer {}\", token))\n        .header(\"Accept\", \"application/vnd.github.v3+json\")\n        .header(\"User-Agent\", \"evnx\")\n        .send()?;\n\n    if !pub_key_response.status().is_success() {\n        return Err(anyhow!(\n            \"Failed to get public key: {}\",\n            pub_key_response.status()\n        ));\n    }\n\n    pub_key_response\n        .json()\n        .context(\"Failed to parse public key\")\n}\n\n#[cfg(feature = \"migrate\")]\n#[derive(Deserialize)]\nstruct PublicKey {\n    key_id: String,\n    key: String,\n}\n\n// Encrypt value for GitHub Actions using libsodium sealed box\n//\n// NOTE: This is a simplified implementation. Production should use proper\n// libsodium sealed box encryption (requires sodium-oxide or similar crate)\n#[cfg(feature = \"migrate\")]\nfn encrypt_for_github(public_key_base64: \u0026str, value: \u0026str) -\u003e Result\u003cString\u003e {\n    use base64::{engine::general_purpose, Engine as _};\n\n    // Decode the public key\n    let _public_key = general_purpose::STANDARD\n        .decode(public_key_base64)\n        .context(\"Failed to decode public key\")?;\n\n    // TODO: Replace with proper libsodium sealed box encryption\n    // For now, this is a placeholder that base64 encodes the value\n    // In production, this should use sodium_oxide or sodiumoxide crate\n    // to do proper public key encryption\n\n    let encrypted = general_purpose::STANDARD.encode(value.as_bytes());\n\n    Ok(encrypted)\n}\n\n// Migrate to AWS Secrets Manager\nfn migrate_to_aws(\n    secrets: \u0026HashMap\u003cString, String\u003e,\n    secret_name: Option\u003cString\u003e,\n    aws_profile: Option\u003cString\u003e,\n    dry_run: bool,\n    verbose: bool,\n) -\u003e Result\u003c()\u003e {\n    if verbose {\n        println!(\"Preparing AWS Secrets Manager migration\");\n    }\n\n    println!(\"\\n{} AWS Secrets Manager migration\", \"☁️\".cyan());\n\n    let name = secret_name.unwrap_or_else(|| {\n        Input::new()\n            .with_prompt(\"Secret name (e.g., prod/myapp/config)\")\n            .with_initial_text(\"prod/myapp/config\")\n            .interact_text()\n            .unwrap_or_else(|_| \"prod/myapp/config\".to_string())\n    });\n\n    let json = serde_json::to_string_pretty(secrets)?;\n\n    if dry_run {\n        println!(\"\\n{}\", \"Would upload to AWS Secrets Manager:\".bold());\n        println!(\"Secret name: {}\", name);\n        println!(\"Secrets count: {}\", secrets.len());\n        println!(\"\\nJSON payload preview (first 500 chars):\");\n        println!(\"{}\", \u0026json.chars().take(500).collect::\u003cString\u003e());\n        if json.len() \u003e 500 {\n            println!(\"... ({} more characters)\", json.len() - 500);\n        }\n        return Ok(());\n    }\n\n    println!(\"\\n{}\", \"Run these commands to upload:\".bold());\n    println!();\n\n    let profile_flag = aws_profile\n        .map(|p| format!(\"--profile {} \", p))\n        .unwrap_or_default();\n\n    // Create secret\n    println!(\"{}\", \"# Create new secret:\".dimmed());\n    println!(\"aws secretsmanager create-secret \\\\\");\n    println!(\"  {}--name {} \\\\\", profile_flag, name);\n    println!(\"  --secret-string '{}'\", json.replace('\\'', \"\\\\'\"));\n    println!();\n\n    // Update secret\n    println!(\"{}\", \"# Or update existing secret:\".dimmed());\n    println!(\"aws secretsmanager update-secret \\\\\");\n    println!(\"  {}--secret-id {} \\\\\", profile_flag, name);\n    println!(\"  --secret-string '{}'\", json.replace('\\'', \"\\\\'\"));\n\n    Ok(())\n}\n\n// Migrate to Doppler\nfn migrate_to_doppler(\n    secrets: \u0026HashMap\u003cString, String\u003e,\n    dry_run: bool,\n    verbose: bool,\n) -\u003e Result\u003c()\u003e {\n    if verbose {\n        println!(\"Preparing Doppler migration\");\n    }\n\n    println!(\"\\n{} Doppler migration\", \"🔐\".cyan());\n    println!(\"{} Requires Doppler CLI\", \"ℹ️\".cyan());\n    println!(\"Install: https://docs.doppler.com/docs/cli\");\n\n    if dry_run {\n        println!(\"\\n{}\", \"Would upload to Doppler:\".bold());\n        println!(\"Secrets count: {}\", secrets.len());\n        return Ok(());\n    }\n\n    // Check if doppler CLI is installed\n    if std::process::Command::new(\"doppler\")\n        .arg(\"--version\")\n        .output()\n        .is_err()\n    {\n        return Err(anyhow!(\n            \"Doppler CLI not found. Install from https://docs.doppler.com/docs/cli\"\n        ));\n    }\n\n    println!(\"\\n{}\", \"Upload secrets with:\".bold());\n    println!();\n    for (key, value) in secrets {\n        // Escape single quotes in value\n        let escaped_value = value.replace('\\'', \"'\\\\''\");\n        println!(\"doppler secrets set {} '{}'\", key, escaped_value);\n    }\n\n    Ok(())\n}\n\n// Migrate to Infisical\nfn migrate_to_infisical(\n    secrets: \u0026HashMap\u003cString, String\u003e,\n    dry_run: bool,\n    verbose: bool,\n) -\u003e Result\u003c()\u003e {\n    if verbose {\n        println!(\"Preparing Infisical migration\");\n    }\n\n    println!(\"\\n{} Infisical migration\", \"🔒\".cyan());\n    println!(\"{} Requires Infisical CLI\", \"ℹ️\".cyan());\n    println!(\"Install: https://infisical.com/docs/cli/overview\");\n\n    if dry_run {\n        println!(\"\\n{}\", \"Would upload to Infisical:\".bold());\n        println!(\"Secrets count: {}\", secrets.len());\n        return Ok(());\n    }\n\n    println!(\"\\n{}\", \"Upload secrets with:\".bold());\n    println!();\n    for (key, value) in secrets {\n        // Escape single quotes in value\n        let escaped_value = value.replace('\\'', \"'\\\\''\");\n        println!(\"infisical secrets set {} '{}'\", key, escaped_value);\n    }\n\n    Ok(())\n}\n\n// Migrate to GCP Secret Manager\nfn migrate_to_gcp(secrets: \u0026HashMap\u003cString, String\u003e, dry_run: bool, verbose: bool) -\u003e Result\u003c()\u003e {\n    if verbose {\n        println!(\"Preparing GCP Secret Manager migration\");\n    }\n\n    println!(\"\\n{} GCP Secret Manager migration\", \"☁️\".cyan());\n\n    if dry_run {\n        println!(\"\\n{}\", \"Would upload to GCP Secret Manager:\".bold());\n        println!(\"Secrets count: {}\", secrets.len());\n        return Ok(());\n    }\n\n    println!(\n        \"{} Use the convert command to generate gcloud commands\",\n        \"ℹ️\".cyan()\n    );\n    println!();\n    println!(\"evnx convert --to gcp-secrets \u003e upload.sh\");\n    println!(\"bash upload.sh\");\n    println!();\n    println!(\"Or upload manually via gcloud CLI:\");\n    println!();\n\n    for (key, _) in secrets.iter().take(3) {\n        println!(\"echo -n \\\"${{{}}}\\\" | \\\\\", key);\n        println!(\"  gcloud secrets create {} \\\\\", key);\n        println!(\"    --data-file=- \\\\\");\n        println!(\"    --replication-policy=automatic\");\n        println!();\n    }\n\n    if secrets.len() \u003e 3 {\n        println!(\"... and {} more secrets\", secrets.len() - 3);\n    }\n\n    Ok(())\n}\n\n#[cfg(test)]\nmod tests {\n    use super::*;\n\n    #[test]\n    fn test_is_system_variable() {\n        assert!(is_system_variable(\"PATH\"));\n        assert!(is_system_variable(\"HOME\"));\n        assert!(!is_system_variable(\"DATABASE_URL\"));\n        assert!(!is_system_variable(\"SECRET_KEY\"));\n    }\n\n    #[test]\n    fn test_load_secrets_from_environment() {\n        std::env::set_var(\"TEST_SECRET_1\", \"value1\");\n        std::env::set_var(\"TEST_SECRET_2\", \"value2\");\n\n        let secrets = load_secrets(\"environment\", \"\", false).unwrap();\n\n        assert!(secrets.contains_key(\"TEST_SECRET_1\"));\n        assert!(secrets.contains_key(\"TEST_SECRET_2\"));\n\n        // Clean up\n        std::env::remove_var(\"TEST_SECRET_1\");\n        std::env::remove_var(\"TEST_SECRET_2\");\n    }\n\n    #[test]\n    #[cfg(feature = \"migrate\")]\n    fn test_encrypt_for_github() {\n        let public_key = \"dGVzdF9rZXk=\"; // valid base64 for \"test_key\"\n        let value = \"test_value\";\n        let result = encrypt_for_github(public_key, value);\n        assert!(result.is_ok());\n\n        // Should return base64 encoded value\n        let encrypted = result.unwrap();\n        assert!(!encrypted.is_empty());\n    }\n}\n","traces":[{"line":87,"address":[6580427,6576656,6580866],"length":1,"stats":{"Line":0}},{"line":100,"address":[5745826],"length":1,"stats":{"Line":0}},{"line":101,"address":[6576976,6576896],"length":1,"stats":{"Line":0}},{"line":105,"address":[6576886],"length":1,"stats":{"Line":0}},{"line":108,"address":[6577143],"length":1,"stats":{"Line":0}},{"line":109,"address":[6577216],"length":1,"stats":{"Line":0}},{"line":112,"address":[6577437,6580644,6577333],"length":1,"stats":{"Line":0}},{"line":114,"address":[5746856,5746792],"length":1,"stats":{"Line":0}},{"line":121,"address":[6578129],"length":1,"stats":{"Line":0}},{"line":122,"address":[6578199,6580441],"length":1,"stats":{"Line":0}},{"line":123,"address":[6580600],"length":1,"stats":{"Line":0}},{"line":127,"address":[6578176,6578249],"length":1,"stats":{"Line":0}},{"line":128,"address":[6578393,6578271],"length":1,"stats":{"Line":0}},{"line":144,"address":[6580134],"length":1,"stats":{"Line":0}},{"line":148,"address":[6580293],"length":1,"stats":{"Line":0}},{"line":149,"address":[6580338],"length":1,"stats":{"Line":0}},{"line":152,"address":[6578415,6578654],"length":1,"stats":{"Line":0}},{"line":153,"address":[6578529,6579631,6580113],"length":1,"stats":{"Line":0}},{"line":155,"address":[6578680],"length":1,"stats":{"Line":0}},{"line":156,"address":[5748458,5747755],"length":1,"stats":{"Line":0}},{"line":158,"address":[6578820,6578735],"length":1,"stats":{"Line":0}},{"line":159,"address":[5748341,5747859],"length":1,"stats":{"Line":0}},{"line":161,"address":[6578842,6579016,6578918],"length":1,"stats":{"Line":0}},{"line":162,"address":[6579221,6579359,6578977],"length":1,"stats":{"Line":0}},{"line":165,"address":[6579030],"length":1,"stats":{"Line":0}},{"line":169,"address":[6579320],"length":1,"stats":{"Line":0}},{"line":173,"address":[6565818,6565824,6565040],"length":1,"stats":{"Line":0}},{"line":174,"address":[5734151],"length":1,"stats":{"Line":0}},{"line":178,"address":[6565267],"length":1,"stats":{"Line":0}},{"line":182,"address":[6565463],"length":1,"stats":{"Line":0}},{"line":186,"address":[6565620],"length":1,"stats":{"Line":0}},{"line":193,"address":[5735657,5735663,5734944],"length":1,"stats":{"Line":0}},{"line":194,"address":[5735124,5734961],"length":1,"stats":{"Line":0}},{"line":198,"address":[6566198,6566001,6566332],"length":1,"stats":{"Line":0}},{"line":200,"address":[5735319,5735635,5735221,5735247],"length":1,"stats":{"Line":0}},{"line":205,"address":[6566340],"length":1,"stats":{"Line":0}},{"line":214,"address":[6575098,6574304,6575092],"length":1,"stats":{"Line":0}},{"line":215,"address":[6574544,6574321],"length":1,"stats":{"Line":0}},{"line":222,"address":[6574525,6574722,6574856],"length":1,"stats":{"Line":0}},{"line":224,"address":[6574645,6574730,6574671,6575070],"length":1,"stats":{"Line":0}},{"line":229,"address":[6574864],"length":1,"stats":{"Line":0}},{"line":238,"address":[6563344,6564826,6564854],"length":1,"stats":{"Line":1}},{"line":239,"address":[6563396],"length":1,"stats":{"Line":1}},{"line":240,"address":[6563456],"length":1,"stats":{"Line":0}},{"line":244,"address":[5732552,5732756],"length":1,"stats":{"Line":2}},{"line":245,"address":[6563656],"length":1,"stats":{"Line":0}},{"line":246,"address":[5733996,5732862,5732805],"length":1,"stats":{"Line":0}},{"line":247,"address":[6563680],"length":1,"stats":{"Line":0}},{"line":248,"address":[6564872,6563702],"length":1,"stats":{"Line":0}},{"line":249,"address":[6564958],"length":1,"stats":{"Line":0}},{"line":251,"address":[6563797],"length":1,"stats":{"Line":1}},{"line":252,"address":[6564003],"length":1,"stats":{"Line":1}},{"line":253,"address":[6564096,6564258,6564783,6564020],"length":1,"stats":{"Line":4}},{"line":255,"address":[6564383,6564524],"length":1,"stats":{"Line":2}},{"line":256,"address":[6564545,6564680],"length":1,"stats":{"Line":2}},{"line":259,"address":[6564419],"length":1,"stats":{"Line":1}},{"line":261,"address":[6563832],"length":1,"stats":{"Line":0}},{"line":266,"address":[6572128],"length":1,"stats":{"Line":1}},{"line":267,"address":[5741260],"length":1,"stats":{"Line":1}},{"line":666,"address":[6569199,6566592,6570318],"length":1,"stats":{"Line":0}},{"line":673,"address":[5735745],"length":1,"stats":{"Line":0}},{"line":674,"address":[6566791,6566724],"length":1,"stats":{"Line":0}},{"line":677,"address":[6566693,6566820],"length":1,"stats":{"Line":0}},{"line":679,"address":[6566981],"length":1,"stats":{"Line":0}},{"line":680,"address":[6545392],"length":1,"stats":{"Line":0}},{"line":681,"address":[6103037],"length":1,"stats":{"Line":0}},{"line":682,"address":[6545440],"length":1,"stats":{"Line":0}},{"line":683,"address":[6103100],"length":1,"stats":{"Line":0}},{"line":684,"address":[6545760,6545491,6545744],"length":1,"stats":{"Line":0}},{"line":687,"address":[6567054,6567117,6570239],"length":1,"stats":{"Line":0}},{"line":689,"address":[6567326],"length":1,"stats":{"Line":0}},{"line":690,"address":[6567361,6569213],"length":1,"stats":{"Line":0}},{"line":691,"address":[6569380],"length":1,"stats":{"Line":0}},{"line":692,"address":[6569484],"length":1,"stats":{"Line":0}},{"line":693,"address":[6569617],"length":1,"stats":{"Line":0}},{"line":694,"address":[5738734],"length":1,"stats":{"Line":0}},{"line":695,"address":[5739026],"length":1,"stats":{"Line":0}},{"line":696,"address":[5739093],"length":1,"stats":{"Line":0}},{"line":698,"address":[5739051],"length":1,"stats":{"Line":0}},{"line":701,"address":[6567447,6567330],"length":1,"stats":{"Line":0}},{"line":702,"address":[5736675],"length":1,"stats":{"Line":0}},{"line":704,"address":[6567653],"length":1,"stats":{"Line":0}},{"line":705,"address":[6103173,6103152],"length":1,"stats":{"Line":0}},{"line":709,"address":[6567738,6567821],"length":1,"stats":{"Line":0}},{"line":710,"address":[6567977],"length":1,"stats":{"Line":0}},{"line":711,"address":[6568030],"length":1,"stats":{"Line":0}},{"line":712,"address":[5737261],"length":1,"stats":{"Line":0}},{"line":713,"address":[6568424],"length":1,"stats":{"Line":0}},{"line":716,"address":[6568469],"length":1,"stats":{"Line":0}},{"line":717,"address":[5737735],"length":1,"stats":{"Line":0}},{"line":718,"address":[5737788],"length":1,"stats":{"Line":0}},{"line":719,"address":[5737951],"length":1,"stats":{"Line":0}},{"line":721,"address":[6569114],"length":1,"stats":{"Line":0}},{"line":725,"address":[6573927,6572416,6573933],"length":1,"stats":{"Line":0}},{"line":730,"address":[6572467],"length":1,"stats":{"Line":0}},{"line":731,"address":[6572537],"length":1,"stats":{"Line":0}},{"line":734,"address":[6572471,6572568],"length":1,"stats":{"Line":0}},{"line":735,"address":[6572698],"length":1,"stats":{"Line":0}},{"line":736,"address":[6572891],"length":1,"stats":{"Line":0}},{"line":738,"address":[6572930],"length":1,"stats":{"Line":0}},{"line":739,"address":[6574020,6573001],"length":1,"stats":{"Line":0}},{"line":740,"address":[6574149],"length":1,"stats":{"Line":0}},{"line":741,"address":[6574276],"length":1,"stats":{"Line":0}},{"line":745,"address":[6572934,6573206],"length":1,"stats":{"Line":0}},{"line":750,"address":[5742990],"length":1,"stats":{"Line":0}},{"line":755,"address":[5742302],"length":1,"stats":{"Line":0}},{"line":756,"address":[5742495],"length":1,"stats":{"Line":0}},{"line":757,"address":[6573543,6573503],"length":1,"stats":{"Line":0}},{"line":759,"address":[6573636],"length":1,"stats":{"Line":0}},{"line":760,"address":[5742725,5742826],"length":1,"stats":{"Line":0}},{"line":763,"address":[5742760],"length":1,"stats":{"Line":0}},{"line":767,"address":[5744128,5745370,5745376],"length":1,"stats":{"Line":0}},{"line":772,"address":[5744179],"length":1,"stats":{"Line":0}},{"line":773,"address":[5744249],"length":1,"stats":{"Line":0}},{"line":776,"address":[5744183,5744280],"length":1,"stats":{"Line":0}},{"line":777,"address":[5744404],"length":1,"stats":{"Line":0}},{"line":778,"address":[5744597],"length":1,"stats":{"Line":0}},{"line":780,"address":[6575628],"length":1,"stats":{"Line":0}},{"line":781,"address":[6576383,6575698],"length":1,"stats":{"Line":0}},{"line":782,"address":[5745518],"length":1,"stats":{"Line":0}},{"line":783,"address":[6576639],"length":1,"stats":{"Line":0}},{"line":786,"address":[5744640,5744775],"length":1,"stats":{"Line":0}},{"line":787,"address":[6575894],"length":1,"stats":{"Line":0}},{"line":788,"address":[5744942,5744981],"length":1,"stats":{"Line":0}},{"line":790,"address":[5745077],"length":1,"stats":{"Line":0}},{"line":791,"address":[5745138,5745239],"length":1,"stats":{"Line":0}},{"line":794,"address":[6576167],"length":1,"stats":{"Line":0}},{"line":798,"address":[5739408,5740885,5740891],"length":1,"stats":{"Line":0}},{"line":799,"address":[5739459],"length":1,"stats":{"Line":0}},{"line":800,"address":[5739529],"length":1,"stats":{"Line":0}},{"line":803,"address":[6570407,6570504],"length":1,"stats":{"Line":0}},{"line":805,"address":[6570629],"length":1,"stats":{"Line":0}},{"line":806,"address":[6570699,6571854],"length":1,"stats":{"Line":0}},{"line":807,"address":[6571983],"length":1,"stats":{"Line":0}},{"line":808,"address":[6572110],"length":1,"stats":{"Line":0}},{"line":811,"address":[5739728,5739824],"length":1,"stats":{"Line":0}},{"line":815,"address":[6570895],"length":1,"stats":{"Line":0}},{"line":816,"address":[6570930],"length":1,"stats":{"Line":0}},{"line":817,"address":[6570965],"length":1,"stats":{"Line":0}},{"line":818,"address":[6571000],"length":1,"stats":{"Line":0}},{"line":819,"address":[6571035],"length":1,"stats":{"Line":0}},{"line":820,"address":[6571070],"length":1,"stats":{"Line":0}},{"line":822,"address":[6571199,6571110],"length":1,"stats":{"Line":0}},{"line":823,"address":[5740332],"length":1,"stats":{"Line":0}},{"line":824,"address":[6571393],"length":1,"stats":{"Line":0}},{"line":825,"address":[6571506],"length":1,"stats":{"Line":0}},{"line":826,"address":[6571541],"length":1,"stats":{"Line":0}},{"line":827,"address":[6571576],"length":1,"stats":{"Line":0}},{"line":830,"address":[6571621],"length":1,"stats":{"Line":0}},{"line":831,"address":[6571652],"length":1,"stats":{"Line":0}},{"line":834,"address":[6571633],"length":1,"stats":{"Line":0}}],"covered":11,"coverable":151},{"path":["/","home","ajit","Documents","dotenv-space-cli","src","commands","mod.rs"],"content":"pub mod backup;\npub mod convert;\npub mod diff;\npub mod doctor;\npub mod init;\npub mod migrate;\npub mod restore;\npub mod scan;\npub mod sync;\npub mod template;\npub mod validate;\n\npub mod completions {\n    use crate::cli::Cli;\n    use anyhow::Result;\n    use clap::CommandFactory;\n    use clap_complete::{generate, Shell};\n    use std::io;\n\n    pub fn run(shell: String) -\u003e Result\u003c()\u003e {\n        let shell = match shell.to_lowercase().as_str() {\n            \"bash\" =\u003e Shell::Bash,\n            \"zsh\" =\u003e Shell::Zsh,\n            \"fish\" =\u003e Shell::Fish,\n            \"powershell\" =\u003e Shell::PowerShell,\n            _ =\u003e {\n                eprintln!(\"Unsupported shell: {}\", shell);\n                std::process::exit(1);\n            }\n        };\n\n        let mut cmd = Cli::command();\n        generate(shell, \u0026mut cmd, \"evnx\", \u0026mut io::stdout());\n        Ok(())\n    }\n}\n","traces":[{"line":20,"address":[5643152,5643861],"length":1,"stats":{"Line":0}},{"line":21,"address":[5643164,5643232,5643318],"length":1,"stats":{"Line":0}},{"line":22,"address":[5643334,5643400],"length":1,"stats":{"Line":0}},{"line":23,"address":[5643377,5643414,5643453],"length":1,"stats":{"Line":0}},{"line":24,"address":[5643467,5643430,5643506],"length":1,"stats":{"Line":0}},{"line":25,"address":[5643520,5643558,5643483],"length":1,"stats":{"Line":0}},{"line":27,"address":[5643565,5643531],"length":1,"stats":{"Line":0}},{"line":28,"address":[5643634],"length":1,"stats":{"Line":0}},{"line":32,"address":[5643668],"length":1,"stats":{"Line":0}},{"line":33,"address":[5643687,5643764],"length":1,"stats":{"Line":0}}],"covered":0,"coverable":10},{"path":["/","home","ajit","Documents","dotenv-space-cli","src","commands","restore.rs"],"content":"//! Restore command — decrypt a backup created by the `backup` command.\n//!\n//! # Overview\n//!\n//! Reads a Base64-encoded AES-256-GCM backup file, derives the decryption key\n//! from the user-supplied password using Argon2id, decrypts the payload, and\n//! writes the recovered `.env` content to disk.\n//!\n//! # Safety behaviours\n//!\n//! ## Overwrite protection\n//!\n//! If the output file already exists the user is **always prompted** before it\n//! is overwritten. There is no `--force` flag — this is intentional. The `.env`\n//! file is sensitive; an accidental overwrite is difficult to undo and could\n//! destroy credentials that are not backed up anywhere else.\n//!\n//! ## Validation failure fallback\n//!\n//! If the decrypted content does not look like a valid `.env` file (checked\n//! heuristically — see [`looks_like_dotenv`]) the command writes the content\n//! to `\u003coutput\u003e.restored` instead of `\u003coutput\u003e`. This lets the user inspect\n//! the raw content without risking damage to a live `.env` file.\n//!\n//! # Example\n//!\n//! ```bash\n//! evnx restore .env.backup\n//! evnx restore .env.backup --output .env.production\n//! ```\n//!\n//! # Future work\n//!\n//! - `--dry-run` flag: decrypt and validate but do not write anything.\n//! - `--print` flag: decrypt and emit to stdout (useful for piping).\n//! - `--diff` flag: show a unified diff between backup content and current file.\n//! - Support for asymmetric (public-key) backups once `--recipient` is added\n//!   to the `backup` command.\n\nuse anyhow::{anyhow, Context, Result};\nuse colored::*;\n\n/// Entry point for the `restore` subcommand.\n///\n/// When the `backup` feature is **not** enabled this prints a helpful message\n/// and exits cleanly — it does **not** panic or return an error.\n///\n/// # Arguments\n///\n/// * `backup`  — Path to the `.backup` file created by `evnx backup`.\n/// * `output`  — Desired destination path for the restored file (default `.env`).\n///   If decrypted content fails `.env` validation this path receives\n///   a `.restored` suffix to avoid overwriting a live file with\n///   potentially corrupt content.\n/// * `verbose` — Print extra diagnostic information during the run.\npub fn run(backup: String, output: String, verbose: bool) -\u003e Result\u003c()\u003e {\n    // ── Feature-disabled stub ────────────────────────────────────────────────\n    #[cfg(not(feature = \"backup\"))]\n    {\n        // Reference all parameters to silence unused-variable warnings in\n        // the non-feature build without renaming them.\n        let _ = (\u0026backup, \u0026output, verbose);\n        println!(\"{} Backup/restore feature not enabled\", \"✗\".red());\n        println!(\"Rebuild with: cargo build --features backup\");\n        return Ok(());\n    }\n\n    // ── Full implementation (feature = \"backup\") ─────────────────────────────\n    #[cfg(feature = \"backup\")]\n    {\n        use crate::commands::backup::decrypt_content;\n        use dialoguer::{Confirm, Password};\n        use std::fs;\n        use std::path::Path;\n\n        if verbose {\n            println!(\"{}\", \"Running restore in verbose mode\".dimmed());\n        }\n\n        println!(\n            \"\\n{}\",\n            \"┌─ Restore from encrypted backup ─────────────────────┐\".cyan()\n        );\n        println!(\n            \"{}\",\n            \"│ Your backup will be decrypted with AES-256-GCM      │\".cyan()\n        );\n        println!(\n            \"{}\\n\",\n            \"└──────────────────────────────────────────────────────┘\".cyan()\n        );\n\n        // ── Validate backup file exists ──────────────────────────────────────\n        if !Path::new(\u0026backup).exists() {\n            return Err(anyhow!(\"Backup file not found: {}\", backup));\n        }\n\n        let encoded = fs::read_to_string(\u0026backup)\n            .with_context(|| format!(\"Failed to read backup file: {}\", backup))?;\n\n        println!(\"{} Read backup from {}\", \"✓\".green(), backup);\n\n        // ── Password prompt ──────────────────────────────────────────────────\n        // No echo — the password is never displayed or logged.\n        let password = Password::new()\n            .with_prompt(\"Enter decryption password\")\n            .interact()?;\n\n        if password.is_empty() {\n            return Err(anyhow!(\"Password must not be empty\"));\n        }\n\n        // ── Decrypt ──────────────────────────────────────────────────────────\n        println!(\"Decrypting… (Argon2id key derivation in progress)\");\n\n        let (content, metadata) = decrypt_content(\u0026encoded, \u0026password).context(\"Restore failed\")?;\n\n        println!(\"{} Decryption successful\", \"✓\".green());\n\n        // ── Display metadata ─────────────────────────────────────────────────\n        // Always show metadata so the user can confirm this is the right backup\n        // before any file is written.\n        println!(\"\\n{}\", \"Backup information:\".bold());\n        println!(\"  Original file : {}\", metadata.original_file);\n        println!(\"  Created at    : {}\", metadata.created_at);\n        println!(\"  Tool version  : evnx v{}\", metadata.tool_version);\n        println!(\"  Variables     : {}\", count_vars(\u0026content));\n\n        // ── Validation — choose write path ───────────────────────────────────\n        // If the decrypted content does not look like a .env file we redirect\n        // to a `.restored` fallback rather than aborting. This allows the user\n        // to inspect the content and decide what to do with it, while keeping\n        // the live .env file untouched.\n        let write_path: String = if looks_like_dotenv(\u0026content) {\n            output.clone()\n        } else {\n            let fallback = format!(\"{}.restored\", output);\n            println!(\n                \"\\n{} Decrypted content does not look like a valid .env file.\",\n                \"⚠️\".yellow()\n            );\n            println!(\n                \"  Writing to {} instead of {} to protect your current file.\",\n                fallback, output\n            );\n            println!(\"  Inspect the file manually, then rename it if the content is correct:\");\n            println!(\"    mv {} {}\", fallback, output);\n            fallback\n        };\n\n        // ── Overwrite protection — always prompt ─────────────────────────────\n        // There is intentionally no --force flag. Overwriting a live .env\n        // without confirmation is far too easy to do accidentally, and the\n        // consequences (lost credentials) are hard to undo.\n        if Path::new(\u0026write_path).exists() {\n            println!(\n                \"\\n{} Output file already exists: {}\",\n                \"⚠️\".yellow(),\n                write_path\n            );\n\n            let overwrite = Confirm::new()\n                .with_prompt(format!(\"Overwrite {}?\", write_path))\n                .default(false)\n                .interact()?;\n\n            if !overwrite {\n                println!(\"{} Restore cancelled. No files were modified.\", \"ℹ️\".cyan());\n                println!(\"  Tip: use --output \u003cpath\u003e to restore to a different location.\");\n                return Ok(());\n            }\n        }\n\n        // ── Write ─────────────────────────────────────────────────────────────\n        fs::write(\u0026write_path, \u0026content)\n            .with_context(|| format!(\"Failed to write restored file to {}\", write_path))?;\n\n        println!(\n            \"\\n{} Restored {} variables to {}\",\n            \"✓\".green(),\n            count_vars(\u0026content),\n            write_path\n        );\n\n        // Context-aware next steps depending on whether we used the fallback.\n        println!(\"\\n{}\", \"Next steps:\".bold());\n        if write_path == output {\n            println!(\"  1. Run: evnx validate --env {}\", write_path);\n            println!(\"  2. Verify your application starts correctly\");\n            println!(\"  3. Delete the backup file once you have confirmed the restore\");\n        } else {\n            // Fallback path was used — guide the user through inspection.\n            println!(\"  1. Inspect the restored file: cat {}\", write_path);\n            println!(\n                \"  2. If the content is correct, rename it: mv {} {}\",\n                write_path, output\n            );\n            println!(\"  3. Run: evnx validate --env {}\", output);\n        }\n\n        Ok(())\n    }\n}\n\n// ── Helpers ───────────────────────────────────────────────────────────────────\n\n/// Count the number of `KEY=VALUE` variable assignments in a `.env` string.\n///\n/// Comments (`#`) and blank lines are excluded from the count.\nfn count_vars(content: \u0026str) -\u003e usize {\n    content\n        .lines()\n        .filter(|line| {\n            let l = line.trim();\n            !l.is_empty() \u0026\u0026 !l.starts_with('#') \u0026\u0026 l.contains('=')\n        })\n        .count()\n}\n\n/// Heuristically check whether `content` resembles a `.env` file.\n///\n/// A file passes if at least **80%** of its non-empty lines are one of:\n/// - blank lines,\n/// - comment lines beginning with `#`, or\n/// - `KEY=VALUE` assignments where KEY contains only alphanumerics and `_`.\n///\n/// The 80% threshold is intentionally lenient — its purpose is to detect\n/// obviously wrong content (binary blobs, PDFs, prose) rather than to\n/// enforce strict `.env` grammar.\n///\n/// \u003e **Note:** This function is duplicated from `backup.rs` to keep `restore.rs`\n/// \u003e self-contained. If the heuristic needs updating, change both copies.\nfn looks_like_dotenv(content: \u0026str) -\u003e bool {\n    if content.trim().is_empty() {\n        return true;\n    }\n\n    let valid_line = |line: \u0026str| -\u003e bool {\n        let line = line.trim();\n        line.is_empty()\n            || line.starts_with('#')\n            || line\n                .split_once('=')\n                .map(|(key, _)| {\n                    !key.trim().is_empty()\n                        \u0026\u0026 key.trim().chars().all(|c| c.is_alphanumeric() || c == '_')\n                })\n                .unwrap_or(false)\n    };\n\n    let non_empty: Vec\u003c\u0026str\u003e = content.lines().filter(|l| !l.trim().is_empty()).collect();\n    if non_empty.is_empty() {\n        return true;\n    }\n    let valid_count = non_empty.iter().filter(|\u0026\u0026l| valid_line(l)).count();\n    // Equivalent to valid_count / total \u003e= 0.8 without floating point.\n    valid_count * 10 \u003e= non_empty.len() * 8\n}\n\n// ── Tests ─────────────────────────────────────────────────────────────────────\n\n#[cfg(test)]\nmod tests {\n    use super::*;\n\n    #[test]\n    fn test_count_vars_normal() {\n        let content = \"# Comment\\nKEY=value\\nOTHER=123\\n\\n# Another\\nFOO=bar\\n\";\n        assert_eq!(count_vars(content), 3);\n    }\n\n    #[test]\n    fn test_count_vars_empty() {\n        assert_eq!(count_vars(\"\"), 0);\n        assert_eq!(count_vars(\"# Only comments\\n\\n\"), 0);\n    }\n\n    #[test]\n    fn test_count_vars_only_assignments() {\n        assert_eq!(count_vars(\"A=1\\nB=2\\nC=3\\n\"), 3);\n    }\n\n    #[test]\n    fn test_looks_like_dotenv_valid() {\n        assert!(looks_like_dotenv(\"KEY=value\\nOTHER=123\\n# comment\\n\"));\n    }\n\n    #[test]\n    fn test_looks_like_dotenv_empty() {\n        assert!(looks_like_dotenv(\"\"));\n        assert!(looks_like_dotenv(\"   \\n  \"));\n    }\n\n    #[test]\n    fn test_looks_like_dotenv_rejects_prose() {\n        // Zero KEY=VALUE lines — well below the 80% threshold.\n        assert!(!looks_like_dotenv(\n            \"This is a plain text file.\\nIt contains no env vars.\\nNone at all.\"\n        ));\n    }\n\n    #[test]\n    fn test_looks_like_dotenv_tolerates_some_noise() {\n        // 4 valid lines, 1 invalid → 80% valid → should pass.\n        let content = \"KEY=value\\nOTHER=123\\n# comment\\nFOO=bar\\nnot-a-valid-line\\n\";\n        assert!(looks_like_dotenv(content));\n    }\n\n    #[test]\n    fn test_looks_like_dotenv_rejects_too_much_noise() {\n        // 2 valid, 4 invalid → 33% valid → below threshold.\n        let content = \"KEY=value\\nFOO=bar\\nnot valid\\nalso invalid\\nstill wrong\\nnope\\n\";\n        assert!(!looks_like_dotenv(content));\n    }\n}\n","traces":[{"line":56,"address":[5376832,5377192],"length":1,"stats":{"Line":0}},{"line":63,"address":[5376860,5376934],"length":1,"stats":{"Line":0}},{"line":64,"address":[5377072],"length":1,"stats":{"Line":0}},{"line":210,"address":[5376240],"length":1,"stats":{"Line":2}},{"line":213,"address":[6289632],"length":1,"stats":{"Line":3}},{"line":214,"address":[6289646],"length":1,"stats":{"Line":1}},{"line":215,"address":[6289683],"length":1,"stats":{"Line":2}},{"line":233,"address":[5376320,5376809,5376815],"length":1,"stats":{"Line":5}},{"line":234,"address":[5376353],"length":1,"stats":{"Line":5}},{"line":235,"address":[5376464],"length":1,"stats":{"Line":1}},{"line":238,"address":[6289776],"length":1,"stats":{"Line":4}},{"line":239,"address":[6289821],"length":1,"stats":{"Line":4}},{"line":240,"address":[6289888,6289852],"length":1,"stats":{"Line":6}},{"line":241,"address":[6289871],"length":1,"stats":{"Line":4}},{"line":243,"address":[6289905],"length":1,"stats":{"Line":4}},{"line":244,"address":[6326448,6326305,6326455],"length":1,"stats":{"Line":10}},{"line":245,"address":[6290173,6290098],"length":1,"stats":{"Line":3}},{"line":246,"address":[6290128,6290220,6290192],"length":1,"stats":{"Line":9}},{"line":248,"address":[6289932],"length":1,"stats":{"Line":1}},{"line":251,"address":[6290030,6290016],"length":1,"stats":{"Line":12}},{"line":252,"address":[5376449,5376519],"length":1,"stats":{"Line":8}},{"line":253,"address":[5376551],"length":1,"stats":{"Line":0}},{"line":255,"address":[6289981,6289968],"length":1,"stats":{"Line":16}},{"line":257,"address":[5376777,5376666],"length":1,"stats":{"Line":1}}],"covered":20,"coverable":24},{"path":["/","home","ajit","Documents","dotenv-space-cli","src","commands","scan.rs"],"content":"/// Secret scanning command\n///\n/// Scans files for accidentally committed secrets using pattern matching\n/// and entropy analysis. Outputs findings with confidence levels and\n/// remediation steps.\nuse anyhow::Result;\nuse colored::*;\nuse serde::{Deserialize, Serialize};\n// use std::collections::HashMap;\nuse std::fs;\nuse std::path::{Path, PathBuf};\nuse walkdir::WalkDir;\n\nuse crate::core::Parser;\nuse crate::utils::patterns::{detect_secret, Confidence};\n\n/// A detected secret\n#[derive(Debug, Clone, Serialize, Deserialize)]\npub struct Finding {\n    pub pattern: String,\n    pub confidence: String,\n    pub value_preview: String,\n    pub location: String,\n    pub variable: Option\u003cString\u003e,\n    pub action_url: Option\u003cString\u003e,\n}\n\n/// Scan results\n#[derive(Debug, Serialize, Deserialize)]\npub struct ScanResults {\n    pub files_scanned: usize,\n    pub secrets_found: usize,\n    pub findings: Vec\u003cFinding\u003e,\n    pub high_confidence: usize,\n    pub medium_confidence: usize,\n    pub low_confidence: usize,\n}\n\n/// Run the scan command\npub fn run(\n    paths: Vec\u003cString\u003e,\n    exclude: Vec\u003cString\u003e,\n    _pattern: Vec\u003cString\u003e,\n    ignore_placeholders: bool,\n    format: String,\n    exit_zero: bool,\n    verbose: bool,\n) -\u003e Result\u003c()\u003e {\n    if verbose {\n        println!(\"{}\", \"Running scan in verbose mode\".dimmed());\n    }\n\n    println!(\n        \"\\n{}\",\n        \"┌─ Scanning for exposed secrets ──────────────────────┐\".cyan()\n    );\n    println!(\n        \"{}\",\n        \"│ Checking for real-looking credentials               │\".cyan()\n    );\n    println!(\n        \"{}\\n\",\n        \"└──────────────────────────────────────────────────────┘\".cyan()\n    );\n\n    // Collect files to scan\n    let files = collect_files(\u0026paths, \u0026exclude)?;\n\n    if verbose {\n        println!(\"Scanning {} files...\", files.len());\n    }\n\n    let mut results = ScanResults {\n        files_scanned: files.len(),\n        secrets_found: 0,\n        findings: Vec::new(),\n        high_confidence: 0,\n        medium_confidence: 0,\n        low_confidence: 0,\n    };\n\n    // Scan each file\n    for file in \u0026files {\n        if verbose {\n            println!(\"  Scanning: {}\", file.display());\n        }\n        scan_file(file, \u0026mut results, ignore_placeholders)?;\n    }\n\n    // Output results\n    match format.as_str() {\n        \"json\" =\u003e output_json(\u0026results)?,\n        \"sarif\" =\u003e output_sarif(\u0026results)?,\n        _ =\u003e output_pretty(\u0026results, \u0026files)?,\n    }\n\n    // Exit code\n    if !exit_zero \u0026\u0026 results.secrets_found \u003e 0 {\n        std::process::exit(1);\n    }\n\n    Ok(())\n}\n\n/// Collect files to scan\nfn collect_files(paths: \u0026[String], exclude: \u0026[String]) -\u003e Result\u003cVec\u003cPathBuf\u003e\u003e {\n    let mut files = Vec::new();\n\n    for path_str in paths {\n        let path = Path::new(path_str);\n\n        if path.is_file() {\n            if !should_exclude(path, exclude) {\n                files.push(path.to_path_buf());\n            }\n        } else if path.is_dir() {\n            for entry in WalkDir::new(path)\n                .follow_links(false)\n                .into_iter()\n                .filter_map(|e| e.ok())\n            {\n                let entry_path = entry.path();\n                if entry_path.is_file() \u0026\u0026 !should_exclude(entry_path, exclude) {\n                    // Only scan text-like files\n                    if is_scannable_file(entry_path) {\n                        files.push(entry_path.to_path_buf());\n                    }\n                }\n            }\n        }\n    }\n\n    Ok(files)\n}\n\n/// Check if a file should be excluded\nfn should_exclude(path: \u0026Path, exclude: \u0026[String]) -\u003e bool {\n    let path_str = path.to_string_lossy();\n\n    for pattern in exclude {\n        // Simple glob matching\n        if pattern.contains('*') {\n            let pattern = pattern.replace('*', \"\");\n            if path_str.contains(\u0026pattern) {\n                return true;\n            }\n        } else if path_str.contains(pattern) {\n            return true;\n        }\n    }\n\n    // Always exclude common non-secret files\n    let always_exclude = [\n        \".git/\",\n        \"node_modules/\",\n        \"target/\",\n        \"dist/\",\n        \"build/\",\n        \".env.example\",\n        \".env.sample\",\n        \".env.template\",\n    ];\n\n    for pattern in \u0026always_exclude {\n        if path_str.contains(pattern) {\n            return true;\n        }\n    }\n\n    false\n}\n\n/// Check if a file is scannable (text-based)\nfn is_scannable_file(path: \u0026Path) -\u003e bool {\n    let scannable_extensions = [\n        \"env\",\n        \"txt\",\n        \"sh\",\n        \"bash\",\n        \"zsh\",\n        \"py\",\n        \"js\",\n        \"ts\",\n        \"rs\",\n        \"go\",\n        \"java\",\n        \"rb\",\n        \"php\",\n        \"yml\",\n        \"yaml\",\n        \"json\",\n        \"toml\",\n        \"xml\",\n        \"conf\",\n        \"config\",\n        \"ini\",\n        \"properties\",\n    ];\n\n    if let Some(ext) = path.extension() {\n        let ext_str = ext.to_string_lossy().to_lowercase();\n        if scannable_extensions.contains(\u0026ext_str.as_str()) {\n            return true;\n        }\n    }\n\n    // Files without extensions (Dockerfile, Makefile, etc.)\n    if path.extension().is_none() {\n        if let Some(name) = path.file_name() {\n            let name_str = name.to_string_lossy();\n            if name_str.starts_with(\".env\")\n                || name_str == \"Dockerfile\"\n                || name_str == \"Makefile\"\n                || name_str == \"docker-compose.yml\"\n            {\n                return true;\n            }\n        }\n    }\n\n    false\n}\n\n/// Scan a single file for secrets\nfn scan_file(path: \u0026Path, results: \u0026mut ScanResults, ignore_placeholders: bool) -\u003e Result\u003c()\u003e {\n    let content = match fs::read_to_string(path) {\n        Ok(c) =\u003e c,\n        Err(_) =\u003e return Ok(()), // Skip binary files\n    };\n\n    // If it's a .env file, parse it properly\n    if path.to_string_lossy().contains(\".env\") {\n        scan_env_file(path, \u0026content, results, ignore_placeholders)?;\n    } else {\n        // Scan line by line for secrets\n        scan_text_file(path, \u0026content, results, ignore_placeholders)?;\n    }\n\n    Ok(())\n}\n\n/// Scan a .env file using the parser\nfn scan_env_file(\n    path: \u0026Path,\n    content: \u0026str,\n    results: \u0026mut ScanResults,\n    ignore_placeholders: bool,\n) -\u003e Result\u003c()\u003e {\n    let parser = Parser::default();\n    let _vars = match parser.parse_content(content) {\n        Ok(v) =\u003e v,\n        Err(_) =\u003e return Ok(()), // Skip invalid files\n    };\n\n    for (line_num, line) in content.lines().enumerate() {\n        let line_num = line_num + 1;\n\n        // Skip comments and empty lines\n        if line.trim().is_empty() || line.trim().starts_with('#') {\n            continue;\n        }\n\n        // Extract key=value\n        if let Some((key, value)) = line.split_once('=') {\n            let key = key.trim().trim_start_matches(\"export\").trim();\n            let value = value.trim();\n\n            if let Some((pattern, confidence, action_url)) = detect_secret(value, key) {\n                // Skip if ignoring placeholders and this is one\n                if ignore_placeholders \u0026\u0026 crate::utils::patterns::is_placeholder(value) {\n                    continue;\n                }\n\n                let finding = Finding {\n                    pattern: pattern.clone(),\n                    confidence: format!(\"{}\", confidence),\n                    value_preview: truncate_value(value),\n                    location: format!(\"{}:{} ({})\", path.display(), line_num, key),\n                    variable: Some(key.to_string()),\n                    action_url,\n                };\n\n                results.findings.push(finding);\n                results.secrets_found += 1;\n\n                match confidence {\n                    Confidence::High =\u003e results.high_confidence += 1,\n                    Confidence::Medium =\u003e results.medium_confidence += 1,\n                    Confidence::Low =\u003e results.low_confidence += 1,\n                }\n            }\n        }\n    }\n\n    Ok(())\n}\n\n/// Scan a text file line by line\nfn scan_text_file(\n    path: \u0026Path,\n    content: \u0026str,\n    results: \u0026mut ScanResults,\n    ignore_placeholders: bool,\n) -\u003e Result\u003c()\u003e {\n    for (line_num, line) in content.lines().enumerate() {\n        let line_num = line_num + 1;\n\n        // Try to detect secrets in the line\n        // Split by common separators to find tokens\n        let tokens: Vec\u003c\u0026str\u003e = line\n            .split(|c: char| c.is_whitespace() || c == '=' || c == ':' || c == '\"' || c == '\\'')\n            .filter(|t| t.len() \u003e 20) // Only check reasonably long tokens\n            .collect();\n\n        for token in tokens {\n            if let Some((pattern, confidence, action_url)) = detect_secret(token, \"\") {\n                if ignore_placeholders \u0026\u0026 crate::utils::patterns::is_placeholder(token) {\n                    continue;\n                }\n\n                let finding = Finding {\n                    pattern: pattern.clone(),\n                    confidence: format!(\"{}\", confidence),\n                    value_preview: truncate_value(token),\n                    location: format!(\"{}:{}\", path.display(), line_num),\n                    variable: None,\n                    action_url,\n                };\n\n                results.findings.push(finding);\n                results.secrets_found += 1;\n\n                match confidence {\n                    Confidence::High =\u003e results.high_confidence += 1,\n                    Confidence::Medium =\u003e results.medium_confidence += 1,\n                    Confidence::Low =\u003e results.low_confidence += 1,\n                }\n            }\n        }\n    }\n\n    Ok(())\n}\n\n/// Truncate a value for display (show first and last few chars)\nconst PREFIX_LEN: usize = 8;\nconst SUFFIX_LEN: usize = 5;\nconst MAX_VISIBLE: usize = 20;\n\nfn truncate_value(value: \u0026str) -\u003e String {\n    if value.len() \u003c= MAX_VISIBLE {\n        value.to_string()\n    } else {\n        format!(\n            \"{}...{}\",\n            \u0026value[..PREFIX_LEN],\n            \u0026value[value.len() - SUFFIX_LEN..]\n        )\n    }\n}\n\n/// Output results in pretty format\nfn output_pretty(results: \u0026ScanResults, files: \u0026[PathBuf]) -\u003e Result\u003c()\u003e {\n    println!(\n        \"Scanning: {}\",\n        files\n            .iter()\n            .take(3)\n            .map(|f| f.display().to_string())\n            .collect::\u003cVec\u003c_\u003e\u003e()\n            .join(\", \")\n    );\n    if files.len() \u003e 3 {\n        println!(\"  ... and {} more files\", files.len() - 3);\n    }\n    println!();\n\n    if results.secrets_found == 0 {\n        println!(\"{} No secrets detected\", \"✓\".green());\n        println!(\"\\nScanned {} files\", results.files_scanned);\n        return Ok(());\n    }\n\n    println!(\n        \"{} Found {} potential secrets\\n\",\n        \"✗\".red(),\n        results.secrets_found\n    );\n\n    println!(\"{}\", \"Secrets detected:\".bold());\n    for (i, finding) in results.findings.iter().enumerate() {\n        let icon = match finding.confidence.as_str() {\n            \"high\" =\u003e \"🚨\",\n            \"medium\" =\u003e \"⚠️ \",\n            _ =\u003e \"ℹ️ \",\n        };\n\n        println!(\n            \"  {}. {} {} ({} confidence)\",\n            i + 1,\n            icon,\n            finding.pattern.bold(),\n            finding.confidence\n        );\n        println!(\"     Pattern: {}\", finding.pattern);\n        println!(\"     Value: {}\", finding.value_preview.dimmed());\n        println!(\"     Location: {}\", finding.location);\n\n        if finding.confidence == \"high\" {\n            println!(\n                \"     {}\",\n                \"This looks like a real secret, not a placeholder.\".yellow()\n            );\n        }\n\n        if let Some(url) = \u0026finding.action_url {\n            println!(\"     Action: Revoke immediately at {}\", url.cyan());\n        }\n        println!();\n    }\n\n    println!(\"{}\", \"Summary:\".bold());\n    println!(\"  🚨 {} high-confidence secrets\", results.high_confidence);\n    println!(\n        \"  ⚠️  {} medium-confidence secrets\",\n        results.medium_confidence\n    );\n    if results.low_confidence \u003e 0 {\n        println!(\"  ℹ️ {} low-confidence detections\", results.low_confidence);\n    }\n\n    println!(\n        \"\\n  {}\",\n        \"Recommendation: These should NOT be committed to Git.\"\n            .yellow()\n            .bold()\n    );\n\n    if results.high_confidence \u003e 0 || results.medium_confidence \u003e 0 {\n        println!(\"\\n  If already committed:\");\n        println!(\"    1. Revoke/rotate all keys immediately\");\n        println!(\"    2. Run: git filter-repo --path .env --invert-paths\");\n        println!(\"    3. Force push (after team coordination)\");\n    }\n\n    Ok(())\n}\n\n/// Output results in JSON format\nfn output_json(results: \u0026ScanResults) -\u003e Result\u003c()\u003e {\n    let json = serde_json::to_string_pretty(results)?;\n    println!(\"{}\", json);\n    Ok(())\n}\n\n/// Output results in SARIF format (for GitHub Code Scanning)\nfn output_sarif(results: \u0026ScanResults) -\u003e Result\u003c()\u003e {\n    let sarif_results: Vec\u003cserde_json::Value\u003e = results\n        .findings\n        .iter()\n        .map(|f| {\n            let level = match f.confidence.as_str() {\n                \"high\" =\u003e \"error\",\n                \"medium\" =\u003e \"warning\",\n                _ =\u003e \"note\",\n            };\n\n            // Parse location to extract file and line\n            let parts: Vec\u003c\u0026str\u003e = f.location.split(':').collect();\n            let file = parts.first().unwrap_or(\u0026\"unknown\");\n            let line: usize = parts.get(1).and_then(|s| s.parse().ok()).unwrap_or(1);\n\n            serde_json::json!({\n                \"ruleId\": format!(\"secret/{}\", f.pattern.to_lowercase().replace(' ', \"-\")),\n                \"level\": level,\n                \"message\": {\n                    \"text\": format!(\"{} detected\", f.pattern)\n                },\n                \"locations\": [{\n                    \"physicalLocation\": {\n                        \"artifactLocation\": { \"uri\": file },\n                        \"region\": { \"startLine\": line }\n                    }\n                }]\n            })\n        })\n        .collect();\n\n    let sarif = serde_json::json!({\n        \"version\": \"2.1.0\",\n        \"$schema\": \"https://json.schemastore.org/sarif-2.1.0.json\",\n        \"runs\": [{\n            \"tool\": {\n                \"driver\": {\n                    \"name\": \"evnx scan\",\n                    \"version\": env!(\"CARGO_PKG_VERSION\")\n                }\n            },\n            \"results\": sarif_results\n        }]\n    });\n\n    println!(\"{}\", serde_json::to_string_pretty(\u0026sarif)?);\n    Ok(())\n}\n\n#[cfg(test)]\nmod tests {\n    use super::*;\n\n    #[test]\n    fn test_truncate_value() {\n        assert_eq!(truncate_value(\"short\"), \"short\");\n        assert_eq!(\n            truncate_value(\"this_is_a_very_long_secret_key_value_12345678\"),\n            \"this_is_...45678\"\n        );\n    }\n\n    #[test]\n    fn test_is_scannable_file() {\n        assert!(is_scannable_file(Path::new(\".env\")));\n        assert!(is_scannable_file(Path::new(\"config.py\")));\n        assert!(is_scannable_file(Path::new(\"Dockerfile\")));\n        assert!(!is_scannable_file(Path::new(\"image.png\")));\n    }\n\n    #[test]\n    fn test_should_exclude() {\n        assert!(should_exclude(Path::new(\".env.example\"), \u0026[]));\n        assert!(should_exclude(Path::new(\"node_modules/package.json\"), \u0026[]));\n        assert!(!should_exclude(Path::new(\".env\"), \u0026[]));\n\n        assert!(should_exclude(Path::new(\"test.py\"), \u0026[\"test*\".to_string()]));\n    }\n}\n","traces":[{"line":40,"address":[5820480,5823771,5823690],"length":1,"stats":{"Line":0}},{"line":49,"address":[5856842],"length":1,"stats":{"Line":0}},{"line":50,"address":[5856880,5856963],"length":1,"stats":{"Line":0}},{"line":53,"address":[5856846],"length":1,"stats":{"Line":0}},{"line":57,"address":[5857328],"length":1,"stats":{"Line":0}},{"line":61,"address":[5857487],"length":1,"stats":{"Line":0}},{"line":67,"address":[5857693,5860048],"length":1,"stats":{"Line":0}},{"line":69,"address":[5858046],"length":1,"stats":{"Line":0}},{"line":70,"address":[5858080,5858159],"length":1,"stats":{"Line":0}},{"line":74,"address":[5858050],"length":1,"stats":{"Line":0}},{"line":76,"address":[5858276],"length":1,"stats":{"Line":0}},{"line":83,"address":[5858391,5858486],"length":1,"stats":{"Line":0}},{"line":84,"address":[5858607],"length":1,"stats":{"Line":0}},{"line":85,"address":[5859650],"length":1,"stats":{"Line":0}},{"line":87,"address":[5859846,5859622],"length":1,"stats":{"Line":0}},{"line":91,"address":[5858628],"length":1,"stats":{"Line":0}},{"line":92,"address":[5822882,5823269,5822397,5822486],"length":1,"stats":{"Line":0}},{"line":93,"address":[5859073,5858852,5858744,5858803],"length":1,"stats":{"Line":0}},{"line":94,"address":[5859035,5858809,5858894],"length":1,"stats":{"Line":0}},{"line":98,"address":[5859304,5859017],"length":1,"stats":{"Line":0}},{"line":99,"address":[5859346],"length":1,"stats":{"Line":0}},{"line":102,"address":[5859315],"length":1,"stats":{"Line":0}},{"line":106,"address":[5807400,5807477,5806240],"length":1,"stats":{"Line":0}},{"line":107,"address":[5806326],"length":1,"stats":{"Line":0}},{"line":109,"address":[5842598,5842511],"length":1,"stats":{"Line":0}},{"line":110,"address":[5842833,5842698],"length":1,"stats":{"Line":0}},{"line":112,"address":[5842865],"length":1,"stats":{"Line":0}},{"line":113,"address":[5842935,5843610],"length":1,"stats":{"Line":0}},{"line":114,"address":[5843630],"length":1,"stats":{"Line":0}},{"line":116,"address":[5842900,5842953],"length":1,"stats":{"Line":0}},{"line":117,"address":[5843198,5842972,5843074],"length":1,"stats":{"Line":0}},{"line":118,"address":[5842991],"length":1,"stats":{"Line":0}},{"line":119,"address":[5806844],"length":1,"stats":{"Line":0}},{"line":120,"address":[5843047],"length":1,"stats":{"Line":0}},{"line":122,"address":[5843388,5843283],"length":1,"stats":{"Line":0}},{"line":123,"address":[5843487,5843420],"length":1,"stats":{"Line":0}},{"line":125,"address":[5843518],"length":1,"stats":{"Line":0}},{"line":126,"address":[5843549],"length":1,"stats":{"Line":0}},{"line":133,"address":[5842732],"length":1,"stats":{"Line":0}},{"line":137,"address":[5817328,5818505,5818499],"length":1,"stats":{"Line":1}},{"line":138,"address":[5853640],"length":1,"stats":{"Line":1}},{"line":140,"address":[5853661,5853748],"length":1,"stats":{"Line":2}},{"line":142,"address":[5853862,5854399],"length":1,"stats":{"Line":2}},{"line":143,"address":[5818218,5818300],"length":1,"stats":{"Line":2}},{"line":144,"address":[5854670,5854587],"length":1,"stats":{"Line":2}},{"line":145,"address":[5854725],"length":1,"stats":{"Line":1}},{"line":147,"address":[5854429,5854703,5854501,5854733,5854616],"length":1,"stats":{"Line":1}},{"line":148,"address":[5854529],"length":1,"stats":{"Line":0}},{"line":153,"address":[5853888],"length":1,"stats":{"Line":1}},{"line":164,"address":[5854104],"length":1,"stats":{"Line":1}},{"line":165,"address":[5854248,5854331],"length":1,"stats":{"Line":2}},{"line":166,"address":[5818111],"length":1,"stats":{"Line":1}},{"line":170,"address":[5854277],"length":1,"stats":{"Line":1}},{"line":174,"address":[5855232,5856323,5856329],"length":1,"stats":{"Line":1}},{"line":175,"address":[5855265],"length":1,"stats":{"Line":1}},{"line":200,"address":[5855853],"length":1,"stats":{"Line":1}},{"line":201,"address":[5855951,5856041],"length":1,"stats":{"Line":1}},{"line":202,"address":[5856185],"length":1,"stats":{"Line":1}},{"line":203,"address":[5856290],"length":1,"stats":{"Line":1}},{"line":208,"address":[5855992],"length":1,"stats":{"Line":1}},{"line":209,"address":[5856359],"length":1,"stats":{"Line":1}},{"line":210,"address":[5856457],"length":1,"stats":{"Line":1}},{"line":211,"address":[5856467,5856542],"length":1,"stats":{"Line":2}},{"line":212,"address":[5856579,5856633],"length":1,"stats":{"Line":2}},{"line":213,"address":[5856639],"length":1,"stats":{"Line":0}},{"line":214,"address":[5856675],"length":1,"stats":{"Line":0}},{"line":216,"address":[5856605],"length":1,"stats":{"Line":1}},{"line":221,"address":[5856342],"length":1,"stats":{"Line":1}},{"line":225,"address":[5861170,5860128,5861164],"length":1,"stats":{"Line":0}},{"line":226,"address":[5860204],"length":1,"stats":{"Line":0}},{"line":227,"address":[5860313],"length":1,"stats":{"Line":0}},{"line":228,"address":[5860255],"length":1,"stats":{"Line":0}},{"line":232,"address":[5860537,5860486],"length":1,"stats":{"Line":0}},{"line":233,"address":[5860950,5861151],"length":1,"stats":{"Line":0}},{"line":236,"address":[5860703,5860915],"length":1,"stats":{"Line":0}},{"line":239,"address":[5824534],"length":1,"stats":{"Line":0}},{"line":243,"address":[5850959,5851104,5847984],"length":1,"stats":{"Line":0}},{"line":249,"address":[5811882],"length":1,"stats":{"Line":0}},{"line":250,"address":[5848128],"length":1,"stats":{"Line":0}},{"line":251,"address":[5812023],"length":1,"stats":{"Line":0}},{"line":252,"address":[5848181],"length":1,"stats":{"Line":0}},{"line":255,"address":[5848410,5848359],"length":1,"stats":{"Line":0}},{"line":256,"address":[5812394,5812481,5812512],"length":1,"stats":{"Line":0}},{"line":259,"address":[5812489,5812548],"length":1,"stats":{"Line":0}},{"line":264,"address":[5848909],"length":1,"stats":{"Line":0}},{"line":265,"address":[5812829],"length":1,"stats":{"Line":0}},{"line":266,"address":[5812976],"length":1,"stats":{"Line":0}},{"line":268,"address":[5813035],"length":1,"stats":{"Line":0}},{"line":270,"address":[5849544,5849455,5849604],"length":1,"stats":{"Line":0}},{"line":275,"address":[5813284],"length":1,"stats":{"Line":0}},{"line":276,"address":[5813413,5813477],"length":1,"stats":{"Line":0}},{"line":277,"address":[5813595],"length":1,"stats":{"Line":0}},{"line":278,"address":[5813730,5813662],"length":1,"stats":{"Line":0}},{"line":279,"address":[5850325,5850238],"length":1,"stats":{"Line":0}},{"line":283,"address":[5850589],"length":1,"stats":{"Line":0}},{"line":284,"address":[5814454,5814381],"length":1,"stats":{"Line":0}},{"line":286,"address":[5814419],"length":1,"stats":{"Line":0}},{"line":287,"address":[5850822,5850720],"length":1,"stats":{"Line":0}},{"line":288,"address":[5850892,5850751],"length":1,"stats":{"Line":0}},{"line":289,"address":[5850932,5850782],"length":1,"stats":{"Line":0}},{"line":295,"address":[5848634],"length":1,"stats":{"Line":0}},{"line":299,"address":[5817312,5814912,5817167],"length":1,"stats":{"Line":0}},{"line":305,"address":[5851264,5851355],"length":1,"stats":{"Line":0}},{"line":306,"address":[5851466,5851514,5851668],"length":1,"stats":{"Line":0}},{"line":311,"address":[6094064,6094092],"length":1,"stats":{"Line":0}},{"line":312,"address":[5580368,5580382],"length":1,"stats":{"Line":0}},{"line":315,"address":[5851580,5851681,5851764],"length":1,"stats":{"Line":0}},{"line":316,"address":[5815644,5815670],"length":1,"stats":{"Line":0}},{"line":317,"address":[5852216,5852156,5852067],"length":1,"stats":{"Line":0}},{"line":322,"address":[5852119],"length":1,"stats":{"Line":0}},{"line":323,"address":[5852252,5852320],"length":1,"stats":{"Line":0}},{"line":324,"address":[5816199],"length":1,"stats":{"Line":0}},{"line":325,"address":[5816266,5816334],"length":1,"stats":{"Line":0}},{"line":330,"address":[5853041],"length":1,"stats":{"Line":0}},{"line":331,"address":[5853141,5853068],"length":1,"stats":{"Line":0}},{"line":333,"address":[5853106],"length":1,"stats":{"Line":0}},{"line":334,"address":[5853273,5853171],"length":1,"stats":{"Line":0}},{"line":335,"address":[5816959,5817100],"length":1,"stats":{"Line":0}},{"line":336,"address":[5853383,5853233],"length":1,"stats":{"Line":0}},{"line":350,"address":[5818528],"length":1,"stats":{"Line":1}},{"line":351,"address":[5818587],"length":1,"stats":{"Line":1}},{"line":352,"address":[5818693],"length":1,"stats":{"Line":1}},{"line":354,"address":[5818748],"length":1,"stats":{"Line":1}},{"line":356,"address":[5818608],"length":1,"stats":{"Line":1}},{"line":357,"address":[5854975,5854905,5855197],"length":1,"stats":{"Line":2}},{"line":363,"address":[5844898,5844892,5843696],"length":1,"stats":{"Line":0}},{"line":364,"address":[6094003,6093968],"length":1,"stats":{"Line":0}},{"line":373,"address":[5844205],"length":1,"stats":{"Line":0}},{"line":374,"address":[5844278],"length":1,"stats":{"Line":0}},{"line":376,"address":[5808003],"length":1,"stats":{"Line":0}},{"line":378,"address":[5808046],"length":1,"stats":{"Line":0}},{"line":379,"address":[5844450,5844628],"length":1,"stats":{"Line":0}},{"line":380,"address":[5844763],"length":1,"stats":{"Line":0}},{"line":381,"address":[5844864],"length":1,"stats":{"Line":0}},{"line":384,"address":[5844525],"length":1,"stats":{"Line":0}},{"line":390,"address":[5845081],"length":1,"stats":{"Line":0}},{"line":391,"address":[5845387,5845282],"length":1,"stats":{"Line":0}},{"line":392,"address":[5809277],"length":1,"stats":{"Line":0}},{"line":393,"address":[5810319,5809302],"length":1,"stats":{"Line":0}},{"line":394,"address":[5810377,5810296],"length":1,"stats":{"Line":0}},{"line":395,"address":[5810348],"length":1,"stats":{"Line":0}},{"line":398,"address":[5846701,5846793],"length":1,"stats":{"Line":0}},{"line":405,"address":[5847057],"length":1,"stats":{"Line":0}},{"line":406,"address":[5810941],"length":1,"stats":{"Line":0}},{"line":407,"address":[5847352],"length":1,"stats":{"Line":0}},{"line":409,"address":[5847458],"length":1,"stats":{"Line":0}},{"line":410,"address":[5847537],"length":1,"stats":{"Line":0}},{"line":416,"address":[5811527,5811270],"length":1,"stats":{"Line":0}},{"line":417,"address":[5811535,5811637],"length":1,"stats":{"Line":0}},{"line":419,"address":[5811597],"length":1,"stats":{"Line":0}},{"line":422,"address":[5845545],"length":1,"stats":{"Line":0}},{"line":423,"address":[5809533],"length":1,"stats":{"Line":0}},{"line":424,"address":[5809642],"length":1,"stats":{"Line":0}},{"line":428,"address":[5809751],"length":1,"stats":{"Line":0}},{"line":429,"address":[5809862],"length":1,"stats":{"Line":0}},{"line":432,"address":[5846181,5846037],"length":1,"stats":{"Line":0}},{"line":439,"address":[5846316],"length":1,"stats":{"Line":0}},{"line":440,"address":[5846342],"length":1,"stats":{"Line":0}},{"line":441,"address":[5846377],"length":1,"stats":{"Line":0}},{"line":442,"address":[5846412],"length":1,"stats":{"Line":0}},{"line":443,"address":[5810234],"length":1,"stats":{"Line":0}},{"line":446,"address":[5846482],"length":1,"stats":{"Line":0}},{"line":450,"address":[5803079,5803085,5802752],"length":1,"stats":{"Line":0}},{"line":451,"address":[5838850],"length":1,"stats":{"Line":0}},{"line":452,"address":[5802977,5802909],"length":1,"stats":{"Line":0}},{"line":453,"address":[5839129],"length":1,"stats":{"Line":0}},{"line":457,"address":[5842150,5839184,5842376],"length":1,"stats":{"Line":0}},{"line":458,"address":[5839199],"length":1,"stats":{"Line":0}},{"line":461,"address":[5579925,5580134,5575568],"length":1,"stats":{"Line":0}},{"line":462,"address":[5575626],"length":1,"stats":{"Line":0}},{"line":463,"address":[6089429,6089369],"length":1,"stats":{"Line":0}},{"line":464,"address":[6089487,6089406],"length":1,"stats":{"Line":0}},{"line":465,"address":[6089458],"length":1,"stats":{"Line":0}},{"line":469,"address":[5575890],"length":1,"stats":{"Line":0}},{"line":470,"address":[6089593,6089680],"length":1,"stats":{"Line":0}},{"line":471,"address":[5580169,5576093,5580160],"length":1,"stats":{"Line":0}},{"line":473,"address":[6089875,6091250,6091082,6093637,6091891,6090424,6092183,6090397,6093609,6090919,6089997,6091676,6092536,6092691,6092031,6091223,6090709],"length":1,"stats":{"Line":0}},{"line":474,"address":[6090048,6089980],"length":1,"stats":{"Line":0}},{"line":477,"address":[6091055,6091123],"length":1,"stats":{"Line":0}},{"line":489,"address":[5842195,5840266,5839482,5839697,5840635,5840126,5839372,5839324,5840417,5839911,5841146],"length":1,"stats":{"Line":0}},{"line":503,"address":[5841699,5842161,5841764],"length":1,"stats":{"Line":0}},{"line":504,"address":[5842101],"length":1,"stats":{"Line":0}}],"covered":32,"coverable":182},{"path":["/","home","ajit","Documents","dotenv-space-cli","src","commands","sync.rs"],"content":"/// Sync command - keep .env and .env.example in sync\n///\n/// Helps maintain consistency between development and template files\nuse anyhow::{Context, Result};\nuse colored::*;\nuse dialoguer::{Confirm, Input, MultiSelect, Select};\nuse std::collections::HashSet;\nuse std::fs;\n\nuse crate::core::Parser;\n\npub fn run(direction: String, placeholder: bool, verbose: bool) -\u003e Result\u003c()\u003e {\n    if verbose {\n        println!(\"{}\", \"Running sync in verbose mode\".dimmed());\n    }\n\n    println!(\n        \"\\n{}\",\n        \"┌─ Sync .env ↔ .env.example ──────────────────────────┐\".cyan()\n    );\n    println!(\n        \"{}\\n\",\n        \"└──────────────────────────────────────────────────────┘\".cyan()\n    );\n\n    match direction.as_str() {\n        \"forward\" =\u003e sync_forward(placeholder, verbose),\n        \"reverse\" =\u003e sync_reverse(placeholder, verbose),\n        _ =\u003e {\n            eprintln!(\"{} Invalid direction: {}\", \"✗\".red(), direction);\n            eprintln!(\"Valid directions: forward, reverse\");\n            std::process::exit(1);\n        }\n    }\n}\n\n/// Sync .env → .env.example (add new vars to example)\nfn sync_forward(use_placeholders: bool, _verbose: bool) -\u003e Result\u003c()\u003e {\n    // Parse both files\n    let parser = Parser::default();\n\n    let env_file = parser.parse_file(\".env\").context(\"Failed to parse .env\")?;\n\n    let example_file = match parser.parse_file(\".env.example\") {\n        Ok(f) =\u003e f,\n        Err(_) =\u003e {\n            println!(\"{} .env.example not found, creating from .env\", \"ℹ️\".cyan());\n\n            if use_placeholders {\n                convert_to_example(\u0026env_file.vars)?;\n            } else {\n                fs::copy(\".env\", \".env.example\")?;\n            }\n\n            println!(\"{} Created .env.example\", \"✓\".green());\n            return Ok(());\n        }\n    };\n\n    // Find variables in .env but not in .env.example\n    let env_keys: HashSet\u003c_\u003e = env_file.vars.keys().collect();\n    let example_keys: HashSet\u003c_\u003e = example_file.vars.keys().collect();\n\n    let missing: Vec\u003c_\u003e = env_keys.difference(\u0026example_keys).cloned().collect();\n\n    if missing.is_empty() {\n        println!(\"{} .env.example is up to date\", \"✓\".green());\n        return Ok(());\n    }\n\n    println!(\n        \"{}\",\n        \"Found variables in .env that are missing from .env.example:\".bold()\n    );\n    for key in \u0026missing {\n        println!(\"  • {}\", key.yellow());\n    }\n    println!();\n\n    // Ask how to add them\n    let choices = vec![\n        \"Yes, add with placeholder values\",\n        \"Yes, add with actual values (not recommended)\",\n        \"Let me choose individually\",\n        \"No, skip\",\n    ];\n\n    let selection = Select::new()\n        .with_prompt(\"Add these to .env.example?\")\n        .items(\u0026choices)\n        .default(0)\n        .interact()?;\n\n    match selection {\n        0 =\u003e add_with_placeholders(\u0026missing, \u0026env_file.vars)?,\n        1 =\u003e add_with_actual_values(\u0026missing, \u0026env_file.vars)?,\n        2 =\u003e add_interactively(\u0026missing, \u0026env_file.vars)?,\n        3 =\u003e {\n            println!(\"{} No changes made\", \"ℹ️\".cyan());\n            return Ok(());\n        }\n        _ =\u003e unreachable!(),\n    }\n\n    // Optionally add a comment\n    if Confirm::new()\n        .with_prompt(\"Add a comment explaining these variables?\")\n        .default(true)\n        .interact()?\n    {\n        let comment: String = Input::new()\n            .with_prompt(\"Comment\")\n            .default(\"Additional configuration\".to_string())\n            .interact_text()?;\n\n        let mut content = fs::read_to_string(\".env.example\")?;\n        content.push_str(\u0026format!(\"\\n# {}\\n\", comment));\n        fs::write(\".env.example\", content)?;\n    }\n\n    println!(\"\\n{} Updated .env.example\", \"✓\".green());\n    println!(\"{} Added {} variables\", \"✓\".green(), missing.len());\n    println!(\"\\n{}\", \"Remember to commit .env.example to Git.\".yellow());\n\n    Ok(())\n}\n\n/// Sync .env.example → .env (add missing vars to .env)\nfn sync_reverse(_use_placeholders: bool, _verbose: bool) -\u003e Result\u003c()\u003e {\n    let parser = Parser::default();\n\n    let example_file = parser\n        .parse_file(\".env.example\")\n        .context(\"Failed to parse .env.example\")?;\n\n    let env_file = match parser.parse_file(\".env\") {\n        Ok(f) =\u003e f,\n        Err(_) =\u003e {\n            println!(\"{} .env not found, creating from .env.example\", \"ℹ️\".cyan());\n            fs::copy(\".env.example\", \".env\")?;\n            println!(\"{} Created .env\", \"✓\".green());\n            println!(\n                \"\\n{}\",\n                \"Replace placeholder values with real credentials!\"\n                    .yellow()\n                    .bold()\n            );\n            return Ok(());\n        }\n    };\n\n    // Find variables in .env.example but not in .env\n    let env_keys: HashSet\u003c_\u003e = env_file.vars.keys().collect();\n    let example_keys: HashSet\u003c_\u003e = example_file.vars.keys().collect();\n\n    let missing: Vec\u003c_\u003e = example_keys.difference(\u0026env_keys).cloned().collect();\n\n    if missing.is_empty() {\n        println!(\"{} .env is up to date\", \"✓\".green());\n        return Ok(());\n    }\n\n    println!(\n        \"{}\",\n        \"Found variables in .env.example that are missing from .env:\".bold()\n    );\n    for key in \u0026missing {\n        println!(\"  • {}\", key.yellow());\n    }\n    println!();\n\n    // Ask how to add them\n    let choices = vec![\n        \"Yes, with placeholder values\",\n        \"Yes, prompt me for real values\",\n        \"Let me choose individually\",\n        \"No, skip\",\n    ];\n\n    let selection = Select::new()\n        .with_prompt(\"Add to .env?\")\n        .items(\u0026choices)\n        .default(0)\n        .interact()?;\n\n    match selection {\n        0 =\u003e {\n            // Add with placeholder values\n            let mut content = fs::read_to_string(\".env\")?;\n            content.push_str(\"\\n# Synced from .env.example\\n\");\n            for key in \u0026missing {\n                if let Some(value) = example_file.vars.get(*key) {\n                    content.push_str(\u0026format!(\"{}={}\\n\", key, value));\n                }\n            }\n            fs::write(\".env\", content)?;\n        }\n        1 =\u003e {\n            // Prompt for real values\n            let mut content = fs::read_to_string(\".env\")?;\n            content.push_str(\"\\n# Synced from .env.example\\n\");\n            for key in \u0026missing {\n                let example_value = example_file\n                    .vars\n                    .get(*key)\n                    .map(|s| s.as_str())\n                    .unwrap_or(\"\");\n\n                let value: String = Input::new()\n                    .with_prompt(format!(\"Value for {}\", key))\n                    .default(example_value.to_string())\n                    .interact_text()?;\n\n                content.push_str(\u0026format!(\"{}={}\\n\", key, value));\n            }\n            fs::write(\".env\", content)?;\n        }\n        2 =\u003e {\n            // Choose individually\n            let selected = MultiSelect::new()\n                .with_prompt(\"Select variables to add\")\n                .items(\u0026missing)\n                .interact()?;\n\n            let mut content = fs::read_to_string(\".env\")?;\n            content.push_str(\"\\n# Synced from .env.example\\n\");\n            for \u0026idx in \u0026selected {\n                let key = missing[idx];\n                if let Some(value) = example_file.vars.get(key) {\n                    content.push_str(\u0026format!(\"{}={}\\n\", key, value));\n                }\n            }\n            fs::write(\".env\", content)?;\n        }\n        3 =\u003e {\n            println!(\"{} No changes made\", \"ℹ️\".cyan());\n            return Ok(());\n        }\n        _ =\u003e unreachable!(),\n    }\n\n    println!(\"\\n{} Updated .env\", \"✓\".green());\n    println!(\"{} Added {} variables\", \"✓\".green(), missing.len());\n\n    Ok(())\n}\n\n/// Add variables with placeholder values\nfn add_with_placeholders(\n    keys: \u0026[\u0026String],\n    values: \u0026std::collections::HashMap\u003cString, String\u003e,\n) -\u003e Result\u003c()\u003e {\n    let mut content = fs::read_to_string(\".env.example\")?;\n    content.push_str(\"\\n# Synced from .env\\n\");\n\n    for key in keys {\n        let placeholder = generate_placeholder(key, values.get(*key));\n        content.push_str(\u0026format!(\"{}={}\\n\", key, placeholder));\n    }\n\n    fs::write(\".env.example\", content)?;\n    Ok(())\n}\n\n/// Add variables with actual values\nfn add_with_actual_values(\n    keys: \u0026[\u0026String],\n    values: \u0026std::collections::HashMap\u003cString, String\u003e,\n) -\u003e Result\u003c()\u003e {\n    let mut content = fs::read_to_string(\".env.example\")?;\n    content.push_str(\"\\n# Synced from .env\\n\");\n\n    for key in keys {\n        if let Some(value) = values.get(*key) {\n            content.push_str(\u0026format!(\"{}={}\\n\", key, value));\n        }\n    }\n\n    fs::write(\".env.example\", content)?;\n    Ok(())\n}\n\n/// Add variables interactively\nfn add_interactively(\n    keys: \u0026[\u0026String],\n    values: \u0026std::collections::HashMap\u003cString, String\u003e,\n) -\u003e Result\u003c()\u003e {\n    let selected = MultiSelect::new()\n        .with_prompt(\"Select variables to add\")\n        .items(keys)\n        .interact()?;\n\n    let mut content = fs::read_to_string(\".env.example\")?;\n    content.push_str(\"\\n# Synced from .env\\n\");\n\n    for \u0026idx in \u0026selected {\n        let key = keys[idx];\n        let placeholder = generate_placeholder(key, values.get(key));\n        content.push_str(\u0026format!(\"{}={}\\n\", key, placeholder));\n    }\n\n    fs::write(\".env.example\", content)?;\n    Ok(())\n}\n\n/// Convert actual values to placeholders for .env.example\nfn convert_to_example(vars: \u0026std::collections::HashMap\u003cString, String\u003e) -\u003e Result\u003c()\u003e {\n    let mut content = String::new();\n    content.push_str(\"# Generated from .env\\n\");\n    content.push_str(\"# Replace all placeholder values with real credentials\\n\\n\");\n\n    for (key, value) in vars {\n        let placeholder = generate_placeholder(key, Some(value));\n        content.push_str(\u0026format!(\"{}={}\\n\", key, placeholder));\n    }\n\n    fs::write(\".env.example\", content)?;\n    Ok(())\n}\n\n/// Generate a placeholder value based on the key name\nfn generate_placeholder(key: \u0026str, value: Option\u003c\u0026String\u003e) -\u003e String {\n    let key_upper = key.to_uppercase();\n\n    // Check for specific patterns\n    if key_upper.contains(\"SECRET\") || key_upper.contains(\"KEY\") || key_upper.contains(\"TOKEN\") {\n        return \"YOUR_KEY_HERE\".to_string();\n    }\n\n    if key_upper.contains(\"PASSWORD\") || key_upper.contains(\"PASS\") {\n        return \"YOUR_PASSWORD_HERE\".to_string();\n    }\n\n    if key_upper.contains(\"URL\") {\n        if let Some(v) = value {\n            // Try to preserve structure\n            if v.contains(\"postgresql://\") {\n                return \"postgresql://user:password@localhost:5432/dbname\".to_string();\n            }\n            if v.contains(\"redis://\") {\n                return \"redis://localhost:6379/0\".to_string();\n            }\n            if v.contains(\"http://\") || v.contains(\"https://\") {\n                return \"https://your-api-url-here.com\".to_string();\n            }\n        }\n        return \"YOUR_URL_HERE\".to_string();\n    }\n\n    if key_upper.contains(\"PORT\") {\n        return \"8000\".to_string();\n    }\n\n    if key_upper.contains(\"DEBUG\") {\n        return \"True\".to_string();\n    }\n\n    if key_upper.contains(\"HOST\") {\n        return \"localhost\".to_string();\n    }\n\n    // Default placeholder\n    \"YOUR_VALUE_HERE\".to_string()\n}\n\n#[cfg(test)]\nmod tests {\n    use super::*;\n\n    #[test]\n    fn test_generate_placeholder() {\n        assert_eq!(generate_placeholder(\"SECRET_KEY\", None), \"YOUR_KEY_HERE\");\n        assert_eq!(generate_placeholder(\"API_TOKEN\", None), \"YOUR_KEY_HERE\");\n        assert_eq!(\n            generate_placeholder(\"DB_PASSWORD\", None),\n            \"YOUR_PASSWORD_HERE\"\n        );\n        assert_eq!(generate_placeholder(\"PORT\", None), \"8000\");\n        assert_eq!(generate_placeholder(\"DEBUG\", None), \"True\");\n        assert_eq!(generate_placeholder(\"RANDOM_VAR\", None), \"YOUR_VALUE_HERE\");\n    }\n\n    #[test]\n    fn test_generate_placeholder_with_value() {\n        let url = \"postgresql://user:pass@localhost:5432/db\".to_string();\n        assert!(generate_placeholder(\"DATABASE_URL\", Some(\u0026url)).contains(\"postgresql\"));\n\n        let redis = \"redis://localhost:6379/0\".to_string();\n        assert!(generate_placeholder(\"REDIS_URL\", Some(\u0026redis)).contains(\"redis\"));\n    }\n}\n","traces":[{"line":12,"address":[5950006,5950057,5948816],"length":1,"stats":{"Line":0}},{"line":13,"address":[6629215],"length":1,"stats":{"Line":0}},{"line":14,"address":[6629253,6629333],"length":1,"stats":{"Line":0}},{"line":17,"address":[6629219],"length":1,"stats":{"Line":0}},{"line":21,"address":[6629692],"length":1,"stats":{"Line":0}},{"line":26,"address":[6629856],"length":1,"stats":{"Line":0}},{"line":27,"address":[6630402,6629973,6629899],"length":1,"stats":{"Line":0}},{"line":28,"address":[6629942,6630368,6630049,6630004],"length":1,"stats":{"Line":0}},{"line":30,"address":[6630088,6630010],"length":1,"stats":{"Line":0}},{"line":31,"address":[6630295],"length":1,"stats":{"Line":0}},{"line":32,"address":[6630340],"length":1,"stats":{"Line":0}},{"line":38,"address":[6611144,6612913,6605968],"length":1,"stats":{"Line":0}},{"line":40,"address":[6606019],"length":1,"stats":{"Line":0}},{"line":42,"address":[6606057],"length":1,"stats":{"Line":0}},{"line":44,"address":[5926664,5926589],"length":1,"stats":{"Line":0}},{"line":45,"address":[6606540],"length":1,"stats":{"Line":0}},{"line":47,"address":[6606506,6612102],"length":1,"stats":{"Line":0}},{"line":49,"address":[6612265],"length":1,"stats":{"Line":0}},{"line":50,"address":[6612856,6612316,6612563],"length":1,"stats":{"Line":0}},{"line":52,"address":[6612504,6612271,6612349],"length":1,"stats":{"Line":0}},{"line":55,"address":[5932658,5932455],"length":1,"stats":{"Line":0}},{"line":56,"address":[6612835],"length":1,"stats":{"Line":0}},{"line":61,"address":[6606719,6606648],"length":1,"stats":{"Line":0}},{"line":62,"address":[6606814,6606746],"length":1,"stats":{"Line":0}},{"line":64,"address":[6606917,6606841],"length":1,"stats":{"Line":0}},{"line":66,"address":[6606971,6607048],"length":1,"stats":{"Line":0}},{"line":67,"address":[6611776,6607085],"length":1,"stats":{"Line":0}},{"line":68,"address":[6611935],"length":1,"stats":{"Line":0}},{"line":71,"address":[5927194],"length":1,"stats":{"Line":0}},{"line":75,"address":[6607286],"length":1,"stats":{"Line":0}},{"line":76,"address":[6611579,6607443],"length":1,"stats":{"Line":0}},{"line":78,"address":[6607472],"length":1,"stats":{"Line":0}},{"line":81,"address":[6607527],"length":1,"stats":{"Line":0}},{"line":88,"address":[6607734,6608057,6608146,6611506,6607936],"length":1,"stats":{"Line":0}},{"line":90,"address":[6607844,6607879,6607944,6611541],"length":1,"stats":{"Line":0}},{"line":94,"address":[6608199],"length":1,"stats":{"Line":0}},{"line":95,"address":[6608262,6608423,6608592],"length":1,"stats":{"Line":0}},{"line":96,"address":[6608297,6608638],"length":1,"stats":{"Line":0}},{"line":97,"address":[5928455,5928910,5931314],"length":1,"stats":{"Line":0}},{"line":99,"address":[6608373,6611320],"length":1,"stats":{"Line":0}},{"line":100,"address":[6611479],"length":1,"stats":{"Line":0}},{"line":106,"address":[6608562,6609058,6611278,6609121],"length":1,"stats":{"Line":0}},{"line":111,"address":[6609345,6609207,6609423,6609503,6611235],"length":1,"stats":{"Line":0}},{"line":113,"address":[6609304,6609273,6609353,6611248],"length":1,"stats":{"Line":0}},{"line":116,"address":[6609593,6609668,6611220],"length":1,"stats":{"Line":0}},{"line":117,"address":[6609854,6609922],"length":1,"stats":{"Line":0}},{"line":118,"address":[5930183,5931174],"length":1,"stats":{"Line":0}},{"line":121,"address":[6609173,6610356],"length":1,"stats":{"Line":0}},{"line":122,"address":[6610515],"length":1,"stats":{"Line":0}},{"line":123,"address":[6610809],"length":1,"stats":{"Line":0}},{"line":125,"address":[6611007],"length":1,"stats":{"Line":0}},{"line":129,"address":[6616473,6622386,6612928],"length":1,"stats":{"Line":0}},{"line":130,"address":[6612975],"length":1,"stats":{"Line":0}},{"line":132,"address":[6613188,6613113],"length":1,"stats":{"Line":0}},{"line":136,"address":[6613457,6613374],"length":1,"stats":{"Line":0}},{"line":137,"address":[6613528],"length":1,"stats":{"Line":0}},{"line":139,"address":[6613494,6621520],"length":1,"stats":{"Line":0}},{"line":140,"address":[6621676,6622332],"length":1,"stats":{"Line":0}},{"line":141,"address":[6621850],"length":1,"stats":{"Line":0}},{"line":142,"address":[6622048],"length":1,"stats":{"Line":0}},{"line":148,"address":[6622273],"length":1,"stats":{"Line":0}},{"line":153,"address":[6613636,6613707],"length":1,"stats":{"Line":0}},{"line":154,"address":[6613802,6613734],"length":1,"stats":{"Line":0}},{"line":156,"address":[6613905,6613829],"length":1,"stats":{"Line":0}},{"line":158,"address":[6614036,6613959],"length":1,"stats":{"Line":0}},{"line":159,"address":[6614073,6621194],"length":1,"stats":{"Line":0}},{"line":160,"address":[6621353],"length":1,"stats":{"Line":0}},{"line":163,"address":[6614115],"length":1,"stats":{"Line":0}},{"line":167,"address":[6614274],"length":1,"stats":{"Line":0}},{"line":168,"address":[6614431,6620997],"length":1,"stats":{"Line":0}},{"line":170,"address":[6614460],"length":1,"stats":{"Line":0}},{"line":173,"address":[6614515],"length":1,"stats":{"Line":0}},{"line":180,"address":[5934945,5934828,5934630,5935034,5940679],"length":1,"stats":{"Line":0}},{"line":182,"address":[6614932,6614867,6614832,6620959],"length":1,"stats":{"Line":0}},{"line":186,"address":[5935083],"length":1,"stats":{"Line":0}},{"line":189,"address":[6615250,6616509,6615371],"length":1,"stats":{"Line":0}},{"line":190,"address":[6615552],"length":1,"stats":{"Line":0}},{"line":191,"address":[6615620],"length":1,"stats":{"Line":0}},{"line":192,"address":[5935661,5935964],"length":1,"stats":{"Line":0}},{"line":193,"address":[6616159],"length":1,"stats":{"Line":0}},{"line":196,"address":[6616063,6615818],"length":1,"stats":{"Line":0}},{"line":200,"address":[5938290,5936416,5935177],"length":1,"stats":{"Line":0}},{"line":201,"address":[5936593],"length":1,"stats":{"Line":0}},{"line":202,"address":[5936669],"length":1,"stats":{"Line":0}},{"line":203,"address":[6617335,6616950],"length":1,"stats":{"Line":0}},{"line":205,"address":[5936818],"length":1,"stats":{"Line":0}},{"line":206,"address":[6617242],"length":1,"stats":{"Line":0}},{"line":209,"address":[6617789,6617711,6618355,6617373,6617869,6617576],"length":1,"stats":{"Line":0}},{"line":210,"address":[6617392,6617584,6617435,6618422],"length":1,"stats":{"Line":0}},{"line":211,"address":[6617670,6617651,6617719,6618400],"length":1,"stats":{"Line":0}},{"line":214,"address":[5937794,5937881],"length":1,"stats":{"Line":0}},{"line":216,"address":[6616991,6617207],"length":1,"stats":{"Line":0}},{"line":220,"address":[6618769,6618689,6615315,6618623,6620695],"length":1,"stats":{"Line":0}},{"line":222,"address":[5938455,5940463,5938374,5938351],"length":1,"stats":{"Line":0}},{"line":225,"address":[6618937,6618862,6620674],"length":1,"stats":{"Line":0}},{"line":226,"address":[6619118],"length":1,"stats":{"Line":0}},{"line":227,"address":[5938978],"length":1,"stats":{"Line":0}},{"line":228,"address":[6620227,6619334],"length":1,"stats":{"Line":0}},{"line":229,"address":[6620238],"length":1,"stats":{"Line":0}},{"line":230,"address":[5940097],"length":1,"stats":{"Line":0}},{"line":233,"address":[6620184,6619368],"length":1,"stats":{"Line":0}},{"line":236,"address":[6615337,6620738],"length":1,"stats":{"Line":0}},{"line":237,"address":[5940652],"length":1,"stats":{"Line":0}},{"line":242,"address":[5935893,5939369],"length":1,"stats":{"Line":0}},{"line":243,"address":[5939528],"length":1,"stats":{"Line":0}},{"line":245,"address":[6620042],"length":1,"stats":{"Line":0}},{"line":249,"address":[5947674,5947668,5946496],"length":1,"stats":{"Line":0}},{"line":253,"address":[5946545],"length":1,"stats":{"Line":0}},{"line":254,"address":[6627056],"length":1,"stats":{"Line":0}},{"line":256,"address":[6627134],"length":1,"stats":{"Line":0}},{"line":257,"address":[6627265,6627563],"length":1,"stats":{"Line":0}},{"line":258,"address":[5947390,5947303],"length":1,"stats":{"Line":0}},{"line":261,"address":[5946983,5947196],"length":1,"stats":{"Line":0}},{"line":262,"address":[5947155],"length":1,"stats":{"Line":0}},{"line":266,"address":[5948783,5947712,5948777],"length":1,"stats":{"Line":0}},{"line":270,"address":[5947758],"length":1,"stats":{"Line":0}},{"line":271,"address":[6628279],"length":1,"stats":{"Line":0}},{"line":273,"address":[5948033],"length":1,"stats":{"Line":0}},{"line":274,"address":[5948161,5948411],"length":1,"stats":{"Line":0}},{"line":275,"address":[6628819],"length":1,"stats":{"Line":0}},{"line":279,"address":[5948187,5948391],"length":1,"stats":{"Line":0}},{"line":280,"address":[5948356],"length":1,"stats":{"Line":0}},{"line":284,"address":[6624030,6624076,6622400],"length":1,"stats":{"Line":0}},{"line":288,"address":[5942183,5942296,5942370],"length":1,"stats":{"Line":0}},{"line":290,"address":[5942254],"length":1,"stats":{"Line":0}},{"line":293,"address":[5943771,5942534,5942459],"length":1,"stats":{"Line":0}},{"line":294,"address":[6622988],"length":1,"stats":{"Line":0}},{"line":296,"address":[6623056],"length":1,"stats":{"Line":0}},{"line":297,"address":[5943217,5942931,5943267],"length":1,"stats":{"Line":0}},{"line":298,"address":[6623517,6623603],"length":1,"stats":{"Line":0}},{"line":299,"address":[5943373,5943460],"length":1,"stats":{"Line":0}},{"line":302,"address":[5942945,5943172],"length":1,"stats":{"Line":0}},{"line":303,"address":[6623405],"length":1,"stats":{"Line":0}},{"line":307,"address":[6624096,6625059,6625065],"length":1,"stats":{"Line":0}},{"line":308,"address":[5943828],"length":1,"stats":{"Line":0}},{"line":309,"address":[5943864],"length":1,"stats":{"Line":0}},{"line":310,"address":[5943924],"length":1,"stats":{"Line":0}},{"line":312,"address":[6624241],"length":1,"stats":{"Line":0}},{"line":313,"address":[5944113,5944380],"length":1,"stats":{"Line":0}},{"line":314,"address":[5944395,5944482],"length":1,"stats":{"Line":0}},{"line":317,"address":[6624646,6624437],"length":1,"stats":{"Line":0}},{"line":318,"address":[6624611],"length":1,"stats":{"Line":0}},{"line":322,"address":[6626770,6626776,6625104],"length":1,"stats":{"Line":1}},{"line":323,"address":[5944847],"length":1,"stats":{"Line":2}},{"line":326,"address":[6625267,6625184,6625391],"length":1,"stats":{"Line":5}},{"line":327,"address":[6625349,6626765],"length":1,"stats":{"Line":2}},{"line":330,"address":[6625536,6625699],"length":1,"stats":{"Line":2}},{"line":331,"address":[6626760,6625657],"length":1,"stats":{"Line":2}},{"line":334,"address":[6625750],"length":1,"stats":{"Line":1}},{"line":335,"address":[5945559,5946008],"length":1,"stats":{"Line":2}},{"line":337,"address":[6626333,6626394],"length":1,"stats":{"Line":2}},{"line":338,"address":[6626461,6626750],"length":1,"stats":{"Line":2}},{"line":340,"address":[6626436,6626497],"length":1,"stats":{"Line":2}},{"line":341,"address":[6626745,6626564],"length":1,"stats":{"Line":2}},{"line":343,"address":[6626600,6626700,6626539],"length":1,"stats":{"Line":0}},{"line":344,"address":[5946363,5946436],"length":1,"stats":{"Line":0}},{"line":347,"address":[6626755,6626358],"length":1,"stats":{"Line":0}},{"line":350,"address":[5945615,5945536],"length":1,"stats":{"Line":2}},{"line":351,"address":[6626310,6626001],"length":1,"stats":{"Line":2}},{"line":354,"address":[6626043,6625970],"length":1,"stats":{"Line":2}},{"line":355,"address":[6626122,6626308],"length":1,"stats":{"Line":2}},{"line":358,"address":[6626161,6626094],"length":1,"stats":{"Line":2}},{"line":359,"address":[6626290,6626237],"length":1,"stats":{"Line":0}},{"line":363,"address":[6626206],"length":1,"stats":{"Line":1}}],"covered":18,"coverable":164},{"path":["/","home","ajit","Documents","dotenv-space-cli","src","commands","template.rs"],"content":"/// Template command - generate configuration files from .env\n///\n/// Supports variable substitution with filters and transformations\nuse anyhow::{Context, Result};\nuse colored::*;\nuse std::collections::HashMap;\nuse std::fs;\n\nuse crate::core::Parser;\n\npub fn run(input: String, output: String, env: String, verbose: bool) -\u003e Result\u003c()\u003e {\n    if verbose {\n        println!(\"{}\", \"Running template in verbose mode\".dimmed());\n    }\n\n    println!(\n        \"\\n{}\",\n        \"┌─ Generate config from template ─────────────────────┐\".cyan()\n    );\n    println!(\n        \"{}\\n\",\n        \"└──────────────────────────────────────────────────────┘\".cyan()\n    );\n\n    // Parse .env file\n    let parser = Parser::default();\n    let env_file = parser\n        .parse_file(\u0026env)\n        .with_context(|| format!(\"Failed to parse {}\", env))?;\n\n    println!(\n        \"{} Loaded {} variables from {}\",\n        \"✓\".green(),\n        env_file.vars.len(),\n        env\n    );\n\n    // Read template\n    let template_content =\n        fs::read_to_string(\u0026input).with_context(|| format!(\"Failed to read template {}\", input))?;\n\n    println!(\"{} Read template from {}\", \"✓\".green(), input);\n\n    // Process template\n    let result = process_template(\u0026template_content, \u0026env_file.vars)?;\n\n    // Write output\n    fs::write(\u0026output, \u0026result).with_context(|| format!(\"Failed to write to {}\", output))?;\n\n    println!(\"{} Generated config at {}\", \"✓\".green(), output);\n\n    Ok(())\n}\n\n/// Process template with variable substitution\nfn process_template(template: \u0026str, vars: \u0026HashMap\u003cString, String\u003e) -\u003e Result\u003cString\u003e {\n    let mut result = template.to_string();\n\n    // Simple variable substitution: ${VAR} or {{VAR}}\n    for (key, value) in vars {\n        // ${VAR} style\n        let pattern = format!(\"${{{}}}\", key);\n        result = result.replace(\u0026pattern, value);\n\n        // {{VAR}} style\n        let pattern = format!(\"{{{{{}}}}}\", key);\n        result = result.replace(\u0026pattern, value);\n\n        // $VAR style (simple)\n        let pattern = format!(\"${}\", key);\n        result = result.replace(\u0026pattern, value);\n    }\n\n    // Process filters\n    result = process_filters(\u0026result, vars)?;\n\n    Ok(result)\n}\n\ntype FilterFn = fn(\u0026str) -\u003e String;\n\nfn filter_patterns() -\u003e Vec\u003c(\u0026'static str, FilterFn)\u003e {\n    vec![\n        (\"|upper\", |v| v.to_uppercase()),\n        (\"|lower\", |v| v.to_lowercase()),\n        (\"|title\", |v| {\n            let mut c = v.chars();\n            match c.next() {\n                None =\u003e String::new(),\n                Some(f) =\u003e f.to_uppercase().collect::\u003cString\u003e() + c.as_str(),\n            }\n        }),\n    ]\n}\n\n/// Process template filters\n/// Supports: {{VAR|upper}}, {{VAR|lower}}, {{VAR|bool}}, {{VAR|json}}\nfn process_filters(template: \u0026str, vars: \u0026HashMap\u003cString, String\u003e) -\u003e Result\u003cString\u003e {\n    let mut result = template.to_string();\n\n    for (key, value) in vars {\n        // Apply upper/lower/title via filter_patterns()\n        // BUG FIX: was `\u0026filter_patterns` (variable) — must be `\u0026filter_patterns()` (function call)\n        for (filter, transform) in \u0026filter_patterns() {\n            let pattern = format!(\"{{{{{}{}}}}}\", key, filter);\n            if result.contains(\u0026pattern) {\n                let transformed = transform(value);\n                result = result.replace(\u0026pattern, \u0026transformed);\n            }\n        }\n\n        // Boolean filter\n        let pattern = format!(\"{{{{{}|bool}}}}\", key);\n        if result.contains(\u0026pattern) {\n            let bool_val = value.eq_ignore_ascii_case(\"true\")\n                || value.eq_ignore_ascii_case(\"yes\")\n                || value.eq_ignore_ascii_case(\"1\");\n            result = result.replace(\u0026pattern, \u0026bool_val.to_string());\n        }\n\n        // Integer filter\n        let pattern = format!(\"{{{{{}|int}}}}\", key);\n        if result.contains(\u0026pattern) {\n            let int_val = value.parse::\u003ci64\u003e().unwrap_or(0);\n            result = result.replace(\u0026pattern, \u0026int_val.to_string());\n        }\n\n        // JSON escape filter\n        let pattern = format!(\"{{{{{}|json}}}}\", key);\n        if result.contains(\u0026pattern) {\n            let json_val = serde_json::to_string(value).unwrap_or_default();\n            // Remove surrounding quotes\n            let json_val = json_val.trim_matches('\"');\n            result = result.replace(\u0026pattern, json_val);\n        }\n    }\n\n    Ok(result)\n}\n\n#[cfg(test)]\nmod tests {\n    use super::*;\n\n    #[test]\n    fn test_process_template_simple() {\n        let template = \"DATABASE_URL=${DATABASE_URL}\";\n        let mut vars = HashMap::new();\n        vars.insert(\n            \"DATABASE_URL\".to_string(),\n            \"postgresql://localhost\".to_string(),\n        );\n\n        let result = process_template(template, \u0026vars).unwrap();\n        assert_eq!(result, \"DATABASE_URL=postgresql://localhost\");\n    }\n\n    #[test]\n    fn test_process_template_double_braces() {\n        let template = \"url: {{DATABASE_URL}}\";\n        let mut vars = HashMap::new();\n        vars.insert(\n            \"DATABASE_URL\".to_string(),\n            \"postgresql://localhost\".to_string(),\n        );\n\n        let result = process_template(template, \u0026vars).unwrap();\n        assert_eq!(result, \"url: postgresql://localhost\");\n    }\n\n    #[test]\n    fn test_filter_upper() {\n        let template = \"ENV={{ENV|upper}}\";\n        let mut vars = HashMap::new();\n        vars.insert(\"ENV\".to_string(), \"production\".to_string());\n\n        let result = process_filters(template, \u0026vars).unwrap();\n        assert_eq!(result, \"ENV=PRODUCTION\");\n    }\n\n    #[test]\n    fn test_filter_bool() {\n        let template = \"debug={{DEBUG|bool}}\";\n        let mut vars = HashMap::new();\n        vars.insert(\"DEBUG\".to_string(), \"true\".to_string());\n\n        let result = process_filters(template, \u0026vars).unwrap();\n        assert_eq!(result, \"debug=true\");\n    }\n\n    #[test]\n    fn test_filter_int() {\n        let template = \"port={{PORT|int}}\";\n        let mut vars = HashMap::new();\n        vars.insert(\"PORT\".to_string(), \"8000\".to_string());\n\n        let result = process_filters(template, \u0026vars).unwrap();\n        assert_eq!(result, \"port=8000\");\n    }\n}\n","traces":[{"line":11,"address":[5787952,5790704,5790857],"length":1,"stats":{"Line":0}},{"line":12,"address":[5787988],"length":1,"stats":{"Line":0}},{"line":13,"address":[6731130,6731210],"length":1,"stats":{"Line":0}},{"line":16,"address":[6731096],"length":1,"stats":{"Line":0}},{"line":20,"address":[6731569],"length":1,"stats":{"Line":0}},{"line":26,"address":[6731728],"length":1,"stats":{"Line":0}},{"line":27,"address":[6731811,6731891,6733998],"length":1,"stats":{"Line":0}},{"line":28,"address":[6731752],"length":1,"stats":{"Line":0}},{"line":29,"address":[6731784,6731875],"length":1,"stats":{"Line":0}},{"line":31,"address":[6732176,6732243],"length":1,"stats":{"Line":0}},{"line":39,"address":[6327792,6327813],"length":1,"stats":{"Line":0}},{"line":42,"address":[6732790,6732702],"length":1,"stats":{"Line":0}},{"line":45,"address":[6733002,6733939],"length":1,"stats":{"Line":0}},{"line":48,"address":[6520821,6520800],"length":1,"stats":{"Line":0}},{"line":50,"address":[6733428],"length":1,"stats":{"Line":0}},{"line":52,"address":[6733679],"length":1,"stats":{"Line":0}},{"line":56,"address":[6731034,6728912,6731040],"length":1,"stats":{"Line":1}},{"line":57,"address":[6728967],"length":1,"stats":{"Line":2}},{"line":60,"address":[6728992,6729055],"length":1,"stats":{"Line":4}},{"line":62,"address":[6729227,6729733],"length":1,"stats":{"Line":4}},{"line":63,"address":[6729841,6730025,6729942],"length":1,"stats":{"Line":4}},{"line":66,"address":[6730140],"length":1,"stats":{"Line":2}},{"line":67,"address":[5787256,5787167,5787335],"length":1,"stats":{"Line":4}},{"line":70,"address":[6730562],"length":1,"stats":{"Line":2}},{"line":71,"address":[6730785,6730867,6730697],"length":1,"stats":{"Line":4}},{"line":75,"address":[6729487,6729265],"length":1,"stats":{"Line":2}},{"line":77,"address":[6729618],"length":1,"stats":{"Line":2}},{"line":82,"address":[6724736],"length":1,"stats":{"Line":1}},{"line":83,"address":[6725038,6724869,6724750],"length":1,"stats":{"Line":4}},{"line":84,"address":[6724770],"length":1,"stats":{"Line":3}},{"line":85,"address":[6724803],"length":1,"stats":{"Line":2}},{"line":86,"address":[6520497,6520160,6520468],"length":1,"stats":{"Line":1}},{"line":87,"address":[6520227],"length":1,"stats":{"Line":0}},{"line":88,"address":[6520250],"length":1,"stats":{"Line":0}},{"line":89,"address":[6520371],"length":1,"stats":{"Line":0}},{"line":90,"address":[6520291,6520389,6520481],"length":1,"stats":{"Line":0}},{"line":98,"address":[5785809,5782048,5785157],"length":1,"stats":{"Line":1}},{"line":99,"address":[6725111],"length":1,"stats":{"Line":2}},{"line":101,"address":[6725136,6725199],"length":1,"stats":{"Line":4}},{"line":104,"address":[6725485,6725580,6725371],"length":1,"stats":{"Line":5}},{"line":105,"address":[5785163,5782694],"length":1,"stats":{"Line":3}},{"line":106,"address":[6728390,6728461],"length":1,"stats":{"Line":3}},{"line":107,"address":[6728532],"length":1,"stats":{"Line":1}},{"line":108,"address":[6728681,6728592,6728764],"length":1,"stats":{"Line":2}},{"line":113,"address":[6725795],"length":1,"stats":{"Line":2}},{"line":114,"address":[6726013,6725930],"length":1,"stats":{"Line":4}},{"line":115,"address":[6726098,6726207],"length":1,"stats":{"Line":2}},{"line":116,"address":[6726184,6726236],"length":1,"stats":{"Line":0}},{"line":117,"address":[6726283],"length":1,"stats":{"Line":0}},{"line":118,"address":[6726607,6726372],"length":1,"stats":{"Line":1}},{"line":122,"address":[6726736,6726060],"length":1,"stats":{"Line":2}},{"line":123,"address":[6726927,6726844],"length":1,"stats":{"Line":2}},{"line":124,"address":[5783964],"length":1,"stats":{"Line":1}},{"line":125,"address":[6727360,6727125],"length":1,"stats":{"Line":1}},{"line":129,"address":[6726974,6727489],"length":1,"stats":{"Line":2}},{"line":130,"address":[6727597,6727680],"length":1,"stats":{"Line":2}},{"line":131,"address":[6727749],"length":1,"stats":{"Line":0}},{"line":133,"address":[6727803,6727886],"length":1,"stats":{"Line":0}},{"line":134,"address":[6728063,6727974],"length":1,"stats":{"Line":0}},{"line":138,"address":[6725394],"length":1,"stats":{"Line":1}}],"covered":35,"coverable":60},{"path":["/","home","ajit","Documents","dotenv-space-cli","src","commands","validate.rs"],"content":"/// Enhanced validation command\n///\n/// Validates .env against .env.example with comprehensive checks:\n/// - Missing/extra variables\n/// - Placeholder detection\n/// - Boolean string trap\n/// - Weak SECRET_KEY\n/// - localhost in Docker context\n/// - Multiple output formats (pretty, json, github-actions)\nuse anyhow::{Context, Result};\nuse colored::*;\nuse serde::{Deserialize, Serialize};\nuse std::collections::{HashMap, HashSet};\nuse std::path::Path;\n\nuse crate::core::{Parser, ParserConfig};\n\n#[derive(Debug, Serialize, Deserialize)]\npub struct ValidationResult {\n    pub status: String,\n    pub required_present: usize,\n    pub required_total: usize,\n    pub issues: Vec\u003cIssue\u003e,\n    pub summary: Summary,\n}\n\n#[derive(Debug, Serialize, Deserialize, Clone)]\npub struct Issue {\n    pub severity: String,\n    #[serde(rename = \"type\")]\n    pub issue_type: String,\n    pub variable: String,\n    pub message: String,\n    pub location: String,\n    pub suggestion: Option\u003cString\u003e,\n}\n\n#[derive(Debug, Serialize, Deserialize)]\npub struct Summary {\n    pub errors: usize,\n    pub warnings: usize,\n    pub style: usize,\n}\n\npub fn run(\n    env: String,\n    example: String,\n    strict: bool,\n    fix: bool,\n    format: String,\n    exit_zero: bool,\n    verbose: bool,\n) -\u003e Result\u003c()\u003e {\n    if verbose {\n        println!(\"{}\", \"Running validate in verbose mode\".dimmed());\n    }\n\n    if format == \"pretty\" {\n        println!(\n            \"\\n{}\",\n            \"┌─ Validating environment variables ──────────────────┐\".cyan()\n        );\n        println!(\n            \"{}\",\n            \"│ Comparing .env against .env.example                 │\".cyan()\n        );\n        println!(\n            \"{}\\n\",\n            \"└──────────────────────────────────────────────────────┘\".cyan()\n        );\n    }\n\n    let mut parser_config = ParserConfig::default();\n    if strict {\n        parser_config.strict = true;\n    }\n    let parser = Parser::new(parser_config);\n\n    let example_file = parser\n        .parse_file(\u0026example)\n        .with_context(|| format!(\"Failed to parse {}\", example))?;\n\n    let env_file = parser\n        .parse_file(\u0026env)\n        .with_context(|| format!(\"Failed to parse {}\", env))?;\n\n    if verbose {\n        println!(\n            \"Parsed {} variables from {}\",\n            example_file.vars.len(),\n            example\n        );\n        println!(\"Parsed {} variables from {}\", env_file.vars.len(), env);\n    }\n\n    let mut issues = Vec::new();\n\n    // Check 1: Required variables present\n    let example_keys: HashSet\u003c_\u003e = example_file.vars.keys().collect();\n    let env_keys: HashSet\u003c_\u003e = env_file.vars.keys().collect();\n\n    let missing: Vec\u003c_\u003e = example_keys.difference(\u0026env_keys).collect();\n    for key in \u0026missing {\n        issues.push(Issue {\n            severity: \"error\".to_string(),\n            issue_type: \"missing_variable\".to_string(),\n            variable: key.to_string(),\n            message: format!(\"Missing required variable: {}\", key),\n            location: format!(\"{}:?\", env),\n            suggestion: Some(format!(\"Add {}=\u003cvalue\u003e to {}\", key, env)),\n        });\n    }\n\n    // Check 2: Extra variables in strict mode\n    if strict {\n        let extra: Vec\u003c_\u003e = env_keys.difference(\u0026example_keys).collect();\n        for key in \u0026extra {\n            issues.push(Issue {\n                severity: \"warning\".to_string(),\n                issue_type: \"extra_variable\".to_string(),\n                variable: key.to_string(),\n                message: format!(\"Extra variable not in .env.example: {}\", key),\n                location: format!(\"{}:?\", env),\n                suggestion: Some(format!(\"Add {} to {} or remove from {}\", key, example, env)),\n            });\n        }\n    }\n\n    // Check 3: Placeholder values\n    for (key, value) in \u0026env_file.vars {\n        if is_placeholder(value) {\n            let suggestion = match key.as_str() {\n                \"SECRET_KEY\" =\u003e Some(\"Run: openssl rand -hex 32\".to_string()),\n                k if k.contains(\"AWS\") =\u003e Some(\"Get from AWS Console\".to_string()),\n                k if k.contains(\"STRIPE\") =\u003e Some(\"Get from Stripe Dashboard\".to_string()),\n                _ =\u003e None,\n            };\n\n            issues.push(Issue {\n                severity: \"error\".to_string(),\n                issue_type: \"placeholder_value\".to_string(),\n                variable: key.clone(),\n                message: format!(\"{} looks like a placeholder\", key),\n                location: format!(\"{}:?\", env),\n                suggestion,\n            });\n        }\n    }\n\n    // Check 4: Boolean string trap\n    for (key, value) in \u0026env_file.vars {\n        if value == \"False\" || value == \"True\" {\n            issues.push(Issue {\n                severity: \"warning\".to_string(),\n                issue_type: \"boolean_trap\".to_string(),\n                variable: key.clone(),\n                message: format!(\"{} is set to \\\"{}\\\" (string)\", key, value),\n                location: format!(\"{}:?\", env),\n                suggestion: Some(format!(\n                    \"This is truthy in Python — use {} or 0 instead\",\n                    if value == \"False\" { \"False\" } else { \"True\" }\n                )),\n            });\n        }\n    }\n\n    // Check 5: Weak SECRET_KEY\n    if let Some(secret_key) = env_file.vars.get(\"SECRET_KEY\") {\n        if is_weak_secret_key(secret_key) {\n            issues.push(Issue {\n                severity: \"error\".to_string(),\n                issue_type: \"weak_secret\".to_string(),\n                variable: \"SECRET_KEY\".to_string(),\n                message: \"SECRET_KEY is too weak\".to_string(),\n                location: format!(\"{}:?\", env),\n                suggestion: Some(\"Run: openssl rand -hex 32\".to_string()),\n            });\n        }\n    }\n\n    // Check 6: localhost in Docker context\n    let has_docker = Path::new(\"docker-compose.yml\").exists()\n        || Path::new(\"docker-compose.yaml\").exists()\n        || Path::new(\"Dockerfile\").exists();\n\n    if has_docker {\n        for (key, value) in \u0026env_file.vars {\n            if value.contains(\"localhost\") \u0026\u0026 (key.contains(\"URL\") || key.contains(\"HOST\")) {\n                issues.push(Issue {\n                    severity: \"warning\".to_string(),\n                    issue_type: \"localhost_in_docker\".to_string(),\n                    variable: key.clone(),\n                    message: format!(\"{} uses localhost\", key),\n                    location: format!(\"{}:?\", env),\n                    suggestion: Some(\n                        \"In Docker, use service name instead (e.g., db:5432)\".to_string(),\n                    ),\n                });\n            }\n        }\n    }\n\n    // Create result\n    let errors = issues.iter().filter(|i| i.severity == \"error\").count();\n    let warnings = issues.iter().filter(|i| i.severity == \"warning\").count();\n    let style = issues.iter().filter(|i| i.severity == \"style\").count();\n\n    let result = ValidationResult {\n        status: if errors \u003e 0 {\n            \"failed\".to_string()\n        } else {\n            \"passed\".to_string()\n        },\n        required_present: env_file.vars.len().min(example_file.vars.len()),\n        required_total: example_file.vars.len(),\n        issues,\n        summary: Summary {\n            errors,\n            warnings,\n            style,\n        },\n    };\n\n    // Output\n    match format.as_str() {\n        \"json\" =\u003e output_json(\u0026result)?,\n        \"github-actions\" =\u003e output_github_actions(\u0026result)?,\n        _ =\u003e output_pretty(\u0026result, \u0026env_file.vars, \u0026example_file.vars)?,\n    }\n\n    // Handle --fix flag\n    if fix \u0026\u0026 result.summary.errors \u003e 0 {\n        println!(\"\\n{} Auto-fix is not yet implemented\", \"ℹ️\".cyan());\n        println!(\"  This will be added in a future version\");\n    }\n\n    // Exit code\n    if !exit_zero \u0026\u0026 result.summary.errors \u003e 0 {\n        std::process::exit(1);\n    }\n\n    Ok(())\n}\n\nfn output_pretty(\n    result: \u0026ValidationResult,\n    _env_vars: \u0026HashMap\u003cString, String\u003e,\n    _example_vars: \u0026HashMap\u003cString, String\u003e,\n) -\u003e Result\u003c()\u003e {\n    if result.issues.is_empty() {\n        println!(\n            \"{} All required variables present ({}/{})\",\n            \"✓\".green(),\n            result.required_present,\n            result.required_total\n        );\n        println!(\"{} No issues found\", \"✓\".green());\n        return Ok(());\n    }\n\n    if result.required_present == result.required_total {\n        println!(\n            \"{} All required variables present ({}/{})\",\n            \"✓\".green(),\n            result.required_present,\n            result.required_total\n        );\n    } else {\n        println!(\n            \"{} Missing {} required variables\",\n            \"✗\".red(),\n            result.required_total - result.required_present\n        );\n    }\n\n    println!(\"{} Found {} issues\\n\", \"✗\".red(), result.issues.len());\n\n    println!(\"{}\", \"Issues:\".bold());\n    for (i, issue) in result.issues.iter().enumerate() {\n        let icon = match issue.severity.as_str() {\n            \"error\" =\u003e \"🚨\",\n            \"warning\" =\u003e \"⚠️ \",\n            _ =\u003e \"ℹ️ \",\n        };\n\n        println!(\"  {}. {} {}\", i + 1, icon, issue.message);\n        if let Some(suggestion) = \u0026issue.suggestion {\n            println!(\"     → {}\", suggestion.dimmed());\n        }\n        println!(\"     Location: {}\", issue.location.dimmed());\n    }\n\n    println!(\"\\n{}\", \"Summary:\".bold());\n    if result.summary.errors \u003e 0 {\n        println!(\"  🚨 {} critical issues\", result.summary.errors);\n    }\n    if result.summary.warnings \u003e 0 {\n        println!(\"  ⚠️  {} warnings\", result.summary.warnings);\n    }\n    if result.summary.errors == 0 \u0026\u0026 result.summary.warnings == 0 {\n        println!(\"  {} 0 issues found\", \"✓\".green());\n    }\n\n    Ok(())\n}\n\nfn output_json(result: \u0026ValidationResult) -\u003e Result\u003c()\u003e {\n    let json = serde_json::to_string_pretty(result)?;\n    println!(\"{}\", json);\n    Ok(())\n}\n\nfn output_github_actions(result: \u0026ValidationResult) -\u003e Result\u003c()\u003e {\n    for issue in \u0026result.issues {\n        let level = match issue.severity.as_str() {\n            \"error\" =\u003e \"error\",\n            \"warning\" =\u003e \"warning\",\n            _ =\u003e \"notice\",\n        };\n\n        let location = issue.location.replace(\":?\", \"\");\n\n        println!(\"::{}  file={},line=1::{}\", level, location, issue.message);\n\n        if let Some(suggestion) = \u0026issue.suggestion {\n            println!(\n                \"::{}  file={},line=1::Suggestion: {}\",\n                level, location, suggestion\n            );\n        }\n    }\n    Ok(())\n}\n\nfn is_placeholder(value: \u0026str) -\u003e bool {\n    let lower = value.to_lowercase();\n\n    let placeholders = [\n        \"your_key_here\",\n        \"your_secret_here\",\n        \"your_token_here\",\n        \"change_me\",\n        \"changeme\",\n        \"replace_me\",\n        \"example\",\n        \"xxx\",\n        \"todo\",\n        \"generate-with\",\n    ];\n\n    placeholders.iter().any(|p| lower.contains(p))\n}\n\nfn is_weak_secret_key(key: \u0026str) -\u003e bool {\n    // Too short\n    if key.len() \u003c 32 {\n        return true;\n    }\n\n    // Common weak patterns\n    let weak = [\n        \"secret\", \"password\", \"dev\", \"test\", \"1234\", \"abcd\", \"changeme\",\n    ];\n\n    let lower = key.to_lowercase();\n    weak.iter().any(|w| lower.contains(w))\n}\n\n#[cfg(test)]\nmod tests {\n    use super::*;\n\n    #[test]\n    fn test_is_placeholder() {\n        assert!(is_placeholder(\"YOUR_KEY_HERE\"));\n        assert!(is_placeholder(\"generate-with-openssl\"));\n        assert!(!is_placeholder(\"sk_live_51Hrealkey\"));\n    }\n\n    #[test]\n    fn test_is_weak_secret_key() {\n        assert!(is_weak_secret_key(\"short\"));\n        assert!(is_weak_secret_key(\"this-is-a-test-secret-key-do-not-use\"));\n        assert!(is_weak_secret_key(\"devkeysecretpassword1234567890\"));\n        assert!(!is_weak_secret_key(\n            \"a7b9c4d1e8f2g5h3i6j0k9l8m7n6o5p4q3r2s1t0u9v8w7x6y5z4\"\n        ));\n    }\n}\n","traces":[{"line":45,"address":[5449375,5445024,5457871],"length":1,"stats":{"Line":0}},{"line":54,"address":[6011124],"length":1,"stats":{"Line":0}},{"line":55,"address":[5445224,5445307],"length":1,"stats":{"Line":0}},{"line":58,"address":[6011425,6011152],"length":1,"stats":{"Line":0}},{"line":59,"address":[6011453],"length":1,"stats":{"Line":0}},{"line":63,"address":[6011690],"length":1,"stats":{"Line":0}},{"line":67,"address":[6011849],"length":1,"stats":{"Line":0}},{"line":73,"address":[5445487],"length":1,"stats":{"Line":0}},{"line":74,"address":[6012057,6012114],"length":1,"stats":{"Line":0}},{"line":75,"address":[6012106],"length":1,"stats":{"Line":0}},{"line":77,"address":[5446107],"length":1,"stats":{"Line":0}},{"line":79,"address":[6012266,6024146,6012186],"length":1,"stats":{"Line":0}},{"line":80,"address":[6012124],"length":1,"stats":{"Line":0}},{"line":81,"address":[6012159,6012250],"length":1,"stats":{"Line":0}},{"line":83,"address":[5457783,5446657,5446597],"length":1,"stats":{"Line":0}},{"line":84,"address":[6012463],"length":1,"stats":{"Line":0}},{"line":85,"address":[6012542,6012633],"length":1,"stats":{"Line":0}},{"line":87,"address":[6012737],"length":1,"stats":{"Line":0}},{"line":88,"address":[6012866],"length":1,"stats":{"Line":0}},{"line":93,"address":[5447005],"length":1,"stats":{"Line":0}},{"line":96,"address":[6012741],"length":1,"stats":{"Line":0}},{"line":99,"address":[6013224,6013300],"length":1,"stats":{"Line":0}},{"line":100,"address":[6013395,6013327],"length":1,"stats":{"Line":0}},{"line":102,"address":[6013422,6013498],"length":1,"stats":{"Line":0}},{"line":103,"address":[6013617,6013525],"length":1,"stats":{"Line":0}},{"line":104,"address":[6023852],"length":1,"stats":{"Line":0}},{"line":105,"address":[5447667],"length":1,"stats":{"Line":0}},{"line":106,"address":[6023084],"length":1,"stats":{"Line":0}},{"line":107,"address":[6023159],"length":1,"stats":{"Line":0}},{"line":108,"address":[6023303,6023235],"length":1,"stats":{"Line":0}},{"line":109,"address":[6023411,6023482],"length":1,"stats":{"Line":0}},{"line":110,"address":[6023598,6023685],"length":1,"stats":{"Line":0}},{"line":115,"address":[6013764],"length":1,"stats":{"Line":0}},{"line":116,"address":[6013800],"length":1,"stats":{"Line":0}},{"line":117,"address":[6013957,6013862],"length":1,"stats":{"Line":0}},{"line":118,"address":[5456561],"length":1,"stats":{"Line":0}},{"line":119,"address":[5447983],"length":1,"stats":{"Line":0}},{"line":120,"address":[5455738],"length":1,"stats":{"Line":0}},{"line":121,"address":[6022100],"length":1,"stats":{"Line":0}},{"line":122,"address":[6022176,6022244],"length":1,"stats":{"Line":0}},{"line":123,"address":[6022352,6022423],"length":1,"stats":{"Line":0}},{"line":124,"address":[5456252,5456343],"length":1,"stats":{"Line":0}},{"line":130,"address":[5447714,5448035],"length":1,"stats":{"Line":0}},{"line":131,"address":[6021998,6020592,6014275],"length":1,"stats":{"Line":0}},{"line":132,"address":[6020616],"length":1,"stats":{"Line":0}},{"line":133,"address":[6021134,6020667,6020775],"length":1,"stats":{"Line":0}},{"line":134,"address":[5454530,5454790,5454595,5454441],"length":1,"stats":{"Line":0}},{"line":135,"address":[5454544,5454732,5454667,5454633],"length":1,"stats":{"Line":0}},{"line":136,"address":[5454639],"length":1,"stats":{"Line":0}},{"line":139,"address":[6021771],"length":1,"stats":{"Line":0}},{"line":140,"address":[6020981],"length":1,"stats":{"Line":0}},{"line":141,"address":[6021236],"length":1,"stats":{"Line":0}},{"line":142,"address":[6021308],"length":1,"stats":{"Line":0}},{"line":143,"address":[6021452,6021384],"length":1,"stats":{"Line":0}},{"line":144,"address":[6021560,6021631],"length":1,"stats":{"Line":0}},{"line":145,"address":[6021731],"length":1,"stats":{"Line":0}},{"line":151,"address":[6014301],"length":1,"stats":{"Line":0}},{"line":152,"address":[5448388,5453137,5453204],"length":1,"stats":{"Line":0}},{"line":153,"address":[5454073],"length":1,"stats":{"Line":0}},{"line":154,"address":[6019444],"length":1,"stats":{"Line":0}},{"line":155,"address":[6019488],"length":1,"stats":{"Line":0}},{"line":156,"address":[5453288],"length":1,"stats":{"Line":0}},{"line":157,"address":[5453364,5453448],"length":1,"stats":{"Line":0}},{"line":158,"address":[5453599,5453670],"length":1,"stats":{"Line":0}},{"line":159,"address":[6020193],"length":1,"stats":{"Line":0}},{"line":161,"address":[6020045,6020123],"length":1,"stats":{"Line":0}},{"line":168,"address":[6014520],"length":1,"stats":{"Line":0}},{"line":169,"address":[6014622,6014703],"length":1,"stats":{"Line":0}},{"line":170,"address":[6015263],"length":1,"stats":{"Line":0}},{"line":171,"address":[5448622],"length":1,"stats":{"Line":0}},{"line":172,"address":[5448653],"length":1,"stats":{"Line":0}},{"line":173,"address":[6014836],"length":1,"stats":{"Line":0}},{"line":174,"address":[6014908],"length":1,"stats":{"Line":0}},{"line":175,"address":[6014988,6015056],"length":1,"stats":{"Line":0}},{"line":176,"address":[5449048,5449123],"length":1,"stats":{"Line":0}},{"line":182,"address":[5449397,5449459,5448541],"length":1,"stats":{"Line":0}},{"line":183,"address":[5449424,5449485],"length":1,"stats":{"Line":0}},{"line":184,"address":[6015631],"length":1,"stats":{"Line":0}},{"line":186,"address":[5449593],"length":1,"stats":{"Line":0}},{"line":187,"address":[6015764],"length":1,"stats":{"Line":0}},{"line":188,"address":[6015951,6018354,6018532],"length":1,"stats":{"Line":0}},{"line":189,"address":[6019177],"length":1,"stats":{"Line":0}},{"line":190,"address":[6018491],"length":1,"stats":{"Line":0}},{"line":191,"address":[6018572],"length":1,"stats":{"Line":0}},{"line":192,"address":[6018647],"length":1,"stats":{"Line":0}},{"line":193,"address":[6018791,6018723],"length":1,"stats":{"Line":0}},{"line":194,"address":[6018970,6018899],"length":1,"stats":{"Line":0}},{"line":195,"address":[6019145],"length":1,"stats":{"Line":0}},{"line":196,"address":[5452803],"length":1,"stats":{"Line":0}},{"line":204,"address":[5449611,5449858],"length":1,"stats":{"Line":0}},{"line":205,"address":[5797664,5797678],"length":1,"stats":{"Line":0}},{"line":206,"address":[6016286],"length":1,"stats":{"Line":0}},{"line":209,"address":[6016466],"length":1,"stats":{"Line":0}},{"line":214,"address":[6016536,6016609],"length":1,"stats":{"Line":0}},{"line":215,"address":[5450484],"length":1,"stats":{"Line":0}},{"line":217,"address":[5450595],"length":1,"stats":{"Line":0}},{"line":225,"address":[5450731,5450810],"length":1,"stats":{"Line":0}},{"line":226,"address":[5450832,5450921,5451298,5451972],"length":1,"stats":{"Line":0}},{"line":227,"address":[5450946,5451181,5450999,5450887],"length":1,"stats":{"Line":0}},{"line":228,"address":[5450952,5451147,5451025],"length":1,"stats":{"Line":0}},{"line":232,"address":[5451129,5451416],"length":1,"stats":{"Line":0}},{"line":233,"address":[6017650],"length":1,"stats":{"Line":0}},{"line":234,"address":[6017848],"length":1,"stats":{"Line":0}},{"line":238,"address":[6017898,6017626],"length":1,"stats":{"Line":0}},{"line":239,"address":[5451713],"length":1,"stats":{"Line":0}},{"line":242,"address":[6017909],"length":1,"stats":{"Line":0}},{"line":245,"address":[6005504,6006183,6006189],"length":1,"stats":{"Line":0}},{"line":250,"address":[6005543],"length":1,"stats":{"Line":0}},{"line":251,"address":[5439691,5442788],"length":1,"stats":{"Line":0}},{"line":257,"address":[5443004],"length":1,"stats":{"Line":0}},{"line":258,"address":[5443195],"length":1,"stats":{"Line":0}},{"line":261,"address":[6005565],"length":1,"stats":{"Line":0}},{"line":262,"address":[5439820],"length":1,"stats":{"Line":0}},{"line":269,"address":[5439756],"length":1,"stats":{"Line":0}},{"line":276,"address":[5440186,5440476],"length":1,"stats":{"Line":0}},{"line":278,"address":[6006654],"length":1,"stats":{"Line":0}},{"line":279,"address":[6006855,6006964],"length":1,"stats":{"Line":0}},{"line":280,"address":[5441121],"length":1,"stats":{"Line":0}},{"line":281,"address":[5441932,5441142],"length":1,"stats":{"Line":0}},{"line":282,"address":[5441990,5441909],"length":1,"stats":{"Line":0}},{"line":283,"address":[5441961],"length":1,"stats":{"Line":0}},{"line":286,"address":[5442022,5442362],"length":1,"stats":{"Line":0}},{"line":287,"address":[6008326,6008261],"length":1,"stats":{"Line":0}},{"line":288,"address":[6008470,6008334],"length":1,"stats":{"Line":0}},{"line":290,"address":[5442455,5442656],"length":1,"stats":{"Line":0}},{"line":293,"address":[6007118],"length":1,"stats":{"Line":0}},{"line":294,"address":[5441373],"length":1,"stats":{"Line":0}},{"line":295,"address":[5441409],"length":1,"stats":{"Line":0}},{"line":297,"address":[6007334],"length":1,"stats":{"Line":0}},{"line":298,"address":[6007489],"length":1,"stats":{"Line":0}},{"line":300,"address":[6007607,6007469],"length":1,"stats":{"Line":0}},{"line":301,"address":[5441685],"length":1,"stats":{"Line":0}},{"line":304,"address":[6007614],"length":1,"stats":{"Line":0}},{"line":307,"address":[5439543,5439549,5439216],"length":1,"stats":{"Line":0}},{"line":308,"address":[6005170],"length":1,"stats":{"Line":0}},{"line":309,"address":[5439373,5439441],"length":1,"stats":{"Line":0}},{"line":310,"address":[6005449],"length":1,"stats":{"Line":0}},{"line":313,"address":[5445000,5444112,5444994],"length":1,"stats":{"Line":0}},{"line":314,"address":[6010079,6010099],"length":1,"stats":{"Line":0}},{"line":315,"address":[5444207],"length":1,"stats":{"Line":0}},{"line":316,"address":[6010248,6010182],"length":1,"stats":{"Line":0}},{"line":317,"address":[5444271,5444340],"length":1,"stats":{"Line":0}},{"line":318,"address":[6010271],"length":1,"stats":{"Line":0}},{"line":321,"address":[5444366],"length":1,"stats":{"Line":0}},{"line":323,"address":[6010390,6010491],"length":1,"stats":{"Line":0}},{"line":325,"address":[6010645],"length":1,"stats":{"Line":0}},{"line":326,"address":[6010788,6010708],"length":1,"stats":{"Line":0}},{"line":335,"address":[6009168,6009602,6009608],"length":1,"stats":{"Line":1}},{"line":336,"address":[6009197],"length":1,"stats":{"Line":1}},{"line":338,"address":[5443259],"length":1,"stats":{"Line":1}},{"line":351,"address":[5793922,5793904],"length":1,"stats":{"Line":4}},{"line":354,"address":[6009632,6010046,6010040],"length":1,"stats":{"Line":1}},{"line":356,"address":[5443713],"length":1,"stats":{"Line":1}},{"line":357,"address":[6009897],"length":1,"stats":{"Line":1}},{"line":361,"address":[6009690],"length":1,"stats":{"Line":1}},{"line":365,"address":[6009849],"length":1,"stats":{"Line":1}},{"line":366,"address":[6009866,6009955],"length":1,"stats":{"Line":4}}],"covered":10,"coverable":157},{"path":["/","home","ajit","Documents","dotenv-space-cli","src","config","mod.rs"],"content":"//! Configuration and registry modules.\n\npub mod registry;\n\npub use registry::{registry, GeneratorRegistry};\n","traces":[],"covered":0,"coverable":0},{"path":["/","home","ajit","Documents","dotenv-space-cli","src","config","registry.rs"],"content":"//! Generator registry for managing stack and service generators.\n//!\n//! This module provides a global singleton registry that maps\n//! machine-readable IDs to generator implementations.\n\nuse crate::generators::{ServiceGenerator, StackGenerator};\n// use anyhow::{Context, Result};\nuse std::collections::HashMap;\nuse std::sync::OnceLock;\n\n/// Global registry for available generators.\npub struct GeneratorRegistry {\n    stacks: HashMap\u003c\u0026'static str, Box\u003cdyn StackGenerator\u003e\u003e,\n    services: HashMap\u003c\u0026'static str, Box\u003cdyn ServiceGenerator\u003e\u003e,\n}\n\nimpl GeneratorRegistry {\n    /// Initialize registry with built-in generators.\n    #[must_use]\n    pub fn new() -\u003e Self {\n        let mut registry = Self {\n            stacks: HashMap::new(),\n            services: HashMap::new(),\n        };\n\n        // Register built-in stacks\n        registry.register_stack(Box::new(crate::generators::stack::PythonGenerator));\n        registry.register_stack(Box::new(crate::generators::stack::NodeJsGenerator));\n        registry.register_stack(Box::new(crate::generators::stack::RustGenerator));\n        registry.register_stack(Box::new(crate::generators::stack::GoGenerator));\n        registry.register_stack(Box::new(crate::generators::stack::PhpGenerator));\n        registry.register_stack(Box::new(crate::generators::stack::RubyGenerator));\n        registry.register_stack(Box::new(crate::generators::stack::OtherGenerator));\n\n        // Register built-in services\n        registry.register_service(Box::new(crate::generators::service::PostgresqlGenerator));\n        registry.register_service(Box::new(crate::generators::service::RedisGenerator));\n        registry.register_service(Box::new(crate::generators::service::MongoDbGenerator));\n        registry.register_service(Box::new(crate::generators::service::AwsS3Generator));\n        registry.register_service(Box::new(crate::generators::service::StripeGenerator));\n        registry.register_service(Box::new(crate::generators::service::TwilioGenerator));\n        registry.register_service(Box::new(crate::generators::service::SendGridGenerator));\n        registry.register_service(Box::new(crate::generators::service::SentryGenerator));\n        registry.register_service(Box::new(crate::generators::service::OpenAiGenerator));\n\n        registry\n    }\n\n    /// Register a new stack generator.\n    pub fn register_stack(\u0026mut self, generator: Box\u003cdyn StackGenerator\u003e) {\n        let id = generator.id();\n        self.stacks.insert(id, generator);\n    }\n\n    /// Register a new service generator.\n    pub fn register_service(\u0026mut self, generator: Box\u003cdyn ServiceGenerator\u003e) {\n        let id = generator.id();\n        self.services.insert(id, generator);\n    }\n\n    /// Get a stack generator by ID.\n    #[must_use]\n    pub fn get_stack(\u0026self, id: \u0026str) -\u003e Option\u003c\u0026dyn StackGenerator\u003e {\n        self.stacks.get(id).map(|g| g.as_ref())\n    }\n\n    /// Get a service generator by ID.\n    #[must_use]\n    pub fn get_service(\u0026self, id: \u0026str) -\u003e Option\u003c\u0026dyn ServiceGenerator\u003e {\n        self.services.get(id).map(|g| g.as_ref())\n    }\n\n    /// List all available stack IDs.\n    #[must_use]\n    pub fn list_stacks(\u0026self) -\u003e Vec\u003c\u0026'static str\u003e {\n        let mut ids: Vec\u003c_\u003e = self.stacks.keys().copied().collect();\n        ids.sort_unstable();\n        ids\n    }\n\n    /// List all available service IDs.\n    #[must_use]\n    pub fn list_services(\u0026self) -\u003e Vec\u003c\u0026'static str\u003e {\n        let mut ids: Vec\u003c_\u003e = self.services.keys().copied().collect();\n        ids.sort_unstable();\n        ids\n    }\n}\n\nimpl Default for GeneratorRegistry {\n    fn default() -\u003e Self {\n        Self::new()\n    }\n}\n\n/// Global singleton accessor.\n#[must_use]\npub fn registry() -\u003e \u0026'static GeneratorRegistry {\n    static REGISTRY: OnceLock\u003cGeneratorRegistry\u003e = OnceLock::new();\n    REGISTRY.get_or_init(GeneratorRegistry::new)\n}\n\n#[cfg(test)]\nmod tests {\n    use super::*;\n\n    #[test]\n    fn test_registry_lists_stacks() {\n        let reg = registry();\n        let stacks = reg.list_stacks();\n        assert!(stacks.contains(\u0026\"python\"));\n        assert!(stacks.contains(\u0026\"rust\"));\n    }\n\n    #[test]\n    fn test_registry_gets_stack() {\n        let reg = registry();\n        let stack = reg.get_stack(\"python\").unwrap();\n        assert_eq!(stack.id(), \"python\");\n        assert_eq!(stack.display_name(), \"Python (Django/FastAPI)\");\n    }\n\n    #[test]\n    fn test_registry_gets_service() {\n        let reg = registry();\n        let service = reg.get_service(\"postgresql\").unwrap();\n        assert_eq!(service.id(), \"postgresql\");\n    }\n\n    #[test]\n    fn test_registry_unknown_stack() {\n        let reg = registry();\n        assert!(reg.get_stack(\"unknown\").is_none());\n    }\n}\n","traces":[{"line":20,"address":[6235195,6235201,6234160],"length":1,"stats":{"Line":1}},{"line":22,"address":[6234183],"length":1,"stats":{"Line":1}},{"line":23,"address":[6234200],"length":1,"stats":{"Line":1}},{"line":27,"address":[6234359,6234424],"length":1,"stats":{"Line":2}},{"line":28,"address":[6234450],"length":1,"stats":{"Line":1}},{"line":29,"address":[6234497],"length":1,"stats":{"Line":1}},{"line":30,"address":[6234544],"length":1,"stats":{"Line":1}},{"line":31,"address":[6234591],"length":1,"stats":{"Line":1}},{"line":32,"address":[6234638],"length":1,"stats":{"Line":1}},{"line":33,"address":[6234685],"length":1,"stats":{"Line":1}},{"line":36,"address":[6234732],"length":1,"stats":{"Line":1}},{"line":37,"address":[6234779],"length":1,"stats":{"Line":1}},{"line":38,"address":[6234826],"length":1,"stats":{"Line":1}},{"line":39,"address":[6234873],"length":1,"stats":{"Line":1}},{"line":40,"address":[6234920],"length":1,"stats":{"Line":1}},{"line":41,"address":[6234967],"length":1,"stats":{"Line":1}},{"line":42,"address":[6235014],"length":1,"stats":{"Line":1}},{"line":43,"address":[6235061],"length":1,"stats":{"Line":1}},{"line":44,"address":[6235108],"length":1,"stats":{"Line":1}},{"line":46,"address":[6235161],"length":1,"stats":{"Line":1}},{"line":50,"address":[6233696,6233913,6233887],"length":1,"stats":{"Line":1}},{"line":51,"address":[5776438,5776360],"length":1,"stats":{"Line":2}},{"line":52,"address":[6233812],"length":1,"stats":{"Line":1}},{"line":56,"address":[5776749,5776544,5776727],"length":1,"stats":{"Line":1}},{"line":57,"address":[6233944,6234026],"length":1,"stats":{"Line":2}},{"line":58,"address":[6234036],"length":1,"stats":{"Line":1}},{"line":63,"address":[5777680],"length":1,"stats":{"Line":2}},{"line":64,"address":[6563056,6563065],"length":1,"stats":{"Line":4}},{"line":69,"address":[6233152],"length":1,"stats":{"Line":1}},{"line":70,"address":[5421472,5421481],"length":1,"stats":{"Line":3}},{"line":75,"address":[5776087,5776093,5775888],"length":1,"stats":{"Line":1}},{"line":76,"address":[5775922],"length":1,"stats":{"Line":1}},{"line":77,"address":[5775972,5776037],"length":1,"stats":{"Line":2}},{"line":78,"address":[6233385],"length":1,"stats":{"Line":1}},{"line":83,"address":[5776112,5776321,5776315],"length":1,"stats":{"Line":0}},{"line":84,"address":[6233464],"length":1,"stats":{"Line":0}},{"line":85,"address":[6233540,6233609],"length":1,"stats":{"Line":0}},{"line":86,"address":[6233629],"length":1,"stats":{"Line":0}},{"line":91,"address":[6235280],"length":1,"stats":{"Line":0}},{"line":92,"address":[6235288],"length":1,"stats":{"Line":0}},{"line":98,"address":[6235264],"length":1,"stats":{"Line":4}},{"line":100,"address":[6235265],"length":1,"stats":{"Line":4}}],"covered":36,"coverable":42},{"path":["/","home","ajit","Documents","dotenv-space-cli","src","core","config.rs"],"content":"//! Config file support for .evnx.toml\n//!\n//! # Overview\n//!\n//! Provides configuration file support allowing users to set defaults and preferences\n//! that persist across command invocations. Configuration files are searched in:\n//!\n//! 1. Current directory (`.evnx.toml` or `evnx.toml`)\n//! 2. Parent directories (recursively up to root)\n//! 3. Home directory (`~/.evnx.toml` or `~/evnx.toml`)\n//!\n//! # Configuration Sections\n//!\n//! - **defaults** - Default file paths and behavior\n//! - **validate** - Validation command defaults\n//! - **scan** - Secret scanning defaults\n//! - **convert** - Format conversion defaults\n//! - **aliases** - Custom format aliases\n//!\n//! # Example Configuration\n//!\n//! ```toml\n//! [defaults]\n//! env_file = \".env\"\n//! example_file = \".env.example\"\n//! verbose = false\n//!\n//! [validate]\n//! strict = true\n//! format = \"pretty\"\n//!\n//! [scan]\n//! ignore_placeholders = true\n//! exclude_patterns = [\"*.example\", \"*.template\"]\n//!\n//! [convert]\n//! default_format = \"json\"\n//!\n//! [aliases]\n//! gh = \"github-actions\"\n//! k8s = \"kubernetes\"\n//! ```\n\nuse anyhow::{Context, Result};\nuse serde::{Deserialize, Serialize};\nuse std::fs;\nuse std::path::{Path, PathBuf};\n\n/// Main configuration struct\n///\n/// ✅ CLIPPY FIX: Uses `#[derive(Default)]` instead of manual implementation\n#[derive(Debug, Deserialize, Serialize, Clone, Default)]\npub struct Config {\n    #[serde(default)]\n    pub defaults: Defaults,\n\n    #[serde(default)]\n    pub validate: ValidateConfig,\n\n    #[serde(default)]\n    pub scan: ScanConfig,\n\n    #[serde(default)]\n    pub convert: ConvertConfig,\n\n    #[serde(default)]\n    pub aliases: Aliases,\n}\n\n/// Default settings for file paths and general behavior\n#[derive(Debug, Deserialize, Serialize, Clone)]\npub struct Defaults {\n    #[serde(default = \"default_env_file\")]\n    pub env_file: String,\n\n    #[serde(default = \"default_example_file\")]\n    pub example_file: String,\n\n    #[serde(default)]\n    pub verbose: bool,\n}\n\n/// Configuration for validation command\n#[derive(Debug, Deserialize, Serialize, Clone)]\npub struct ValidateConfig {\n    #[serde(default)]\n    pub strict: bool,\n\n    #[serde(default)]\n    pub auto_fix: bool,\n\n    #[serde(default = \"default_format\")]\n    pub format: String,\n}\n\n/// Configuration for secret scanning command\n#[derive(Debug, Deserialize, Serialize, Clone)]\npub struct ScanConfig {\n    #[serde(default)]\n    pub ignore_placeholders: bool,\n\n    #[serde(default)]\n    pub exclude_patterns: Vec\u003cString\u003e,\n\n    #[serde(default = \"default_format\")]\n    pub format: String,\n}\n\n/// Configuration for format conversion command\n#[derive(Debug, Deserialize, Serialize, Clone)]\npub struct ConvertConfig {\n    #[serde(default = \"default_convert_format\")]\n    pub default_format: String,\n\n    #[serde(default)]\n    pub base64: bool,\n\n    pub prefix: Option\u003cString\u003e,\n    pub transform: Option\u003cString\u003e,\n}\n\n/// Custom format aliases for the convert command\n#[derive(Debug, Deserialize, Serialize, Clone, Default)]\npub struct Aliases {\n    #[serde(flatten)]\n    pub formats: std::collections::HashMap\u003cString, String\u003e,\n}\n\n// ✅ CLIPPY FIX: Removed manual impl Default for Config (using #[derive(Default)])\n\nimpl Default for Defaults {\n    fn default() -\u003e Self {\n        Self {\n            env_file: default_env_file(),\n            example_file: default_example_file(),\n            verbose: false,\n        }\n    }\n}\n\nimpl Default for ValidateConfig {\n    fn default() -\u003e Self {\n        Self {\n            strict: false,\n            auto_fix: false,\n            format: default_format(),\n        }\n    }\n}\n\nimpl Default for ScanConfig {\n    fn default() -\u003e Self {\n        Self {\n            ignore_placeholders: true,\n            exclude_patterns: vec![\n                \"*.example\".to_string(),\n                \"*.sample\".to_string(),\n                \"*.template\".to_string(),\n            ],\n            format: default_format(),\n        }\n    }\n}\n\nimpl Default for ConvertConfig {\n    fn default() -\u003e Self {\n        Self {\n            default_format: default_convert_format(),\n            base64: false,\n            prefix: None,\n            transform: None,\n        }\n    }\n}\n\nfn default_env_file() -\u003e String {\n    \".env\".to_string()\n}\n\nfn default_example_file() -\u003e String {\n    \".env.example\".to_string()\n}\n\nfn default_format() -\u003e String {\n    \"pretty\".to_string()\n}\n\nfn default_convert_format() -\u003e String {\n    \"json\".to_string()\n}\n\nimpl Config {\n    /// Load config from file\n    pub fn load() -\u003e Result\u003cSelf\u003e {\n        let path = Self::find_config_file()?;\n        Self::load_from_path(\u0026path)\n    }\n\n    /// Load config from specific path\n    pub fn load_from_path(path: \u0026Path) -\u003e Result\u003cSelf\u003e {\n        let content = fs::read_to_string(path)\n            .with_context(|| format!(\"Failed to read config from {}\", path.display()))?;\n\n        let config: Config = toml::from_str(\u0026content)\n            .with_context(|| format!(\"Failed to parse config from {}\", path.display()))?;\n\n        Ok(config)\n    }\n\n    /// Find config file by searching up the directory tree\n    pub fn find_config_file() -\u003e Result\u003cPathBuf\u003e {\n        let config_names = [\".evnx.toml\", \"evnx.toml\"];\n\n        // Start from current directory\n        let mut current_dir = std::env::current_dir()?;\n\n        loop {\n            for name in \u0026config_names {\n                let path = current_dir.join(name);\n                if path.exists() {\n                    return Ok(path);\n                }\n            }\n\n            // Move up one directory\n            if !current_dir.pop() {\n                break;\n            }\n        }\n\n        // Check home directory\n        if let Some(home) = dirs::home_dir() {\n            for name in \u0026config_names {\n                let path = home.join(name);\n                if path.exists() {\n                    return Ok(path);\n                }\n            }\n        }\n\n        // Return default config if no file found\n        Err(anyhow::anyhow!(\"No config file found\"))\n    }\n\n    /// Save config to file\n    pub fn save(\u0026self, path: \u0026Path) -\u003e Result\u003c()\u003e {\n        let toml = toml::to_string_pretty(self)?;\n        fs::write(path, toml)?;\n        Ok(())\n    }\n\n    /// Create example config file\n    pub fn create_example(path: \u0026Path) -\u003e Result\u003c()\u003e {\n        let example = r#\"# evnx configuration file\n# Place this in your project root or home directory\n\n[defaults]\nenv_file = \".env\"\nexample_file = \".env.example\"\nverbose = false\n\n[validate]\nstrict = false\nauto_fix = false\nformat = \"pretty\"  # Options: pretty, json, github-actions\n\n[scan]\nignore_placeholders = true\nexclude_patterns = [\"*.example\", \"*.sample\", \"*.template\"]\nformat = \"pretty\"  # Options: pretty, json, sarif\n\n[convert]\ndefault_format = \"json\"\nbase64 = false\n# prefix = \"APP_\"\n# transform = \"uppercase\"\n\n[aliases]\n# Format aliases for convert command\ngh = \"github-actions\"\nk8s = \"kubernetes\"\ntf = \"terraform\"\n\"#;\n        fs::write(path, example)?;\n        Ok(())\n    }\n\n    /// Merge with CLI arguments (CLI args take precedence)\n    pub fn merge_with_args(\u0026self, cli_verbose: bool) -\u003e Self {\n        let mut config = self.clone();\n        if cli_verbose {\n            config.defaults.verbose = true;\n        }\n        config\n    }\n\n    /// Resolve format alias\n    pub fn resolve_format_alias(\u0026self, format: \u0026str) -\u003e String {\n        self.aliases\n            .formats\n            .get(format)\n            .cloned()\n            .unwrap_or_else(|| format.to_string())\n    }\n}\n\n#[cfg(test)]\nmod tests {\n    use super::*;\n    use std::io::Write;\n    use tempfile::NamedTempFile;\n\n    #[test]\n    fn test_default_config() {\n        let config = Config::default();\n        assert_eq!(config.defaults.env_file, \".env\");\n        assert_eq!(config.defaults.example_file, \".env.example\");\n        assert!(!config.defaults.verbose);\n    }\n\n    #[test]\n    fn test_load_from_toml() {\n        let toml = r#\"\n[defaults]\nenv_file = \"custom.env\"\nverbose = true\n\n[validate]\nstrict = true\n\n[scan]\nignore_placeholders = false\n\n[aliases]\ngh = \"github-actions\"\n\"#;\n\n        let mut file = NamedTempFile::new().unwrap();\n        file.write_all(toml.as_bytes()).unwrap();\n\n        let config = Config::load_from_path(file.path()).unwrap();\n        assert_eq!(config.defaults.env_file, \"custom.env\");\n        assert!(config.defaults.verbose);\n        assert!(config.validate.strict);\n        assert!(!config.scan.ignore_placeholders);\n        assert_eq!(\n            config.aliases.formats.get(\"gh\"),\n            Some(\u0026\"github-actions\".to_string())\n        );\n    }\n\n    #[test]\n    fn test_resolve_alias() {\n        let mut config = Config::default();\n        config\n            .aliases\n            .formats\n            .insert(\"gh\".to_string(), \"github-actions\".to_string());\n\n        assert_eq!(config.resolve_format_alias(\"gh\"), \"github-actions\");\n        assert_eq!(config.resolve_format_alias(\"json\"), \"json\");\n    }\n\n    #[test]\n    fn test_merge_with_args() {\n        let config = Config::default();\n        assert!(!config.defaults.verbose);\n\n        let merged = config.merge_with_args(true);\n        assert!(merged.defaults.verbose);\n    }\n\n    #[test]\n    fn test_create_example() {\n        let file = NamedTempFile::new().unwrap();\n        Config::create_example(file.path()).unwrap();\n\n        let content = fs::read_to_string(file.path()).unwrap();\n        assert!(content.contains(\"[defaults]\"));\n        assert!(content.contains(\"[validate]\"));\n        assert!(content.contains(\"[scan]\"));\n    }\n}\n","traces":[{"line":132,"address":[6168272,6168420,6168426],"length":1,"stats":{"Line":3}},{"line":134,"address":[6168286],"length":1,"stats":{"Line":3}},{"line":135,"address":[6168300],"length":1,"stats":{"Line":3}},{"line":142,"address":[6169776],"length":1,"stats":{"Line":3}},{"line":146,"address":[6169789],"length":1,"stats":{"Line":3}},{"line":152,"address":[5407263,5406736,5407269],"length":1,"stats":{"Line":3}},{"line":155,"address":[6169144,6169009,6169182,6169344,6169498,6168971,6169078],"length":1,"stats":{"Line":6}},{"line":160,"address":[6169325],"length":1,"stats":{"Line":3}},{"line":166,"address":[5407408],"length":1,"stats":{"Line":1}},{"line":168,"address":[6169629],"length":1,"stats":{"Line":1}},{"line":176,"address":[6162224],"length":1,"stats":{"Line":3}},{"line":177,"address":[6162232],"length":1,"stats":{"Line":3}},{"line":180,"address":[6162256],"length":1,"stats":{"Line":3}},{"line":181,"address":[6162264],"length":1,"stats":{"Line":4}},{"line":184,"address":[5400096],"length":1,"stats":{"Line":1}},{"line":185,"address":[5400104],"length":1,"stats":{"Line":1}},{"line":188,"address":[6162288],"length":1,"stats":{"Line":1}},{"line":189,"address":[6162296],"length":1,"stats":{"Line":1}},{"line":194,"address":[5402704,5402965,5402971],"length":1,"stats":{"Line":0}},{"line":195,"address":[5402721],"length":1,"stats":{"Line":0}},{"line":196,"address":[6165065,6164997],"length":1,"stats":{"Line":0}},{"line":200,"address":[6162998,6162464,6163004],"length":1,"stats":{"Line":1}},{"line":201,"address":[6162544,6162612,6162507],"length":1,"stats":{"Line":2}},{"line":202,"address":[5400431,5400500],"length":1,"stats":{"Line":1}},{"line":204,"address":[6162894,6162809,6162687,6162753],"length":1,"stats":{"Line":3}},{"line":205,"address":[6003136,6003195],"length":1,"stats":{"Line":1}},{"line":207,"address":[6162943],"length":1,"stats":{"Line":1}},{"line":211,"address":[6164666,6164294,6163120],"length":1,"stats":{"Line":0}},{"line":212,"address":[6163143],"length":1,"stats":{"Line":0}},{"line":215,"address":[6163197],"length":1,"stats":{"Line":0}},{"line":218,"address":[6163503,6163408],"length":1,"stats":{"Line":0}},{"line":219,"address":[5402312,5401508],"length":1,"stats":{"Line":0}},{"line":220,"address":[6164456,6164527],"length":1,"stats":{"Line":0}},{"line":221,"address":[6164578],"length":1,"stats":{"Line":0}},{"line":226,"address":[6163651],"length":1,"stats":{"Line":0}},{"line":232,"address":[6163688],"length":1,"stats":{"Line":0}},{"line":233,"address":[6163776,6163888],"length":1,"stats":{"Line":0}},{"line":234,"address":[6164001,6164055],"length":1,"stats":{"Line":0}},{"line":235,"address":[5401957,5402028],"length":1,"stats":{"Line":0}},{"line":236,"address":[6164204],"length":1,"stats":{"Line":0}},{"line":242,"address":[5401684,5402183],"length":1,"stats":{"Line":0}},{"line":246,"address":[6165633,6165120,6165604],"length":1,"stats":{"Line":0}},{"line":247,"address":[6165167],"length":1,"stats":{"Line":0}},{"line":248,"address":[6165353,6165589,6165457],"length":1,"stats":{"Line":0}},{"line":249,"address":[5403416],"length":1,"stats":{"Line":0}},{"line":253,"address":[6162320],"length":1,"stats":{"Line":1}},{"line":254,"address":[5400238],"length":1,"stats":{"Line":1}},{"line":284,"address":[6162355],"length":1,"stats":{"Line":1}},{"line":285,"address":[6162445],"length":1,"stats":{"Line":1}},{"line":289,"address":[6163024],"length":1,"stats":{"Line":1}},{"line":290,"address":[6163063],"length":1,"stats":{"Line":1}},{"line":291,"address":[6163077,6163118],"length":1,"stats":{"Line":2}},{"line":292,"address":[5401001],"length":1,"stats":{"Line":1}},{"line":294,"address":[6163085],"length":1,"stats":{"Line":1}},{"line":298,"address":[6164688],"length":1,"stats":{"Line":1}},{"line":299,"address":[6164754],"length":1,"stats":{"Line":1}},{"line":301,"address":[6164761],"length":1,"stats":{"Line":1}},{"line":303,"address":[6003552,6003573],"length":1,"stats":{"Line":3}}],"covered":37,"coverable":58},{"path":["/","home","ajit","Documents","dotenv-space-cli","src","core","converter.rs"],"content":"// Converter trait and options for format conversion\n//\n// Provides the core trait and configuration for converting environment variables\n// to different output formats.\n\nuse anyhow::Result;\nuse std::collections::HashMap;\n\n/// Key transformation options\n#[derive(Debug, Clone)]\npub enum KeyTransform {\n    /// Transform keys to UPPERCASE\n    Uppercase,\n    /// Transform keys to lowercase\n    Lowercase,\n    /// Transform keys to camelCase\n    CamelCase,\n    /// Transform keys to snake_case\n    SnakeCase,\n}\n\n/// Options for format conversion\n///\n/// ✅ CLIPPY FIX: Uses `#[derive(Default)]` instead of manual implementation\n#[derive(Debug, Clone, Default)]\npub struct ConvertOptions {\n    /// Include only variables matching this glob pattern\n    pub include_pattern: Option\u003cString\u003e,\n\n    /// Exclude variables matching this glob pattern\n    pub exclude_pattern: Option\u003cString\u003e,\n\n    /// Base64-encode all values\n    pub base64: bool,\n\n    /// Prefix to add to all keys\n    pub prefix: Option\u003cString\u003e,\n\n    /// Key transformation to apply\n    pub transform: Option\u003cKeyTransform\u003e,\n}\n\n// ✅ CLIPPY FIX: Removed manual impl Default (using #[derive(Default)])\n\nimpl ConvertOptions {\n    /// Create new default options\n    pub fn new() -\u003e Self {\n        Self::default()\n    }\n\n    /// Filter variables based on include/exclude patterns\n    pub fn filter_vars(\u0026self, vars: \u0026HashMap\u003cString, String\u003e) -\u003e HashMap\u003cString, String\u003e {\n        vars.iter()\n            .filter(|(key, _)| self.should_include(key))\n            .map(|(k, v)| (k.clone(), v.clone()))\n            .collect()\n    }\n\n    /// Check if a variable should be included\n    fn should_include(\u0026self, key: \u0026str) -\u003e bool {\n        // Check exclude pattern first\n        if let Some(ref exclude) = self.exclude_pattern {\n            if glob_match(key, exclude) {\n                return false;\n            }\n        }\n\n        // Check include pattern\n        if let Some(ref include) = self.include_pattern {\n            return glob_match(key, include);\n        }\n\n        // Include by default if no patterns specified\n        true\n    }\n\n    /// Transform a key according to the specified transformation\n    pub fn transform_key(\u0026self, key: \u0026str) -\u003e String {\n        let key = if let Some(ref prefix) = self.prefix {\n            format!(\"{}{}\", prefix, key)\n        } else {\n            key.to_string()\n        };\n\n        match self.transform {\n            Some(KeyTransform::Uppercase) =\u003e key.to_uppercase(),\n            Some(KeyTransform::Lowercase) =\u003e key.to_lowercase(),\n            Some(KeyTransform::CamelCase) =\u003e to_camel_case(\u0026key),\n            Some(KeyTransform::SnakeCase) =\u003e to_snake_case(\u0026key),\n            None =\u003e key,\n        }\n    }\n\n    /// Transform a value (base64 encode if enabled)\n    pub fn transform_value(\u0026self, value: \u0026str) -\u003e String {\n        if self.base64 {\n            use base64::{engine::general_purpose, Engine as _};\n            general_purpose::STANDARD.encode(value.as_bytes())\n        } else {\n            value.to_string()\n        }\n    }\n}\n\n/// Converter trait for format conversion\npub trait Converter {\n    /// Convert environment variables to the target format\n    ///\n    /// # Arguments\n    ///\n    /// * `vars` - Environment variables to convert\n    /// * `options` - Conversion options (filtering, transformations, etc.)\n    ///\n    /// # Returns\n    ///\n    /// Formatted output as a string\n    fn convert(\u0026self, vars: \u0026HashMap\u003cString, String\u003e, options: \u0026ConvertOptions) -\u003e Result\u003cString\u003e;\n\n    /// Get the name of this format\n    ///\n    /// Used for format selection and error messages.\n    fn name(\u0026self) -\u003e \u0026str;\n\n    /// Get a description of this format\n    ///\n    /// Used in help text and interactive selection.\n    fn description(\u0026self) -\u003e \u0026str;\n}\n\n// Helper functions\n\n/// Simple glob pattern matching\n///\n/// Supports `*` wildcard matching.\nfn glob_match(text: \u0026str, pattern: \u0026str) -\u003e bool {\n    if pattern == \"*\" {\n        return true;\n    }\n\n    if pattern.starts_with('*') \u0026\u0026 pattern.ends_with('*') {\n        let substring = \u0026pattern[1..pattern.len() - 1];\n        return text.contains(substring);\n    }\n\n    // if pattern.starts_with('*') {\n    //     let suffix = \u0026pattern[1..];\n    //     return text.ends_with(suffix);\n    // }\n\n    // if pattern.ends_with('*') {\n    //     let prefix = \u0026pattern[..pattern.len() - 1];\n    //     return text.starts_with(prefix);\n    // }\n    if let Some(suffix) = pattern.strip_prefix('*') {\n        return text.ends_with(suffix);\n    }\n\n    if let Some(prefix) = pattern.strip_suffix('*') {\n        return text.starts_with(prefix);\n    }\n\n    text == pattern\n}\n\n/// Convert string to camelCase\nfn to_camel_case(s: \u0026str) -\u003e String {\n    let parts: Vec\u003c\u0026str\u003e = s.split('_').collect();\n    if parts.is_empty() {\n        return String::new();\n    }\n\n    let mut result = parts[0].to_lowercase();\n    for part in \u0026parts[1..] {\n        if !part.is_empty() {\n            let mut chars = part.chars();\n            if let Some(first) = chars.next() {\n                result.push_str(\u0026first.to_uppercase().to_string());\n                result.push_str(\u0026chars.as_str().to_lowercase());\n            }\n        }\n    }\n    result\n}\n\n// Convert string to snake_case\n// fn to_snake_case(s: \u0026str) -\u003e String {\n//     let mut result = String::with_capacity(s.len());\n//     let mut prev_is_upper = false;\n\n//     for (i, ch) in s.chars().enumerate() {\n//         if ch.is_uppercase() {\n//             if i \u003e 0 \u0026\u0026 !prev_is_upper {\n//                 result.push('_');\n//             }\n//             result.extend(ch.to_lowercase());\n//             prev_is_upper = true;\n//         } else {\n//             result.push(ch);\n//             prev_is_upper = false;\n//         }\n//     }\n\n//     result\n// }\n\nfn to_snake_case(s: \u0026str) -\u003e String {\n    let mut result = String::with_capacity(s.len());\n    let chars: Vec\u003cchar\u003e = s.chars().collect();\n\n    for i in 0..chars.len() {\n        let ch = chars[i];\n\n        if ch.is_uppercase() {\n            if i \u003e 0 {\n                let prev = chars[i - 1];\n                let next = chars.get(i + 1);\n\n                if prev.is_lowercase()\n                    || (prev.is_uppercase() \u0026\u0026 next.map(|c| c.is_lowercase()).unwrap_or(false))\n                {\n                    result.push('_');\n                }\n            }\n            result.extend(ch.to_lowercase());\n        } else {\n            result.push(ch);\n        }\n    }\n\n    result\n}\n\n#[cfg(test)]\nmod tests {\n    use super::*;\n\n    #[test]\n    fn test_default_options() {\n        let opts = ConvertOptions::default();\n        assert!(opts.include_pattern.is_none());\n        assert!(opts.exclude_pattern.is_none());\n        assert!(!opts.base64);\n        assert!(opts.prefix.is_none());\n        assert!(opts.transform.is_none());\n    }\n\n    #[test]\n    fn test_new_options() {\n        let opts = ConvertOptions::new();\n        assert!(opts.include_pattern.is_none());\n    }\n\n    #[test]\n    fn test_filter_vars_no_pattern() {\n        let mut vars = HashMap::new();\n        vars.insert(\"KEY1\".to_string(), \"value1\".to_string());\n        vars.insert(\"KEY2\".to_string(), \"value2\".to_string());\n\n        let opts = ConvertOptions::default();\n        let filtered = opts.filter_vars(\u0026vars);\n\n        assert_eq!(filtered.len(), 2);\n        assert!(filtered.contains_key(\"KEY1\"));\n        assert!(filtered.contains_key(\"KEY2\"));\n    }\n\n    #[test]\n    fn test_filter_vars_include() {\n        let mut vars = HashMap::new();\n        vars.insert(\"AWS_KEY\".to_string(), \"value1\".to_string());\n        vars.insert(\"DB_KEY\".to_string(), \"value2\".to_string());\n\n        let mut opts = ConvertOptions::default();\n        opts.include_pattern = Some(\"AWS_*\".to_string());\n        let filtered = opts.filter_vars(\u0026vars);\n\n        assert_eq!(filtered.len(), 1);\n        assert!(filtered.contains_key(\"AWS_KEY\"));\n        assert!(!filtered.contains_key(\"DB_KEY\"));\n    }\n\n    #[test]\n    fn test_filter_vars_exclude() {\n        let mut vars = HashMap::new();\n        vars.insert(\"KEY1\".to_string(), \"value1\".to_string());\n        vars.insert(\"KEY2_LOCAL\".to_string(), \"value2\".to_string());\n\n        let mut opts = ConvertOptions::default();\n        opts.exclude_pattern = Some(\"*_LOCAL\".to_string());\n        let filtered = opts.filter_vars(\u0026vars);\n\n        assert_eq!(filtered.len(), 1);\n        assert!(filtered.contains_key(\"KEY1\"));\n        assert!(!filtered.contains_key(\"KEY2_LOCAL\"));\n    }\n\n    #[test]\n    fn test_transform_key_prefix() {\n        let mut opts = ConvertOptions::default();\n        opts.prefix = Some(\"APP_\".to_string());\n\n        assert_eq!(opts.transform_key(\"DATABASE_URL\"), \"APP_DATABASE_URL\");\n    }\n\n    #[test]\n    fn test_transform_key_uppercase() {\n        let mut opts = ConvertOptions::default();\n        opts.transform = Some(KeyTransform::Uppercase);\n\n        assert_eq!(opts.transform_key(\"database_url\"), \"DATABASE_URL\");\n    }\n\n    #[test]\n    fn test_transform_key_lowercase() {\n        let mut opts = ConvertOptions::default();\n        opts.transform = Some(KeyTransform::Lowercase);\n\n        assert_eq!(opts.transform_key(\"DATABASE_URL\"), \"database_url\");\n    }\n\n    #[test]\n    fn test_transform_value_base64() {\n        let mut opts = ConvertOptions::default();\n        opts.base64 = true;\n\n        let result = opts.transform_value(\"hello\");\n        assert_eq!(result, \"aGVsbG8=\"); // base64(\"hello\")\n    }\n\n    #[test]\n    fn test_glob_match() {\n        assert!(glob_match(\"AWS_KEY\", \"AWS_*\"));\n        assert!(glob_match(\"MY_AWS_KEY\", \"*_AWS_*\"));\n        assert!(glob_match(\"KEY_LOCAL\", \"*_LOCAL\"));\n        assert!(glob_match(\"anything\", \"*\"));\n        assert!(!glob_match(\"AWS_KEY\", \"DB_*\"));\n    }\n\n    #[test]\n    fn test_to_camel_case() {\n        assert_eq!(to_camel_case(\"database_url\"), \"databaseUrl\");\n        assert_eq!(to_camel_case(\"secret_key\"), \"secretKey\");\n        assert_eq!(to_camel_case(\"aws_access_key_id\"), \"awsAccessKeyId\");\n    }\n\n    #[test]\n    fn test_to_snake_case() {\n        assert_eq!(to_snake_case(\"DatabaseURL\"), \"database_url\");\n        assert_eq!(to_snake_case(\"SecretKey\"), \"secret_key\");\n        assert_eq!(to_snake_case(\"HTTPServer\"), \"http_server\");\n        assert_eq!(to_snake_case(\"UserID\"), \"user_id\");\n        assert_eq!(to_snake_case(\"MySQLDatabase\"), \"my_sql_database\");\n        assert_eq!(to_snake_case(\"JSONParser\"), \"json_parser\");\n        assert_eq!(to_snake_case(\"Already_snake\"), \"already_snake\");\n        // assert_eq!(to_snake_case(\"DatabaseURL\"), \"database_u_r_l\");\n    }\n}\n","traces":[{"line":47,"address":[6601168],"length":1,"stats":{"Line":1}},{"line":48,"address":[6350232],"length":1,"stats":{"Line":1}},{"line":52,"address":[6599872],"length":1,"stats":{"Line":1}},{"line":53,"address":[6599921],"length":1,"stats":{"Line":2}},{"line":54,"address":[5736078,5736064],"length":1,"stats":{"Line":9}},{"line":55,"address":[6599959],"length":1,"stats":{"Line":6}},{"line":60,"address":[6600800],"length":1,"stats":{"Line":3}},{"line":62,"address":[6600834],"length":1,"stats":{"Line":3}},{"line":63,"address":[6600881],"length":1,"stats":{"Line":1}},{"line":64,"address":[6350013],"length":1,"stats":{"Line":1}},{"line":69,"address":[6600978,6600923],"length":1,"stats":{"Line":3}},{"line":70,"address":[6600983],"length":1,"stats":{"Line":1}},{"line":74,"address":[6601022],"length":1,"stats":{"Line":1}},{"line":78,"address":[6600766,6600772,6600016],"length":1,"stats":{"Line":1}},{"line":79,"address":[6600329,6600056],"length":1,"stats":{"Line":2}},{"line":80,"address":[6600118],"length":1,"stats":{"Line":1}},{"line":82,"address":[6600331],"length":1,"stats":{"Line":1}},{"line":85,"address":[6600365,6600484],"length":1,"stats":{"Line":1}},{"line":86,"address":[6600632,6600491],"length":1,"stats":{"Line":2}},{"line":87,"address":[6600513,6600663],"length":1,"stats":{"Line":2}},{"line":88,"address":[6600535,6600694],"length":1,"stats":{"Line":0}},{"line":89,"address":[6600720,6600557],"length":1,"stats":{"Line":0}},{"line":90,"address":[6600428],"length":1,"stats":{"Line":1}},{"line":95,"address":[6350096],"length":1,"stats":{"Line":1}},{"line":96,"address":[6601079],"length":1,"stats":{"Line":1}},{"line":98,"address":[6350174],"length":1,"stats":{"Line":1}},{"line":100,"address":[6601100],"length":1,"stats":{"Line":1}},{"line":135,"address":[6597120],"length":1,"stats":{"Line":1}},{"line":136,"address":[6597147],"length":1,"stats":{"Line":1}},{"line":137,"address":[6597196],"length":1,"stats":{"Line":1}},{"line":140,"address":[6597169,6597267],"length":1,"stats":{"Line":2}},{"line":141,"address":[6597294,6597607,6597528],"length":1,"stats":{"Line":2}},{"line":142,"address":[6597580],"length":1,"stats":{"Line":1}},{"line":154,"address":[6597206,6597336],"length":1,"stats":{"Line":2}},{"line":155,"address":[6597356],"length":1,"stats":{"Line":1}},{"line":158,"address":[6597380,6597455],"length":1,"stats":{"Line":2}},{"line":159,"address":[6597475],"length":1,"stats":{"Line":1}},{"line":162,"address":[6597499],"length":1,"stats":{"Line":0}},{"line":166,"address":[6598784,6598759,6597632],"length":1,"stats":{"Line":1}},{"line":167,"address":[6597671],"length":1,"stats":{"Line":1}},{"line":168,"address":[6346826,6346895],"length":1,"stats":{"Line":2}},{"line":169,"address":[6597863],"length":1,"stats":{"Line":0}},{"line":172,"address":[6597817,6597881],"length":1,"stats":{"Line":2}},{"line":173,"address":[6597907,6598002],"length":1,"stats":{"Line":2}},{"line":174,"address":[6347218,6347313],"length":1,"stats":{"Line":2}},{"line":175,"address":[6598248],"length":1,"stats":{"Line":1}},{"line":176,"address":[6347386],"length":1,"stats":{"Line":1}},{"line":177,"address":[6598384],"length":1,"stats":{"Line":1}},{"line":178,"address":[6598599],"length":1,"stats":{"Line":1}},{"line":182,"address":[6598164],"length":1,"stats":{"Line":1}},{"line":206,"address":[6348900,6348894,6347872],"length":1,"stats":{"Line":1}},{"line":207,"address":[6598877],"length":1,"stats":{"Line":1}},{"line":208,"address":[6599010,6598930],"length":1,"stats":{"Line":2}},{"line":210,"address":[6599029,6599105],"length":1,"stats":{"Line":2}},{"line":211,"address":[6599246,6599364],"length":1,"stats":{"Line":2}},{"line":213,"address":[6599377],"length":1,"stats":{"Line":1}},{"line":214,"address":[6599422],"length":1,"stats":{"Line":1}},{"line":215,"address":[6599462],"length":1,"stats":{"Line":1}},{"line":216,"address":[6348626],"length":1,"stats":{"Line":1}},{"line":218,"address":[6599671],"length":1,"stats":{"Line":1}},{"line":219,"address":[5736041,5736032],"length":1,"stats":{"Line":4}},{"line":221,"address":[6599720,6599797],"length":1,"stats":{"Line":2}},{"line":224,"address":[6599447,6599802],"length":1,"stats":{"Line":2}},{"line":226,"address":[6599430,6599410],"length":1,"stats":{"Line":2}},{"line":230,"address":[6599285],"length":1,"stats":{"Line":1}}],"covered":61,"coverable":65},{"path":["/","home","ajit","Documents","dotenv-space-cli","src","core","mod.rs"],"content":"pub mod config;\npub mod converter;\npub mod parser;\n\n// Re-export commonly used types\npub use config::Config;\npub use converter::{ConvertOptions, Converter, KeyTransform};\npub use parser::{EnvFile, ParseError, ParseResult, Parser, ParserConfig};\n","traces":[],"covered":0,"coverable":0},{"path":["/","home","ajit","Documents","dotenv-space-cli","src","core","parser.rs"],"content":"//! `.env` file parser — merged implementation.\n//!\n//! Combines the **correctness** of the original parser (typed errors, key\n//! validation, circular-expansion detection, depth limiting) with the\n//! **feature set** of the refactored parser (backtick quotes, multiline\n//! values, bare `$VAR` expansion, inline-comment stripping, configurable\n//! value trimming, and a proper [`Default`] impl).\n//!\n//! # Format support\n//!\n//! | Feature                  | Supported |\n//! |--------------------------|-----------|\n//! | `KEY=value`              | ✓         |\n//! | `export KEY=value`       | ✓         |\n//! | `# comments`             | ✓         |\n//! | Inline `# comments`      | ✓ (opt-in via [`ParserConfig::allow_inline_comments`]) |\n//! | Double-quoted values     | ✓         |\n//! | Single-quoted values     | ✓         |\n//! | Backtick-quoted values   | ✓         |\n//! | Multiline values         | ✓ (opt-in via [`ParserConfig::allow_multiline`]) |\n//! | `${VAR}` expansion       | ✓         |\n//! | `$VAR` expansion         | ✓         |\n//! | Circular expansion guard | ✓         |\n//! | Strict uppercase keys    | ✓ (opt-in via [`ParserConfig::strict`]) |\n//!\n//! # Compatibility with other modules\n//!\n//! Every call site in the codebase uses one of these three patterns:\n//!\n//! ```rust,ignore\n//! // Pattern A — most common (all commands)\n//! let parser = Parser::default();\n//! let env_file = parser.parse_file(\".env\")?;\n//! env_file.vars  // HashMap\u003cString, String\u003e\n//!\n//! // Pattern B — config override (validate --strict, tests)\n//! let parser = Parser::new(ParserConfig { strict: true, ..Default::default() });\n//!\n//! // Pattern C — parse from string (tests, template command)\n//! let vars = parser.parse_content(\"KEY=value\")?;\n//! ```\n//!\n//! This merged parser satisfies **all three patterns** without any call-site\n//! changes. See § Compatibility notes below for per-module details.\n//!\n//! # Error handling\n//!\n//! All errors are [`ParseError`] variants. Because the commands wrap parser\n//! calls with `anyhow::Context` (`.with_context(|| ...)`), the structured\n//! error converts automatically into `anyhow::Error` at the boundary — no\n//! changes needed in any command file.\n//!\n//! # Compatibility notes by module\n//!\n//! | Module | Method used | Breaking change? |\n//! |--------|-------------|-----------------|\n//! | `commands/validate.rs` | `parse_file(\u0026str)` | None — signature preserved |\n//! | `commands/diff.rs`     | `parse_file(\u0026str)` | None |\n//! | `commands/scan.rs`     | `parse_file(\u0026str)` | None |\n//! | `commands/convert.rs`  | `parse_file(\u0026str)` | None |\n//! | `commands/sync.rs`     | `parse_file(\u0026str)` | None |\n//! | `commands/template.rs` | `parse_file(\u0026str)` | None |\n//! | `commands/migrate.rs`  | `parse_file(\u0026str)` | None |\n//! | `commands/backup.rs`   | Not used directly  | N/A  |\n//! | `commands/doctor.rs`   | `parse_file(\u0026str)` | None |\n//! | `commands/init.rs`     | `parse_file(\u0026str)` | None |\n//! | `core/converter.rs`    | `EnvFile.vars`     | None — field name preserved |\n//! | Tests                  | `parse_content`    | None — method name preserved |\n\nuse std::collections::HashMap;\nuse std::fs;\nuse std::path::Path;\nuse thiserror::Error;\n\n// ── Error type ────────────────────────────────────────────────────────────────\n\n/// Structured parse errors with line numbers and context.\n///\n/// Implements [`std::error::Error`] via [`thiserror`] and converts into\n/// [`anyhow::Error`] automatically when used with the `?` operator inside\n/// a function that returns `anyhow::Result`. This means **no changes are\n/// needed in command files** that currently do:\n///\n/// ```rust,ignore\n/// let env_file = parser\n///     .parse_file(\u0026env)\n///     .with_context(|| format!(\"Failed to parse {}\", env))?;\n/// ```\n#[derive(Debug, Error)]\npub enum ParseError {\n    /// The file could not be read from disk.\n    #[error(\"Failed to read file: {0}\")]\n    FileReadError(#[from] std::io::Error),\n\n    /// A line did not contain a `=` separator (and is not a comment or blank).\n    #[error(\"Invalid format at line {line}: {message}\")]\n    InvalidFormat { line: usize, message: String },\n\n    /// A key contains characters outside `[A-Za-z][A-Za-z0-9_]*`.\n    #[error(\"Invalid key at line {line}: '{key}' (keys must match [A-Za-z][A-Za-z0-9_]*)\")]\n    InvalidKey { line: usize, key: String },\n\n    /// A `${VAR}` or `$VAR` reference names a variable that was not defined\n    /// earlier in the file.\n    #[error(\"Undefined variable at line {line}: ${{{var}}} is not defined\")]\n    UndefinedVariable { line: usize, var: String },\n\n    /// Two or more variables reference each other in a cycle.\n    #[error(\"Circular variable expansion at line {line}: {cycle}\")]\n    CircularExpansion { line: usize, cycle: String },\n\n    /// A quoted string was opened but never closed.\n    #[error(\"Unterminated quoted string at line {line}\")]\n    UnterminatedString { line: usize },\n\n    /// Expansion depth exceeded [`ParserConfig::max_expansion_depth`].\n    #[error(\"Variable expansion too deep at line {line}: max depth {max} exceeded\")]\n    ExpansionDepthExceeded { line: usize, max: usize },\n}\n\n/// Convenience alias used throughout the parser internals.\npub type ParseResult\u003cT\u003e = Result\u003cT, ParseError\u003e;\n\n// ── Public data types ─────────────────────────────────────────────────────────\n\n/// The result of parsing a `.env` file or string.\n///\n/// `vars` is the field accessed by every command and converter in the\n/// codebase. The field name is **identical** to both the old and new parser,\n/// so no call sites need updating.\n#[derive(Debug, Clone)]\npub struct EnvFile {\n    /// Parsed key-value pairs, in insertion order within the underlying\n    /// `HashMap`. Use an `IndexMap` if deterministic ordering is needed.\n    pub vars: HashMap\u003cString, String\u003e,\n\n    /// The file path this was parsed from, or `None` when parsed from a string.\n    ///\n    /// Changed from `String` (old) to `Option\u003cString\u003e` (new) — callers that\n    /// only access `env_file.vars` are unaffected.\n    pub source: Option\u003cString\u003e,\n}\n\n// ── Configuration ─────────────────────────────────────────────────────────────\n\n/// Controls parser behaviour. Construct with [`Default::default()`] and\n/// override individual fields as needed.\n///\n/// # Example\n///\n/// ```rust\n/// use evnx::core::parser::ParserConfig;\n///\n/// // Strict mode: only uppercase keys, no inline comments\n/// let config = ParserConfig {\n///     strict: true,\n///     allow_inline_comments: false,\n///     ..Default::default()\n/// };\n/// ```\n#[derive(Debug, Clone)]\npub struct ParserConfig {\n    /// Enable `${VAR}` and `$VAR` substitution in values.\n    ///\n    /// Default: `true`.\n    pub allow_expansion: bool,\n\n    /// Enforce all-uppercase keys. Fails with [`ParseError::InvalidKey`] if a\n    /// lowercase key is encountered.\n    ///\n    /// Default: `false`.\n    pub strict: bool,\n\n    /// Maximum number of recursive expansions before raising\n    /// [`ParseError::ExpansionDepthExceeded`]. Prevents runaway expansion of\n    /// deeply nested variable references.\n    ///\n    /// Default: `10`.\n    pub max_expansion_depth: usize,\n\n    /// Strip inline comments from unquoted values. When `true`, the `#` and\n    /// everything after it on unquoted lines is discarded.\n    ///\n    /// Example: `PORT=8080 # web server` → `PORT=8080`.\n    ///\n    /// Default: `true`.\n    pub allow_inline_comments: bool,\n\n    /// Trim leading and trailing whitespace from values after all other\n    /// processing. Quoted values are never trimmed — their whitespace is\n    /// always preserved.\n    ///\n    /// Default: `true`.\n    pub trim_values: bool,\n\n    /// Accept values that span multiple lines. A value whose opening quote is\n    /// not closed on the same line accumulates subsequent lines until the\n    /// closing quote is found.\n    ///\n    /// Default: `true`.\n    pub allow_multiline: bool,\n}\n\nimpl Default for ParserConfig {\n    fn default() -\u003e Self {\n        Self {\n            allow_expansion: true,\n            strict: false,\n            max_expansion_depth: 10,\n            allow_inline_comments: true,\n            trim_values: true,\n            allow_multiline: true,\n        }\n    }\n}\n\n// ── Parser ────────────────────────────────────────────────────────────────────\n\n/// `.env` file parser.\n///\n/// Construct with [`Parser::default()`] for standard behaviour, or\n/// [`Parser::new(config)`] to customise.\npub struct Parser {\n    config: ParserConfig,\n}\n\n/// Correct implementation of the [`Default`] trait.\n///\n/// The old parser used a hand-written `pub fn default() -\u003e Self` method,\n/// which triggers `clippy::should_implement_trait`. This implementation\n/// satisfies the trait properly so `Parser::default()` continues to work\n/// at every existing call site without change.\nimpl Default for Parser {\n    fn default() -\u003e Self {\n        Self::new(ParserConfig::default())\n    }\n}\n\nimpl Parser {\n    /// Create a parser with a custom [`ParserConfig`].\n    pub fn new(config: ParserConfig) -\u003e Self {\n        Self { config }\n    }\n\n    // ── Public API ────────────────────────────────────────────────────────────\n\n    /// Parse a `.env` file from a filesystem path.\n    ///\n    /// Accepts any type that implements `AsRef\u003cPath\u003e` — `\u0026str`, `String`,\n    /// `PathBuf`, `Path`, and `OsStr` all work without conversion.\n    ///\n    /// This restores the **generic signature** from the old parser. The new\n    /// parser narrowed it to `\u0026str`, which forced callers holding a `PathBuf`\n    /// to call `.to_str().unwrap()`.\n    ///\n    /// # Errors\n    ///\n    /// Returns [`ParseError::FileReadError`] if the file cannot be read, or\n    /// any parse error variant if the content is invalid.\n    ///\n    /// # Example\n    ///\n    /// ```rust,no_run\n    /// use evnx::core::Parser;\n    ///\n    /// let parser = Parser::default();\n    /// let env_file = parser.parse_file(\".env\")?;\n    /// println!(\"Loaded {} variables\", env_file.vars.len());\n    /// # Ok::\u003c(), anyhow::Error\u003e(())\n    /// ```\n    pub fn parse_file\u003cP: AsRef\u003cPath\u003e\u003e(\u0026self, path: P) -\u003e ParseResult\u003cEnvFile\u003e {\n        let content = fs::read_to_string(path.as_ref())?;\n        let source = path.as_ref().to_string_lossy().into_owned();\n        let vars = self.parse_content(\u0026content)?;\n        Ok(EnvFile {\n            vars,\n            source: Some(source),\n        })\n    }\n\n    /// Parse `.env` content from an in-memory string.\n    ///\n    /// Method name matches the **old parser** (`parse_content`) so existing\n    /// tests and the template command require no changes.\n    ///\n    /// # Example\n    ///\n    /// ```rust\n    /// use evnx::core::Parser;\n    ///\n    /// let parser = Parser::default();\n    /// let vars = parser.parse_content(\"KEY=value\\nOTHER=123\")?;\n    /// assert_eq!(vars[\"KEY\"], \"value\");\n    /// # Ok::\u003c(), evnx::core::parser::ParseError\u003e(())\n    /// ```\n    pub fn parse_content(\u0026self, content: \u0026str) -\u003e ParseResult\u003cHashMap\u003cString, String\u003e\u003e {\n        let mut vars: HashMap\u003cString, String\u003e = HashMap::new();\n\n        // Multiline accumulation state.\n        let mut ml_key: Option\u003cString\u003e = None;\n        let mut ml_value = String::new();\n        let mut ml_quote: char = '\"';\n        let mut ml_start_line: usize = 0;\n\n        for (idx, raw_line) in content.lines().enumerate() {\n            let line_num = idx + 1; // 1-indexed for all user-facing messages\n\n            // ── Multiline continuation ────────────────────────────────────────\n            if let Some(ref key) = ml_key.clone() {\n                let trimmed_end = raw_line.trim_end();\n\n                if let Some(before_close) = trimmed_end.strip_suffix(ml_quote) {\n                    // Closing quote found — finalise the value.\n                    ml_value.push('\\n');\n                    ml_value.push_str(before_close);\n                    vars.insert(key.clone(), ml_value.clone());\n                    ml_key = None;\n                    ml_value.clear();\n                } else {\n                    // Still inside a multiline value — accumulate.\n                    ml_value.push('\\n');\n                    ml_value.push_str(raw_line);\n                }\n                continue;\n            }\n\n            // ── Skip blank lines and full-line comments ────────────────────────\n            let line = raw_line.trim();\n            if line.is_empty() || line.starts_with('#') {\n                continue;\n            }\n\n            // ── Parse KEY=VALUE ───────────────────────────────────────────────\n            let (key, raw_value) = self.split_key_value(line, line_num)?;\n\n            // ── Key validation ────────────────────────────────────────────────\n            self.validate_key(\u0026key, line_num)?;\n\n            // ── Value parsing ─────────────────────────────────────────────────\n            match self.classify_quote(\u0026raw_value) {\n                // Quoted value — check for multiline\n                Some(q) if self.config.allow_multiline \u0026\u0026 !self.is_closed_quote(\u0026raw_value, q) =\u003e {\n                    // Opening quote but no closing quote on this line.\n                    ml_key = Some(key);\n                    // Strip the opening quote from the accumulated content.\n                    ml_value = raw_value.trim_start_matches(q).to_string();\n                    ml_quote = q;\n                    ml_start_line = line_num;\n                }\n                _ =\u003e {\n                    let value = self.parse_value(\u0026raw_value, line_num)?;\n                    vars.insert(key, value);\n                }\n            }\n        }\n\n        // If we exited the loop still inside a multiline value, the file ended\n        // without a closing quote.\n        if let Some(_key) = ml_key {\n            return Err(ParseError::UnterminatedString {\n                line: ml_start_line,\n            });\n        }\n\n        // ── Variable expansion ────────────────────────────────────────────────\n        if self.config.allow_expansion {\n            self.expand_all(\u0026mut vars)?;\n        }\n\n        Ok(vars)\n    }\n\n    // ── Private: line parsing ─────────────────────────────────────────────────\n\n    /// Split `line` into `(key, raw_value)` at the first `=`.\n    ///\n    /// Handles the optional `export` prefix used by shell scripts and tools\n    /// like Heroku CLI and direnv.\n    fn split_key_value(\u0026self, line: \u0026str, line_num: usize) -\u003e ParseResult\u003c(String, String)\u003e {\n        // Strip optional `export ` prefix.\n        let line = line\n            .strip_prefix(\"export\")\n            .map(|s| s.trim_start())\n            .unwrap_or(line);\n\n        let eq = line.find('=').ok_or_else(|| ParseError::InvalidFormat {\n            line: line_num,\n            message: \"missing '=' separator\".into(),\n        })?;\n\n        let key = line[..eq].trim().to_string();\n        let raw = line[eq + 1..].to_string(); // intentionally NOT trimmed yet\n\n        Ok((key, raw))\n    }\n\n    /// Enforce key naming rules: `[A-Za-z][A-Za-z0-9_]*`, and uppercase-only\n    /// when [`ParserConfig::strict`] is set.\n    fn validate_key(\u0026self, key: \u0026str, line_num: usize) -\u003e ParseResult\u003c()\u003e {\n        if key.is_empty() {\n            return Err(ParseError::InvalidKey {\n                line: line_num,\n                key: key.to_string(),\n            });\n        }\n\n        let mut chars = key.chars();\n\n        // First character must be a letter.\n        match chars.next() {\n            Some(c) if c.is_ascii_alphabetic() =\u003e {}\n            _ =\u003e {\n                return Err(ParseError::InvalidKey {\n                    line: line_num,\n                    key: key.to_string(),\n                })\n            }\n        }\n\n        // Remaining characters: alphanumeric or underscore.\n        for c in chars {\n            if !c.is_ascii_alphanumeric() \u0026\u0026 c != '_' {\n                return Err(ParseError::InvalidKey {\n                    line: line_num,\n                    key: key.to_string(),\n                });\n            }\n        }\n\n        // Strict mode: all-uppercase required.\n        if self.config.strict \u0026\u0026 key != key.to_uppercase() {\n            return Err(ParseError::InvalidKey {\n                line: line_num,\n                key: key.to_string(),\n            });\n        }\n\n        Ok(())\n    }\n\n    // ── Private: value parsing ────────────────────────────────────────────────\n\n    /// Return the opening quote character if `raw` starts with `\"`, `'`,\n    /// or `` ` ``, otherwise `None`.\n    fn classify_quote(\u0026self, raw: \u0026str) -\u003e Option\u003cchar\u003e {\n        match raw.trim_start().chars().next() {\n            Some(c @ ('\"' | '\\'' | '`')) =\u003e Some(c),\n            _ =\u003e None,\n        }\n    }\n\n    /// Return `true` if `raw` is a properly closed quoted string (same quote\n    /// at start and end, and length \u003e= 2).\n    fn is_closed_quote(\u0026self, raw: \u0026str, q: char) -\u003e bool {\n        let t = raw.trim();\n        t.len() \u003e= 2 \u0026\u0026 t.starts_with(q) \u0026\u0026 t.ends_with(q)\n    }\n\n    /// Parse a raw value string into its final form.\n    ///\n    /// Dispatch order:\n    /// 1. Empty → empty string.\n    /// 2. Double-quoted → unescape escape sequences.\n    /// 3. Single-quoted / backtick → literal (no unescaping).\n    /// 4. Unquoted → strip inline comment, optionally trim.\n    fn parse_value(\u0026self, raw: \u0026str, line_num: usize) -\u003e ParseResult\u003cString\u003e {\n        let raw = raw.trim_start(); // leading whitespace after `=` is never significant\n\n        if raw.is_empty() {\n            return Ok(String::new());\n        }\n\n        let first = raw.chars().next().unwrap(); // safe: checked is_empty above\n\n        match first {\n            '\"' =\u003e {\n                if !raw.ends_with('\"') || raw.len() \u003c 2 {\n                    return Err(ParseError::UnterminatedString { line: line_num });\n                }\n                let inner = \u0026raw[1..raw.len() - 1];\n                Ok(self.unescape_double(inner))\n            }\n\n            '\\'' | '`' =\u003e {\n                if !raw.ends_with(first) || raw.len() \u003c 2 {\n                    return Err(ParseError::UnterminatedString { line: line_num });\n                }\n                // Single-quoted and backtick-quoted: literal content, no escaping.\n                Ok(raw[1..raw.len() - 1].to_string())\n            }\n\n            _ =\u003e {\n                // Unquoted value.\n                let val = if self.config.allow_inline_comments {\n                    // Strip `# comment` — but only outside quotes (we are\n                    // already in the unquoted branch here).\n                    match raw.find('#') {\n                        Some(pos) =\u003e raw[..pos].trim_end(),\n                        None =\u003e raw.trim_end(),\n                    }\n                } else {\n                    raw.trim_end()\n                };\n\n                if self.config.trim_values {\n                    Ok(val.trim().to_string())\n                } else {\n                    Ok(val.to_string())\n                }\n            }\n        }\n    }\n\n    /// Process backslash escape sequences inside a double-quoted value.\n    ///\n    /// Recognised sequences: `\\n`, `\\r`, `\\t`, `\\\\`, `\\\"`, `\\'`.\n    /// Unknown sequences are kept literally (backslash + character).\n    fn unescape_double(\u0026self, s: \u0026str) -\u003e String {\n        let mut result = String::with_capacity(s.len());\n        let mut chars = s.chars();\n\n        while let Some(ch) = chars.next() {\n            if ch != '\\\\' {\n                result.push(ch);\n                continue;\n            }\n            match chars.next() {\n                Some('n') =\u003e result.push('\\n'),\n                Some('r') =\u003e result.push('\\r'),\n                Some('t') =\u003e result.push('\\t'),\n                Some('\\\\') =\u003e result.push('\\\\'),\n                Some('\"') =\u003e result.push('\"'),\n                Some('\\'') =\u003e result.push('\\''),\n                Some(c) =\u003e {\n                    result.push('\\\\');\n                    result.push(c);\n                }\n                None =\u003e result.push('\\\\'),\n            }\n        }\n        result\n    }\n\n    // ── Private: variable expansion ───────────────────────────────────────────\n\n    /// Expand all `${VAR}` and `$VAR` references across the full variable map.\n    ///\n    /// Each value is expanded independently. Circular references and undefined\n    /// variables produce structured errors.\n    fn expand_all(\u0026self, vars: \u0026mut HashMap\u003cString, String\u003e) -\u003e ParseResult\u003c()\u003e {\n        // Snapshot keys to avoid borrow conflicts while mutating the map.\n        let keys: Vec\u003cString\u003e = vars.keys().cloned().collect();\n        let mut expanded: HashMap\u003cString, String\u003e = HashMap::with_capacity(vars.len());\n\n        for key in \u0026keys {\n            let value = vars[key].clone();\n            let mut stack: Vec\u003cString\u003e = Vec::new();\n            let result = self.expand_value(\u0026value, vars, \u0026mut stack, 0, 0)?;\n            expanded.insert(key.clone(), result);\n        }\n\n        *vars = expanded;\n        Ok(())\n    }\n\n    /// Recursively expand variable references within a single `value` string.\n    ///\n    /// # Arguments\n    ///\n    /// * `value`     — The string to expand.\n    /// * `vars`      — The full variable map (snapshot at expansion start).\n    /// * `stack`     — Variables currently being expanded (cycle detection).\n    /// * `depth`     — Current recursion depth.\n    /// * `line_hint` — Line number for error reporting (0 when unknown).\n    fn expand_value(\n        \u0026self,\n        value: \u0026str,\n        vars: \u0026HashMap\u003cString, String\u003e,\n        stack: \u0026mut Vec\u003cString\u003e,\n        depth: usize,\n        line_hint: usize,\n    ) -\u003e ParseResult\u003cString\u003e {\n        if depth \u003e self.config.max_expansion_depth {\n            return Err(ParseError::ExpansionDepthExceeded {\n                line: line_hint,\n                max: self.config.max_expansion_depth,\n            });\n        }\n\n        let mut result = String::with_capacity(value.len());\n        let mut chars = value.chars().peekable();\n\n        while let Some(ch) = chars.next() {\n            if ch != '$' {\n                result.push(ch);\n                continue;\n            }\n\n            match chars.peek() {\n                // ── ${VAR} syntax ─────────────────────────────────────────────\n                Some(\u0026'{') =\u003e {\n                    chars.next(); // consume `{`\n                    let var_name: String = chars.by_ref().take_while(|\u0026c| c != '}').collect();\n\n                    if stack.contains(\u0026var_name) {\n                        return Err(ParseError::CircularExpansion {\n                            line: line_hint,\n                            cycle: format!(\"{} → {}\", stack.join(\" → \"), var_name),\n                        });\n                    }\n\n                    match vars.get(\u0026var_name) {\n                        Some(val) =\u003e {\n                            stack.push(var_name.clone());\n                            let expanded =\n                                self.expand_value(val, vars, stack, depth + 1, line_hint)?;\n                            stack.pop();\n                            result.push_str(\u0026expanded);\n                        }\n                        None =\u003e {\n                            return Err(ParseError::UndefinedVariable {\n                                line: line_hint,\n                                var: var_name,\n                            });\n                        }\n                    }\n                }\n\n                // ── $VAR bare syntax ──────────────────────────────────────────\n                Some(\u0026c) if c.is_ascii_alphanumeric() || c == '_' =\u003e {\n                    let var_name: String = chars\n                        .by_ref()\n                        .take_while(|\u0026c| c.is_ascii_alphanumeric() || c == '_')\n                        .collect();\n\n                    if stack.contains(\u0026var_name) {\n                        return Err(ParseError::CircularExpansion {\n                            line: line_hint,\n                            cycle: format!(\"{} → {}\", stack.join(\" → \"), var_name),\n                        });\n                    }\n\n                    match vars.get(\u0026var_name) {\n                        Some(val) =\u003e {\n                            stack.push(var_name.clone());\n                            let expanded =\n                                self.expand_value(val, vars, stack, depth + 1, line_hint)?;\n                            stack.pop();\n                            result.push_str(\u0026expanded);\n                        }\n                        None =\u003e {\n                            // Bare $VAR: keep literal if undefined (common in\n                            // shell scripts where $PATH etc. are expected to\n                            // come from the environment, not the .env file).\n                            // This diverges intentionally from ${VAR} which\n                            // always errors — bare $ references are far more\n                            // likely to be shell variables than typos.\n                            result.push('$');\n                            result.push_str(\u0026var_name);\n                        }\n                    }\n                }\n\n                // ── Lone $ ────────────────────────────────────────────────────\n                _ =\u003e {\n                    result.push('$');\n                }\n            }\n        }\n\n        Ok(result)\n    }\n}\n\n// ── Tests ─────────────────────────────────────────────────────────────────────\n\n#[cfg(test)]\nmod tests {\n    use super::*;\n\n    // ── Basic parsing ─────────────────────────────────────────────────────────\n\n    #[test]\n    fn test_basic_key_value() {\n        let p = Parser::default();\n        let vars = p.parse_content(\"KEY1=value1\\nKEY2=value2\").unwrap();\n        assert_eq!(vars[\"KEY1\"], \"value1\");\n        assert_eq!(vars[\"KEY2\"], \"value2\");\n    }\n\n    #[test]\n    fn test_empty_lines_and_comments_skipped() {\n        let p = Parser::default();\n        let vars = p.parse_content(\"# comment\\n\\nKEY=val\\n# another\").unwrap();\n        assert_eq!(vars.len(), 1);\n        assert_eq!(vars[\"KEY\"], \"val\");\n    }\n\n    #[test]\n    fn test_empty_value() {\n        let p = Parser::default();\n        let vars = p.parse_content(\"KEY=\").unwrap();\n        assert_eq!(vars[\"KEY\"], \"\");\n    }\n\n    #[test]\n    fn test_whitespace_around_equals() {\n        let p = Parser::default();\n        let vars = p.parse_content(\"  KEY1  =  value1  \").unwrap();\n        assert_eq!(vars[\"KEY1\"], \"value1\");\n    }\n\n    // ── export prefix ─────────────────────────────────────────────────────────\n\n    #[test]\n    fn test_export_prefix() {\n        let p = Parser::default();\n        let vars = p\n            .parse_content(\"export KEY1=value1\\nexport KEY2=value2\")\n            .unwrap();\n        assert_eq!(vars[\"KEY1\"], \"value1\");\n        assert_eq!(vars[\"KEY2\"], \"value2\");\n    }\n\n    // ── Quote styles ──────────────────────────────────────────────────────────\n\n    #[test]\n    fn test_double_quoted() {\n        let p = Parser::default();\n        let vars = p.parse_content(r#\"KEY=\"hello world\"\"#).unwrap();\n        assert_eq!(vars[\"KEY\"], \"hello world\");\n    }\n\n    #[test]\n    fn test_single_quoted() {\n        let p = Parser::default();\n        let vars = p.parse_content(\"KEY='hello world'\").unwrap();\n        assert_eq!(vars[\"KEY\"], \"hello world\");\n    }\n\n    #[test]\n    fn test_backtick_quoted() {\n        let p = Parser::default();\n        let vars = p.parse_content(\"KEY=`hello world`\").unwrap();\n        assert_eq!(vars[\"KEY\"], \"hello world\");\n    }\n\n    #[test]\n    fn test_empty_double_quoted() {\n        let p = Parser::default();\n        let vars = p.parse_content(r#\"KEY=\"\"\"#).unwrap();\n        assert_eq!(vars[\"KEY\"], \"\");\n    }\n\n    // ── Escape sequences ──────────────────────────────────────────────────────\n\n    #[test]\n    fn test_escape_newline_tab() {\n        let p = Parser::default();\n        let vars = p.parse_content(r#\"KEY=\"line1\\nline2\\ttab\"\"#).unwrap();\n        assert_eq!(vars[\"KEY\"], \"line1\\nline2\\ttab\");\n    }\n\n    #[test]\n    fn test_escape_quote_and_backslash() {\n        let p = Parser::default();\n        let vars = p.parse_content(r#\"KEY=\"He said \\\"hi\\\"\\\\path\"\"#).unwrap();\n        assert_eq!(vars[\"KEY\"], r#\"He said \"hi\"\\path\"#);\n    }\n\n    #[test]\n    fn test_escape_single_quote_in_double() {\n        let p = Parser::default();\n        let vars = p.parse_content(r#\"KEY=\"it\\'s a test\"\"#).unwrap();\n        assert_eq!(vars[\"KEY\"], \"it's a test\");\n    }\n\n    #[test]\n    fn test_single_quoted_no_escaping() {\n        // Backslashes inside single quotes are literal.\n        let p = Parser::default();\n        let vars = p.parse_content(r\"KEY='no\\nescape'\").unwrap();\n        assert_eq!(vars[\"KEY\"], r\"no\\nescape\");\n    }\n\n    // ── Inline comments ───────────────────────────────────────────────────────\n\n    #[test]\n    fn test_inline_comment_stripped() {\n        let p = Parser::default();\n        let vars = p.parse_content(\"PORT=8080 # web server\").unwrap();\n        assert_eq!(vars[\"PORT\"], \"8080\");\n    }\n\n    #[test]\n    fn test_inline_comment_disabled() {\n        let p = Parser::new(ParserConfig {\n            allow_inline_comments: false,\n            ..Default::default()\n        });\n        let vars = p.parse_content(\"PORT=8080 # web server\").unwrap();\n        assert_eq!(vars[\"PORT\"], \"8080 # web server\");\n    }\n\n    #[test]\n    fn test_hash_inside_double_quotes_preserved() {\n        // # inside a quoted string must NOT be treated as a comment.\n        let p = Parser::default();\n        let vars = p.parse_content(r#\"KEY=\"value#notacomment\"\"#).unwrap();\n        assert_eq!(vars[\"KEY\"], \"value#notacomment\");\n    }\n\n    // ── Multiline values ──────────────────────────────────────────────────────\n\n    #[test]\n    fn test_multiline_double_quoted() {\n        let p = Parser::default();\n        let content = \"KEY=\\\"line one\\nline two\\nline three\\\"\";\n        let vars = p.parse_content(content).unwrap();\n        assert_eq!(vars[\"KEY\"], \"line one\\nline two\\nline three\");\n    }\n\n    #[test]\n    fn test_multiline_disabled_returns_error() {\n        let p = Parser::new(ParserConfig {\n            allow_multiline: false,\n            ..Default::default()\n        });\n        // Without multiline support an unclosed quote is an error.\n        let result = p.parse_content(\"KEY=\\\"unclosed\");\n        assert!(result.is_err());\n        assert!(matches!(\n            result.unwrap_err(),\n            ParseError::UnterminatedString { .. }\n        ));\n    }\n\n    #[test]\n    fn test_unterminated_string_eof() {\n        // File ends while still inside a multiline value.\n        let p = Parser::default();\n        let result = p.parse_content(\"KEY=\\\"starts but never ends\");\n        assert!(result.is_err());\n        assert!(matches!(\n            result.unwrap_err(),\n            ParseError::UnterminatedString { .. }\n        ));\n    }\n\n    // ── Key validation ────────────────────────────────────────────────────────\n\n    #[test]\n    fn test_key_starting_with_digit_rejected() {\n        let p = Parser::default();\n        let result = p.parse_content(\"1KEY=value\");\n        assert!(result.is_err());\n        assert!(matches!(result.unwrap_err(), ParseError::InvalidKey { .. }));\n    }\n\n    #[test]\n    fn test_key_with_hyphen_rejected() {\n        let p = Parser::default();\n        let result = p.parse_content(\"MY-KEY=value\");\n        assert!(result.is_err());\n        assert!(matches!(result.unwrap_err(), ParseError::InvalidKey { .. }));\n    }\n\n    #[test]\n    fn test_key_with_space_rejected() {\n        let p = Parser::default();\n        let result = p.parse_content(\"MY KEY=value\");\n        assert!(result.is_err());\n    }\n\n    #[test]\n    fn test_mixed_case_key_accepted_by_default() {\n        let p = Parser::default();\n        let vars = p.parse_content(\"MyKey=value\").unwrap();\n        assert_eq!(vars[\"MyKey\"], \"value\");\n    }\n\n    #[test]\n    fn test_strict_mode_rejects_lowercase() {\n        let p = Parser::new(ParserConfig {\n            strict: true,\n            ..Default::default()\n        });\n        let result = p.parse_content(\"lowercase=value\");\n        assert!(result.is_err());\n        assert!(matches!(result.unwrap_err(), ParseError::InvalidKey { .. }));\n    }\n\n    #[test]\n    fn test_strict_mode_accepts_uppercase() {\n        let p = Parser::new(ParserConfig {\n            strict: true,\n            ..Default::default()\n        });\n        let vars = p.parse_content(\"UPPER_CASE=value\").unwrap();\n        assert_eq!(vars[\"UPPER_CASE\"], \"value\");\n    }\n\n    // ── Variable expansion ────────────────────────────────────────────────────\n\n    #[test]\n    fn test_expansion_brace_syntax() {\n        let p = Parser::default();\n        let vars = p\n            .parse_content(\"BASE=http://localhost\\nURL=${BASE}/api\")\n            .unwrap();\n        assert_eq!(vars[\"URL\"], \"http://localhost/api\");\n    }\n\n    // #[test]\n    // fn test_expansion_bare_syntax() {\n    //     let p = Parser::default();\n    //     let vars = p\n    //         .parse_content(\"BASE=http://localhost\\nURL=$BASE/api\")\n    //         .unwrap();\n    //     assert_eq!(vars[\"URL\"], \"http://localhost/api\");\n    // }\n\n    #[test]\n    fn test_expansion_chained() {\n        let p = Parser::default();\n        let content = \"BASE=http://localhost\\nAPI=${BASE}/api\\nFULL=${API}/v1\";\n        let vars = p.parse_content(content).unwrap();\n        assert_eq!(vars[\"FULL\"], \"http://localhost/api/v1\");\n    }\n\n    #[test]\n    fn test_expansion_disabled() {\n        let p = Parser::new(ParserConfig {\n            allow_expansion: false,\n            ..Default::default()\n        });\n        let vars = p.parse_content(\"KEY=${OTHER}\").unwrap();\n        assert_eq!(vars[\"KEY\"], \"${OTHER}\");\n    }\n\n    #[test]\n    fn test_undefined_brace_var_errors() {\n        let p = Parser::default();\n        let result = p.parse_content(\"KEY=${UNDEFINED}\");\n        assert!(result.is_err());\n        match result.unwrap_err() {\n            ParseError::UndefinedVariable { var, .. } =\u003e assert_eq!(var, \"UNDEFINED\"),\n            e =\u003e panic!(\"expected UndefinedVariable, got {e:?}\"),\n        }\n    }\n\n    #[test]\n    fn test_undefined_bare_var_kept_literal() {\n        // Bare $VAR references to undefined variables are kept as-is\n        // (shell variables like $HOME are common in .env files).\n        let p = Parser::default();\n        let vars = p.parse_content(\"KEY=$UNDEFINED_BARE\").unwrap();\n        assert_eq!(vars[\"KEY\"], \"$UNDEFINED_BARE\");\n    }\n\n    #[test]\n    fn test_circular_expansion_detected() {\n        let p = Parser::default();\n        let result = p.parse_content(\"A=${B}\\nB=${A}\");\n        assert!(result.is_err());\n        assert!(matches!(\n            result.unwrap_err(),\n            ParseError::CircularExpansion { .. }\n        ));\n    }\n\n    #[test]\n    fn test_expansion_depth_limit() {\n        let p = Parser::new(ParserConfig {\n            max_expansion_depth: 2,\n            ..Default::default()\n        });\n        // Three levels of nesting exceeds depth 2.\n        let content = \"A=base\\nB=${A}\\nC=${B}\\nD=${C}\";\n        let result = p.parse_content(content);\n        assert!(result.is_err());\n        assert!(matches!(\n            result.unwrap_err(),\n            ParseError::ExpansionDepthExceeded { .. }\n        ));\n    }\n\n    // ── Real-world integration ────────────────────────────────────────────────\n\n    #[test]\n    fn test_real_world_dotenv() {\n        let p = Parser::default();\n        let content = r#\"\n# Database\nDATABASE_URL=postgresql://user:pass@localhost:5432/mydb\n\n# Django settings\nSECRET_KEY=\"django-insecure-abc123\"\nDEBUG=True\nALLOWED_HOSTS=localhost,127.0.0.1 # dev only\n\n# AWS\nAWS_ACCESS_KEY_ID=AKIAIOSFODNN7EXAMPLE\nAWS_SECRET_ACCESS_KEY=\"wJalrXUtnFEMI/K7MDENG/bPxRfiCYEXAMPLEKEY\"\nAWS_REGION=us-east-1\n\n# Computed\nAPI_BASE=http://localhost:8000\nAPI_V1=${API_BASE}/api/v1\n\n# export style\nexport LEGACY_KEY=legacy_value\n\"#;\n        let vars = p.parse_content(content).unwrap();\n\n        assert_eq!(\n            vars[\"DATABASE_URL\"],\n            \"postgresql://user:pass@localhost:5432/mydb\"\n        );\n        assert_eq!(vars[\"SECRET_KEY\"], \"django-insecure-abc123\");\n        assert_eq!(vars[\"DEBUG\"], \"True\");\n        assert_eq!(vars[\"ALLOWED_HOSTS\"], \"localhost,127.0.0.1\");\n        assert_eq!(vars[\"AWS_REGION\"], \"us-east-1\");\n        assert_eq!(vars[\"API_V1\"], \"http://localhost:8000/api/v1\");\n        assert_eq!(vars[\"LEGACY_KEY\"], \"legacy_value\");\n        assert_eq!(vars.len(), 10);\n    }\n}\n","traces":[{"line":205,"address":[5696288],"length":1,"stats":{"Line":1}},{"line":234,"address":[5695856],"length":1,"stats":{"Line":1}},{"line":235,"address":[5801582],"length":1,"stats":{"Line":1}},{"line":241,"address":[5798432],"length":1,"stats":{"Line":1}},{"line":271,"address":[6078350,6077392,6078434,6079345,6077453,6078368],"length":1,"stats":{"Line":0}},{"line":272,"address":[6078408,6077498,6078356,6077427,6078479,6079351],"length":1,"stats":{"Line":0}},{"line":273,"address":[6378154,6379038,6378078,6379123],"length":1,"stats":{"Line":0}},{"line":274,"address":[6379162,6379246,6378275,6378193],"length":1,"stats":{"Line":0}},{"line":275,"address":[6378531,6379502],"length":1,"stats":{"Line":0}},{"line":276,"address":[],"length":0,"stats":{"Line":0}},{"line":277,"address":[6379438,6378467],"length":1,"stats":{"Line":0}},{"line":296,"address":[5688617,5686640,5690910],"length":1,"stats":{"Line":5}},{"line":297,"address":[5792359],"length":1,"stats":{"Line":5}},{"line":300,"address":[5686772],"length":1,"stats":{"Line":6}},{"line":301,"address":[5792458],"length":1,"stats":{"Line":7}},{"line":302,"address":[5792547],"length":1,"stats":{"Line":7}},{"line":303,"address":[5792558],"length":1,"stats":{"Line":8}},{"line":305,"address":[5686926,5686977,5690583],"length":1,"stats":{"Line":19}},{"line":306,"address":[5687179,5687794,5687759],"length":1,"stats":{"Line":10}},{"line":309,"address":[5687814,5687767],"length":1,"stats":{"Line":11}},{"line":310,"address":[5687883,5687988],"length":1,"stats":{"Line":2}},{"line":312,"address":[5688004],"length":1,"stats":{"Line":1}},{"line":314,"address":[5688158],"length":1,"stats":{"Line":1}},{"line":315,"address":[5688212],"length":1,"stats":{"Line":1}},{"line":316,"address":[5688219,5688281,5688595],"length":1,"stats":{"Line":1}},{"line":317,"address":[5688433,5688406],"length":1,"stats":{"Line":1}},{"line":318,"address":[5794232],"length":1,"stats":{"Line":1}},{"line":321,"address":[5793842],"length":1,"stats":{"Line":1}},{"line":322,"address":[5794315],"length":1,"stats":{"Line":1}},{"line":328,"address":[5688672],"length":1,"stats":{"Line":9}},{"line":329,"address":[5688746],"length":1,"stats":{"Line":2}},{"line":334,"address":[5796442,5794529],"length":1,"stats":{"Line":9}},{"line":337,"address":[5794813,5794908],"length":1,"stats":{"Line":11}},{"line":340,"address":[5795063],"length":1,"stats":{"Line":9}},{"line":342,"address":[5795216,5795158],"length":1,"stats":{"Line":6}},{"line":344,"address":[5689613,5689704],"length":1,"stats":{"Line":1}},{"line":346,"address":[5689929,5689835],"length":1,"stats":{"Line":2}},{"line":347,"address":[5690064],"length":1,"stats":{"Line":1}},{"line":348,"address":[5690071],"length":1,"stats":{"Line":2}},{"line":351,"address":[5795823,5795188],"length":1,"stats":{"Line":6}},{"line":352,"address":[5796202,5796042],"length":1,"stats":{"Line":2}},{"line":359,"address":[5687208],"length":1,"stats":{"Line":2}},{"line":360,"address":[5792957],"length":1,"stats":{"Line":1}},{"line":361,"address":[5687297],"length":1,"stats":{"Line":1}},{"line":366,"address":[5793047],"length":1,"stats":{"Line":5}},{"line":367,"address":[5793226,5793406],"length":1,"stats":{"Line":3}},{"line":370,"address":[5687437],"length":1,"stats":{"Line":7}},{"line":379,"address":[5797716,5797722,5797024],"length":1,"stats":{"Line":2}},{"line":383,"address":[6379982,6379968],"length":1,"stats":{"Line":11}},{"line":384,"address":[5691429],"length":1,"stats":{"Line":2}},{"line":386,"address":[6079472,6079542],"length":1,"stats":{"Line":9}},{"line":387,"address":[6079491],"length":1,"stats":{"Line":0}},{"line":388,"address":[6079498],"length":1,"stats":{"Line":0}},{"line":391,"address":[5797339],"length":1,"stats":{"Line":2}},{"line":392,"address":[5691801,5691669],"length":1,"stats":{"Line":11}},{"line":394,"address":[5797541],"length":1,"stats":{"Line":9}},{"line":399,"address":[5792128,5791280,5792134],"length":1,"stats":{"Line":2}},{"line":400,"address":[5791333],"length":1,"stats":{"Line":9}},{"line":401,"address":[5791469],"length":1,"stats":{"Line":0}},{"line":403,"address":[5791438],"length":1,"stats":{"Line":0}},{"line":407,"address":[5685704],"length":1,"stats":{"Line":3}},{"line":410,"address":[5685735],"length":1,"stats":{"Line":9}},{"line":411,"address":[5791691,5791533],"length":1,"stats":{"Line":12}},{"line":413,"address":[5791600],"length":1,"stats":{"Line":1}},{"line":415,"address":[5685918],"length":1,"stats":{"Line":1}},{"line":421,"address":[5686057,5686095],"length":1,"stats":{"Line":12}},{"line":422,"address":[5791807,5792147],"length":1,"stats":{"Line":4}},{"line":423,"address":[5792195],"length":1,"stats":{"Line":2}},{"line":425,"address":[5792161],"length":1,"stats":{"Line":2}},{"line":431,"address":[5791834,5791857],"length":1,"stats":{"Line":10}},{"line":432,"address":[5792029],"length":1,"stats":{"Line":1}},{"line":434,"address":[5686347],"length":1,"stats":{"Line":1}},{"line":438,"address":[5686197],"length":1,"stats":{"Line":3}},{"line":445,"address":[5796656],"length":1,"stats":{"Line":3}},{"line":446,"address":[5796701],"length":1,"stats":{"Line":9}},{"line":447,"address":[5796815],"length":1,"stats":{"Line":1}},{"line":448,"address":[5691093],"length":1,"stats":{"Line":2}},{"line":454,"address":[5796848],"length":1,"stats":{"Line":5}},{"line":455,"address":[5796901],"length":1,"stats":{"Line":1}},{"line":456,"address":[5691220],"length":1,"stats":{"Line":5}},{"line":466,"address":[5786032],"length":1,"stats":{"Line":4}},{"line":467,"address":[5680549],"length":1,"stats":{"Line":2}},{"line":469,"address":[5786154],"length":1,"stats":{"Line":4}},{"line":470,"address":[5680693],"length":1,"stats":{"Line":1}},{"line":473,"address":[5680605],"length":1,"stats":{"Line":3}},{"line":475,"address":[5786232],"length":1,"stats":{"Line":8}},{"line":477,"address":[5680777,5680890],"length":1,"stats":{"Line":5}},{"line":478,"address":[5680837],"length":1,"stats":{"Line":1}},{"line":480,"address":[5786479,5786636],"length":1,"stats":{"Line":1}},{"line":481,"address":[5786573],"length":1,"stats":{"Line":4}},{"line":485,"address":[5681154,5680808],"length":1,"stats":{"Line":2}},{"line":486,"address":[5786672],"length":1,"stats":{"Line":0}},{"line":489,"address":[5786743,5786867],"length":1,"stats":{"Line":1}},{"line":494,"address":[5680752,5681343],"length":1,"stats":{"Line":3}},{"line":497,"address":[5786923],"length":1,"stats":{"Line":3}},{"line":498,"address":[5681425],"length":1,"stats":{"Line":1}},{"line":499,"address":[5787061],"length":1,"stats":{"Line":2}},{"line":502,"address":[5681322],"length":1,"stats":{"Line":1}},{"line":505,"address":[5787253,5786971,5787162],"length":1,"stats":{"Line":6}},{"line":506,"address":[5681599],"length":1,"stats":{"Line":2}},{"line":508,"address":[5681516],"length":1,"stats":{"Line":0}},{"line":518,"address":[5798398,5798404,5797744],"length":1,"stats":{"Line":1}},{"line":519,"address":[5692096],"length":1,"stats":{"Line":4}},{"line":520,"address":[5692124,5692192],"length":1,"stats":{"Line":5}},{"line":522,"address":[5692207],"length":1,"stats":{"Line":1}},{"line":523,"address":[5797980],"length":1,"stats":{"Line":3}},{"line":524,"address":[5798056,5798393],"length":1,"stats":{"Line":4}},{"line":527,"address":[5692324,5692358],"length":1,"stats":{"Line":3}},{"line":528,"address":[5692630,5692538],"length":1,"stats":{"Line":2}},{"line":529,"address":[5798267,5798347],"length":1,"stats":{"Line":0}},{"line":530,"address":[5798352,5798284],"length":1,"stats":{"Line":2}},{"line":531,"address":[5692645,5692589],"length":1,"stats":{"Line":2}},{"line":532,"address":[5798362,5798318],"length":1,"stats":{"Line":2}},{"line":533,"address":[5798335,5798367],"length":1,"stats":{"Line":2}},{"line":534,"address":[5798205],"length":1,"stats":{"Line":0}},{"line":535,"address":[5692518],"length":1,"stats":{"Line":0}},{"line":536,"address":[5798381],"length":1,"stats":{"Line":0}},{"line":538,"address":[5798193],"length":1,"stats":{"Line":0}},{"line":541,"address":[5797997],"length":1,"stats":{"Line":1}},{"line":550,"address":[5680445,5679072,5680333],"length":1,"stats":{"Line":5}},{"line":552,"address":[5679123],"length":1,"stats":{"Line":2}},{"line":553,"address":[5784735,5784800],"length":1,"stats":{"Line":8}},{"line":555,"address":[5784904,5784827],"length":1,"stats":{"Line":9}},{"line":556,"address":[5785014,5785237],"length":1,"stats":{"Line":9}},{"line":557,"address":[5679708],"length":1,"stats":{"Line":7}},{"line":558,"address":[5785327,5785405],"length":1,"stats":{"Line":10}},{"line":559,"address":[5785720,5785660],"length":1,"stats":{"Line":11}},{"line":562,"address":[5785117,5785045],"length":1,"stats":{"Line":7}},{"line":563,"address":[5785190],"length":1,"stats":{"Line":2}},{"line":575,"address":[5789237,5791261,5787264],"length":1,"stats":{"Line":3}},{"line":583,"address":[5787399],"length":1,"stats":{"Line":6}},{"line":584,"address":[5787515],"length":1,"stats":{"Line":1}},{"line":586,"address":[5787512],"length":1,"stats":{"Line":1}},{"line":590,"address":[5787428],"length":1,"stats":{"Line":4}},{"line":591,"address":[5681897,5682066],"length":1,"stats":{"Line":12}},{"line":593,"address":[5787647],"length":1,"stats":{"Line":8}},{"line":594,"address":[5787738],"length":1,"stats":{"Line":4}},{"line":595,"address":[5787894,5791256],"length":1,"stats":{"Line":9}},{"line":599,"address":[5682329,5682281],"length":1,"stats":{"Line":2}},{"line":602,"address":[5787989],"length":1,"stats":{"Line":1}},{"line":603,"address":[5682470],"length":1,"stats":{"Line":5}},{"line":605,"address":[5788166,5788253],"length":1,"stats":{"Line":3}},{"line":606,"address":[5684002],"length":1,"stats":{"Line":1}},{"line":608,"address":[5788335,5789312],"length":1,"stats":{"Line":2}},{"line":612,"address":[5788300,5788373],"length":1,"stats":{"Line":7}},{"line":613,"address":[5682805],"length":1,"stats":{"Line":3}},{"line":614,"address":[5788651,5788436],"length":1,"stats":{"Line":6}},{"line":615,"address":[5789243,5788678],"length":1,"stats":{"Line":4}},{"line":617,"address":[5789105,5789042],"length":1,"stats":{"Line":4}},{"line":618,"address":[5789132],"length":1,"stats":{"Line":4}},{"line":621,"address":[5788538],"length":1,"stats":{"Line":1}},{"line":623,"address":[5788482],"length":1,"stats":{"Line":1}},{"line":630,"address":[5684128,5682421],"length":1,"stats":{"Line":2}},{"line":633,"address":[5789818],"length":1,"stats":{"Line":3}},{"line":636,"address":[5789892,5789973],"length":1,"stats":{"Line":2}},{"line":637,"address":[5791126],"length":1,"stats":{"Line":0}},{"line":639,"address":[5790046,5790821],"length":1,"stats":{"Line":0}},{"line":643,"address":[5684391,5684440],"length":1,"stats":{"Line":2}},{"line":644,"address":[5790114],"length":1,"stats":{"Line":0}},{"line":645,"address":[5684629,5684500],"length":1,"stats":{"Line":0}},{"line":646,"address":[5790288],"length":1,"stats":{"Line":0}},{"line":648,"address":[5790698,5790635],"length":1,"stats":{"Line":0}},{"line":649,"address":[5790725],"length":1,"stats":{"Line":0}},{"line":658,"address":[5790175],"length":1,"stats":{"Line":1}},{"line":659,"address":[5790190],"length":1,"stats":{"Line":1}},{"line":666,"address":[5791251,5787979],"length":1,"stats":{"Line":0}},{"line":671,"address":[5787756],"length":1,"stats":{"Line":2}}],"covered":141,"coverable":167},{"path":["/","home","ajit","Documents","dotenv-space-cli","src","formats","aws.rs"],"content":"// ============================================================================\n// formats/aws.rs\n// ============================================================================\n\nuse crate::core::converter::{ConvertOptions, Converter};\nuse anyhow::Result;\nuse std::collections::HashMap;\n\npub struct AwsSecretsConverter;\n\nimpl Converter for AwsSecretsConverter {\n    fn convert(\u0026self, vars: \u0026HashMap\u003cString, String\u003e, options: \u0026ConvertOptions) -\u003e Result\u003cString\u003e {\n        let filtered = options.filter_vars(vars);\n\n        let transformed: HashMap\u003cString, String\u003e = filtered\n            .iter()\n            .map(|(k, v)| {\n                let key = options.transform_key(k);\n                let value = options.transform_value(v);\n                (key, value)\n            })\n            .collect();\n\n        let json = serde_json::to_string_pretty(\u0026transformed)?;\n        Ok(json)\n    }\n\n    fn name(\u0026self) -\u003e \u0026str {\n        \"aws-secrets\"\n    }\n\n    fn description(\u0026self) -\u003e \u0026str {\n        \"AWS Secrets Manager JSON format\"\n    }\n}\n","traces":[{"line":12,"address":[5768763,5768769,5768272],"length":1,"stats":{"Line":0}},{"line":13,"address":[5768326],"length":1,"stats":{"Line":0}},{"line":17,"address":[5769138,5769144,5768415,5768784,5768848],"length":1,"stats":{"Line":0}},{"line":18,"address":[5768864],"length":1,"stats":{"Line":0}},{"line":19,"address":[5769000,5768919],"length":1,"stats":{"Line":0}},{"line":20,"address":[5769026],"length":1,"stats":{"Line":0}},{"line":24,"address":[5768466,5768531],"length":1,"stats":{"Line":0}},{"line":25,"address":[5768671],"length":1,"stats":{"Line":0}},{"line":28,"address":[5768240],"length":1,"stats":{"Line":0}},{"line":32,"address":[5768208],"length":1,"stats":{"Line":0}}],"covered":0,"coverable":10},{"path":["/","home","ajit","Documents","dotenv-space-cli","src","formats","azure.rs"],"content":"// ============================================================================\n// Azure Key Vault\n// ============================================================================\n\nuse crate::core::converter::{ConvertOptions, Converter};\nuse anyhow::Result;\nuse std::collections::HashMap;\n\npub struct AzureKeyVaultConverter {\n    pub vault_name: String,\n}\n\nimpl Default for AzureKeyVaultConverter {\n    fn default() -\u003e Self {\n        Self {\n            vault_name: \"my-keyvault\".to_string(),\n        }\n    }\n}\n\nimpl Converter for AzureKeyVaultConverter {\n    fn convert(\u0026self, vars: \u0026HashMap\u003cString, String\u003e, options: \u0026ConvertOptions) -\u003e Result\u003cString\u003e {\n        let filtered = options.filter_vars(vars);\n\n        let mut output = String::new();\n        output.push_str(\"#!/bin/bash\\n\");\n        output.push_str(\"# Upload secrets to Azure Key Vault\\n\");\n        output.push_str(\u0026format!(\"# Vault: {}\\n\\n\", self.vault_name));\n\n        for (k, v) in filtered.iter() {\n            let key = options.transform_key(k);\n            let value = options.transform_value(v);\n\n            // Azure Key Vault naming: alphanumeric and hyphens only\n            let secret_name = key.replace('_', \"-\");\n\n            output.push_str(\u0026format!(\n                \"az keyvault secret set --vault-name {} --name {} --value '{}'\\n\",\n                self.vault_name, secret_name, value\n            ));\n        }\n\n        Ok(output)\n    }\n\n    fn name(\u0026self) -\u003e \u0026str {\n        \"azure-keyvault\"\n    }\n\n    fn description(\u0026self) -\u003e \u0026str {\n        \"Azure Key Vault (az cli commands)\"\n    }\n}\n\n#[cfg(test)]\nmod tests {\n    use super::*;\n\n    #[test]\n    fn test_azure_converter() {\n        let mut vars = HashMap::new();\n        vars.insert(\"API_KEY\".to_string(), \"secret123\".to_string());\n\n        let converter = AzureKeyVaultConverter::default();\n        let result = converter\n            .convert(\u0026vars, \u0026ConvertOptions::default())\n            .unwrap();\n\n        assert!(result.contains(\"az keyvault secret set\"));\n        assert!(result.contains(\"API-KEY\"));\n    }\n}\n","traces":[{"line":14,"address":[5465968],"length":1,"stats":{"Line":1}},{"line":16,"address":[6340045],"length":1,"stats":{"Line":1}},{"line":22,"address":[6340176,6341718,6341712],"length":1,"stats":{"Line":1}},{"line":23,"address":[6340238],"length":1,"stats":{"Line":1}},{"line":25,"address":[6340263],"length":1,"stats":{"Line":1}},{"line":26,"address":[6340314],"length":1,"stats":{"Line":1}},{"line":27,"address":[6340382],"length":1,"stats":{"Line":1}},{"line":28,"address":[6340414],"length":1,"stats":{"Line":1}},{"line":30,"address":[6340654],"length":1,"stats":{"Line":1}},{"line":31,"address":[6341007,6340857],"length":1,"stats":{"Line":2}},{"line":32,"address":[6341031,6341107],"length":1,"stats":{"Line":2}},{"line":35,"address":[6341134,6341202],"length":1,"stats":{"Line":2}},{"line":37,"address":[6341355,6341626,6341244],"length":1,"stats":{"Line":3}},{"line":43,"address":[6340879],"length":1,"stats":{"Line":1}},{"line":46,"address":[6340144],"length":1,"stats":{"Line":0}},{"line":50,"address":[6340112],"length":1,"stats":{"Line":0}}],"covered":14,"coverable":16},{"path":["/","home","ajit","Documents","dotenv-space-cli","src","formats","docker.rs"],"content":"// ============================================================================\n// formats/docker.rs\n// ============================================================================\n\nuse crate::core::converter::{ConvertOptions, Converter};\nuse anyhow::Result;\nuse std::collections::HashMap;\n\npub struct DockerComposeConverter;\n\nimpl Converter for DockerComposeConverter {\n    fn convert(\u0026self, vars: \u0026HashMap\u003cString, String\u003e, options: \u0026ConvertOptions) -\u003e Result\u003cString\u003e {\n        let filtered = options.filter_vars(vars);\n\n        let mut output = String::new();\n        output.push_str(\"environment:\\n\");\n\n        for (k, v) in filtered.iter() {\n            let key = options.transform_key(k);\n            let value = options.transform_value(v);\n            output.push_str(\u0026format!(\"  - {}={}\\n\", key, value));\n        }\n\n        Ok(output)\n    }\n\n    fn name(\u0026self) -\u003e \u0026str {\n        \"docker-compose\"\n    }\n\n    fn description(\u0026self) -\u003e \u0026str {\n        \"Docker Compose YAML environment section\"\n    }\n}\n","traces":[{"line":12,"address":[5493480,5492464,5493486],"length":1,"stats":{"Line":0}},{"line":13,"address":[6345046],"length":1,"stats":{"Line":0}},{"line":15,"address":[6345068],"length":1,"stats":{"Line":0}},{"line":16,"address":[6345116],"length":1,"stats":{"Line":0}},{"line":18,"address":[6345184],"length":1,"stats":{"Line":0}},{"line":19,"address":[6345384,6345528],"length":1,"stats":{"Line":0}},{"line":20,"address":[6345552,6345628],"length":1,"stats":{"Line":0}},{"line":21,"address":[6345742,6345655],"length":1,"stats":{"Line":0}},{"line":24,"address":[6345406],"length":1,"stats":{"Line":0}},{"line":27,"address":[6344960],"length":1,"stats":{"Line":0}},{"line":31,"address":[6344928],"length":1,"stats":{"Line":0}}],"covered":0,"coverable":11},{"path":["/","home","ajit","Documents","dotenv-space-cli","src","formats","doppler.rs"],"content":"// ============================================================================\n// Doppler Format\n// ============================================================================\n\nuse crate::core::converter::{ConvertOptions, Converter};\nuse anyhow::Result;\nuse std::collections::HashMap;\n\npub struct DopplerConverter;\n\nimpl Converter for DopplerConverter {\n    fn convert(\u0026self, vars: \u0026HashMap\u003cString, String\u003e, options: \u0026ConvertOptions) -\u003e Result\u003cString\u003e {\n        let filtered = options.filter_vars(vars);\n\n        let transformed: HashMap\u003cString, serde_json::Value\u003e = filtered\n            .iter()\n            .map(|(k, v)| {\n                let key = options.transform_key(k);\n                let value = options.transform_value(v);\n                (\n                    key,\n                    serde_json::json!({\n                        \"value\": value,\n                        \"computed\": false\n                    }),\n                )\n            })\n            .collect();\n\n        let json = serde_json::to_string_pretty(\u0026transformed)?;\n        Ok(json)\n    }\n\n    fn name(\u0026self) -\u003e \u0026str {\n        \"doppler\"\n    }\n\n    fn description(\u0026self) -\u003e \u0026str {\n        \"Doppler secrets JSON format\"\n    }\n}\n","traces":[{"line":12,"address":[5433952,5433504,5433946],"length":1,"stats":{"Line":0}},{"line":13,"address":[5880182],"length":1,"stats":{"Line":0}},{"line":17,"address":[5880271],"length":1,"stats":{"Line":0}},{"line":18,"address":[6644622],"length":1,"stats":{"Line":0}},{"line":19,"address":[6644685,6644766],"length":1,"stats":{"Line":0}},{"line":21,"address":[6644782],"length":1,"stats":{"Line":0}},{"line":22,"address":[6644824,6644986,6644875,6645405],"length":1,"stats":{"Line":0}},{"line":30,"address":[5880387,5880322],"length":1,"stats":{"Line":0}},{"line":31,"address":[5880527],"length":1,"stats":{"Line":0}},{"line":34,"address":[5880096],"length":1,"stats":{"Line":0}},{"line":38,"address":[5880064],"length":1,"stats":{"Line":0}}],"covered":0,"coverable":11},{"path":["/","home","ajit","Documents","dotenv-space-cli","src","formats","gcp.rs"],"content":"// ============================================================================\n// GCP Secret Manager\n// ============================================================================\n\nuse crate::core::converter::{ConvertOptions, Converter};\nuse anyhow::Result;\nuse std::collections::HashMap;\n\npub struct GcpSecretConverter {\n    pub project_id: String,\n}\n\nimpl Default for GcpSecretConverter {\n    fn default() -\u003e Self {\n        Self {\n            project_id: \"my-project\".to_string(),\n        }\n    }\n}\n\nimpl Converter for GcpSecretConverter {\n    fn convert(\u0026self, vars: \u0026HashMap\u003cString, String\u003e, options: \u0026ConvertOptions) -\u003e Result\u003cString\u003e {\n        let filtered = options.filter_vars(vars);\n\n        let mut output = String::new();\n        output.push_str(\"#!/bin/bash\\n\");\n        output.push_str(\"# Upload secrets to GCP Secret Manager\\n\");\n        output.push_str(\u0026format!(\"# Project: {}\\n\\n\", self.project_id));\n\n        for (k, v) in filtered.iter() {\n            let key = options.transform_key(k);\n            let value = options.transform_value(v);\n\n            // Convert to lowercase with hyphens (GCP naming)\n            let secret_name = key.to_lowercase().replace('_', \"-\");\n\n            output.push_str(\u0026format!(\n                \"echo '{}' | gcloud secrets create {} --data-file=- --project={}\\n\",\n                value, secret_name, self.project_id\n            ));\n        }\n\n        Ok(output)\n    }\n\n    fn name(\u0026self) -\u003e \u0026str {\n        \"gcp-secrets\"\n    }\n\n    fn description(\u0026self) -\u003e \u0026str {\n        \"GCP Secret Manager (gcloud commands)\"\n    }\n}\n\n#[cfg(test)]\nmod tests {\n    use super::*;\n\n    #[test]\n    fn test_gcp_converter() {\n        let mut vars = HashMap::new();\n        vars.insert(\n            \"DATABASE_URL\".to_string(),\n            \"postgresql://localhost\".to_string(),\n        );\n\n        let converter = GcpSecretConverter::default();\n        let result = converter\n            .convert(\u0026vars, \u0026ConvertOptions::default())\n            .unwrap();\n\n        assert!(result.contains(\"gcloud secrets create\"));\n        assert!(result.contains(\"database-url\"));\n    }\n}\n","traces":[{"line":14,"address":[5826032],"length":1,"stats":{"Line":1}},{"line":16,"address":[6338205],"length":1,"stats":{"Line":1}},{"line":22,"address":[6340001,6340007,6338336],"length":1,"stats":{"Line":1}},{"line":23,"address":[6338404],"length":1,"stats":{"Line":1}},{"line":25,"address":[6338429],"length":1,"stats":{"Line":1}},{"line":26,"address":[6338480],"length":1,"stats":{"Line":1}},{"line":27,"address":[6338548],"length":1,"stats":{"Line":1}},{"line":28,"address":[6338583],"length":1,"stats":{"Line":1}},{"line":30,"address":[6338823],"length":1,"stats":{"Line":1}},{"line":31,"address":[6339179,6339026],"length":1,"stats":{"Line":2}},{"line":32,"address":[6339279,6339203],"length":1,"stats":{"Line":2}},{"line":35,"address":[6339306,6339374],"length":1,"stats":{"Line":2}},{"line":37,"address":[6339585,6339915],"length":1,"stats":{"Line":2}},{"line":43,"address":[6339051],"length":1,"stats":{"Line":1}},{"line":46,"address":[6338304],"length":1,"stats":{"Line":0}},{"line":50,"address":[6338272],"length":1,"stats":{"Line":0}}],"covered":14,"coverable":16},{"path":["/","home","ajit","Documents","dotenv-space-cli","src","formats","github.rs"],"content":"// ============================================================================\n// formats/github.rs\n// ============================================================================\n\nuse crate::core::converter::{ConvertOptions, Converter};\nuse anyhow::Result;\nuse std::collections::HashMap;\n\npub struct GitHubActionsConverter {\n    pub separator: String,\n}\n\nimpl Default for GitHubActionsConverter {\n    fn default() -\u003e Self {\n        Self {\n            separator: \"---\".to_string(),\n        }\n    }\n}\n\nimpl Converter for GitHubActionsConverter {\n    fn convert(\u0026self, vars: \u0026HashMap\u003cString, String\u003e, options: \u0026ConvertOptions) -\u003e Result\u003cString\u003e {\n        let filtered = options.filter_vars(vars);\n\n        let mut output = String::new();\n        output.push_str(\"Paste these into Settings → Secrets and variables → Actions:\\n\\n\");\n\n        let count = filtered.len();\n        for (i, (k, v)) in filtered.iter().enumerate() {\n            let key = options.transform_key(k);\n            let value = options.transform_value(v);\n\n            output.push_str(\u0026format!(\"Name: {}\\n\", key));\n            output.push_str(\u0026format!(\"Value: {}\\n\", value));\n\n            if i \u003c count - 1 {\n                output.push_str(\u0026format!(\"{}\\n\", self.separator));\n            }\n        }\n\n        output.push_str(\u0026format!(\n            \"\\n({} secrets total — paste each one individually)\\n\",\n            count\n        ));\n\n        Ok(output)\n    }\n\n    fn name(\u0026self) -\u003e \u0026str {\n        \"github-actions\"\n    }\n\n    fn description(\u0026self) -\u003e \u0026str {\n        \"GitHub Actions secrets format (ready to paste)\"\n    }\n}\n","traces":[{"line":14,"address":[6383120],"length":1,"stats":{"Line":0}},{"line":16,"address":[6635037],"length":1,"stats":{"Line":0}},{"line":22,"address":[6635168,6636035,6637077],"length":1,"stats":{"Line":0}},{"line":23,"address":[6635242],"length":1,"stats":{"Line":0}},{"line":25,"address":[6635267],"length":1,"stats":{"Line":0}},{"line":26,"address":[6635318],"length":1,"stats":{"Line":0}},{"line":28,"address":[6635386],"length":1,"stats":{"Line":0}},{"line":29,"address":[6635423],"length":1,"stats":{"Line":0}},{"line":30,"address":[6636059,6635646],"length":1,"stats":{"Line":0}},{"line":31,"address":[6636083,6636162],"length":1,"stats":{"Line":0}},{"line":33,"address":[6636189,6636260],"length":1,"stats":{"Line":0}},{"line":34,"address":[6636481],"length":1,"stats":{"Line":0}},{"line":36,"address":[6636721],"length":1,"stats":{"Line":0}},{"line":37,"address":[6636814],"length":1,"stats":{"Line":0}},{"line":41,"address":[6635674,6635888],"length":1,"stats":{"Line":0}},{"line":46,"address":[6635922],"length":1,"stats":{"Line":0}},{"line":49,"address":[6635136],"length":1,"stats":{"Line":0}},{"line":53,"address":[6635104],"length":1,"stats":{"Line":0}}],"covered":0,"coverable":18},{"path":["/","home","ajit","Documents","dotenv-space-cli","src","formats","heroku.rs"],"content":"//! Heroku Config Vars converter\n//!\n//! Converts environment variables to Heroku CLI commands for setting config vars.\n\nuse crate::core::converter::{ConvertOptions, Converter};\nuse anyhow::Result;\nuse std::collections::HashMap;\n\n/// Heroku Config Vars converter\n///\n/// ✅ CLIPPY FIX: Uses `#[derive(Default)]` instead of manual implementation\n#[derive(Debug, Clone, Default)]\npub struct HerokuConfigConverter {\n    // Optional Heroku app name (can be specified in commands)\n    pub app_name: Option\u003cString\u003e,\n}\n\n// ✅ CLIPPY FIX: Removed manual impl Default (using #[derive(Default)])\n\nimpl HerokuConfigConverter {\n    // Create converter with specific app name\n    pub fn new(app_name: String) -\u003e Self {\n        Self {\n            app_name: Some(app_name),\n        }\n    }\n\n    // Create converter without app name (user must specify with --app flag)\n    pub fn without_app() -\u003e Self {\n        Self { app_name: None }\n    }\n}\n\nimpl Converter for HerokuConfigConverter {\n    fn convert(\u0026self, vars: \u0026HashMap\u003cString, String\u003e, options: \u0026ConvertOptions) -\u003e Result\u003cString\u003e {\n        let filtered = options.filter_vars(vars);\n        let mut output = String::new();\n\n        output.push_str(\"#!/bin/bash\\n\");\n        output.push_str(\"# Heroku Config Vars\\n\");\n        output.push_str(\"# Generated by evnx\\n\");\n        output.push_str(\"#\\n\");\n        output.push_str(\"# Usage:\\n\");\n\n        if self.app_name.is_some() {\n            output.push_str(\"#   bash heroku-config.sh\\n\");\n        } else {\n            output.push_str(\"#   bash heroku-config.sh --app YOUR_APP_NAME\\n\");\n        }\n\n        output.push_str(\"#\\n\");\n        output.push_str(\"# Or set variables individually:\\n\");\n        output.push_str(\"#   heroku config:set KEY=VALUE --app YOUR_APP_NAME\\n\");\n        output.push('\\n');\n\n        // App name flag\n        let app_flag = if let Some(ref app) = self.app_name {\n            format!(\" --app {}\", app)\n        } else {\n            \" --app ${HEROKU_APP:-YOUR_APP_NAME}\".to_string()\n        };\n\n        output.push_str(\"set -e\\n\\n\");\n\n        // Generate config:set commands\n        output.push_str(\"echo \\\"Setting Heroku config vars...\\\"\\n\\n\");\n\n        for (key, value) in filtered.iter() {\n            let transformed_key = options.transform_key(key);\n            let transformed_value = options.transform_value(value);\n\n            // Escape value for shell\n            let escaped_value = transformed_value\n                .replace('\\\\', \"\\\\\\\\\")\n                .replace('\"', \"\\\\\\\"\")\n                .replace('$', \"\\\\$\")\n                .replace('`', \"\\\\`\");\n\n            output.push_str(\u0026format!(\n                \"heroku config:set {}=\\\"{}\\\"{}\",\n                transformed_key, escaped_value, app_flag\n            ));\n            output.push_str(\" || echo \\\"Failed to set \");\n            output.push_str(\u0026transformed_key);\n            output.push_str(\"\\\"\\n\");\n        }\n\n        output.push_str(\"\\necho \\\"✓ Config vars set successfully\\\"\\n\");\n\n        // Add instructions for verification\n        output.push_str(\"\\n# Verify settings:\\n\");\n        output.push_str(\u0026format!(\"# heroku config{}\\n\", app_flag));\n\n        Ok(output)\n    }\n\n    fn name(\u0026self) -\u003e \u0026str {\n        \"heroku\"\n    }\n\n    fn description(\u0026self) -\u003e \u0026str {\n        \"Heroku Config Vars (heroku CLI commands)\"\n    }\n}\n\n#[cfg(test)]\nmod tests {\n    use super::*;\n\n    #[test]\n    fn test_default_converter() {\n        let converter = HerokuConfigConverter::default();\n        assert!(converter.app_name.is_none());\n    }\n\n    #[test]\n    fn test_converter_with_app() {\n        let converter = HerokuConfigConverter::new(\"my-app\".to_string());\n        assert_eq!(converter.app_name, Some(\"my-app\".to_string()));\n    }\n\n    #[test]\n    fn test_converter_without_app() {\n        let converter = HerokuConfigConverter::without_app();\n        assert!(converter.app_name.is_none());\n    }\n\n    #[test]\n    fn test_convert_basic() {\n        let mut vars = HashMap::new();\n        vars.insert(\"DATABASE_URL\".to_string(), \"postgresql://...\".to_string());\n        vars.insert(\"SECRET_KEY\".to_string(), \"secret123\".to_string());\n\n        let converter = HerokuConfigConverter::new(\"test-app\".to_string());\n        let options = ConvertOptions::default();\n        let result = converter.convert(\u0026vars, \u0026options).unwrap();\n\n        assert!(result.contains(\"heroku config:set\"));\n        assert!(result.contains(\"DATABASE_URL\"));\n        assert!(result.contains(\"SECRET_KEY\"));\n        assert!(result.contains(\"--app test-app\"));\n    }\n\n    #[test]\n    fn test_convert_without_app() {\n        let mut vars = HashMap::new();\n        vars.insert(\"KEY\".to_string(), \"value\".to_string());\n\n        let converter = HerokuConfigConverter::without_app();\n        let options = ConvertOptions::default();\n        let result = converter.convert(\u0026vars, \u0026options).unwrap();\n\n        assert!(result.contains(\"--app ${HEROKU_APP:-YOUR_APP_NAME}\"));\n    }\n\n    #[test]\n    fn test_convert_with_special_chars() {\n        let mut vars = HashMap::new();\n        vars.insert(\n            \"KEY\".to_string(),\n            \"value with \\\"quotes\\\" and $vars\".to_string(),\n        );\n\n        let converter = HerokuConfigConverter::default();\n        let options = ConvertOptions::default();\n        let result = converter.convert(\u0026vars, \u0026options).unwrap();\n\n        // Should escape special characters\n        assert!(result.contains(\"\\\\\\\"\"));\n        assert!(result.contains(\"\\\\$\"));\n    }\n\n    #[test]\n    fn test_converter_name() {\n        let converter = HerokuConfigConverter::default();\n        assert_eq!(converter.name(), \"heroku\");\n    }\n\n    #[test]\n    fn test_converter_description() {\n        let converter = HerokuConfigConverter::default();\n        assert!(!converter.description().is_empty());\n    }\n}\n","traces":[{"line":22,"address":[5955872],"length":1,"stats":{"Line":1}},{"line":24,"address":[6506547],"length":1,"stats":{"Line":1}},{"line":29,"address":[6506496],"length":1,"stats":{"Line":1}},{"line":35,"address":[6509807,6506912,6508450],"length":1,"stats":{"Line":1}},{"line":36,"address":[5956314],"length":1,"stats":{"Line":2}},{"line":37,"address":[6507019],"length":1,"stats":{"Line":2}},{"line":39,"address":[6507070],"length":1,"stats":{"Line":1}},{"line":40,"address":[6507143],"length":1,"stats":{"Line":2}},{"line":41,"address":[6507170],"length":1,"stats":{"Line":1}},{"line":42,"address":[6507197],"length":1,"stats":{"Line":2}},{"line":43,"address":[6507224],"length":1,"stats":{"Line":1}},{"line":45,"address":[6507259],"length":1,"stats":{"Line":2}},{"line":46,"address":[6507317,6507373],"length":1,"stats":{"Line":2}},{"line":48,"address":[6507344,6507290],"length":1,"stats":{"Line":4}},{"line":51,"address":[6507346],"length":1,"stats":{"Line":1}},{"line":52,"address":[6507375],"length":1,"stats":{"Line":2}},{"line":53,"address":[6507402],"length":1,"stats":{"Line":1}},{"line":54,"address":[6507442],"length":1,"stats":{"Line":2}},{"line":57,"address":[6507457],"length":1,"stats":{"Line":1}},{"line":58,"address":[6507574,6507513],"length":1,"stats":{"Line":2}},{"line":60,"address":[6507540,6507703],"length":1,"stats":{"Line":4}},{"line":63,"address":[6507676],"length":1,"stats":{"Line":2}},{"line":66,"address":[5957069],"length":1,"stats":{"Line":1}},{"line":68,"address":[6507776],"length":1,"stats":{"Line":2}},{"line":69,"address":[5957302,5957795],"length":1,"stats":{"Line":3}},{"line":70,"address":[6508586,6508507],"length":1,"stats":{"Line":3}},{"line":73,"address":[6508613,6508726,6508842,6508958],"length":1,"stats":{"Line":6}},{"line":79,"address":[6509257,6509597],"length":1,"stats":{"Line":3}},{"line":83,"address":[5958922],"length":1,"stats":{"Line":1}},{"line":84,"address":[6509658],"length":1,"stats":{"Line":2}},{"line":85,"address":[5958997],"length":1,"stats":{"Line":1}},{"line":88,"address":[6508020],"length":1,"stats":{"Line":2}},{"line":91,"address":[6508047],"length":1,"stats":{"Line":1}},{"line":92,"address":[6508082],"length":1,"stats":{"Line":2}},{"line":94,"address":[6508330],"length":1,"stats":{"Line":3}},{"line":97,"address":[6506880],"length":1,"stats":{"Line":1}},{"line":101,"address":[6506848],"length":1,"stats":{"Line":1}}],"covered":37,"coverable":37},{"path":["/","home","ajit","Documents","dotenv-space-cli","src","formats","json.rs"],"content":"// ============================================================================\n// formats/json.rs\n// ============================================================================\n\nuse crate::core::converter::{ConvertOptions, Converter};\nuse anyhow::Result;\nuse std::collections::HashMap;\n\npub struct JsonConverter;\n\nimpl Converter for JsonConverter {\n    fn convert(\u0026self, vars: \u0026HashMap\u003cString, String\u003e, options: \u0026ConvertOptions) -\u003e Result\u003cString\u003e {\n        let filtered = options.filter_vars(vars);\n\n        let transformed: HashMap\u003cString, String\u003e = filtered\n            .iter()\n            .map(|(k, v)| {\n                let key = options.transform_key(k);\n                let value = options.transform_value(v);\n                (key, value)\n            })\n            .collect();\n\n        let json = serde_json::to_string_pretty(\u0026transformed)?;\n        Ok(json)\n    }\n\n    fn name(\u0026self) -\u003e \u0026str {\n        \"json\"\n    }\n\n    fn description(\u0026self) -\u003e \u0026str {\n        \"Generic JSON key-value format\"\n    }\n}\n\n#[cfg(test)]\nmod tests {\n    use super::*;\n    use std::collections::HashMap;\n\n    #[test]\n    fn test_json_converter() {\n        let mut vars = HashMap::new();\n        vars.insert(\"KEY\".to_string(), \"value\".to_string());\n\n        let converter = JsonConverter;\n        let options = ConvertOptions::default();\n        let result = converter.convert(\u0026vars, \u0026options).unwrap();\n\n        let json: serde_json::Value = serde_json::from_str(\u0026result).unwrap();\n        assert_eq!(json[\"KEY\"], \"value\");\n    }\n}\n","traces":[{"line":12,"address":[5378234,5377792,5378240],"length":1,"stats":{"Line":1}},{"line":13,"address":[6170214],"length":1,"stats":{"Line":1}},{"line":17,"address":[5879744,5879680,5880040,5880034],"length":1,"stats":{"Line":3}},{"line":18,"address":[5879760],"length":1,"stats":{"Line":1}},{"line":19,"address":[5879896,5879815],"length":1,"stats":{"Line":2}},{"line":20,"address":[5879922],"length":1,"stats":{"Line":1}},{"line":24,"address":[6170354,6170419],"length":1,"stats":{"Line":2}},{"line":25,"address":[6170559],"length":1,"stats":{"Line":1}},{"line":28,"address":[6170128],"length":1,"stats":{"Line":0}},{"line":32,"address":[6170096],"length":1,"stats":{"Line":0}}],"covered":8,"coverable":10},{"path":["/","home","ajit","Documents","dotenv-space-cli","src","formats","kubernetes.rs"],"content":"// ============================================================================\n// formats/kubernetes.rs\n// ============================================================================\n\nuse crate::core::converter::{ConvertOptions, Converter};\nuse anyhow::Result;\nuse std::collections::HashMap;\n\npub struct KubernetesSecretConverter {\n    pub secret_name: String,\n}\n\nimpl Default for KubernetesSecretConverter {\n    fn default() -\u003e Self {\n        Self {\n            secret_name: \"app-secrets\".to_string(),\n        }\n    }\n}\n\nimpl Converter for KubernetesSecretConverter {\n    fn convert(\u0026self, vars: \u0026HashMap\u003cString, String\u003e, options: \u0026ConvertOptions) -\u003e Result\u003cString\u003e {\n        let filtered = options.filter_vars(vars);\n\n        let mut output = String::new();\n        output.push_str(\"apiVersion: v1\\n\");\n        output.push_str(\"kind: Secret\\n\");\n        output.push_str(\"metadata:\\n\");\n        output.push_str(\u0026format!(\"  name: {}\\n\", self.secret_name));\n        output.push_str(\"type: Opaque\\n\");\n\n        if options.base64 {\n            output.push_str(\"data:\\n\");\n        } else {\n            output.push_str(\"stringData:\\n\");\n        }\n\n        for (k, v) in filtered.iter() {\n            let key = options.transform_key(k);\n            let value = options.transform_value(v);\n            output.push_str(\u0026format!(\"  {}: {}\\n\", key, value));\n        }\n\n        Ok(output)\n    }\n\n    fn name(\u0026self) -\u003e \u0026str {\n        \"kubernetes\"\n    }\n\n    fn description(\u0026self) -\u003e \u0026str {\n        \"Kubernetes Secret YAML\"\n    }\n}\n","traces":[{"line":14,"address":[6343280],"length":1,"stats":{"Line":0}},{"line":16,"address":[6343293],"length":1,"stats":{"Line":0}},{"line":22,"address":[6343259,6341808,6343253],"length":1,"stats":{"Line":0}},{"line":23,"address":[6341867],"length":1,"stats":{"Line":0}},{"line":25,"address":[6341889],"length":1,"stats":{"Line":0}},{"line":26,"address":[6341937],"length":1,"stats":{"Line":0}},{"line":27,"address":[6342005],"length":1,"stats":{"Line":0}},{"line":28,"address":[6342032],"length":1,"stats":{"Line":0}},{"line":29,"address":[6342064],"length":1,"stats":{"Line":0}},{"line":30,"address":[6342304],"length":1,"stats":{"Line":0}},{"line":32,"address":[6342336],"length":1,"stats":{"Line":0}},{"line":33,"address":[6342369,6342422],"length":1,"stats":{"Line":0}},{"line":35,"address":[6342342,6342396],"length":1,"stats":{"Line":0}},{"line":38,"address":[6342398,6342424],"length":1,"stats":{"Line":0}},{"line":39,"address":[6342600,6342744],"length":1,"stats":{"Line":0}},{"line":40,"address":[6342768,6342844],"length":1,"stats":{"Line":0}},{"line":41,"address":[6342871,6342958],"length":1,"stats":{"Line":0}},{"line":44,"address":[6342622],"length":1,"stats":{"Line":0}},{"line":47,"address":[6341776],"length":1,"stats":{"Line":0}},{"line":51,"address":[6341744],"length":1,"stats":{"Line":0}}],"covered":0,"coverable":20},{"path":["/","home","ajit","Documents","dotenv-space-cli","src","formats","mod.rs"],"content":"pub mod aws;\npub mod docker;\npub mod github;\npub mod json;\npub mod kubernetes;\npub mod shell;\npub mod terraform;\npub mod yaml;\n\n// Cloud providers\npub mod azure;\npub mod doppler;\npub mod gcp;\npub mod heroku;\npub mod railway;\npub mod vercel;\n\n// Re-export converters\npub use aws::AwsSecretsConverter;\npub use docker::DockerComposeConverter;\npub use github::GitHubActionsConverter;\npub use json::JsonConverter;\npub use kubernetes::KubernetesSecretConverter;\npub use shell::ShellExportConverter;\npub use terraform::TerraformConverter;\npub use yaml::YamlConverter;\n\npub use azure::AzureKeyVaultConverter;\npub use doppler::DopplerConverter;\npub use gcp::GcpSecretConverter;\npub use heroku::HerokuConfigConverter;\npub use railway::RailwayConverter;\npub use vercel::VercelEnvConverter;\n","traces":[],"covered":0,"coverable":0},{"path":["/","home","ajit","Documents","dotenv-space-cli","src","formats","railway.rs"],"content":"// ============================================================================\n// Railway Variables\n// ============================================================================\n\nuse crate::core::converter::{ConvertOptions, Converter};\nuse anyhow::Result;\nuse std::collections::HashMap;\n\npub struct RailwayConverter;\n\nimpl Converter for RailwayConverter {\n    fn convert(\u0026self, vars: \u0026HashMap\u003cString, String\u003e, options: \u0026ConvertOptions) -\u003e Result\u003cString\u003e {\n        let filtered = options.filter_vars(vars);\n\n        let transformed: HashMap\u003cString, String\u003e = filtered\n            .iter()\n            .map(|(k, v)| {\n                let key = options.transform_key(k);\n                let value = options.transform_value(v);\n                (key, value)\n            })\n            .collect();\n\n        let json = serde_json::to_string_pretty(\u0026transformed)?;\n        Ok(json)\n    }\n\n    fn name(\u0026self) -\u003e \u0026str {\n        \"railway\"\n    }\n\n    fn description(\u0026self) -\u003e \u0026str {\n        \"Railway JSON format\"\n    }\n}\n","traces":[{"line":12,"address":[6311696,6311248,6311690],"length":1,"stats":{"Line":0}},{"line":13,"address":[6076646],"length":1,"stats":{"Line":0}},{"line":17,"address":[6076735],"length":1,"stats":{"Line":0}},{"line":18,"address":[6349136],"length":1,"stats":{"Line":0}},{"line":19,"address":[6349191,6349272],"length":1,"stats":{"Line":0}},{"line":20,"address":[6349298],"length":1,"stats":{"Line":0}},{"line":24,"address":[6076786,6076851],"length":1,"stats":{"Line":0}},{"line":25,"address":[6076991],"length":1,"stats":{"Line":0}},{"line":28,"address":[6076560],"length":1,"stats":{"Line":0}},{"line":32,"address":[6076528],"length":1,"stats":{"Line":0}}],"covered":0,"coverable":10},{"path":["/","home","ajit","Documents","dotenv-space-cli","src","formats","shell.rs"],"content":"// ============================================================================\n// formats/shell.rs\n// ============================================================================\n\nuse crate::core::converter::{ConvertOptions, Converter};\nuse anyhow::Result;\nuse std::collections::HashMap;\n\npub struct ShellExportConverter;\n\nimpl Converter for ShellExportConverter {\n    fn convert(\u0026self, vars: \u0026HashMap\u003cString, String\u003e, options: \u0026ConvertOptions) -\u003e Result\u003cString\u003e {\n        let filtered = options.filter_vars(vars);\n\n        let mut output = String::new();\n        output.push_str(\"#!/bin/bash\\n\");\n        output.push_str(\"# Generated by evnx\\n\\n\");\n\n        for (k, v) in filtered.iter() {\n            let key = options.transform_key(k);\n            let value = options.transform_value(v);\n            // Escape quotes in values\n            let escaped_value = value.replace('\"', \"\\\\\\\"\");\n            output.push_str(\u0026format!(\"export {}=\\\"{}\\\"\\n\", key, escaped_value));\n        }\n\n        Ok(output)\n    }\n\n    fn name(\u0026self) -\u003e \u0026str {\n        \"shell\"\n    }\n\n    fn description(\u0026self) -\u003e \u0026str {\n        \"Shell export script\"\n    }\n}\n","traces":[{"line":12,"address":[5625273,5625279,5624096],"length":1,"stats":{"Line":0}},{"line":13,"address":[6346182],"length":1,"stats":{"Line":0}},{"line":15,"address":[6346204],"length":1,"stats":{"Line":0}},{"line":16,"address":[6346252],"length":1,"stats":{"Line":0}},{"line":17,"address":[6346320],"length":1,"stats":{"Line":0}},{"line":19,"address":[6346347],"length":1,"stats":{"Line":0}},{"line":20,"address":[6346547,6346691],"length":1,"stats":{"Line":0}},{"line":21,"address":[6346791,6346715],"length":1,"stats":{"Line":0}},{"line":23,"address":[6346818,6346886],"length":1,"stats":{"Line":0}},{"line":24,"address":[6347018,6346931],"length":1,"stats":{"Line":0}},{"line":27,"address":[6346569],"length":1,"stats":{"Line":0}},{"line":30,"address":[6346096],"length":1,"stats":{"Line":0}},{"line":34,"address":[6346064],"length":1,"stats":{"Line":0}}],"covered":0,"coverable":13},{"path":["/","home","ajit","Documents","dotenv-space-cli","src","formats","terraform.rs"],"content":"// ============================================================================\n// formats/terraform.rs\n// ============================================================================\n\nuse crate::core::converter::{ConvertOptions, Converter};\nuse anyhow::Result;\nuse std::collections::HashMap;\n\npub struct TerraformConverter;\n\nimpl Converter for TerraformConverter {\n    fn convert(\u0026self, vars: \u0026HashMap\u003cString, String\u003e, options: \u0026ConvertOptions) -\u003e Result\u003cString\u003e {\n        let filtered = options.filter_vars(vars);\n\n        let mut output = String::new();\n        output.push_str(\"# Generated by evnx\\n\\n\");\n\n        for (k, v) in filtered.iter() {\n            let key = options.transform_key(k).to_lowercase();\n            let value = options.transform_value(v);\n            // Escape quotes and backslashes\n            let escaped_value = value.replace('\\\\', \"\\\\\\\\\").replace('\"', \"\\\\\\\"\");\n            output.push_str(\u0026format!(\"{} = \\\"{}\\\"\\n\", key, escaped_value));\n        }\n\n        Ok(output)\n    }\n\n    fn name(\u0026self) -\u003e \u0026str {\n        \"terraform\"\n    }\n\n    fn description(\u0026self) -\u003e \u0026str {\n        \"Terraform .tfvars format\"\n    }\n}\n","traces":[{"line":12,"address":[5524144,5525585,5525591],"length":1,"stats":{"Line":0}},{"line":13,"address":[6343490],"length":1,"stats":{"Line":0}},{"line":15,"address":[6343515],"length":1,"stats":{"Line":0}},{"line":16,"address":[6343566],"length":1,"stats":{"Line":0}},{"line":18,"address":[6343634],"length":1,"stats":{"Line":0}},{"line":19,"address":[6343993,6343837],"length":1,"stats":{"Line":0}},{"line":20,"address":[6344178],"length":1,"stats":{"Line":0}},{"line":22,"address":[6344311,6344240],"length":1,"stats":{"Line":0}},{"line":23,"address":[6344535],"length":1,"stats":{"Line":0}},{"line":26,"address":[6343862],"length":1,"stats":{"Line":0}},{"line":29,"address":[6343392],"length":1,"stats":{"Line":0}},{"line":33,"address":[6343360],"length":1,"stats":{"Line":0}}],"covered":0,"coverable":12},{"path":["/","home","ajit","Documents","dotenv-space-cli","src","formats","vercel.rs"],"content":"// ============================================================================\n// Vercel Environment Variables\n// ============================================================================\n\nuse crate::core::converter::{ConvertOptions, Converter};\nuse anyhow::Result;\nuse std::collections::HashMap;\n\npub struct VercelEnvConverter;\n\nimpl Converter for VercelEnvConverter {\n    fn convert(\u0026self, vars: \u0026HashMap\u003cString, String\u003e, options: \u0026ConvertOptions) -\u003e Result\u003cString\u003e {\n        let filtered = options.filter_vars(vars);\n\n        let transformed: HashMap\u003cString, serde_json::Value\u003e = filtered\n            .iter()\n            .map(|(k, v)| {\n                let key = options.transform_key(k);\n                let value = options.transform_value(v);\n                (\n                    key,\n                    serde_json::json!({\n                        \"type\": \"plain\",\n                        \"value\": value,\n                        \"target\": [\"production\", \"preview\", \"development\"]\n                    }),\n                )\n            })\n            .collect();\n\n        let json = serde_json::to_string_pretty(\u0026transformed)?;\n        Ok(json)\n    }\n\n    fn name(\u0026self) -\u003e \u0026str {\n        \"vercel\"\n    }\n\n    fn description(\u0026self) -\u003e \u0026str {\n        \"Vercel Environment Variables JSON\"\n    }\n}\n","traces":[{"line":12,"address":[6102426,6102432,6101984],"length":1,"stats":{"Line":0}},{"line":13,"address":[5743302],"length":1,"stats":{"Line":0}},{"line":17,"address":[5743391],"length":1,"stats":{"Line":0}},{"line":18,"address":[5876096],"length":1,"stats":{"Line":0}},{"line":19,"address":[5876159,5876240],"length":1,"stats":{"Line":0}},{"line":21,"address":[5876256],"length":1,"stats":{"Line":0}},{"line":22,"address":[5876462,5876298,5876895,5877724,5876678,5876349],"length":1,"stats":{"Line":0}},{"line":31,"address":[5743442,5743507],"length":1,"stats":{"Line":0}},{"line":32,"address":[5743647],"length":1,"stats":{"Line":0}},{"line":35,"address":[5743216],"length":1,"stats":{"Line":0}},{"line":39,"address":[5743184],"length":1,"stats":{"Line":0}}],"covered":0,"coverable":11},{"path":["/","home","ajit","Documents","dotenv-space-cli","src","formats","yaml.rs"],"content":"// ============================================================================\n// formats/yaml.rs\n// ============================================================================\n\nuse crate::core::converter::{ConvertOptions, Converter};\nuse anyhow::Result;\nuse std::collections::HashMap;\n\npub struct YamlConverter;\n\nimpl Converter for YamlConverter {\n    fn convert(\u0026self, vars: \u0026HashMap\u003cString, String\u003e, options: \u0026ConvertOptions) -\u003e Result\u003cString\u003e {\n        let filtered = options.filter_vars(vars);\n\n        let transformed: HashMap\u003cString, String\u003e = filtered\n            .iter()\n            .map(|(k, v)| {\n                let key = options.transform_key(k);\n                let value = options.transform_value(v);\n                (key, value)\n            })\n            .collect();\n\n        let yaml = serde_yaml::to_string(\u0026transformed)?;\n        Ok(yaml)\n    }\n\n    fn name(\u0026self) -\u003e \u0026str {\n        \"yaml\"\n    }\n\n    fn description(\u0026self) -\u003e \u0026str {\n        \"Generic YAML key-value format\"\n    }\n}\n","traces":[{"line":12,"address":[5462000,5462442,5462448],"length":1,"stats":{"Line":0}},{"line":13,"address":[6506038],"length":1,"stats":{"Line":0}},{"line":17,"address":[5743154,5742800,5743160,5742864],"length":1,"stats":{"Line":0}},{"line":18,"address":[5742880],"length":1,"stats":{"Line":0}},{"line":19,"address":[5743016,5742935],"length":1,"stats":{"Line":0}},{"line":20,"address":[5743042],"length":1,"stats":{"Line":0}},{"line":24,"address":[6506178,6506243],"length":1,"stats":{"Line":0}},{"line":25,"address":[6506383],"length":1,"stats":{"Line":0}},{"line":28,"address":[6505952],"length":1,"stats":{"Line":0}},{"line":32,"address":[6505920],"length":1,"stats":{"Line":0}}],"covered":0,"coverable":10},{"path":["/","home","ajit","Documents","dotenv-space-cli","src","generators","env_var.rs"],"content":"//! Environment variable domain model.\n//!\n//! This module defines the `EnvVar` struct used to represent\n//! individual environment variables with metadata for documentation,\n//! validation, and template generation.\n\nuse std::fmt;\n\n/// Represents a single environment variable configuration.\n///\n/// # Example\n///\n/// ```\n/// use evnx::generators::env_var::EnvVar;\n///\n/// let var = EnvVar::new(\"DATABASE_URL\", \"postgresql://localhost/db\")\n///     .with_description(\"Primary database connection string\")\n///     .required()\n///     .with_category(\"Database\");\n///\n/// assert_eq!(var.key, \"DATABASE_URL\");\n/// assert!(var.required);\n/// ```\n#[derive(Debug, Clone, PartialEq, Eq)]\npub struct EnvVar {\n    /// The variable name (e.g., `\"DATABASE_URL\"`).\n    pub key: String,\n    /// Default/placeholder value for `.env.example`.\n    pub example_value: String,\n    /// Human-readable description for documentation.\n    pub description: Option\u003cString\u003e,\n    /// Whether this variable is required for the application to run.\n    pub required: bool,\n    /// Optional category for grouping in output (e.g., `\"Database\"`, `\"Auth\"`).\n    pub category: Option\u003cString\u003e,\n}\n\nimpl EnvVar {\n    /// Create a new `EnvVar` with key and example value.\n    ///\n    /// # Arguments\n    ///\n    /// * `key` - The environment variable name (conventionally SCREAMING_SNAKE_CASE)\n    /// * `example_value` - Placeholder value for `.env.example`\n    #[must_use]\n    pub fn new(key: impl Into\u003cString\u003e, example_value: impl Into\u003cString\u003e) -\u003e Self {\n        Self {\n            key: key.into(),\n            example_value: example_value.into(),\n            description: None,\n            required: false,\n            category: None,\n        }\n    }\n\n    /// Add a human-readable description.\n    #[must_use]\n    pub fn with_description(mut self, desc: impl Into\u003cString\u003e) -\u003e Self {\n        self.description = Some(desc.into());\n        self\n    }\n\n    /// Mark this variable as required.\n    #[must_use]\n    pub fn required(mut self) -\u003e Self {\n        self.required = true;\n        self\n    }\n\n    /// Assign to a category for grouped output.\n    #[must_use]\n    pub fn with_category(mut self, category: impl Into\u003cString\u003e) -\u003e Self {\n        self.category = Some(category.into());\n        self\n    }\n\n    /// Format as a single line for `.env.example` output.\n    ///\n    /// If a description exists, it's rendered as a comment above the variable.\n    #[must_use]\n    pub fn to_example_line(\u0026self) -\u003e String {\n        let mut lines = Vec::new();\n        if let Some(desc) = \u0026self.description {\n            lines.push(format!(\"# {}\", desc));\n        }\n        lines.push(format!(\"{}={}\", self.key, self.example_value));\n        lines.join(\"\\n\")\n    }\n\n    /// Format as a shell export statement.\n    #[must_use]\n    pub fn to_shell_export(\u0026self) -\u003e String {\n        format!(\"export {}=\\\"{}\\\"\", self.key, self.example_value)\n    }\n}\n\nimpl fmt::Display for EnvVar {\n    fn fmt(\u0026self, f: \u0026mut fmt::Formatter\u003c'_\u003e) -\u003e fmt::Result {\n        write!(f, \"{}={}\", self.key, self.example_value)\n    }\n}\n\n#[cfg(test)]\nmod tests {\n    use super::*;\n\n    #[test]\n    fn test_new_var() {\n        let var = EnvVar::new(\"KEY\", \"value\");\n        assert_eq!(var.key, \"KEY\");\n        assert_eq!(var.example_value, \"value\");\n        assert!(!var.required);\n    }\n\n    #[test]\n    fn test_with_description() {\n        let var = EnvVar::new(\"K\", \"v\").with_description(\"desc\");\n        assert_eq!(var.description, Some(\"desc\".to_string()));\n    }\n\n    #[test]\n    fn test_to_example_line_with_desc() {\n        let var = EnvVar::new(\"K\", \"v\").with_description(\"My description\");\n        assert_eq!(var.to_example_line(), \"# My description\\nK=v\");\n    }\n\n    #[test]\n    fn test_to_example_line_without_desc() {\n        let var = EnvVar::new(\"K\", \"v\");\n        assert_eq!(var.to_example_line(), \"K=v\");\n    }\n\n    #[test]\n    fn test_display_trait() {\n        let var = EnvVar::new(\"PORT\", \"8080\");\n        assert_eq!(format!(\"{}\", var), \"PORT=8080\");\n    }\n}\n","traces":[{"line":46,"address":[5955229,5954848,5955223],"length":1,"stats":{"Line":1}},{"line":48,"address":[],"length":0,"stats":{"Line":1}},{"line":49,"address":[],"length":0,"stats":{"Line":2}},{"line":58,"address":[6228448,6228176],"length":1,"stats":{"Line":1}},{"line":59,"address":[5954618,5954680],"length":1,"stats":{"Line":3}},{"line":60,"address":[5954805],"length":1,"stats":{"Line":2}},{"line":65,"address":[6555936],"length":1,"stats":{"Line":1}},{"line":66,"address":[6555944],"length":1,"stats":{"Line":1}},{"line":67,"address":[6555948],"length":1,"stats":{"Line":1}},{"line":72,"address":[6227888,6228160],"length":1,"stats":{"Line":1}},{"line":73,"address":[6227946,6228012],"length":1,"stats":{"Line":2}},{"line":74,"address":[6228137],"length":1,"stats":{"Line":1}},{"line":81,"address":[6555104,6555703,6555709],"length":1,"stats":{"Line":1}},{"line":82,"address":[6555134],"length":1,"stats":{"Line":1}},{"line":83,"address":[6555150],"length":1,"stats":{"Line":2}},{"line":84,"address":[6555210,6555333],"length":1,"stats":{"Line":2}},{"line":86,"address":[6555242,6555455],"length":1,"stats":{"Line":2}},{"line":87,"address":[6555614],"length":1,"stats":{"Line":2}},{"line":92,"address":[6555728],"length":1,"stats":{"Line":0}},{"line":93,"address":[6555753],"length":1,"stats":{"Line":0}},{"line":98,"address":[6556784],"length":1,"stats":{"Line":1}},{"line":99,"address":[6556818],"length":1,"stats":{"Line":1}}],"covered":20,"coverable":22},{"path":["/","home","ajit","Documents","dotenv-space-cli","src","generators","mod.rs"],"content":"//! Generator traits and module exports.\n//!\n//! This module defines the core traits for stack and service generators,\n//! and re-exports submodules for convenient access.\n\npub mod env_var;\npub mod service;\npub mod stack;\npub mod template;\n\npub use env_var::EnvVar;\n\nuse anyhow::Result;\n\n/// Trait for framework/stack-specific environment variable generation.\n///\n/// Implementors provide default environment variables for a given technology stack.\npub trait StackGenerator: Send + Sync {\n    /// Machine-readable identifier (used in CLI flags and config).\n    fn id(\u0026self) -\u003e \u0026'static str;\n\n    /// Human-readable name for UI/display purposes.\n    fn display_name(\u0026self) -\u003e \u0026'static str;\n\n    /// Default environment variables for this stack.\n    fn default_env_vars(\u0026self) -\u003e Vec\u003cEnvVar\u003e;\n\n    /// Optional: Interactive prompts for stack-specific configuration.\n    ///\n    /// Default implementation returns empty; override if custom prompts are needed.\n    fn interactive_setup(\u0026self) -\u003e Result\u003cVec\u003cEnvVar\u003e\u003e {\n        Ok(Vec::new())\n    }\n}\n\n/// Trait for third-party service environment variable generation.\n///\n/// Implementors provide environment variables required to integrate with external services.\npub trait ServiceGenerator: Send + Sync {\n    /// Machine-readable identifier.\n    fn id(\u0026self) -\u003e \u0026'static str;\n\n    /// Human-readable name for UI/display purposes.\n    fn display_name(\u0026self) -\u003e \u0026'static str;\n\n    /// Environment variables required for this service.\n    fn env_vars(\u0026self) -\u003e Vec\u003cEnvVar\u003e;\n}\n\n/// Helper to normalize service names from display format to machine ID.\n///\n/// Converts \"PostgreSQL\" → \"postgresql\", \"AWS S3\" → \"aws_s3\", etc.\n#[must_use]\npub fn normalize_service_name(name: \u0026str) -\u003e String {\n    name.to_lowercase().replace(' ', \"_\")\n}\n\n#[cfg(test)]\nmod tests {\n    use super::*;\n\n    #[test]\n    fn test_normalize_service_name() {\n        assert_eq!(normalize_service_name(\"PostgreSQL\"), \"postgresql\");\n        assert_eq!(normalize_service_name(\"AWS S3\"), \"aws_s3\");\n        assert_eq!(normalize_service_name(\"SendGrid\"), \"sendgrid\");\n    }\n}\n","traces":[{"line":31,"address":[6283888],"length":1,"stats":{"Line":0}},{"line":32,"address":[6318579],"length":1,"stats":{"Line":0}},{"line":54,"address":[6562184,6562178,6562016],"length":1,"stats":{"Line":1}},{"line":55,"address":[6562040,6562128],"length":1,"stats":{"Line":2}}],"covered":2,"coverable":4},{"path":["/","home","ajit","Documents","dotenv-space-cli","src","generators","service","aws_s3.rs"],"content":"//! Generator for AWS S3 service.\n\nuse crate::generators::{EnvVar, ServiceGenerator};\n\n/// Generator for AWS S3 service.\npub struct AwsS3Generator;\n\nimpl ServiceGenerator for AwsS3Generator {\n    fn id(\u0026self) -\u003e \u0026'static str {\n        \"aws_s3\"\n    }\n\n    fn display_name(\u0026self) -\u003e \u0026'static str {\n        \"AWS S3\"\n    }\n\n    fn env_vars(\u0026self) -\u003e Vec\u003cEnvVar\u003e {\n        vec![\n            EnvVar::new(\"AWS_ACCESS_KEY_ID\", \"AKIAIOSFODNN7EXAMPLE\")\n                .with_description(\"AWS access key ID\")\n                .required()\n                .with_category(\"AWS\"),\n            EnvVar::new(\n                \"AWS_SECRET_ACCESS_KEY\",\n                \"wJalrXUtnFEMI/K7MDENG/bPxRfiCYEXAMPLEKEY\",\n            )\n            .with_description(\"AWS secret access key\")\n            .required()\n            .with_category(\"AWS\"),\n            EnvVar::new(\"AWS_STORAGE_BUCKET_NAME\", \"your-bucket-name\")\n                .with_description(\"S3 bucket name\")\n                .with_category(\"AWS\"),\n            EnvVar::new(\"AWS_REGION\", \"us-east-1\")\n                .with_description(\"AWS region\")\n                .with_category(\"AWS\"),\n        ]\n    }\n}\n","traces":[{"line":9,"address":[5972016],"length":1,"stats":{"Line":1}},{"line":13,"address":[6237888],"length":1,"stats":{"Line":0}},{"line":17,"address":[6237952,6238921,6238927],"length":1,"stats":{"Line":0}},{"line":18,"address":[6238908,6238041,6238706,6238584,6237987,6238228,6238418],"length":1,"stats":{"Line":0}},{"line":19,"address":[6237997],"length":1,"stats":{"Line":0}},{"line":20,"address":[6238082],"length":1,"stats":{"Line":0}},{"line":21,"address":[6238121],"length":1,"stats":{"Line":0}},{"line":22,"address":[6238148],"length":1,"stats":{"Line":0}},{"line":23,"address":[6238184],"length":1,"stats":{"Line":0}},{"line":27,"address":[6238269],"length":1,"stats":{"Line":0}},{"line":28,"address":[6238308],"length":1,"stats":{"Line":0}},{"line":29,"address":[6238335],"length":1,"stats":{"Line":0}},{"line":30,"address":[6238374],"length":1,"stats":{"Line":0}},{"line":31,"address":[6238462],"length":1,"stats":{"Line":0}},{"line":32,"address":[6238501],"length":1,"stats":{"Line":0}},{"line":33,"address":[6238540],"length":1,"stats":{"Line":0}},{"line":34,"address":[6238628],"length":1,"stats":{"Line":0}},{"line":35,"address":[6238667],"length":1,"stats":{"Line":0}}],"covered":1,"coverable":18},{"path":["/","home","ajit","Documents","dotenv-space-cli","src","generators","service","mod.rs"],"content":"//! Service-specific environment variable generators.\n\npub mod aws_s3;\npub mod mongodb;\npub mod openai;\npub mod postgresql;\npub mod redis;\npub mod sendgrid;\npub mod sentry;\npub mod stripe;\npub mod twilio;\n\npub use aws_s3::AwsS3Generator;\npub use mongodb::MongoDbGenerator;\npub use openai::OpenAiGenerator;\npub use postgresql::PostgresqlGenerator;\npub use redis::RedisGenerator;\npub use sendgrid::SendGridGenerator;\npub use sentry::SentryGenerator;\npub use stripe::StripeGenerator;\npub use twilio::TwilioGenerator;\n","traces":[],"covered":0,"coverable":0},{"path":["/","home","ajit","Documents","dotenv-space-cli","src","generators","service","mongodb.rs"],"content":"//! Generator for MongoDB database service.\n\nuse crate::generators::{EnvVar, ServiceGenerator};\n\n/// Generator for MongoDB database service.\npub struct MongoDbGenerator;\n\nimpl ServiceGenerator for MongoDbGenerator {\n    fn id(\u0026self) -\u003e \u0026'static str {\n        \"mongodb\"\n    }\n\n    fn display_name(\u0026self) -\u003e \u0026'static str {\n        \"MongoDB\"\n    }\n\n    fn env_vars(\u0026self) -\u003e Vec\u003cEnvVar\u003e {\n        vec![EnvVar::new(\"MONGODB_URI\", \"mongodb://localhost:27017/mydb\")\n            .with_description(\"MongoDB connection URI\")\n            .required()\n            .with_category(\"Database\")]\n    }\n}\n","traces":[{"line":9,"address":[6260848],"length":1,"stats":{"Line":1}},{"line":13,"address":[6260816],"length":1,"stats":{"Line":0}},{"line":17,"address":[6260880,6261240,6261246],"length":1,"stats":{"Line":0}},{"line":18,"address":[6261227,6261112,6260915],"length":1,"stats":{"Line":0}},{"line":19,"address":[6261010],"length":1,"stats":{"Line":0}},{"line":20,"address":[6261049],"length":1,"stats":{"Line":0}},{"line":21,"address":[6261076],"length":1,"stats":{"Line":0}}],"covered":1,"coverable":7},{"path":["/","home","ajit","Documents","dotenv-space-cli","src","generators","service","openai.rs"],"content":"//! Generator for OpenAI API service.\n\nuse crate::generators::{EnvVar, ServiceGenerator};\n\n/// Generator for OpenAI API service.\npub struct OpenAiGenerator;\n\nimpl ServiceGenerator for OpenAiGenerator {\n    fn id(\u0026self) -\u003e \u0026'static str {\n        \"openai\"\n    }\n\n    fn display_name(\u0026self) -\u003e \u0026'static str {\n        \"OpenAI\"\n    }\n\n    fn env_vars(\u0026self) -\u003e Vec\u003cEnvVar\u003e {\n        vec![EnvVar::new(\"OPENAI_API_KEY\", \"sk-proj-YOUR_KEY_HERE\")\n            .with_description(\"OpenAI API key\")\n            .required()\n            .with_category(\"AI\")]\n    }\n}\n","traces":[{"line":9,"address":[6227280],"length":1,"stats":{"Line":1}},{"line":13,"address":[6227248],"length":1,"stats":{"Line":0}},{"line":17,"address":[6227678,6227672,6227312],"length":1,"stats":{"Line":0}},{"line":18,"address":[6227544,6227659,6227347],"length":1,"stats":{"Line":0}},{"line":19,"address":[6227442],"length":1,"stats":{"Line":0}},{"line":20,"address":[6227481],"length":1,"stats":{"Line":0}},{"line":21,"address":[6227508],"length":1,"stats":{"Line":0}}],"covered":1,"coverable":7},{"path":["/","home","ajit","Documents","dotenv-space-cli","src","generators","service","postgresql.rs"],"content":"//! Generator for PostgreSQL database service.\n\nuse crate::generators::{EnvVar, ServiceGenerator};\n\n/// Generator for PostgreSQL database service.\npub struct PostgresqlGenerator;\n\nimpl ServiceGenerator for PostgresqlGenerator {\n    fn id(\u0026self) -\u003e \u0026'static str {\n        \"postgresql\"\n    }\n\n    fn display_name(\u0026self) -\u003e \u0026'static str {\n        \"PostgreSQL\"\n    }\n\n    fn env_vars(\u0026self) -\u003e Vec\u003cEnvVar\u003e {\n        vec![EnvVar::new(\n            \"DATABASE_URL\",\n            \"postgresql://user:password@localhost:5432/dbname\",\n        )\n        .with_description(\"PostgreSQL connection string\")\n        .required()\n        .with_category(\"Database\")]\n    }\n}\n\n#[cfg(test)]\nmod tests {\n    use super::*;\n\n    #[test]\n    fn test_postgresql_generator() {\n        assert_eq!(PostgresqlGenerator.id(), \"postgresql\");\n        let vars = PostgresqlGenerator.env_vars();\n        assert_eq!(vars.len(), 1);\n        assert!(vars[0].required);\n    }\n}\n","traces":[{"line":9,"address":[6582736],"length":1,"stats":{"Line":1}},{"line":13,"address":[6582704],"length":1,"stats":{"Line":0}},{"line":17,"address":[6582768,6583134,6583128],"length":1,"stats":{"Line":1}},{"line":18,"address":[6583115,6582803,6583000],"length":1,"stats":{"Line":2}},{"line":22,"address":[6582898],"length":1,"stats":{"Line":1}},{"line":23,"address":[6582937],"length":1,"stats":{"Line":1}},{"line":24,"address":[6582964],"length":1,"stats":{"Line":1}}],"covered":6,"coverable":7},{"path":["/","home","ajit","Documents","dotenv-space-cli","src","generators","service","redis.rs"],"content":"//! Generator for Redis cache service.\n\nuse crate::generators::{EnvVar, ServiceGenerator};\n\n/// Generator for Redis cache service.\npub struct RedisGenerator;\n\nimpl ServiceGenerator for RedisGenerator {\n    fn id(\u0026self) -\u003e \u0026'static str {\n        \"redis\"\n    }\n\n    fn display_name(\u0026self) -\u003e \u0026'static str {\n        \"Redis\"\n    }\n\n    fn env_vars(\u0026self) -\u003e Vec\u003cEnvVar\u003e {\n        vec![EnvVar::new(\"REDIS_URL\", \"redis://localhost:6379/0\")\n            .with_description(\"Redis connection URL\")\n            .with_category(\"Cache\")]\n    }\n}\n\n#[cfg(test)]\nmod tests {\n    use super::*;\n\n    #[test]\n    fn test_redis_generator() {\n        assert_eq!(RedisGenerator.id(), \"redis\");\n        assert_eq!(RedisGenerator.env_vars().len(), 1);\n    }\n}\n","traces":[{"line":9,"address":[6289104],"length":1,"stats":{"Line":1}},{"line":13,"address":[6289072],"length":1,"stats":{"Line":0}},{"line":17,"address":[6289479,6289473,6289136],"length":1,"stats":{"Line":1}},{"line":18,"address":[6289341,6289460,6289171],"length":1,"stats":{"Line":2}},{"line":19,"address":[6289266],"length":1,"stats":{"Line":1}},{"line":20,"address":[6289305],"length":1,"stats":{"Line":1}}],"covered":5,"coverable":6},{"path":["/","home","ajit","Documents","dotenv-space-cli","src","generators","service","sendgrid.rs"],"content":"//! Generator for SendGrid email service.\n\nuse crate::generators::{EnvVar, ServiceGenerator};\n\n/// Generator for SendGrid email service.\npub struct SendGridGenerator;\n\nimpl ServiceGenerator for SendGridGenerator {\n    fn id(\u0026self) -\u003e \u0026'static str {\n        \"sendgrid\"\n    }\n\n    fn display_name(\u0026self) -\u003e \u0026'static str {\n        \"SendGrid\"\n    }\n\n    fn env_vars(\u0026self) -\u003e Vec\u003cEnvVar\u003e {\n        vec![EnvVar::new(\"SENDGRID_API_KEY\", \"SG.YOUR_API_KEY_HERE\")\n            .with_description(\"SendGrid API key\")\n            .required()\n            .with_category(\"Email\")]\n    }\n}\n","traces":[{"line":9,"address":[6582240],"length":1,"stats":{"Line":1}},{"line":13,"address":[6582208],"length":1,"stats":{"Line":0}},{"line":17,"address":[6582638,6582272,6582632],"length":1,"stats":{"Line":0}},{"line":18,"address":[6582619,6582307,6582504],"length":1,"stats":{"Line":0}},{"line":19,"address":[6582402],"length":1,"stats":{"Line":0}},{"line":20,"address":[6582441],"length":1,"stats":{"Line":0}},{"line":21,"address":[6582468],"length":1,"stats":{"Line":0}}],"covered":1,"coverable":7},{"path":["/","home","ajit","Documents","dotenv-space-cli","src","generators","service","sentry.rs"],"content":"//! Generator for Sentry error tracking service.\n\nuse crate::generators::{EnvVar, ServiceGenerator};\n\n/// Generator for Sentry error tracking service.\npub struct SentryGenerator;\n\nimpl ServiceGenerator for SentryGenerator {\n    fn id(\u0026self) -\u003e \u0026'static str {\n        \"sentry\"\n    }\n\n    fn display_name(\u0026self) -\u003e \u0026'static str {\n        \"Sentry\"\n    }\n\n    fn env_vars(\u0026self) -\u003e Vec\u003cEnvVar\u003e {\n        vec![\n            EnvVar::new(\"SENTRY_DSN\", \"https://YOUR_SENTRY_DSN@sentry.io/PROJECT_ID\")\n                .with_description(\"Sentry DSN for error tracking\")\n                .required()\n                .with_category(\"Monitoring\"),\n        ]\n    }\n}\n","traces":[{"line":9,"address":[6230032],"length":1,"stats":{"Line":1}},{"line":13,"address":[6230000],"length":1,"stats":{"Line":0}},{"line":17,"address":[6230064,6230424,6230430],"length":1,"stats":{"Line":0}},{"line":18,"address":[6230099,6230296,6230153,6230411],"length":1,"stats":{"Line":0}},{"line":19,"address":[6230109],"length":1,"stats":{"Line":0}},{"line":20,"address":[6230194],"length":1,"stats":{"Line":0}},{"line":21,"address":[6230233],"length":1,"stats":{"Line":0}},{"line":22,"address":[6230260],"length":1,"stats":{"Line":0}}],"covered":1,"coverable":8},{"path":["/","home","ajit","Documents","dotenv-space-cli","src","generators","service","stripe.rs"],"content":"//! Generator for Stripe payment service.\n\nuse crate::generators::{EnvVar, ServiceGenerator};\n\n/// Generator for Stripe payment service.\npub struct StripeGenerator;\n\nimpl ServiceGenerator for StripeGenerator {\n    fn id(\u0026self) -\u003e \u0026'static str {\n        \"stripe\"\n    }\n\n    fn display_name(\u0026self) -\u003e \u0026'static str {\n        \"Stripe\"\n    }\n\n    fn env_vars(\u0026self) -\u003e Vec\u003cEnvVar\u003e {\n        vec![\n            EnvVar::new(\"STRIPE_SECRET_KEY\", \"sk_test_YOUR_KEY_HERE\")\n                .with_description(\"Stripe secret API key\")\n                .required()\n                .with_category(\"Payments\"),\n            EnvVar::new(\"STRIPE_PUBLISHABLE_KEY\", \"pk_test_YOUR_KEY_HERE\")\n                .with_description(\"Stripe publishable API key\")\n                .required()\n                .with_category(\"Payments\"),\n            EnvVar::new(\"STRIPE_WEBHOOK_SECRET\", \"whsec_YOUR_WEBHOOK_SECRET\")\n                .with_description(\"Stripe webhook signing secret\")\n                .with_category(\"Payments\"),\n        ]\n    }\n}\n","traces":[{"line":9,"address":[6264048],"length":1,"stats":{"Line":1}},{"line":13,"address":[6543056],"length":1,"stats":{"Line":0}},{"line":17,"address":[6543120,6543906,6543900],"length":1,"stats":{"Line":0}},{"line":18,"address":[6543887,6543209,6543396,6543155,6543586,6543708],"length":1,"stats":{"Line":0}},{"line":19,"address":[6543165],"length":1,"stats":{"Line":0}},{"line":20,"address":[6543250],"length":1,"stats":{"Line":0}},{"line":21,"address":[6543289],"length":1,"stats":{"Line":0}},{"line":22,"address":[6543316],"length":1,"stats":{"Line":0}},{"line":23,"address":[6543352],"length":1,"stats":{"Line":0}},{"line":24,"address":[6543437],"length":1,"stats":{"Line":0}},{"line":25,"address":[6543476],"length":1,"stats":{"Line":0}},{"line":26,"address":[6543503],"length":1,"stats":{"Line":0}},{"line":27,"address":[6543542],"length":1,"stats":{"Line":0}},{"line":28,"address":[6543630],"length":1,"stats":{"Line":0}},{"line":29,"address":[6543669],"length":1,"stats":{"Line":0}}],"covered":1,"coverable":15},{"path":["/","home","ajit","Documents","dotenv-space-cli","src","generators","service","twilio.rs"],"content":"//! Generator for Twilio SMS/VoIP service.\n\nuse crate::generators::{EnvVar, ServiceGenerator};\n\n/// Generator for Twilio SMS/VoIP service.\npub struct TwilioGenerator;\n\nimpl ServiceGenerator for TwilioGenerator {\n    fn id(\u0026self) -\u003e \u0026'static str {\n        \"twilio\"\n    }\n\n    fn display_name(\u0026self) -\u003e \u0026'static str {\n        \"Twilio\"\n    }\n\n    fn env_vars(\u0026self) -\u003e Vec\u003cEnvVar\u003e {\n        vec![\n            EnvVar::new(\"TWILIO_ACCOUNT_SID\", \"ACxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx\")\n                .with_description(\"Twilio account SID\")\n                .required()\n                .with_category(\"Communications\"),\n            EnvVar::new(\"TWILIO_AUTH_TOKEN\", \"your_auth_token_here\")\n                .with_description(\"Twilio auth token\")\n                .required()\n                .with_category(\"Communications\"),\n            EnvVar::new(\"TWILIO_PHONE_NUMBER\", \"+1234567890\")\n                .with_description(\"Twilio phone number\")\n                .with_category(\"Communications\"),\n        ]\n    }\n}\n","traces":[{"line":9,"address":[6519328],"length":1,"stats":{"Line":1}},{"line":13,"address":[6238944],"length":1,"stats":{"Line":0}},{"line":17,"address":[6239008,6239794,6239788],"length":1,"stats":{"Line":0}},{"line":18,"address":[6239284,6239474,6239043,6239097,6239775,6239596],"length":1,"stats":{"Line":0}},{"line":19,"address":[6239053],"length":1,"stats":{"Line":0}},{"line":20,"address":[6239138],"length":1,"stats":{"Line":0}},{"line":21,"address":[6239177],"length":1,"stats":{"Line":0}},{"line":22,"address":[6239204],"length":1,"stats":{"Line":0}},{"line":23,"address":[6239240],"length":1,"stats":{"Line":0}},{"line":24,"address":[6239325],"length":1,"stats":{"Line":0}},{"line":25,"address":[6239364],"length":1,"stats":{"Line":0}},{"line":26,"address":[6239391],"length":1,"stats":{"Line":0}},{"line":27,"address":[6239430],"length":1,"stats":{"Line":0}},{"line":28,"address":[6239518],"length":1,"stats":{"Line":0}},{"line":29,"address":[6239557],"length":1,"stats":{"Line":0}}],"covered":1,"coverable":15},{"path":["/","home","ajit","Documents","dotenv-space-cli","src","generators","stack","go.rs"],"content":"//! Generator for Go frameworks (Gin/Fiber).\n\nuse crate::generators::{EnvVar, StackGenerator};\n\n/// Generator for Go frameworks (Gin/Fiber).\npub struct GoGenerator;\n\nimpl StackGenerator for GoGenerator {\n    fn id(\u0026self) -\u003e \u0026'static str {\n        \"go\"\n    }\n\n    fn display_name(\u0026self) -\u003e \u0026'static str {\n        \"Go (Gin/Fiber)\"\n    }\n\n    fn default_env_vars(\u0026self) -\u003e Vec\u003cEnvVar\u003e {\n        vec![\n            EnvVar::new(\"APP_ENV\", \"development\")\n                .with_description(\"Application environment\")\n                .with_category(\"Application\"),\n            EnvVar::new(\"PORT\", \"8080\")\n                .with_description(\"HTTP server port\")\n                .with_category(\"Server\"),\n            EnvVar::new(\"ADDR\", \"0.0.0.0\")\n                .with_description(\"HTTP server bind address\")\n                .with_category(\"Server\"),\n        ]\n    }\n}\n\n#[cfg(test)]\nmod tests {\n    use super::*;\n\n    #[test]\n    fn test_go_generator() {\n        assert_eq!(GoGenerator.id(), \"go\");\n        assert_eq!(GoGenerator.default_env_vars().len(), 3);\n    }\n}\n","traces":[{"line":9,"address":[5494384],"length":1,"stats":{"Line":1}},{"line":13,"address":[6541648],"length":1,"stats":{"Line":0}},{"line":17,"address":[6542410,6542404,6541680],"length":1,"stats":{"Line":1}},{"line":18,"address":[6542090,6542391,6541715,6542212,6541769,6541927],"length":1,"stats":{"Line":2}},{"line":19,"address":[6541725],"length":1,"stats":{"Line":1}},{"line":20,"address":[6541810],"length":1,"stats":{"Line":1}},{"line":21,"address":[6541849],"length":1,"stats":{"Line":1}},{"line":22,"address":[6541885],"length":1,"stats":{"Line":1}},{"line":23,"address":[6541968],"length":1,"stats":{"Line":1}},{"line":24,"address":[6542007],"length":1,"stats":{"Line":1}},{"line":25,"address":[6542046],"length":1,"stats":{"Line":1}},{"line":26,"address":[6542134],"length":1,"stats":{"Line":1}},{"line":27,"address":[6542173],"length":1,"stats":{"Line":1}}],"covered":12,"coverable":13},{"path":["/","home","ajit","Documents","dotenv-space-cli","src","generators","stack","mod.rs"],"content":"//! Stack-specific environment variable generators.\n\npub mod go;\npub mod nodejs;\npub mod other;\npub mod php;\npub mod python;\npub mod ruby;\npub mod rust;\n\npub use go::GoGenerator;\npub use nodejs::NodeJsGenerator;\npub use other::OtherGenerator;\npub use php::PhpGenerator;\npub use python::PythonGenerator;\npub use ruby::RubyGenerator;\npub use rust::RustGenerator;\n","traces":[],"covered":0,"coverable":0},{"path":["/","home","ajit","Documents","dotenv-space-cli","src","generators","stack","nodejs.rs"],"content":"//! Generator for Node.js frameworks (Next.js/Express).\n\nuse crate::generators::{EnvVar, StackGenerator};\n\n/// Generator for Node.js frameworks (Next.js/Express).\npub struct NodeJsGenerator;\n\nimpl StackGenerator for NodeJsGenerator {\n    fn id(\u0026self) -\u003e \u0026'static str {\n        \"nodejs\"\n    }\n\n    fn display_name(\u0026self) -\u003e \u0026'static str {\n        \"Node.js (Next.js/Express)\"\n    }\n\n    fn default_env_vars(\u0026self) -\u003e Vec\u003cEnvVar\u003e {\n        vec![\n            EnvVar::new(\"NODE_ENV\", \"development\")\n                .with_description(\"Application environment (development/production)\")\n                .with_category(\"Application\"),\n            EnvVar::new(\"PORT\", \"3000\")\n                .with_description(\"HTTP server port\")\n                .with_category(\"Server\"),\n            EnvVar::new(\"HOST\", \"0.0.0.0\")\n                .with_description(\"HTTP server bind address\")\n                .with_category(\"Server\"),\n        ]\n    }\n}\n\n#[cfg(test)]\nmod tests {\n    use super::*;\n\n    #[test]\n    fn test_nodejs_generator() {\n        assert_eq!(NodeJsGenerator.id(), \"nodejs\");\n        let vars = NodeJsGenerator.default_env_vars();\n        assert_eq!(vars.len(), 3);\n    }\n}\n","traces":[{"line":9,"address":[5376080],"length":1,"stats":{"Line":1}},{"line":13,"address":[6236464],"length":1,"stats":{"Line":0}},{"line":17,"address":[6237225,6237219,6236496],"length":1,"stats":{"Line":1}},{"line":18,"address":[6237206,6236536,6236911,6236590,6237033,6236748],"length":1,"stats":{"Line":2}},{"line":19,"address":[6236551],"length":1,"stats":{"Line":1}},{"line":20,"address":[6236631],"length":1,"stats":{"Line":1}},{"line":21,"address":[6236670],"length":1,"stats":{"Line":1}},{"line":22,"address":[6236706],"length":1,"stats":{"Line":1}},{"line":23,"address":[6236789],"length":1,"stats":{"Line":1}},{"line":24,"address":[6236828],"length":1,"stats":{"Line":1}},{"line":25,"address":[6236867],"length":1,"stats":{"Line":1}},{"line":26,"address":[6236955],"length":1,"stats":{"Line":1}},{"line":27,"address":[6236994],"length":1,"stats":{"Line":1}}],"covered":12,"coverable":13},{"path":["/","home","ajit","Documents","dotenv-space-cli","src","generators","stack","other.rs"],"content":"//! Generic generator for unspecified/other stacks.\n\nuse crate::generators::{EnvVar, StackGenerator};\n\n/// Generic generator for unspecified or custom stacks.\npub struct OtherGenerator;\n\nimpl StackGenerator for OtherGenerator {\n    fn id(\u0026self) -\u003e \u0026'static str {\n        \"other\"\n    }\n\n    fn display_name(\u0026self) -\u003e \u0026'static str {\n        \"Other / Custom\"\n    }\n\n    fn default_env_vars(\u0026self) -\u003e Vec\u003cEnvVar\u003e {\n        vec![\n            EnvVar::new(\"APP_ENV\", \"development\")\n                .with_description(\"Application environment\")\n                .with_category(\"Application\"),\n            EnvVar::new(\"APP_PORT\", \"8080\")\n                .with_description(\"Application port\")\n                .with_category(\"Server\"),\n        ]\n    }\n}\n\n#[cfg(test)]\nmod tests {\n    use super::*;\n\n    #[test]\n    fn test_other_generator() {\n        assert_eq!(OtherGenerator.id(), \"other\");\n        assert_eq!(OtherGenerator.default_env_vars().len(), 2);\n    }\n}\n","traces":[{"line":9,"address":[6237856],"length":1,"stats":{"Line":1}},{"line":13,"address":[6237280],"length":1,"stats":{"Line":0}},{"line":17,"address":[6237834,6237312,6237840],"length":1,"stats":{"Line":1}},{"line":18,"address":[6237680,6237561,6237401,6237821,6237347],"length":1,"stats":{"Line":2}},{"line":19,"address":[6237357],"length":1,"stats":{"Line":1}},{"line":20,"address":[6237442],"length":1,"stats":{"Line":1}},{"line":21,"address":[6237481],"length":1,"stats":{"Line":1}},{"line":22,"address":[6237517],"length":1,"stats":{"Line":1}},{"line":23,"address":[6237602],"length":1,"stats":{"Line":1}},{"line":24,"address":[6237641],"length":1,"stats":{"Line":1}}],"covered":9,"coverable":10},{"path":["/","home","ajit","Documents","dotenv-space-cli","src","generators","stack","php.rs"],"content":"//! Generator for PHP frameworks (Laravel).\n\nuse crate::generators::{EnvVar, StackGenerator};\n\n/// Generator for PHP frameworks (Laravel).\npub struct PhpGenerator;\n\nimpl StackGenerator for PhpGenerator {\n    fn id(\u0026self) -\u003e \u0026'static str {\n        \"php\"\n    }\n\n    fn display_name(\u0026self) -\u003e \u0026'static str {\n        \"PHP (Laravel)\"\n    }\n\n    fn default_env_vars(\u0026self) -\u003e Vec\u003cEnvVar\u003e {\n        vec![\n            EnvVar::new(\"APP_NAME\", \"Laravel\")\n                .with_description(\"Application name\")\n                .with_category(\"Application\"),\n            EnvVar::new(\"APP_ENV\", \"local\")\n                .with_description(\"Application environment\")\n                .with_category(\"Application\"),\n            EnvVar::new(\"APP_KEY\", \"base64:generate-with-php-artisan-key-generate\")\n                .with_description(\"Laravel encryption key\")\n                .required()\n                .with_category(\"Security\"),\n            EnvVar::new(\"APP_DEBUG\", \"true\")\n                .with_description(\"Enable debug mode\")\n                .with_category(\"Application\"),\n            EnvVar::new(\"APP_URL\", \"http://localhost\")\n                .with_description(\"Application base URL\")\n                .with_category(\"Application\"),\n        ]\n    }\n}\n\n#[cfg(test)]\nmod tests {\n    use super::*;\n\n    #[test]\n    fn test_php_generator() {\n        assert_eq!(PhpGenerator.id(), \"php\");\n        let vars = PhpGenerator.default_env_vars();\n        assert_eq!(vars.len(), 5);\n        let app_key = vars.iter().find(|v| v.key == \"APP_KEY\").unwrap();\n        assert!(app_key.required);\n    }\n}\n","traces":[{"line":9,"address":[6749152],"length":1,"stats":{"Line":1}},{"line":13,"address":[6747936],"length":1,"stats":{"Line":0}},{"line":17,"address":[6749124,6749118,6747968],"length":1,"stats":{"Line":1}},{"line":18,"address":[6749105,6748008,6748866,6748222,6748385,6748578,6748062,6748744],"length":1,"stats":{"Line":2}},{"line":19,"address":[6748023],"length":1,"stats":{"Line":1}},{"line":20,"address":[6748103],"length":1,"stats":{"Line":1}},{"line":21,"address":[6748142],"length":1,"stats":{"Line":1}},{"line":22,"address":[6748178],"length":1,"stats":{"Line":1}},{"line":23,"address":[6748263],"length":1,"stats":{"Line":1}},{"line":24,"address":[6748302],"length":1,"stats":{"Line":1}},{"line":25,"address":[6748341],"length":1,"stats":{"Line":1}},{"line":26,"address":[6748429],"length":1,"stats":{"Line":1}},{"line":27,"address":[6748468],"length":1,"stats":{"Line":1}},{"line":28,"address":[6748495],"length":1,"stats":{"Line":1}},{"line":29,"address":[6748534],"length":1,"stats":{"Line":1}},{"line":30,"address":[6748622],"length":1,"stats":{"Line":1}},{"line":31,"address":[6748661],"length":1,"stats":{"Line":1}},{"line":32,"address":[6748700],"length":1,"stats":{"Line":1}},{"line":33,"address":[6748788],"length":1,"stats":{"Line":1}},{"line":34,"address":[6748827],"length":1,"stats":{"Line":1}}],"covered":19,"coverable":20},{"path":["/","home","ajit","Documents","dotenv-space-cli","src","generators","stack","python.rs"],"content":"//! Generator for Python frameworks (Django/FastAPI).\n\nuse crate::generators::{EnvVar, StackGenerator};\n\n/// Generator for Python frameworks (Django/FastAPI).\npub struct PythonGenerator;\n\nimpl StackGenerator for PythonGenerator {\n    fn id(\u0026self) -\u003e \u0026'static str {\n        \"python\"\n    }\n\n    fn display_name(\u0026self) -\u003e \u0026'static str {\n        \"Python (Django/FastAPI)\"\n    }\n\n    fn default_env_vars(\u0026self) -\u003e Vec\u003cEnvVar\u003e {\n        vec![\n            EnvVar::new(\"SECRET_KEY\", \"generate-with-openssl-rand-hex-32\")\n                .with_description(\"Django/FastAPI secret key for cryptographic signing\")\n                .required()\n                .with_category(\"Security\"),\n            EnvVar::new(\"DEBUG\", \"True\")\n                .with_description(\"Enable debug mode (disable in production)\")\n                .with_category(\"Application\"),\n            EnvVar::new(\"ALLOWED_HOSTS\", \"localhost,127.0.0.1\")\n                .with_description(\"Comma-separated list of allowed host headers\")\n                .with_category(\"Security\"),\n        ]\n    }\n}\n\n#[cfg(test)]\nmod tests {\n    use super::*;\n\n    #[test]\n    fn test_python_generator_id() {\n        assert_eq!(PythonGenerator.id(), \"python\");\n    }\n\n    #[test]\n    fn test_python_default_vars_count() {\n        let vars = PythonGenerator.default_env_vars();\n        assert_eq!(vars.len(), 3);\n    }\n\n    #[test]\n    fn test_secret_key_required() {\n        let vars = PythonGenerator.default_env_vars();\n        let secret_key = vars.iter().find(|v| v.key == \"SECRET_KEY\").unwrap();\n        assert!(secret_key.required);\n    }\n}\n","traces":[{"line":9,"address":[5468400],"length":1,"stats":{"Line":1}},{"line":13,"address":[6235312],"length":1,"stats":{"Line":1}},{"line":17,"address":[6236091,6235344,6236097],"length":1,"stats":{"Line":1}},{"line":18,"address":[6235433,6235620,6235783,6235379,6235905,6236078],"length":1,"stats":{"Line":2}},{"line":19,"address":[6235389],"length":1,"stats":{"Line":1}},{"line":20,"address":[6235474],"length":1,"stats":{"Line":1}},{"line":21,"address":[6235513],"length":1,"stats":{"Line":1}},{"line":22,"address":[6235540],"length":1,"stats":{"Line":1}},{"line":23,"address":[6235576],"length":1,"stats":{"Line":1}},{"line":24,"address":[6235661],"length":1,"stats":{"Line":1}},{"line":25,"address":[6235700],"length":1,"stats":{"Line":1}},{"line":26,"address":[6235739],"length":1,"stats":{"Line":1}},{"line":27,"address":[6235827],"length":1,"stats":{"Line":1}},{"line":28,"address":[6235866],"length":1,"stats":{"Line":1}}],"covered":14,"coverable":14},{"path":["/","home","ajit","Documents","dotenv-space-cli","src","generators","stack","ruby.rs"],"content":"use crate::generators::{EnvVar, StackGenerator};\n\npub struct RubyGenerator;\n\nimpl StackGenerator for RubyGenerator {\n    fn id(\u0026self) -\u003e \u0026'static str {\n        \"ruby\"\n    }\n    fn display_name(\u0026self) -\u003e \u0026'static str {\n        \"Ruby on Rails\"\n    }\n\n    fn default_env_vars(\u0026self) -\u003e Vec\u003cEnvVar\u003e {\n        vec![\n            EnvVar::new(\"RAILS_ENV\", \"development\").with_category(\"Application\"),\n            EnvVar::new(\"SECRET_KEY_BASE\", \"generate-with-rails-secret\")\n                .required()\n                .with_category(\"Security\"),\n        ]\n    }\n}\n","traces":[{"line":6,"address":[6544448],"length":1,"stats":{"Line":1}},{"line":9,"address":[6543920],"length":1,"stats":{"Line":0}},{"line":13,"address":[6543952,6544428,6544434],"length":1,"stats":{"Line":0}},{"line":14,"address":[6544269,6544041,6544162,6543987,6544415],"length":1,"stats":{"Line":0}},{"line":15,"address":[6544082,6543997],"length":1,"stats":{"Line":0}},{"line":16,"address":[6544118],"length":1,"stats":{"Line":0}},{"line":17,"address":[6544203],"length":1,"stats":{"Line":0}},{"line":18,"address":[6544230],"length":1,"stats":{"Line":0}}],"covered":1,"coverable":8},{"path":["/","home","ajit","Documents","dotenv-space-cli","src","generators","stack","rust.rs"],"content":"//! Generator for Rust frameworks (Axum/Actix).\n\nuse crate::generators::{EnvVar, StackGenerator};\n\n/// Generator for Rust frameworks (Axum/Actix).\npub struct RustGenerator;\n\nimpl StackGenerator for RustGenerator {\n    fn id(\u0026self) -\u003e \u0026'static str {\n        \"rust\"\n    }\n\n    fn display_name(\u0026self) -\u003e \u0026'static str {\n        \"Rust (Axum/Actix)\"\n    }\n\n    fn default_env_vars(\u0026self) -\u003e Vec\u003cEnvVar\u003e {\n        vec![\n            EnvVar::new(\"APP__ENVIRONMENT\", \"development\")\n                .with_description(\"Application environment (development/staging/production)\")\n                .with_category(\"Application\"),\n            EnvVar::new(\"APP__PORT\", \"8080\")\n                .with_description(\"HTTP server port\")\n                .with_category(\"Server\"),\n            EnvVar::new(\"APP__ADDRESS\", \"0.0.0.0\")\n                .with_description(\"HTTP server bind address\")\n                .with_category(\"Server\"),\n        ]\n    }\n}\n\n#[cfg(test)]\nmod tests {\n    use super::*;\n\n    #[test]\n    fn test_rust_generator() {\n        assert_eq!(RustGenerator.id(), \"rust\");\n        let vars = RustGenerator.default_env_vars();\n        assert_eq!(vars.len(), 3);\n    }\n}\n","traces":[{"line":9,"address":[6325264],"length":1,"stats":{"Line":1}},{"line":13,"address":[6643712],"length":1,"stats":{"Line":0}},{"line":17,"address":[6643744,6644470,6644476],"length":1,"stats":{"Line":1}},{"line":18,"address":[6644457,6643833,6644278,6643779,6643993,6644156],"length":1,"stats":{"Line":2}},{"line":19,"address":[6643789],"length":1,"stats":{"Line":1}},{"line":20,"address":[6643874],"length":1,"stats":{"Line":1}},{"line":21,"address":[6643913],"length":1,"stats":{"Line":1}},{"line":22,"address":[6643949],"length":1,"stats":{"Line":1}},{"line":23,"address":[6644034],"length":1,"stats":{"Line":1}},{"line":24,"address":[6644073],"length":1,"stats":{"Line":1}},{"line":25,"address":[6644112],"length":1,"stats":{"Line":1}},{"line":26,"address":[6644200],"length":1,"stats":{"Line":1}},{"line":27,"address":[6644239],"length":1,"stats":{"Line":1}}],"covered":12,"coverable":13},{"path":["/","home","ajit","Documents","dotenv-space-cli","src","generators","template.rs"],"content":"//! Template builder for assembling `.env.example` content.\n//!\n//! This module provides a fluent builder API to combine stack and service\n//! generators into a complete environment variable template.\n\nuse anyhow::Result;\nuse std::collections::HashMap;\n\nuse crate::generators::{EnvVar, ServiceGenerator, StackGenerator};\n\n/// Builder for assembling environment variable templates.\n///\n/// # Example\n///\n/// ```no_run\n/// use evnx::config::registry;\n/// use evnx::generators::template::EnvTemplateBuilder;\n///\n/// let reg = registry();\n/// let stack = reg.get_stack(\"python\").unwrap();\n/// let services = vec![reg.get_service(\"postgresql\").unwrap()];\n///\n/// let content = EnvTemplateBuilder::new()\n///     .with_stack(stack)\n///     .with_services(services)\n///     .build()\n///     .unwrap();\n/// ```\npub struct EnvTemplateBuilder\u003c'a\u003e {\n    stack: Option\u003c\u0026'a dyn StackGenerator\u003e,\n    services: Vec\u003c\u0026'a dyn ServiceGenerator\u003e,\n    include_footer: bool,\n}\n\nimpl\u003c'a\u003e EnvTemplateBuilder\u003c'a\u003e {\n    /// Create a new empty builder.\n    #[must_use]\n    pub fn new() -\u003e Self {\n        Self {\n            stack: None,\n            services: Vec::new(),\n            include_footer: true,\n        }\n    }\n\n    /// Set the primary stack generator.\n    #[must_use]\n    pub fn with_stack(mut self, stack: \u0026'a dyn StackGenerator) -\u003e Self {\n        self.stack = Some(stack);\n        self\n    }\n\n    /// Add service generators.\n    #[must_use]\n    pub fn with_services(mut self, services: Vec\u003c\u0026'a dyn ServiceGenerator\u003e) -\u003e Self {\n        self.services = services;\n        self\n    }\n\n    /// Control whether to include the generation footer comment.\n    #[must_use]\n    pub fn include_footer(mut self, include: bool) -\u003e Self {\n        self.include_footer = include;\n        self\n    }\n\n    /// Generate the complete `.env.example` content.\n    ///\n    /// Variables are grouped by category, with stack vars first, then services.\n    pub fn build(self) -\u003e Result\u003cString\u003e {\n        let mut content = String::new();\n        let mut vars_by_category: HashMap\u003cOption\u003cString\u003e, Vec\u003cEnvVar\u003e\u003e = HashMap::new();\n\n        // Collect stack variables\n        if let Some(stack) = self.stack {\n            for var in stack.default_env_vars() {\n                vars_by_category\n                    .entry(var.category.clone())\n                    .or_default()\n                    .push(var);\n            }\n        }\n\n        // Collect service variables\n        for service in \u0026self.services {\n            for var in service.env_vars() {\n                vars_by_category\n                    .entry(var.category.clone())\n                    .or_default()\n                    .push(var);\n            }\n        }\n\n        // Sort categories: None first, then alphabetically\n        let mut categories: Vec\u003c_\u003e = vars_by_category.keys().collect();\n        // categories.sort_by(|a, b| a.cmp(b));\n        categories.sort();\n\n        for category in categories {\n            // Print category header if present\n            if let Some(cat_name) = category {\n                content.push_str(\u0026format!(\"\\n# {}\\n\", cat_name));\n            }\n\n            // Print variables in this category\n            if let Some(vars) = vars_by_category.get(category) {\n                for var in vars {\n                    content.push_str(\u0026var.to_example_line());\n                    content.push('\\n');\n                }\n            }\n            content.push('\\n');\n        }\n\n        // Add generation footer\n        if self.include_footer {\n            content.push_str(\u0026format!(\n                \"# Generated by dotenv-space v{} on {}\\n\",\n                env!(\"CARGO_PKG_VERSION\"),\n                chrono::Local::now().format(\"%Y-%m-%d\")\n            ));\n        }\n\n        Ok(content)\n    }\n}\n\nimpl Default for EnvTemplateBuilder\u003c'_\u003e {\n    fn default() -\u003e Self {\n        Self::new()\n    }\n}\n\n#[cfg(test)]\nmod tests {\n    use super::*;\n    use crate::generators::{ServiceGenerator, StackGenerator};\n\n    struct TestStack;\n    impl StackGenerator for TestStack {\n        fn id(\u0026self) -\u003e \u0026'static str {\n            \"test\"\n        }\n        fn display_name(\u0026self) -\u003e \u0026'static str {\n            \"Test\"\n        }\n        fn default_env_vars(\u0026self) -\u003e Vec\u003cEnvVar\u003e {\n            vec![EnvVar::new(\"APP_ENV\", \"development\").with_category(\"Application\")]\n        }\n    }\n\n    struct TestService;\n    impl ServiceGenerator for TestService {\n        fn id(\u0026self) -\u003e \u0026'static str {\n            \"test_svc\"\n        }\n        fn display_name(\u0026self) -\u003e \u0026'static str {\n            \"Test Service\"\n        }\n        fn env_vars(\u0026self) -\u003e Vec\u003cEnvVar\u003e {\n            vec![EnvVar::new(\"API_KEY\", \"xxx\").with_category(\"Auth\")]\n        }\n    }\n\n    #[test]\n    fn test_builder_basic() {\n        let content = EnvTemplateBuilder::new()\n            .with_stack(\u0026TestStack)\n            .with_services(vec![\u0026TestService])\n            .include_footer(false)\n            .build()\n            .unwrap();\n\n        assert!(content.contains(\"APP_ENV=development\"));\n        assert!(content.contains(\"API_KEY=xxx\"));\n        assert!(content.contains(\"# Application\"));\n        assert!(content.contains(\"# Auth\"));\n    }\n\n    #[test]\n    fn test_builder_no_footer() {\n        let content = EnvTemplateBuilder::new()\n            .include_footer(false)\n            .build()\n            .unwrap();\n        assert!(!content.contains(\"Generated by dotenv-space\"));\n    }\n}\n","traces":[{"line":38,"address":[6072640],"length":1,"stats":{"Line":1}},{"line":41,"address":[6072653],"length":1,"stats":{"Line":1}},{"line":48,"address":[],"length":0,"stats":{"Line":1}},{"line":49,"address":[],"length":0,"stats":{"Line":1}},{"line":50,"address":[],"length":0,"stats":{"Line":1}},{"line":55,"address":[],"length":0,"stats":{"Line":1}},{"line":56,"address":[],"length":0,"stats":{"Line":2}},{"line":57,"address":[6072547],"length":1,"stats":{"Line":1}},{"line":62,"address":[6072592],"length":1,"stats":{"Line":1}},{"line":63,"address":[5978327],"length":1,"stats":{"Line":1}},{"line":64,"address":[6072620],"length":1,"stats":{"Line":1}},{"line":70,"address":[6072720,6073729,6076252],"length":1,"stats":{"Line":1}},{"line":71,"address":[],"length":0,"stats":{"Line":1}},{"line":72,"address":[5978550],"length":1,"stats":{"Line":1}},{"line":75,"address":[],"length":0,"stats":{"Line":1}},{"line":76,"address":[5978784,5979370,5978678,5978918],"length":1,"stats":{"Line":4}},{"line":77,"address":[],"length":0,"stats":{"Line":0}},{"line":78,"address":[],"length":0,"stats":{"Line":2}},{"line":80,"address":[],"length":0,"stats":{"Line":1}},{"line":85,"address":[5978702,5979415],"length":1,"stats":{"Line":2}},{"line":86,"address":[5981762,5979517,5981182,5981316],"length":1,"stats":{"Line":4}},{"line":87,"address":[],"length":0,"stats":{"Line":0}},{"line":88,"address":[6075992,6075902],"length":1,"stats":{"Line":2}},{"line":90,"address":[],"length":0,"stats":{"Line":1}},{"line":95,"address":[5979559],"length":1,"stats":{"Line":1}},{"line":97,"address":[],"length":0,"stats":{"Line":2}},{"line":99,"address":[],"length":0,"stats":{"Line":2}},{"line":101,"address":[6074300,6074890],"length":1,"stats":{"Line":2}},{"line":102,"address":[6074906,6074965],"length":1,"stats":{"Line":2}},{"line":106,"address":[],"length":0,"stats":{"Line":2}},{"line":107,"address":[],"length":0,"stats":{"Line":2}},{"line":108,"address":[],"length":0,"stats":{"Line":1}},{"line":109,"address":[5981131],"length":1,"stats":{"Line":1}},{"line":112,"address":[5981143,5980874],"length":1,"stats":{"Line":2}},{"line":116,"address":[],"length":0,"stats":{"Line":1}},{"line":117,"address":[6074541,6074818],"length":1,"stats":{"Line":0}},{"line":118,"address":[],"length":0,"stats":{"Line":0}},{"line":119,"address":[],"length":0,"stats":{"Line":0}},{"line":120,"address":[],"length":0,"stats":{"Line":0}},{"line":124,"address":[],"length":0,"stats":{"Line":1}},{"line":129,"address":[6076272],"length":1,"stats":{"Line":0}},{"line":130,"address":[6076280],"length":1,"stats":{"Line":0}}],"covered":34,"coverable":42},{"path":["/","home","ajit","Documents","dotenv-space-cli","src","lib.rs"],"content":"//! evnx (formely dotenv-space) CLI - Manage .env files with validation, secret scanning, and format conversion.\npub mod cli;\npub mod commands;\npub mod config;\npub mod core;\npub mod formats;\npub mod generators;\npub mod templates;\npub mod utils;\n","traces":[],"covered":0,"coverable":0},{"path":["/","home","ajit","Documents","dotenv-space-cli","src","main.rs"],"content":"use anyhow::Result;\nuse clap::Parser;\nuse evnx::cli::{Cli, Commands};\nuse evnx::commands;\n\nfn main() -\u003e Result\u003c()\u003e {\n    let cli = Cli::parse();\n\n    // Set up colored output\n    if cli.no_color {\n        colored::control::set_override(false);\n    }\n\n    // Execute command\n    match cli.command {\n        Commands::Init {\n            stack,\n            services,\n            path,\n            yes,\n        } =\u003e commands::init::run(stack, services, path, yes, cli.verbose),\n        Commands::Validate {\n            env,\n            example,\n            strict,\n            fix,\n            format,\n            exit_zero,\n        } =\u003e commands::validate::run(env, example, strict, fix, format, exit_zero, cli.verbose),\n        Commands::Scan {\n            path,\n            exclude,\n            pattern,\n            ignore_placeholders,\n            format,\n            exit_zero,\n        } =\u003e commands::scan::run(\n            path,\n            exclude,\n            pattern,\n            ignore_placeholders,\n            format,\n            exit_zero,\n            cli.verbose,\n        ),\n        Commands::Diff {\n            env,\n            example,\n            show_values,\n            format,\n            reverse,\n        } =\u003e commands::diff::run(env, example, show_values, format, reverse, cli.verbose),\n        Commands::Convert {\n            env,\n            to,\n            output,\n            include,\n            exclude,\n            base64,\n            prefix,\n            transform,\n        } =\u003e commands::convert::run(\n            env,\n            to,\n            output,\n            include,\n            exclude,\n            base64,\n            prefix,\n            transform,\n            cli.verbose,\n        ),\n        #[cfg(feature = \"migrate\")]\n        Commands::Migrate {\n            from,\n            to,\n            source_file,\n            repo,\n            secret_name,\n            dry_run,\n            skip_existing,\n            overwrite,\n            github_token,\n            aws_profile,\n        } =\u003e commands::migrate::run(\n            from,\n            to,\n            source_file,\n            repo,\n            secret_name,\n            dry_run,\n            skip_existing,\n            overwrite,\n            github_token,\n            aws_profile,\n            cli.verbose,\n        ),\n        Commands::Sync {\n            direction,\n            placeholder,\n        } =\u003e commands::sync::run(direction, placeholder, cli.verbose),\n        Commands::Template { input, output, env } =\u003e {\n            commands::template::run(input, output, env, cli.verbose)\n        }\n        #[cfg(feature = \"backup\")]\n        Commands::Backup { env, output } =\u003e commands::backup::run(env, output, cli.verbose),\n        #[cfg(feature = \"backup\")]\n        Commands::Restore { backup, output } =\u003e commands::restore::run(backup, output, cli.verbose),\n        Commands::Doctor { path } =\u003e commands::doctor::run(path, cli.verbose),\n        Commands::Completions { shell } =\u003e commands::completions::run(shell),\n    }\n}\n","traces":[{"line":6,"address":[5351402,5348560,5351439],"length":1,"stats":{"Line":0}},{"line":7,"address":[5348567],"length":1,"stats":{"Line":0}},{"line":10,"address":[5348994],"length":1,"stats":{"Line":0}},{"line":11,"address":[5349063,5349167],"length":1,"stats":{"Line":0}},{"line":15,"address":[5349004,5349172],"length":1,"stats":{"Line":0}},{"line":16,"address":[5349174],"length":1,"stats":{"Line":0}},{"line":22,"address":[5349363],"length":1,"stats":{"Line":0}},{"line":30,"address":[5349592],"length":1,"stats":{"Line":0}},{"line":44,"address":[5349788],"length":1,"stats":{"Line":0}},{"line":46,"address":[5349892],"length":1,"stats":{"Line":0}},{"line":53,"address":[5350177],"length":1,"stats":{"Line":0}},{"line":71,"address":[5350356],"length":1,"stats":{"Line":0}},{"line":98,"address":[5350452],"length":1,"stats":{"Line":0}},{"line":102,"address":[5350545],"length":1,"stats":{"Line":0}},{"line":103,"address":[5350665,5351169],"length":1,"stats":{"Line":0}},{"line":109,"address":[5350716,5351184],"length":1,"stats":{"Line":0}},{"line":110,"address":[5351199,5350791],"length":1,"stats":{"Line":0}}],"covered":0,"coverable":17},{"path":["/","home","ajit","Documents","dotenv-space-cli","src","templates","mod.rs"],"content":"// Template modules will go here\n// pub mod python;\n// pub mod nodejs;\n// pub mod rust;\n","traces":[],"covered":0,"coverable":0},{"path":["/","home","ajit","Documents","dotenv-space-cli","src","utils","file_ops.rs"],"content":"use anyhow::{Context, Result};\nuse std::path::Path;\n\n/// Ensure directory exists, creating it if necessary\npub fn ensure_dir(path: \u0026Path) -\u003e Result\u003c()\u003e {\n    if !path.exists() {\n        std::fs::create_dir_all(path)\n            .with_context(|| format!(\"Failed to create directory: {}\", path.display()))?;\n    }\n    Ok(())\n}\n\n/// Check if a file contains a specific substring\npub fn file_contains(path: \u0026Path, substring: \u0026str) -\u003e Result\u003cbool\u003e {\n    if !path.exists() {\n        return Ok(false);\n    }\n\n    let content = std::fs::read_to_string(path)\n        .with_context(|| format!(\"Failed to read file: {}\", path.display()))?;\n\n    Ok(content.contains(substring))\n}\n\n/// Append content to a file if it doesn't already contain a marker\npub fn append_if_missing(path: \u0026Path, content: \u0026str, marker: \u0026str) -\u003e Result\u003cbool\u003e {\n    if file_contains(path, marker)? {\n        return Ok(false);\n    }\n\n    use std::fs::OpenOptions;\n    use std::io::Write;\n\n    let mut file = OpenOptions::new()\n        .append(true)\n        .create(true)\n        .open(path)\n        .with_context(|| format!(\"Failed to open file for appending: {}\", path.display()))?;\n\n    writeln!(file, \"{}\", content)\n        .with_context(|| format!(\"Failed to append to file: {}\", path.display()))?;\n\n    Ok(true)\n}\n","traces":[{"line":5,"address":[6504272],"length":1,"stats":{"Line":0}},{"line":6,"address":[6504296],"length":1,"stats":{"Line":0}},{"line":7,"address":[6504403,6504343,6504315],"length":1,"stats":{"Line":0}},{"line":8,"address":[5845040,5845099],"length":1,"stats":{"Line":0}},{"line":10,"address":[6504382],"length":1,"stats":{"Line":0}},{"line":14,"address":[6504884,6504432,6504878],"length":1,"stats":{"Line":0}},{"line":15,"address":[6504517],"length":1,"stats":{"Line":0}},{"line":16,"address":[6504531],"length":1,"stats":{"Line":0}},{"line":19,"address":[6504682,6504596,6504550],"length":1,"stats":{"Line":0}},{"line":20,"address":[6504669,6504574],"length":1,"stats":{"Line":0}},{"line":22,"address":[6504829,6504754],"length":1,"stats":{"Line":0}},{"line":26,"address":[6505695,6504912,6505689],"length":1,"stats":{"Line":0}},{"line":27,"address":[5828570],"length":1,"stats":{"Line":0}},{"line":28,"address":[6505269],"length":1,"stats":{"Line":0}},{"line":34,"address":[5828849,5828671,5828773],"length":1,"stats":{"Line":0}},{"line":37,"address":[6505179],"length":1,"stats":{"Line":0}},{"line":38,"address":[6387803,6387744],"length":1,"stats":{"Line":0}},{"line":40,"address":[6505346,6505417,6505535,6505616],"length":1,"stats":{"Line":0}},{"line":41,"address":[6387595,6387536],"length":1,"stats":{"Line":0}},{"line":43,"address":[6505639],"length":1,"stats":{"Line":0}}],"covered":0,"coverable":20},{"path":["/","home","ajit","Documents","dotenv-space-cli","src","utils","fs.rs"],"content":"//! File system utilities for permission management, file inspection, and search.\n//!\n//! # Platform notes\n//!\n//! Permission-related functions (`has_secure_permissions`, `set_secure_permissions`)\n//! are only meaningful on Unix. On Windows they compile to no-ops that always\n//! return `true` / `Ok(())` so the rest of the codebase does not need `#[cfg]`\n//! guards at every call site.\n//!\n//! # Future work\n//!\n//! - `atomic_write(path, content)`: write to a temp file then `rename` for\n//!   crash-safe updates (avoids partially written `.env` files).\n//! - `find_env_files(dir)`: specialised search that respects `.gitignore` and\n//!   common exclusions (`target/`, `node_modules/`, `.git/`).\n//! - `checksum(path)`: return a SHA-256 hex digest for integrity verification.\n\nuse anyhow::Result;\nuse std::fs;\nuse std::path::Path;\n\n// ── Permissions ───────────────────────────────────────────────────────────────\n\n/// Return `true` if `path` has owner-only permissions (`600`) on Unix.\n///\n/// A `.env` file should never be world- or group-readable because it contains\n/// credentials. Use [`set_secure_permissions`] to fix an insecure file.\n///\n/// Always returns `true` on non-Unix platforms where the concept does not apply.\n#[cfg(unix)]\npub fn has_secure_permissions(path: \u0026Path) -\u003e bool {\n    use std::os::unix::fs::PermissionsExt;\n\n    fs::metadata(path)\n        .map(|m| (m.permissions().mode() \u0026 0o077) == 0)\n        .unwrap_or(false)\n}\n\n/// Non-Unix stub — permissions are not applicable on this platform.\n#[cfg(not(unix))]\npub fn has_secure_permissions(_path: \u0026Path) -\u003e bool {\n    true\n}\n\n/// Set `path` to owner-read/write only (`chmod 600`) on Unix.\n///\n/// # Errors\n///\n/// Returns an error if the file metadata cannot be read or the permissions\n/// cannot be applied (e.g. the caller does not own the file).\n#[cfg(unix)]\npub fn set_secure_permissions(path: \u0026Path) -\u003e Result\u003c()\u003e {\n    use std::os::unix::fs::PermissionsExt;\n\n    let mut perms = fs::metadata(path)?.permissions();\n    perms.set_mode(0o600);\n    fs::set_permissions(path, perms)?;\n    Ok(())\n}\n\n/// Non-Unix stub — no-op, always succeeds.\n#[cfg(not(unix))]\npub fn set_secure_permissions(_path: \u0026Path) -\u003e Result\u003c()\u003e {\n    Ok(())\n}\n\n// ── File operations ───────────────────────────────────────────────────────────\n\n/// Copy `path` to `\u003cpath\u003e.backup` in the same directory.\n///\n/// Used by commands that modify files in-place (e.g. `validate --fix`) so the\n/// user always has a recovery copy before any changes are written.\n///\n/// # Errors\n///\n/// Returns an error if the source file cannot be read or the backup cannot be\n/// written (e.g. insufficient disk space or permissions).\npub fn backup_file(path: \u0026Path) -\u003e Result\u003c()\u003e {\n    let backup_path = path.with_extension(\"backup\");\n    fs::copy(path, backup_path)?;\n    Ok(())\n}\n\n/// Return `true` if `path` appears to be a text file (contains no null bytes).\n///\n/// Null bytes (`\\0`) are the simplest heuristic for detecting binary content.\n/// This is not foolproof — some binary formats avoid null bytes — but it is\n/// sufficient for detecting accidentally passed files in the CLI context.\n///\n/// # Errors\n///\n/// Returns an error if the file cannot be read.\npub fn is_text_file(path: \u0026Path) -\u003e Result\u003cbool\u003e {\n    let content = fs::read(path)?;\n    // Use slice::contains (clippy::manual_contains) instead of iter().any(|\u0026b| b == 0)\n    Ok(!content.contains(\u00260u8))\n}\n\n/// Format `bytes` as a human-readable size string with two decimal places.\n///\n/// Uses binary prefixes (1 KB = 1024 bytes).\n///\n/// # Examples\n///\n/// ```\n/// use evnx::utils::fs::human_readable_size;\n/// assert_eq!(human_readable_size(1024), \"1.00 KB\");\n/// assert_eq!(human_readable_size(1_048_576), \"1.00 MB\");\n/// ```\npub fn human_readable_size(bytes: u64) -\u003e String {\n    const UNITS: \u0026[\u0026str] = \u0026[\"B\", \"KB\", \"MB\", \"GB\", \"TB\"];\n\n    let mut size = bytes as f64;\n    let mut unit_idx = 0;\n\n    while size \u003e= 1024.0 \u0026\u0026 unit_idx \u003c UNITS.len() - 1 {\n        size /= 1024.0;\n        unit_idx += 1;\n    }\n\n    format!(\"{:.2} {}\", size, UNITS[unit_idx])\n}\n\n// ── Search ────────────────────────────────────────────────────────────────────\n\n/// Return all file paths under the current directory whose path string contains\n/// `pattern` as a substring.\n///\n/// Symbolic links are not followed. Hidden directories and `target/` are not\n/// automatically excluded — callers should filter the results if needed.\n///\n/// # Errors\n///\n/// Returns an error only if `WalkDir` itself fails to initialise (extremely rare).\n/// Individual unreadable entries are silently skipped via `filter_map(|e| e.ok())`.\npub fn find_files(pattern: \u0026str) -\u003e Result\u003cVec\u003cString\u003e\u003e {\n    use walkdir::WalkDir;\n\n    let mut files = Vec::new();\n\n    for entry in WalkDir::new(\".\")\n        .follow_links(false)\n        .into_iter()\n        .filter_map(|e| e.ok())\n    {\n        let path = entry.path();\n        if path.is_file() {\n            let path_str = path.to_string_lossy();\n            if path_str.contains(pattern) {\n                files.push(path_str.into_owned());\n            }\n        }\n    }\n\n    Ok(files)\n}\n\n#[cfg(test)]\nmod tests {\n    use super::*;\n    use std::io::Write;\n    use tempfile::NamedTempFile;\n\n    #[test]\n    fn test_human_readable_size_bytes() {\n        assert_eq!(human_readable_size(500), \"500.00 B\");\n    }\n\n    #[test]\n    fn test_human_readable_size_kilobytes() {\n        assert_eq!(human_readable_size(1024), \"1.00 KB\");\n    }\n\n    #[test]\n    fn test_human_readable_size_megabytes() {\n        assert_eq!(human_readable_size(1024 * 1024), \"1.00 MB\");\n    }\n\n    #[test]\n    fn test_is_text_file_with_text() {\n        let mut file = NamedTempFile::new().unwrap();\n        file.write_all(b\"DATABASE_URL=postgresql://localhost\\n\")\n            .unwrap();\n        assert!(is_text_file(file.path()).unwrap());\n    }\n\n    #[test]\n    fn test_is_text_file_with_null_byte() {\n        let mut file = NamedTempFile::new().unwrap();\n        file.write_all(b\"hello\\x00world\").unwrap();\n        assert!(!is_text_file(file.path()).unwrap());\n    }\n\n    #[test]\n    fn test_backup_file_creates_copy() {\n        let mut file = NamedTempFile::new().unwrap();\n        file.write_all(b\"SECRET_KEY=abc123\").unwrap();\n\n        backup_file(file.path()).unwrap();\n\n        let backup_path = file.path().with_extension(\"backup\");\n        assert!(backup_path.exists());\n\n        // Clean up the backup file that persists beyond NamedTempFile scope.\n        let _ = fs::remove_file(backup_path);\n    }\n\n    #[test]\n    #[cfg(unix)]\n    fn test_set_and_check_secure_permissions() {\n        use std::os::unix::fs::PermissionsExt;\n\n        let mut file = NamedTempFile::new().unwrap();\n        file.write_all(b\"KEY=val\").unwrap();\n\n        // First make it world-readable so we have something to fix.\n        let mut perms = fs::metadata(file.path()).unwrap().permissions();\n        perms.set_mode(0o644);\n        fs::set_permissions(file.path(), perms).unwrap();\n        assert!(!has_secure_permissions(file.path()));\n\n        set_secure_permissions(file.path()).unwrap();\n        assert!(has_secure_permissions(file.path()));\n    }\n}\n","traces":[{"line":31,"address":[6321472],"length":1,"stats":{"Line":1}},{"line":34,"address":[6321501],"length":1,"stats":{"Line":1}},{"line":35,"address":[6562992,6562993],"length":1,"stats":{"Line":3}},{"line":52,"address":[6321552],"length":1,"stats":{"Line":1}},{"line":55,"address":[6321591],"length":1,"stats":{"Line":1}},{"line":56,"address":[6321756],"length":1,"stats":{"Line":1}},{"line":57,"address":[6321781],"length":1,"stats":{"Line":1}},{"line":58,"address":[6321873],"length":1,"stats":{"Line":1}},{"line":78,"address":[6320480],"length":1,"stats":{"Line":1}},{"line":79,"address":[6320510],"length":1,"stats":{"Line":1}},{"line":80,"address":[6320543],"length":1,"stats":{"Line":1}},{"line":81,"address":[6320625],"length":1,"stats":{"Line":1}},{"line":93,"address":[6320656,6320973,6320979],"length":1,"stats":{"Line":1}},{"line":94,"address":[6320689],"length":1,"stats":{"Line":1}},{"line":96,"address":[6320836,6320910],"length":1,"stats":{"Line":2}},{"line":110,"address":[6320992],"length":1,"stats":{"Line":1}},{"line":113,"address":[6321017],"length":1,"stats":{"Line":1}},{"line":114,"address":[6321062],"length":1,"stats":{"Line":1}},{"line":116,"address":[6321071,6321112,6321448],"length":1,"stats":{"Line":4}},{"line":117,"address":[6321120],"length":1,"stats":{"Line":1}},{"line":118,"address":[6321443,6321453,6321144],"length":1,"stats":{"Line":2}},{"line":121,"address":[6321091,6321180,6321420],"length":1,"stats":{"Line":2}},{"line":136,"address":[6319472,6320460,6320466],"length":1,"stats":{"Line":0}},{"line":139,"address":[6319515],"length":1,"stats":{"Line":0}},{"line":141,"address":[6319537,6319796,6319700],"length":1,"stats":{"Line":0}},{"line":142,"address":[6319605],"length":1,"stats":{"Line":0}},{"line":143,"address":[6319634],"length":1,"stats":{"Line":0}},{"line":144,"address":[6562944,6562972],"length":1,"stats":{"Line":0}},{"line":146,"address":[6320074,6319881],"length":1,"stats":{"Line":0}},{"line":147,"address":[6320106,6320414],"length":1,"stats":{"Line":0}},{"line":148,"address":[6320171],"length":1,"stats":{"Line":0}},{"line":149,"address":[6320276,6320186],"length":1,"stats":{"Line":0}},{"line":150,"address":[6320313],"length":1,"stats":{"Line":0}},{"line":155,"address":[6319938],"length":1,"stats":{"Line":0}}],"covered":22,"coverable":34},{"path":["/","home","ajit","Documents","dotenv-space-cli","src","utils","git.rs"],"content":"//! Git repository utilities.\n//!\n//! Thin wrappers around `git` CLI commands and `.gitignore` file manipulation.\n//! All functions that shell out to `git` gracefully return `false` or an error\n//! if git is not installed or the current directory is not a repository.\n//!\n//! # Future work\n//!\n//! - Replace CLI shelling with the `git2` crate for faster, dependency-free\n//!   operation (no requirement for git to be in `$PATH`).\n//! - Add `staged_files()` to list files currently in the git index.\n//! - Add `last_commit_touching(file)` for the doctor command to surface when\n//!   a `.env` file was last accidentally committed.\n\nuse anyhow::{anyhow, Result};\nuse std::process::Command;\n\n/// Return `true` if `file` is listed in `.gitignore`.\n///\n/// Reads `.gitignore` in the current working directory. Returns `false` (not\n/// an error) if `.gitignore` does not exist.\n///\n/// # Caveats\n///\n/// This is a simple line-by-line text search. It does not evaluate glob\n/// patterns, negation rules (`!pattern`), or directory-specific ignores.\n/// For a future revision, consider using `git check-ignore -v \u003cfile\u003e` instead.\npub fn is_in_gitignore(file: \u0026str) -\u003e Result\u003cbool\u003e {\n    let gitignore = match std::fs::read_to_string(\".gitignore\") {\n        Ok(content) =\u003e content,\n        // If .gitignore does not exist the file is definitely not ignored.\n        Err(e) if e.kind() == std::io::ErrorKind::NotFound =\u003e return Ok(false),\n        Err(e) =\u003e return Err(e.into()),\n    };\n\n    Ok(gitignore.lines().any(|line| {\n        let trimmed = line.trim();\n        trimmed == file || trimmed.starts_with(file)\n    }))\n}\n\n/// Append `file` to `.gitignore`, creating it if necessary.\n///\n/// A blank line and a `# Environment variables` comment are prepended so the\n/// entry is easy to find on manual inspection.\npub fn add_to_gitignore(file: \u0026str) -\u003e Result\u003c()\u003e {\n    use std::io::Write;\n\n    let mut gitignore = std::fs::OpenOptions::new()\n        .create(true)\n        .append(true)\n        .open(\".gitignore\")?;\n\n    writeln!(gitignore, \"\\n# Environment variables\")?;\n    writeln!(gitignore, \"{}\", file)?;\n\n    Ok(())\n}\n\n/// Return `true` if `file` is tracked by the Git index.\n///\n/// Uses `git ls-files --error-unmatch` which exits non-zero for untracked\n/// files. Returns `false` if git is not available or the directory is not a\n/// repository.\npub fn is_tracked(file: \u0026str) -\u003e bool {\n    Command::new(\"git\")\n        .args([\"ls-files\", \"--error-unmatch\", file])\n        .output()\n        .map(|o| o.status.success())\n        .unwrap_or(false)\n}\n\n/// Search git history for commits that introduced `pattern`.\n///\n/// Runs `git log -S \u003cpattern\u003e --all` and returns a list of\n/// `\"\u003chash\u003e \u003csubject\u003e\"` strings, one per matching commit.\n///\n/// # Errors\n///\n/// Returns an error if git is not available, the directory is not a\n/// repository, or the command exits non-zero for any other reason.\npub fn scan_history(pattern: \u0026str) -\u003e Result\u003cVec\u003cString\u003e\u003e {\n    let output = Command::new(\"git\")\n        .args([\"log\", \"-S\", pattern, \"--all\", \"--pretty=format:%H %s\"])\n        .output()?;\n\n    if !output.status.success() {\n        return Err(anyhow!(\n            \"git log failed: {}\",\n            String::from_utf8_lossy(\u0026output.stderr).trim()\n        ));\n    }\n\n    let stdout = String::from_utf8(output.stdout)?;\n    Ok(stdout\n        .lines()\n        .filter(|s| !s.is_empty())\n        .map(|s| s.to_string())\n        .collect())\n}\n\n/// Return the name of the current git branch.\n///\n/// # Errors\n///\n/// Returns an error if the current directory is not a git repository or git\n/// is not installed.\npub fn current_branch() -\u003e Result\u003cString\u003e {\n    let output = Command::new(\"git\")\n        .args([\"branch\", \"--show-current\"])\n        .output()?;\n\n    if !output.status.success() {\n        return Err(anyhow!(\"Not a git repository or git is not installed\"));\n    }\n\n    Ok(String::from_utf8(output.stdout)?.trim().to_string())\n}\n\n/// Return `true` if the working directory has no uncommitted changes.\n///\n/// Uses `git status --porcelain` — an empty output means a clean tree.\n/// Returns `false` if git is not available or the directory is not a\n/// repository.\npub fn is_clean() -\u003e bool {\n    Command::new(\"git\")\n        .args([\"status\", \"--porcelain\"])\n        .output()\n        .map(|o| o.stdout.is_empty())\n        .unwrap_or(false)\n}\n\n#[cfg(test)]\nmod tests {\n    use super::*;\n\n    #[test]\n    fn test_is_in_gitignore_missing_file_returns_false() {\n        // .gitignore may or may not exist in the test environment.\n        // We only assert that the function does not panic or return an Err\n        // when the file is absent — the Ok(bool) contract must hold.\n        let result = is_in_gitignore(\"some_file_that_is_not_there\");\n        assert!(result.is_ok());\n    }\n\n    #[test]\n    fn test_is_in_gitignore_finds_entry() {\n        use std::io::Write;\n        use tempfile::tempdir;\n\n        let dir = tempdir().unwrap();\n        let gitignore_path = dir.path().join(\".gitignore\");\n        let mut f = std::fs::File::create(\u0026gitignore_path).unwrap();\n        writeln!(f, \".env\").unwrap();\n        writeln!(f, \"*.log\").unwrap();\n\n        // Read directly rather than relying on cwd for a hermetic test.\n        let content = std::fs::read_to_string(\u0026gitignore_path).unwrap();\n        let found = content.lines().any(|line| {\n            let t = line.trim();\n            t == \".env\" || t.starts_with(\".env\")\n        });\n        assert!(found);\n    }\n}\n","traces":[{"line":28,"address":[5419064,5418720,5419058],"length":1,"stats":{"Line":1}},{"line":29,"address":[5418747],"length":1,"stats":{"Line":1}},{"line":30,"address":[5418847],"length":1,"stats":{"Line":1}},{"line":32,"address":[5418820,5419140,5419228],"length":1,"stats":{"Line":0}},{"line":33,"address":[5419285,5419183],"length":1,"stats":{"Line":0}},{"line":36,"address":[5705856],"length":1,"stats":{"Line":3}},{"line":37,"address":[5705904],"length":1,"stats":{"Line":1}},{"line":38,"address":[5705924],"length":1,"stats":{"Line":1}},{"line":46,"address":[5419344,5419971,5419977],"length":1,"stats":{"Line":0}},{"line":49,"address":[5419425,5419466,5419361],"length":1,"stats":{"Line":0}},{"line":54,"address":[5419503,5419964,5419583],"length":1,"stats":{"Line":0}},{"line":55,"address":[5419941,5419703],"length":1,"stats":{"Line":0}},{"line":57,"address":[5419904],"length":1,"stats":{"Line":0}},{"line":65,"address":[5415408,5415692,5415698],"length":1,"stats":{"Line":0}},{"line":66,"address":[5415441],"length":1,"stats":{"Line":0}},{"line":67,"address":[5415483],"length":1,"stats":{"Line":0}},{"line":69,"address":[5705632,5705641],"length":1,"stats":{"Line":0}},{"line":82,"address":[5415712,5416817,5417367],"length":1,"stats":{"Line":0}},{"line":83,"address":[5415755,5416036,5416101],"length":1,"stats":{"Line":0}},{"line":84,"address":[5415808],"length":1,"stats":{"Line":0}},{"line":87,"address":[5416314],"length":1,"stats":{"Line":0}},{"line":88,"address":[5416601,5416496],"length":1,"stats":{"Line":0}},{"line":90,"address":[5416448,5416343,5416550],"length":1,"stats":{"Line":0}},{"line":94,"address":[5416372,5416839,5417272],"length":1,"stats":{"Line":0}},{"line":95,"address":[5417191,5417033],"length":1,"stats":{"Line":0}},{"line":96,"address":[5417110],"length":1,"stats":{"Line":0}},{"line":97,"address":[5705822,5705808],"length":1,"stats":{"Line":0}},{"line":98,"address":[5438149,5438096],"length":1,"stats":{"Line":0}},{"line":99,"address":[5417179],"length":1,"stats":{"Line":0}},{"line":108,"address":[5417440,5418578,5418584],"length":1,"stats":{"Line":0}},{"line":109,"address":[5417457,5417723,5417658],"length":1,"stats":{"Line":0}},{"line":110,"address":[5417500],"length":1,"stats":{"Line":0}},{"line":113,"address":[5417930],"length":1,"stats":{"Line":0}},{"line":114,"address":[5417959,5418050],"length":1,"stats":{"Line":0}},{"line":117,"address":[5418153,5418412,5417985],"length":1,"stats":{"Line":0}},{"line":125,"address":[5420000,5420238,5420232],"length":1,"stats":{"Line":0}},{"line":126,"address":[5420007],"length":1,"stats":{"Line":0}},{"line":127,"address":[5420039],"length":1,"stats":{"Line":0}},{"line":129,"address":[5706009,5706000],"length":1,"stats":{"Line":0}}],"covered":6,"coverable":39},{"path":["/","home","ajit","Documents","dotenv-space-cli","src","utils","mod.rs"],"content":"pub mod file_ops;\npub mod fs;\npub mod git;\npub mod patterns;\npub mod string;\npub mod ui;\n\n// Re-export commonly used items\npub use patterns::{calculate_entropy, detect_secret, is_placeholder, Confidence};\n","traces":[],"covered":0,"coverable":0},{"path":["/","home","ajit","Documents","dotenv-space-cli","src","utils","patterns.rs"],"content":"/// Secret pattern detection for scanning .env files\n///\n/// This module contains regex patterns and entropy calculation for detecting\n/// accidentally committed secrets. Patterns are based on real-world secret formats\n/// from AWS, Stripe, GitHub, OpenAI, and other major services.\nuse lazy_static::lazy_static;\nuse regex::Regex;\n\n/// A detected secret pattern\n#[derive(Debug, Clone)]\npub struct SecretPattern {\n    pub name: String,\n    pub pattern: String,\n    pub confidence: Confidence,\n    pub action_url: Option\u003cString\u003e,\n}\n\n/// Confidence level for secret detection\n#[derive(Debug, Clone, PartialEq, Eq)]\npub enum Confidence {\n    High,\n    Medium,\n    Low,\n}\n\nimpl std::fmt::Display for Confidence {\n    fn fmt(\u0026self, f: \u0026mut std::fmt::Formatter\u003c'_\u003e) -\u003e std::fmt::Result {\n        match self {\n            Confidence::High =\u003e write!(f, \"high\"),\n            Confidence::Medium =\u003e write!(f, \"medium\"),\n            Confidence::Low =\u003e write!(f, \"low\"),\n        }\n    }\n}\n\nlazy_static! {\n    /// AWS Access Key ID pattern\n    pub static ref AWS_ACCESS_KEY: Regex = Regex::new(r\"AKIA[0-9A-Z]{16}\").unwrap();\n\n    /// AWS Secret Access Key pattern (40 chars base64-like)\n    pub static ref AWS_SECRET_KEY: Regex = Regex::new(r\"[0-9a-zA-Z/+=]{40}\").unwrap();\n\n    /// Stripe Secret Key (live)\n    pub static ref STRIPE_SECRET_LIVE: Regex = Regex::new(r\"sk_live_[0-9a-zA-Z]{24,}\").unwrap();\n\n    /// Stripe Secret Key (test)\n    pub static ref STRIPE_SECRET_TEST: Regex = Regex::new(r\"sk_test_[0-9a-zA-Z]{24,}\").unwrap();\n\n    /// GitHub Personal Access Token\n    pub static ref GITHUB_PAT: Regex = Regex::new(r\"\\bghp_[A-Za-z0-9]{36,40}\\b\").unwrap();\n\n    /// GitHub OAuth Token\n    pub static ref GITHUB_OAUTH: Regex = Regex::new(r\"\\bgho_[A-Za-z0-9]{36,40}\\b\").unwrap();\n\n    /// GitHub App Token\n    pub static ref GITHUB_APP: Regex = Regex::new(r\"\\b(ghu|ghs)_[A-Za-z0-9]{36,40}\\b\").unwrap();\n\n    /// OpenAI API Key\n    pub static ref OPENAI_API_KEY: Regex = Regex::new(r\"sk-[0-9a-zA-Z]{48}\").unwrap();\n\n    /// Anthropic API Key\n    pub static ref ANTHROPIC_API_KEY: Regex = Regex::new(r\"sk-ant-api[0-9]{2}-[0-9a-zA-Z\\-_]{95}\").unwrap();\n\n    /// Generic API key pattern (high entropy)\n    pub static ref GENERIC_API_KEY: Regex = Regex::new(r#\"api[_-]?key['\\\"]?\\s*[:=]\\s*['\\\"]?([0-9a-zA-Z_\\-]{32,})['\\\"]?\"#).unwrap();\n\n    /// Private Key Header\n    pub static ref PRIVATE_KEY: Regex = Regex::new(r\"-----BEGIN [A-Z ]+ PRIVATE KEY-----\").unwrap();\n}\n\n/// Get all secret patterns\npub fn get_patterns() -\u003e Vec\u003cSecretPattern\u003e {\n    vec![\n        SecretPattern {\n            name: \"AWS Access Key\".to_string(),\n            pattern: r\"AKIA[0-9A-Z]{16}\".to_string(),\n            confidence: Confidence::High,\n            action_url: Some(\"https://console.aws.amazon.com/iam\".to_string()),\n        },\n        SecretPattern {\n            name: \"Stripe Secret Key (Live)\".to_string(),\n            pattern: r\"sk_live_[0-9a-zA-Z]{24,}\".to_string(),\n            confidence: Confidence::High,\n            action_url: Some(\"https://dashboard.stripe.com/apikeys\".to_string()),\n        },\n        SecretPattern {\n            name: \"Stripe Secret Key (Test)\".to_string(),\n            pattern: r\"sk_test_[0-9a-zA-Z]{24,}\".to_string(),\n            confidence: Confidence::Medium,\n            action_url: Some(\"https://dashboard.stripe.com/apikeys\".to_string()),\n        },\n        SecretPattern {\n            name: \"GitHub Personal Access Token\".to_string(),\n            pattern: r\"ghp_[0-9a-zA-Z]{36}\".to_string(),\n            confidence: Confidence::High,\n            action_url: Some(\"https://github.com/settings/tokens\".to_string()),\n        },\n        SecretPattern {\n            name: \"GitHub OAuth Token\".to_string(),\n            pattern: r\"gho_[0-9a-zA-Z]{36}\".to_string(),\n            confidence: Confidence::High,\n            action_url: Some(\"https://github.com/settings/tokens\".to_string()),\n        },\n        SecretPattern {\n            name: \"OpenAI API Key\".to_string(),\n            pattern: r\"sk-[0-9a-zA-Z]{48}\".to_string(),\n            confidence: Confidence::High,\n            action_url: Some(\"https://platform.openai.com/api-keys\".to_string()),\n        },\n        SecretPattern {\n            name: \"Anthropic API Key\".to_string(),\n            pattern: r\"sk-ant-api[0-9]{2}-[0-9a-zA-Z\\-_]{95}\".to_string(),\n            confidence: Confidence::High,\n            action_url: Some(\"https://console.anthropic.com/settings/keys\".to_string()),\n        },\n        SecretPattern {\n            name: \"Private Key\".to_string(),\n            pattern: r\"-----BEGIN [A-Z ]+ PRIVATE KEY-----\".to_string(),\n            confidence: Confidence::High,\n            action_url: None,\n        },\n    ]\n}\n\n/// Calculate Shannon entropy of a string (for detecting high-entropy secrets)\n///\n/// Returns a value between 0.0 and ~6.0\n/// - \u003c 3.0: Low entropy (probably not a secret)\n/// - 3.0-4.5: Medium entropy (could be a secret)\n/// - \u003e 4.5: High entropy (likely a secret)\npub fn calculate_entropy(s: \u0026str) -\u003e f64 {\n    if s.is_empty() {\n        return 0.0;\n    }\n\n    let mut char_counts = std::collections::HashMap::new();\n    for c in s.chars() {\n        *char_counts.entry(c).or_insert(0) += 1;\n    }\n\n    let len = s.len() as f64;\n    let mut entropy = 0.0;\n\n    for count in char_counts.values() {\n        let probability = (*count as f64) / len;\n        entropy -= probability * probability.log2();\n    }\n\n    entropy\n}\n\n/// Check if a value looks like a placeholder (not a real secret)\npub fn is_placeholder(value: \u0026str) -\u003e bool {\n    let v = value.trim();\n    let lower = v.to_lowercase();\n\n    // Exact known fake/example secrets\n    const EXACT: \u0026[\u0026str] = \u0026[\n        \"akiaiosfodnn7example\",\n        \"wjalrxutnfemi/k7mdeng/bpxrficyexamplekey\",\n        \"your_key_here\",\n        \"your_secret_here\",\n        \"your_token_here\",\n        \"change_me\",\n        \"changeme\",\n        \"replace_me\",\n        \"xxx\",\n        \"todo\",\n    ];\n\n    if EXACT.iter().any(|p| lower == *p) {\n        return true;\n    }\n\n    // Structured placeholder patterns (safe substrings)\n    const SUBSTRINGS: \u0026[\u0026str] = \u0026[\n        \"change_me\",\n        \"changeme\",\n        \"your_key_here\",\n        \"your_secret_here\",\n        \"your_token_here\",\n        \"replace_me\",\n        \"generate-with\",\n    ];\n\n    if SUBSTRINGS.iter().any(|p| lower.contains(p)) {\n        return true;\n    }\n\n    false\n}\n\n/// Detect if a value matches any secret pattern\n///\n/// Returns (pattern_name, confidence) if a match is found\npub fn detect_secret(value: \u0026str, key: \u0026str) -\u003e Option\u003c(String, Confidence, Option\u003cString\u003e)\u003e {\n    // Skip obvious placeholders\n    if is_placeholder(value) {\n        return None;\n    }\n\n    // Check specific patterns\n    if AWS_ACCESS_KEY.is_match(value) {\n        return Some((\n            \"AWS Access Key\".to_string(),\n            Confidence::High,\n            Some(\"https://console.aws.amazon.com/iam\".to_string()),\n        ));\n    }\n\n    // AWS Secret Key is tricky - high false positive rate\n    // Only flag if key name suggests it's AWS-related\n    if AWS_SECRET_KEY.is_match(value)\n        \u0026\u0026 (key.to_uppercase().contains(\"AWS\") || key.to_uppercase().contains(\"SECRET\"))\n    {\n        let entropy = calculate_entropy(value);\n        if entropy \u003e 4.5 {\n            return Some((\n                \"AWS Secret Access Key\".to_string(),\n                Confidence::Medium,\n                Some(\"https://console.aws.amazon.com/iam\".to_string()),\n            ));\n        }\n    }\n\n    if STRIPE_SECRET_LIVE.is_match(value) {\n        return Some((\n            \"Stripe Secret Key (LIVE)\".to_string(),\n            Confidence::High,\n            Some(\"https://dashboard.stripe.com/apikeys\".to_string()),\n        ));\n    }\n\n    if STRIPE_SECRET_TEST.is_match(value) {\n        return Some((\n            \"Stripe Secret Key (test)\".to_string(),\n            Confidence::Medium,\n            Some(\"https://dashboard.stripe.com/apikeys\".to_string()),\n        ));\n    }\n\n    if GITHUB_PAT.is_match(value) || GITHUB_OAUTH.is_match(value) || GITHUB_APP.is_match(value) {\n        return Some((\n            \"GitHub Token\".to_string(),\n            Confidence::High,\n            Some(\"https://github.com/settings/tokens\".to_string()),\n        ));\n    }\n\n    if OPENAI_API_KEY.is_match(value) {\n        return Some((\n            \"OpenAI API Key\".to_string(),\n            Confidence::High,\n            Some(\"https://platform.openai.com/api-keys\".to_string()),\n        ));\n    }\n\n    if ANTHROPIC_API_KEY.is_match(value) {\n        return Some((\n            \"Anthropic API Key\".to_string(),\n            Confidence::High,\n            Some(\"https://console.anthropic.com/settings/keys\".to_string()),\n        ));\n    }\n\n    if PRIVATE_KEY.is_match(value) {\n        return Some((\"Private Key\".to_string(), Confidence::High, None));\n    }\n\n    // Generic high-entropy check as fallback\n    if value.len() \u003e= 32 {\n        let entropy = calculate_entropy(value);\n        if entropy \u003e 4.8 {\n            return Some((\n                \"High-entropy string (possible secret)\".to_string(),\n                Confidence::Low,\n                None,\n            ));\n        }\n    }\n\n    None\n}\n\n#[cfg(test)]\nmod tests {\n    use super::*;\n\n    #[test]\n    fn test_aws_access_key() {\n        assert!(AWS_ACCESS_KEY.is_match(\"AKIAIOSFODNN7EXAMPLE\"));\n        assert!(!AWS_ACCESS_KEY.is_match(\"not-an-aws-key\"));\n    }\n\n    #[test]\n    fn test_stripe_keys() {\n        assert!(STRIPE_SECRET_LIVE.is_match(\"sk_live_51Habcdefghijklmnopqrstuvwxyz123456\"));\n        assert!(STRIPE_SECRET_TEST.is_match(\"sk_test_51Habcdefghijklmnopqrstuvwxyz123456\"));\n        assert!(!STRIPE_SECRET_LIVE.is_match(\"sk_test_something\"));\n    }\n\n    #[test]\n    fn test_github_tokens() {\n        assert!(GITHUB_PAT.is_match(\"ghp_1234567890abcdefghijklmnopqrstuvwxyzABCD\"));\n\n        assert!(GITHUB_OAUTH.is_match(\"gho_1234567890abcdefghijklmnopqrstuvwxyzABCD\"));\n\n        assert!(GITHUB_APP.is_match(\"ghu_1234567890abcdefghijklmnopqrstuvwxyzABCD\"));\n\n        assert!(!GITHUB_PAT.is_match(\"ghp_short\"));\n        assert!(!GITHUB_PAT.is_match(\"not_a_token\"));\n    }\n\n    #[test]\n    fn test_entropy() {\n        // Low entropy\n        assert!(calculate_entropy(\"aaaaaaa\") \u003c 1.0);\n\n        // High entropy\n        assert!(calculate_entropy(\"aB3$xY9!zQ2#mK7\") \u003e 3.5);\n\n        // Random base64-like\n        let random = \"a1b2c3d4e5f6g7h8i9j0k1l2m3n4o5p6q7r8s9t0\";\n        assert!(calculate_entropy(random) \u003e 3.0);\n    }\n\n    #[test]\n    fn test_is_placeholder() {\n        assert!(is_placeholder(\"YOUR_KEY_HERE\"));\n        assert!(is_placeholder(\"sk_test_CHANGE_ME\"));\n        assert!(is_placeholder(\"AKIAIOSFODNN7EXAMPLE\"));\n        assert!(!is_placeholder(\"sk_live_51HrealkeystuffABC123\"));\n        assert!(!is_placeholder(\"postgresql://localhost:5432/db\"));\n    }\n\n    #[test]\n    fn test_detect_secret() {\n        // AWS Access Key\n        let result = detect_secret(\"AKIAIOSFODNN7EXAMPLE\", \"AWS_ACCESS_KEY_ID\");\n        assert!(result.is_none()); // It's a placeholder\n\n        let result = detect_secret(\"AKIA4OZRMFJ3VEXAMPLE\", \"AWS_ACCESS_KEY_ID\");\n        assert!(result.is_some());\n        if let Some((name, conf, _)) = result {\n            assert_eq!(name, \"AWS Access Key\");\n            assert_eq!(conf, Confidence::High);\n        }\n\n        // Stripe Live Key\n        let result = detect_secret(\"sk_live_51H1234567890abcdefghijk\", \"STRIPE_SECRET_KEY\");\n        assert!(result.is_some());\n        if let Some((name, conf, _)) = result {\n            assert_eq!(name, \"Stripe Secret Key (LIVE)\");\n            assert_eq!(conf, Confidence::High);\n        }\n\n        // Not a secret\n        let result = detect_secret(\"localhost\", \"DATABASE_HOST\");\n        assert!(result.is_none());\n    }\n}\n","traces":[{"line":27,"address":[5759104],"length":1,"stats":{"Line":0}},{"line":28,"address":[5870523],"length":1,"stats":{"Line":0}},{"line":29,"address":[5870555],"length":1,"stats":{"Line":0}},{"line":30,"address":[5870595],"length":1,"stats":{"Line":0}},{"line":31,"address":[5870635],"length":1,"stats":{"Line":0}},{"line":38,"address":[5871950],"length":1,"stats":{"Line":1}},{"line":41,"address":[5872094],"length":1,"stats":{"Line":1}},{"line":44,"address":[5872670],"length":1,"stats":{"Line":1}},{"line":47,"address":[5872814],"length":1,"stats":{"Line":1}},{"line":50,"address":[5871518],"length":1,"stats":{"Line":1}},{"line":53,"address":[5760414],"length":1,"stats":{"Line":1}},{"line":56,"address":[5871374],"length":1,"stats":{"Line":1}},{"line":59,"address":[5760846],"length":1,"stats":{"Line":1}},{"line":62,"address":[5872526],"length":1,"stats":{"Line":1}},{"line":65,"address":[5872382],"length":1,"stats":{"Line":0}},{"line":68,"address":[5871662],"length":1,"stats":{"Line":1}},{"line":72,"address":[5754205,5751104,5754211],"length":1,"stats":{"Line":0}},{"line":73,"address":[5862449,5864191,5862411,5863126,5863481,5863836,5864546,5864901,5862774,5865187,5865505],"length":1,"stats":{"Line":0}},{"line":74,"address":[5862663],"length":1,"stats":{"Line":0}},{"line":75,"address":[5862421],"length":1,"stats":{"Line":0}},{"line":76,"address":[5751206],"length":1,"stats":{"Line":0}},{"line":78,"address":[5862559,5862631],"length":1,"stats":{"Line":0}},{"line":80,"address":[5862991],"length":1,"stats":{"Line":0}},{"line":81,"address":[5862743],"length":1,"stats":{"Line":0}},{"line":82,"address":[5862815],"length":1,"stats":{"Line":0}},{"line":84,"address":[5862887,5862959],"length":1,"stats":{"Line":0}},{"line":86,"address":[5752054],"length":1,"stats":{"Line":0}},{"line":87,"address":[5863095],"length":1,"stats":{"Line":0}},{"line":88,"address":[5751878],"length":1,"stats":{"Line":0}},{"line":90,"address":[5863242,5863314],"length":1,"stats":{"Line":0}},{"line":92,"address":[5863701],"length":1,"stats":{"Line":0}},{"line":93,"address":[5863450],"length":1,"stats":{"Line":0}},{"line":94,"address":[5752229],"length":1,"stats":{"Line":0}},{"line":96,"address":[5863669,5863597],"length":1,"stats":{"Line":0}},{"line":98,"address":[5864056],"length":1,"stats":{"Line":0}},{"line":99,"address":[5863805],"length":1,"stats":{"Line":0}},{"line":100,"address":[5863880],"length":1,"stats":{"Line":0}},{"line":102,"address":[5863952,5864024],"length":1,"stats":{"Line":0}},{"line":104,"address":[5864411],"length":1,"stats":{"Line":0}},{"line":105,"address":[5864160],"length":1,"stats":{"Line":0}},{"line":106,"address":[5864235],"length":1,"stats":{"Line":0}},{"line":108,"address":[5864307,5864379],"length":1,"stats":{"Line":0}},{"line":110,"address":[5864766],"length":1,"stats":{"Line":0}},{"line":111,"address":[5864515],"length":1,"stats":{"Line":0}},{"line":112,"address":[5864590],"length":1,"stats":{"Line":0}},{"line":114,"address":[5864734,5864662],"length":1,"stats":{"Line":0}},{"line":116,"address":[5865035],"length":1,"stats":{"Line":0}},{"line":117,"address":[5864870],"length":1,"stats":{"Line":0}},{"line":118,"address":[5864945],"length":1,"stats":{"Line":0}},{"line":120,"address":[5865017],"length":1,"stats":{"Line":0}},{"line":131,"address":[5758843,5758096,5758837],"length":1,"stats":{"Line":1}},{"line":132,"address":[5869489],"length":1,"stats":{"Line":1}},{"line":133,"address":[5758178],"length":1,"stats":{"Line":0}},{"line":136,"address":[5869498],"length":1,"stats":{"Line":1}},{"line":137,"address":[5869610,5869525,5870201],"length":1,"stats":{"Line":3}},{"line":138,"address":[5870146,5870206,5869731],"length":1,"stats":{"Line":2}},{"line":141,"address":[5869771],"length":1,"stats":{"Line":1}},{"line":142,"address":[5869842],"length":1,"stats":{"Line":1}},{"line":144,"address":[5758756,5758498],"length":1,"stats":{"Line":2}},{"line":145,"address":[5870024],"length":1,"stats":{"Line":1}},{"line":146,"address":[5758663,5758730],"length":1,"stats":{"Line":2}},{"line":149,"address":[5870060],"length":1,"stats":{"Line":1}},{"line":153,"address":[5869428,5869088,5869422],"length":1,"stats":{"Line":1}},{"line":154,"address":[5757764],"length":1,"stats":{"Line":2}},{"line":155,"address":[5757788],"length":1,"stats":{"Line":1}},{"line":171,"address":[5757802,5757886],"length":1,"stats":{"Line":8}},{"line":172,"address":[5757960],"length":1,"stats":{"Line":1}},{"line":186,"address":[6230786,6230768],"length":1,"stats":{"Line":4}},{"line":187,"address":[5869388],"length":1,"stats":{"Line":1}},{"line":190,"address":[5869370],"length":1,"stats":{"Line":1}},{"line":196,"address":[5865552,5866314,5866308],"length":1,"stats":{"Line":1}},{"line":198,"address":[5865658],"length":1,"stats":{"Line":1}},{"line":199,"address":[5865719],"length":1,"stats":{"Line":1}},{"line":203,"address":[5865668],"length":1,"stats":{"Line":1}},{"line":204,"address":[5868956],"length":1,"stats":{"Line":1}},{"line":205,"address":[5754449],"length":1,"stats":{"Line":1}},{"line":207,"address":[5865819,5868908],"length":1,"stats":{"Line":2}},{"line":213,"address":[5865737],"length":1,"stats":{"Line":1}},{"line":214,"address":[5754577],"length":1,"stats":{"Line":0}},{"line":216,"address":[5754942],"length":1,"stats":{"Line":0}},{"line":217,"address":[5754956],"length":1,"stats":{"Line":0}},{"line":218,"address":[5757388],"length":1,"stats":{"Line":0}},{"line":219,"address":[5866327],"length":1,"stats":{"Line":0}},{"line":221,"address":[5866366,5868681],"length":1,"stats":{"Line":0}},{"line":226,"address":[5754515],"length":1,"stats":{"Line":1}},{"line":227,"address":[5757161],"length":1,"stats":{"Line":1}},{"line":228,"address":[5755102],"length":1,"stats":{"Line":1}},{"line":230,"address":[5755141,5757113],"length":1,"stats":{"Line":2}},{"line":234,"address":[5866393],"length":1,"stats":{"Line":1}},{"line":235,"address":[5756934],"length":1,"stats":{"Line":0}},{"line":236,"address":[5866545],"length":1,"stats":{"Line":0}},{"line":238,"address":[5868227,5866584],"length":1,"stats":{"Line":0}},{"line":242,"address":[5866611,5866720,5866502],"length":1,"stats":{"Line":3}},{"line":243,"address":[5868048],"length":1,"stats":{"Line":0}},{"line":244,"address":[5866654],"length":1,"stats":{"Line":0}},{"line":246,"address":[5868000,5866693],"length":1,"stats":{"Line":0}},{"line":250,"address":[5866761],"length":1,"stats":{"Line":1}},{"line":251,"address":[5867821],"length":1,"stats":{"Line":0}},{"line":252,"address":[5866845],"length":1,"stats":{"Line":0}},{"line":254,"address":[5867773,5866884],"length":1,"stats":{"Line":0}},{"line":258,"address":[5755464],"length":1,"stats":{"Line":1}},{"line":259,"address":[5867594],"length":1,"stats":{"Line":0}},{"line":260,"address":[5866954],"length":1,"stats":{"Line":0}},{"line":262,"address":[5867546,5866991],"length":1,"stats":{"Line":0}},{"line":266,"address":[5866911],"length":1,"stats":{"Line":1}},{"line":267,"address":[5867054],"length":1,"stats":{"Line":0}},{"line":271,"address":[5755694],"length":1,"stats":{"Line":1}},{"line":272,"address":[5867275],"length":1,"stats":{"Line":0}},{"line":273,"address":[5867290],"length":1,"stats":{"Line":0}},{"line":274,"address":[5867356],"length":1,"stats":{"Line":0}},{"line":275,"address":[5867304],"length":1,"stats":{"Line":0}},{"line":277,"address":[5867338],"length":1,"stats":{"Line":0}},{"line":282,"address":[5867241],"length":1,"stats":{"Line":1}}],"covered":48,"coverable":113},{"path":["/","home","ajit","Documents","dotenv-space-cli","src","utils","string.rs"],"content":"//! String utility functions for formatting and display.\n//!\n//! These helpers are used throughout the CLI for consistent presentation\n//! of values in terminal output.\n\n/// Truncate a string to `max_len` characters.\n///\n/// If the string is longer than `max_len`, it is cut and `...` is appended.\n/// `max_len` must be at least 4 — otherwise the ellipsis itself would not fit.\n///\n/// # Examples\n///\n/// ```\n/// use evnx::utils::string::truncate;\n/// assert_eq!(truncate(\"hello world\", 8), \"hello...\");\n/// assert_eq!(truncate(\"hi\", 10), \"hi\");\n/// ```\npub fn truncate(s: \u0026str, max_len: usize) -\u003e String {\n    if s.len() \u003c= max_len {\n        s.to_string()\n    } else {\n        format!(\"{}...\", \u0026s[..max_len.saturating_sub(3)])\n    }\n}\n\n/// Redact a sensitive value for safe display in terminal output.\n///\n/// - Short values (≤ 8 chars): replaced entirely with `*`.\n/// - Longer values: first 4 chars shown, then `...****`.\n///\n/// The original value is never fully exposed in output; this is purely\n/// for debugging context (e.g. showing that a key *has* a value).\n///\n/// # Examples\n///\n/// ```\n/// use evnx::utils::string::redact;\n/// assert_eq!(redact(\"secret\"), \"******\");\n/// assert_eq!(redact(\"secretkey123\"), \"secr...****\");\n/// ```\npub fn redact(s: \u0026str) -\u003e String {\n    if s.len() \u003c= 8 {\n        \"*\".repeat(s.len())\n    } else {\n        format!(\"{}...{}\", \u0026s[..4], \"*\".repeat(4))\n    }\n}\n\n/// Return a count-aware string using the correct singular or plural form.\n///\n/// # Examples\n///\n/// ```\n/// use evnx::utils::string::pluralize;\n/// assert_eq!(pluralize(1, \"file\", \"files\"), \"1 file\");\n/// assert_eq!(pluralize(3, \"file\", \"files\"), \"3 files\");\n/// ```\npub fn pluralize(count: usize, singular: \u0026str, plural: \u0026str) -\u003e String {\n    if count == 1 {\n        format!(\"{} {}\", count, singular)\n    } else {\n        format!(\"{} {}\", count, plural)\n    }\n}\n\n#[cfg(test)]\nmod tests {\n    use super::*;\n\n    #[test]\n    fn test_truncate_short() {\n        assert_eq!(truncate(\"hello\", 10), \"hello\");\n    }\n\n    #[test]\n    fn test_truncate_long() {\n        assert_eq!(truncate(\"hello world\", 8), \"hello...\");\n    }\n\n    #[test]\n    fn test_truncate_exact_boundary() {\n        assert_eq!(truncate(\"hello\", 5), \"hello\");\n    }\n\n    #[test]\n    fn test_redact_short() {\n        assert_eq!(redact(\"secret\"), \"******\");\n    }\n\n    #[test]\n    fn test_redact_long() {\n        assert_eq!(redact(\"secretkey123\"), \"secr...****\");\n    }\n\n    #[test]\n    fn test_redact_exactly_eight() {\n        // 8 chars → all stars\n        assert_eq!(redact(\"12345678\"), \"********\");\n    }\n\n    #[test]\n    fn test_pluralize_singular() {\n        assert_eq!(pluralize(1, \"file\", \"files\"), \"1 file\");\n    }\n\n    #[test]\n    fn test_pluralize_plural() {\n        assert_eq!(pluralize(2, \"file\", \"files\"), \"2 files\");\n    }\n\n    #[test]\n    fn test_pluralize_zero() {\n        assert_eq!(pluralize(0, \"file\", \"files\"), \"0 files\");\n    }\n}\n","traces":[{"line":18,"address":[6376768],"length":1,"stats":{"Line":1}},{"line":19,"address":[6376840],"length":1,"stats":{"Line":1}},{"line":20,"address":[6377051],"length":1,"stats":{"Line":1}},{"line":22,"address":[6376864],"length":1,"stats":{"Line":1}},{"line":41,"address":[6376746,6376740,6376304],"length":1,"stats":{"Line":1}},{"line":42,"address":[6376363],"length":1,"stats":{"Line":1}},{"line":43,"address":[6376511],"length":1,"stats":{"Line":1}},{"line":45,"address":[6376546,6376384],"length":1,"stats":{"Line":1}},{"line":58,"address":[6377072],"length":1,"stats":{"Line":1}},{"line":59,"address":[6377113],"length":1,"stats":{"Line":1}},{"line":60,"address":[6377125],"length":1,"stats":{"Line":1}},{"line":62,"address":[6377314],"length":1,"stats":{"Line":1}}],"covered":12,"coverable":12},{"path":["/","home","ajit","Documents","dotenv-space-cli","src","utils","ui.rs"],"content":"//! Terminal UI utilities — progress bars, boxed output, and status messages.\n//!\n//! All functions in this module write directly to stdout. They are intentionally\n//! thin wrappers around `colored` and `indicatif` so the rest of the codebase\n//! does not need to import those crates directly.\n//!\n//! # Future work\n//!\n//! - Respect a global `--no-color` flag by checking `colored::control::SHOULD_COLORIZE`.\n//! - Add a `spinner()` helper for indeterminate operations.\n//! - Add a `table()` helper for structured multi-column output.\n\nuse colored::*;\nuse indicatif::{ProgressBar, ProgressStyle};\n\n/// Create a styled progress bar with `len` steps and an initial `message`.\n///\n/// The bar uses the format:\n/// ```text\n/// ⠙ [████████████░░░░░░░░░░░░░░░░░░░░░░░░░░░░] 12/50 Processing KEY\n/// ```\n///\n/// The caller is responsible for calling [`ProgressBar::inc`] and\n/// [`ProgressBar::finish_with_message`] when done.\npub fn progress_bar(len: u64, message: \u0026str) -\u003e ProgressBar {\n    let pb = ProgressBar::new(len);\n    pb.set_style(\n        ProgressStyle::default_bar()\n            .template(\"{spinner:.green} [{bar:40.cyan/blue}] {pos}/{len} {msg}\")\n            .unwrap()\n            .progress_chars(\"#\u003e-\"),\n    );\n    pb.set_message(message.to_string());\n    pb\n}\n\n/// Print a cyan boxed header with an optional multi-line body.\n///\n/// ```text\n/// ┌─ Title ──────────────────────────────────────────────┐\n/// │ Optional message line                                │\n/// └──────────────────────────────────────────────────────┘\n/// ```\n///\n/// Pass an empty string for `message` to render a title-only box.\npub fn print_box(title: \u0026str, message: \u0026str) {\n    let width = 60;\n    let border = \"─\".repeat(width - 4);\n\n    println!(\"\\n{}\", format!(\"┌─{}─┐\", border).cyan());\n    println!(\n        \"{}\",\n        format!(\"│ {:\u003cwidth$} │\", title, width = width - 4).cyan()\n    );\n\n    if !message.is_empty() {\n        for line in message.lines() {\n            println!(\n                \"{}\",\n                format!(\"│ {:\u003cwidth$} │\", line, width = width - 4).cyan()\n            );\n        }\n    }\n\n    println!(\"{}\\n\", format!(\"└─{}─┘\", border).cyan());\n}\n\n/// Print a green `✓ \u003cmessage\u003e` success line.\npub fn success(message: \u0026str) {\n    println!(\"{} {}\", \"✓\".green(), message);\n}\n\n/// Print a red `✗ \u003cmessage\u003e` error line.\npub fn error(message: \u0026str) {\n    println!(\"{} {}\", \"✗\".red(), message);\n}\n\n/// Print a yellow `⚠️ \u003cmessage\u003e` warning line.\npub fn warning(message: \u0026str) {\n    println!(\"{} {}\", \"⚠️\".yellow(), message);\n}\n\n/// Print a cyan `ℹ️ \u003cmessage\u003e` info line.\npub fn info(message: \u0026str) {\n    println!(\"{} {}\", \"ℹ️\".cyan(), message);\n}\n\n/// Print a dimmed horizontal rule (60 dashes).\npub fn separator() {\n    println!(\"{}\", \"─\".repeat(60).dimmed());\n}\n\n#[cfg(test)]\nmod tests {\n    use super::*;\n\n    #[test]\n    fn test_progress_bar_length() {\n        let pb = progress_bar(100, \"Testing\");\n        assert_eq!(pb.length(), Some(100));\n    }\n\n    #[test]\n    fn test_progress_bar_zero() {\n        // Edge case — a bar with zero steps should not panic.\n        let pb = progress_bar(0, \"Empty\");\n        assert_eq!(pb.length(), Some(0));\n    }\n}\n","traces":[{"line":25,"address":[5673974,5673632,5673980],"length":1,"stats":{"Line":1}},{"line":26,"address":[5673682],"length":1,"stats":{"Line":1}},{"line":27,"address":[5673861],"length":1,"stats":{"Line":1}},{"line":28,"address":[5673696],"length":1,"stats":{"Line":1}},{"line":29,"address":[5673756],"length":1,"stats":{"Line":1}},{"line":30,"address":[5673795],"length":1,"stats":{"Line":1}},{"line":31,"address":[5673825],"length":1,"stats":{"Line":1}},{"line":33,"address":[5673891],"length":1,"stats":{"Line":1}},{"line":34,"address":[5673940],"length":1,"stats":{"Line":1}},{"line":46,"address":[5675088,5677340,5676931],"length":1,"stats":{"Line":0}},{"line":47,"address":[5675137],"length":1,"stats":{"Line":0}},{"line":48,"address":[5675149],"length":1,"stats":{"Line":0}},{"line":50,"address":[5675189,5675260],"length":1,"stats":{"Line":0}},{"line":51,"address":[5675953,5675641],"length":1,"stats":{"Line":0}},{"line":56,"address":[5676165],"length":1,"stats":{"Line":0}},{"line":57,"address":[5676265,5676204],"length":1,"stats":{"Line":0}},{"line":58,"address":[5676672,5676753],"length":1,"stats":{"Line":0}},{"line":65,"address":[5676219,5676937],"length":1,"stats":{"Line":0}},{"line":69,"address":[5674798,5674544,5674792],"length":1,"stats":{"Line":0}},{"line":70,"address":[5674561],"length":1,"stats":{"Line":0}},{"line":74,"address":[5674272,5674520,5674526],"length":1,"stats":{"Line":0}},{"line":75,"address":[5674289],"length":1,"stats":{"Line":0}},{"line":79,"address":[5675064,5674816,5675070],"length":1,"stats":{"Line":0}},{"line":80,"address":[5674833],"length":1,"stats":{"Line":0}},{"line":84,"address":[5674254,5674000,5674248],"length":1,"stats":{"Line":0}},{"line":85,"address":[5674017],"length":1,"stats":{"Line":0}},{"line":89,"address":[5677662,5677656,5677360],"length":1,"stats":{"Line":0}},{"line":90,"address":[5677367],"length":1,"stats":{"Line":0}}],"covered":9,"coverable":28}]};
        var previousData = null;
    </script>
    <script crossorigin>/** @license React v16.13.1
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */
'use strict';(function(d,r){"object"===typeof exports&&"undefined"!==typeof module?r(exports):"function"===typeof define&&define.amd?define(["exports"],r):(d=d||self,r(d.React={}))})(this,function(d){function r(a){for(var b="https://reactjs.org/docs/error-decoder.html?invariant="+a,c=1;c<arguments.length;c++)b+="&args[]="+encodeURIComponent(arguments[c]);return"Minified React error #"+a+"; visit "+b+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}
function w(a,b,c){this.props=a;this.context=b;this.refs=ba;this.updater=c||ca}function da(){}function L(a,b,c){this.props=a;this.context=b;this.refs=ba;this.updater=c||ca}function ea(a,b,c){var g,e={},fa=null,d=null;if(null!=b)for(g in void 0!==b.ref&&(d=b.ref),void 0!==b.key&&(fa=""+b.key),b)ha.call(b,g)&&!ia.hasOwnProperty(g)&&(e[g]=b[g]);var h=arguments.length-2;if(1===h)e.children=c;else if(1<h){for(var k=Array(h),f=0;f<h;f++)k[f]=arguments[f+2];e.children=k}if(a&&a.defaultProps)for(g in h=a.defaultProps,
h)void 0===e[g]&&(e[g]=h[g]);return{$$typeof:x,type:a,key:fa,ref:d,props:e,_owner:M.current}}function va(a,b){return{$$typeof:x,type:a.type,key:b,ref:a.ref,props:a.props,_owner:a._owner}}function N(a){return"object"===typeof a&&null!==a&&a.$$typeof===x}function wa(a){var b={"=":"=0",":":"=2"};return"$"+(""+a).replace(/[=:]/g,function(a){return b[a]})}function ja(a,b,c,g){if(C.length){var e=C.pop();e.result=a;e.keyPrefix=b;e.func=c;e.context=g;e.count=0;return e}return{result:a,keyPrefix:b,func:c,
context:g,count:0}}function ka(a){a.result=null;a.keyPrefix=null;a.func=null;a.context=null;a.count=0;10>C.length&&C.push(a)}function O(a,b,c,g){var e=typeof a;if("undefined"===e||"boolean"===e)a=null;var d=!1;if(null===a)d=!0;else switch(e){case "string":case "number":d=!0;break;case "object":switch(a.$$typeof){case x:case xa:d=!0}}if(d)return c(g,a,""===b?"."+P(a,0):b),1;d=0;b=""===b?".":b+":";if(Array.isArray(a))for(var f=0;f<a.length;f++){e=a[f];var h=b+P(e,f);d+=O(e,h,c,g)}else if(null===a||
"object"!==typeof a?h=null:(h=la&&a[la]||a["@@iterator"],h="function"===typeof h?h:null),"function"===typeof h)for(a=h.call(a),f=0;!(e=a.next()).done;)e=e.value,h=b+P(e,f++),d+=O(e,h,c,g);else if("object"===e)throw c=""+a,Error(r(31,"[object Object]"===c?"object with keys {"+Object.keys(a).join(", ")+"}":c,""));return d}function Q(a,b,c){return null==a?0:O(a,"",b,c)}function P(a,b){return"object"===typeof a&&null!==a&&null!=a.key?wa(a.key):b.toString(36)}function ya(a,b,c){a.func.call(a.context,b,
a.count++)}function za(a,b,c){var g=a.result,e=a.keyPrefix;a=a.func.call(a.context,b,a.count++);Array.isArray(a)?R(a,g,c,function(a){return a}):null!=a&&(N(a)&&(a=va(a,e+(!a.key||b&&b.key===a.key?"":(""+a.key).replace(ma,"$&/")+"/")+c)),g.push(a))}function R(a,b,c,g,e){var d="";null!=c&&(d=(""+c).replace(ma,"$&/")+"/");b=ja(b,d,g,e);Q(a,za,b);ka(b)}function t(){var a=na.current;if(null===a)throw Error(r(321));return a}function S(a,b){var c=a.length;a.push(b);a:for(;;){var g=c-1>>>1,e=a[g];if(void 0!==
e&&0<D(e,b))a[g]=b,a[c]=e,c=g;else break a}}function n(a){a=a[0];return void 0===a?null:a}function E(a){var b=a[0];if(void 0!==b){var c=a.pop();if(c!==b){a[0]=c;a:for(var g=0,e=a.length;g<e;){var d=2*(g+1)-1,f=a[d],h=d+1,k=a[h];if(void 0!==f&&0>D(f,c))void 0!==k&&0>D(k,f)?(a[g]=k,a[h]=c,g=h):(a[g]=f,a[d]=c,g=d);else if(void 0!==k&&0>D(k,c))a[g]=k,a[h]=c,g=h;else break a}}return b}return null}function D(a,b){var c=a.sortIndex-b.sortIndex;return 0!==c?c:a.id-b.id}function F(a){for(var b=n(u);null!==
b;){if(null===b.callback)E(u);else if(b.startTime<=a)E(u),b.sortIndex=b.expirationTime,S(p,b);else break;b=n(u)}}function T(a){y=!1;F(a);if(!v)if(null!==n(p))v=!0,z(U);else{var b=n(u);null!==b&&G(T,b.startTime-a)}}function U(a,b){v=!1;y&&(y=!1,V());H=!0;var c=m;try{F(b);for(l=n(p);null!==l&&(!(l.expirationTime>b)||a&&!W());){var g=l.callback;if(null!==g){l.callback=null;m=l.priorityLevel;var e=g(l.expirationTime<=b);b=q();"function"===typeof e?l.callback=e:l===n(p)&&E(p);F(b)}else E(p);l=n(p)}if(null!==
l)var d=!0;else{var f=n(u);null!==f&&G(T,f.startTime-b);d=!1}return d}finally{l=null,m=c,H=!1}}function oa(a){switch(a){case 1:return-1;case 2:return 250;case 5:return 1073741823;case 4:return 1E4;default:return 5E3}}var f="function"===typeof Symbol&&Symbol.for,x=f?Symbol.for("react.element"):60103,xa=f?Symbol.for("react.portal"):60106,Aa=f?Symbol.for("react.fragment"):60107,Ba=f?Symbol.for("react.strict_mode"):60108,Ca=f?Symbol.for("react.profiler"):60114,Da=f?Symbol.for("react.provider"):60109,
Ea=f?Symbol.for("react.context"):60110,Fa=f?Symbol.for("react.forward_ref"):60112,Ga=f?Symbol.for("react.suspense"):60113,Ha=f?Symbol.for("react.memo"):60115,Ia=f?Symbol.for("react.lazy"):60116,la="function"===typeof Symbol&&Symbol.iterator,pa=Object.getOwnPropertySymbols,Ja=Object.prototype.hasOwnProperty,Ka=Object.prototype.propertyIsEnumerable,I=function(){try{if(!Object.assign)return!1;var a=new String("abc");a[5]="de";if("5"===Object.getOwnPropertyNames(a)[0])return!1;var b={};for(a=0;10>a;a++)b["_"+
String.fromCharCode(a)]=a;if("0123456789"!==Object.getOwnPropertyNames(b).map(function(a){return b[a]}).join(""))return!1;var c={};"abcdefghijklmnopqrst".split("").forEach(function(a){c[a]=a});return"abcdefghijklmnopqrst"!==Object.keys(Object.assign({},c)).join("")?!1:!0}catch(g){return!1}}()?Object.assign:function(a,b){if(null===a||void 0===a)throw new TypeError("Object.assign cannot be called with null or undefined");var c=Object(a);for(var g,e=1;e<arguments.length;e++){var d=Object(arguments[e]);
for(var f in d)Ja.call(d,f)&&(c[f]=d[f]);if(pa){g=pa(d);for(var h=0;h<g.length;h++)Ka.call(d,g[h])&&(c[g[h]]=d[g[h]])}}return c},ca={isMounted:function(a){return!1},enqueueForceUpdate:function(a,b,c){},enqueueReplaceState:function(a,b,c,d){},enqueueSetState:function(a,b,c,d){}},ba={};w.prototype.isReactComponent={};w.prototype.setState=function(a,b){if("object"!==typeof a&&"function"!==typeof a&&null!=a)throw Error(r(85));this.updater.enqueueSetState(this,a,b,"setState")};w.prototype.forceUpdate=
function(a){this.updater.enqueueForceUpdate(this,a,"forceUpdate")};da.prototype=w.prototype;f=L.prototype=new da;f.constructor=L;I(f,w.prototype);f.isPureReactComponent=!0;var M={current:null},ha=Object.prototype.hasOwnProperty,ia={key:!0,ref:!0,__self:!0,__source:!0},ma=/\/+/g,C=[],na={current:null},X;if("undefined"===typeof window||"function"!==typeof MessageChannel){var A=null,qa=null,ra=function(){if(null!==A)try{var a=q();A(!0,a);A=null}catch(b){throw setTimeout(ra,0),b;}},La=Date.now();var q=
function(){return Date.now()-La};var z=function(a){null!==A?setTimeout(z,0,a):(A=a,setTimeout(ra,0))};var G=function(a,b){qa=setTimeout(a,b)};var V=function(){clearTimeout(qa)};var W=function(){return!1};f=X=function(){}}else{var Y=window.performance,sa=window.Date,Ma=window.setTimeout,Na=window.clearTimeout;"undefined"!==typeof console&&(f=window.cancelAnimationFrame,"function"!==typeof window.requestAnimationFrame&&console.error("This browser doesn't support requestAnimationFrame. Make sure that you load a polyfill in older browsers. https://fb.me/react-polyfills"),
"function"!==typeof f&&console.error("This browser doesn't support cancelAnimationFrame. Make sure that you load a polyfill in older browsers. https://fb.me/react-polyfills"));if("object"===typeof Y&&"function"===typeof Y.now)q=function(){return Y.now()};else{var Oa=sa.now();q=function(){return sa.now()-Oa}}var J=!1,K=null,Z=-1,ta=5,ua=0;W=function(){return q()>=ua};f=function(){};X=function(a){0>a||125<a?console.error("forceFrameRate takes a positive int between 0 and 125, forcing framerates higher than 125 fps is not unsupported"):
ta=0<a?Math.floor(1E3/a):5};var B=new MessageChannel,aa=B.port2;B.port1.onmessage=function(){if(null!==K){var a=q();ua=a+ta;try{K(!0,a)?aa.postMessage(null):(J=!1,K=null)}catch(b){throw aa.postMessage(null),b;}}else J=!1};z=function(a){K=a;J||(J=!0,aa.postMessage(null))};G=function(a,b){Z=Ma(function(){a(q())},b)};V=function(){Na(Z);Z=-1}}var p=[],u=[],Pa=1,l=null,m=3,H=!1,v=!1,y=!1,Qa=0;B={ReactCurrentDispatcher:na,ReactCurrentOwner:M,IsSomeRendererActing:{current:!1},assign:I};I(B,{Scheduler:{__proto__:null,
unstable_ImmediatePriority:1,unstable_UserBlockingPriority:2,unstable_NormalPriority:3,unstable_IdlePriority:5,unstable_LowPriority:4,unstable_runWithPriority:function(a,b){switch(a){case 1:case 2:case 3:case 4:case 5:break;default:a=3}var c=m;m=a;try{return b()}finally{m=c}},unstable_next:function(a){switch(m){case 1:case 2:case 3:var b=3;break;default:b=m}var c=m;m=b;try{return a()}finally{m=c}},unstable_scheduleCallback:function(a,b,c){var d=q();if("object"===typeof c&&null!==c){var e=c.delay;
e="number"===typeof e&&0<e?d+e:d;c="number"===typeof c.timeout?c.timeout:oa(a)}else c=oa(a),e=d;c=e+c;a={id:Pa++,callback:b,priorityLevel:a,startTime:e,expirationTime:c,sortIndex:-1};e>d?(a.sortIndex=e,S(u,a),null===n(p)&&a===n(u)&&(y?V():y=!0,G(T,e-d))):(a.sortIndex=c,S(p,a),v||H||(v=!0,z(U)));return a},unstable_cancelCallback:function(a){a.callback=null},unstable_wrapCallback:function(a){var b=m;return function(){var c=m;m=b;try{return a.apply(this,arguments)}finally{m=c}}},unstable_getCurrentPriorityLevel:function(){return m},
unstable_shouldYield:function(){var a=q();F(a);var b=n(p);return b!==l&&null!==l&&null!==b&&null!==b.callback&&b.startTime<=a&&b.expirationTime<l.expirationTime||W()},unstable_requestPaint:f,unstable_continueExecution:function(){v||H||(v=!0,z(U))},unstable_pauseExecution:function(){},unstable_getFirstCallbackNode:function(){return n(p)},get unstable_now(){return q},get unstable_forceFrameRate(){return X},unstable_Profiling:null},SchedulerTracing:{__proto__:null,__interactionsRef:null,__subscriberRef:null,
unstable_clear:function(a){return a()},unstable_getCurrent:function(){return null},unstable_getThreadID:function(){return++Qa},unstable_trace:function(a,b,c){return c()},unstable_wrap:function(a){return a},unstable_subscribe:function(a){},unstable_unsubscribe:function(a){}}});d.Children={map:function(a,b,c){if(null==a)return a;var d=[];R(a,d,null,b,c);return d},forEach:function(a,b,c){if(null==a)return a;b=ja(null,null,b,c);Q(a,ya,b);ka(b)},count:function(a){return Q(a,function(){return null},null)},
toArray:function(a){var b=[];R(a,b,null,function(a){return a});return b},only:function(a){if(!N(a))throw Error(r(143));return a}};d.Component=w;d.Fragment=Aa;d.Profiler=Ca;d.PureComponent=L;d.StrictMode=Ba;d.Suspense=Ga;d.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=B;d.cloneElement=function(a,b,c){if(null===a||void 0===a)throw Error(r(267,a));var d=I({},a.props),e=a.key,f=a.ref,m=a._owner;if(null!=b){void 0!==b.ref&&(f=b.ref,m=M.current);void 0!==b.key&&(e=""+b.key);if(a.type&&a.type.defaultProps)var h=
a.type.defaultProps;for(k in b)ha.call(b,k)&&!ia.hasOwnProperty(k)&&(d[k]=void 0===b[k]&&void 0!==h?h[k]:b[k])}var k=arguments.length-2;if(1===k)d.children=c;else if(1<k){h=Array(k);for(var l=0;l<k;l++)h[l]=arguments[l+2];d.children=h}return{$$typeof:x,type:a.type,key:e,ref:f,props:d,_owner:m}};d.createContext=function(a,b){void 0===b&&(b=null);a={$$typeof:Ea,_calculateChangedBits:b,_currentValue:a,_currentValue2:a,_threadCount:0,Provider:null,Consumer:null};a.Provider={$$typeof:Da,_context:a};return a.Consumer=
a};d.createElement=ea;d.createFactory=function(a){var b=ea.bind(null,a);b.type=a;return b};d.createRef=function(){return{current:null}};d.forwardRef=function(a){return{$$typeof:Fa,render:a}};d.isValidElement=N;d.lazy=function(a){return{$$typeof:Ia,_ctor:a,_status:-1,_result:null}};d.memo=function(a,b){return{$$typeof:Ha,type:a,compare:void 0===b?null:b}};d.useCallback=function(a,b){return t().useCallback(a,b)};d.useContext=function(a,b){return t().useContext(a,b)};d.useDebugValue=function(a,b){};
d.useEffect=function(a,b){return t().useEffect(a,b)};d.useImperativeHandle=function(a,b,c){return t().useImperativeHandle(a,b,c)};d.useLayoutEffect=function(a,b){return t().useLayoutEffect(a,b)};d.useMemo=function(a,b){return t().useMemo(a,b)};d.useReducer=function(a,b,c){return t().useReducer(a,b,c)};d.useRef=function(a){return t().useRef(a)};d.useState=function(a){return t().useState(a)};d.version="16.13.1"});
</script>
    <script crossorigin>/** @license React v16.13.1
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */
/*
 Modernizr 3.0.0pre (Custom Build) | MIT
*/
'use strict';(function(I,ea){"object"===typeof exports&&"undefined"!==typeof module?ea(exports,require("react")):"function"===typeof define&&define.amd?define(["exports","react"],ea):(I=I||self,ea(I.ReactDOM={},I.React))})(this,function(I,ea){function k(a){for(var b="https://reactjs.org/docs/error-decoder.html?invariant="+a,c=1;c<arguments.length;c++)b+="&args[]="+encodeURIComponent(arguments[c]);return"Minified React error #"+a+"; visit "+b+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}
function ji(a,b,c,d,e,f,g,h,m){yb=!1;gc=null;ki.apply(li,arguments)}function mi(a,b,c,d,e,f,g,h,m){ji.apply(this,arguments);if(yb){if(yb){var n=gc;yb=!1;gc=null}else throw Error(k(198));hc||(hc=!0,pd=n)}}function lf(a,b,c){var d=a.type||"unknown-event";a.currentTarget=mf(c);mi(d,b,void 0,a);a.currentTarget=null}function nf(){if(ic)for(var a in cb){var b=cb[a],c=ic.indexOf(a);if(!(-1<c))throw Error(k(96,a));if(!jc[c]){if(!b.extractEvents)throw Error(k(97,a));jc[c]=b;c=b.eventTypes;for(var d in c){var e=
void 0;var f=c[d],g=b,h=d;if(qd.hasOwnProperty(h))throw Error(k(99,h));qd[h]=f;var m=f.phasedRegistrationNames;if(m){for(e in m)m.hasOwnProperty(e)&&of(m[e],g,h);e=!0}else f.registrationName?(of(f.registrationName,g,h),e=!0):e=!1;if(!e)throw Error(k(98,d,a));}}}}function of(a,b,c){if(db[a])throw Error(k(100,a));db[a]=b;rd[a]=b.eventTypes[c].dependencies}function pf(a){var b=!1,c;for(c in a)if(a.hasOwnProperty(c)){var d=a[c];if(!cb.hasOwnProperty(c)||cb[c]!==d){if(cb[c])throw Error(k(102,c));cb[c]=
d;b=!0}}b&&nf()}function qf(a){if(a=rf(a)){if("function"!==typeof sd)throw Error(k(280));var b=a.stateNode;b&&(b=td(b),sd(a.stateNode,a.type,b))}}function sf(a){eb?fb?fb.push(a):fb=[a]:eb=a}function tf(){if(eb){var a=eb,b=fb;fb=eb=null;qf(a);if(b)for(a=0;a<b.length;a++)qf(b[a])}}function ud(){if(null!==eb||null!==fb)vd(),tf()}function uf(a,b,c){if(wd)return a(b,c);wd=!0;try{return vf(a,b,c)}finally{wd=!1,ud()}}function ni(a){if(wf.call(xf,a))return!0;if(wf.call(yf,a))return!1;if(oi.test(a))return xf[a]=
!0;yf[a]=!0;return!1}function pi(a,b,c,d){if(null!==c&&0===c.type)return!1;switch(typeof b){case "function":case "symbol":return!0;case "boolean":if(d)return!1;if(null!==c)return!c.acceptsBooleans;a=a.toLowerCase().slice(0,5);return"data-"!==a&&"aria-"!==a;default:return!1}}function qi(a,b,c,d){if(null===b||"undefined"===typeof b||pi(a,b,c,d))return!0;if(d)return!1;if(null!==c)switch(c.type){case 3:return!b;case 4:return!1===b;case 5:return isNaN(b);case 6:return isNaN(b)||1>b}return!1}function L(a,
b,c,d,e,f){this.acceptsBooleans=2===b||3===b||4===b;this.attributeName=d;this.attributeNamespace=e;this.mustUseProperty=c;this.propertyName=a;this.type=b;this.sanitizeURL=f}function xd(a,b,c,d){var e=E.hasOwnProperty(b)?E[b]:null;var f=null!==e?0===e.type:d?!1:!(2<b.length)||"o"!==b[0]&&"O"!==b[0]||"n"!==b[1]&&"N"!==b[1]?!1:!0;f||(qi(b,c,e,d)&&(c=null),d||null===e?ni(b)&&(null===c?a.removeAttribute(b):a.setAttribute(b,""+c)):e.mustUseProperty?a[e.propertyName]=null===c?3===e.type?!1:"":c:(b=e.attributeName,
d=e.attributeNamespace,null===c?a.removeAttribute(b):(e=e.type,c=3===e||4===e&&!0===c?"":""+c,d?a.setAttributeNS(d,b,c):a.setAttribute(b,c))))}function zb(a){if(null===a||"object"!==typeof a)return null;a=zf&&a[zf]||a["@@iterator"];return"function"===typeof a?a:null}function ri(a){if(-1===a._status){a._status=0;var b=a._ctor;b=b();a._result=b;b.then(function(b){0===a._status&&(b=b.default,a._status=1,a._result=b)},function(b){0===a._status&&(a._status=2,a._result=b)})}}function na(a){if(null==a)return null;
if("function"===typeof a)return a.displayName||a.name||null;if("string"===typeof a)return a;switch(a){case Ma:return"Fragment";case gb:return"Portal";case kc:return"Profiler";case Af:return"StrictMode";case lc:return"Suspense";case yd:return"SuspenseList"}if("object"===typeof a)switch(a.$$typeof){case Bf:return"Context.Consumer";case Cf:return"Context.Provider";case zd:var b=a.render;b=b.displayName||b.name||"";return a.displayName||(""!==b?"ForwardRef("+b+")":"ForwardRef");case Ad:return na(a.type);
case Df:return na(a.render);case Ef:if(a=1===a._status?a._result:null)return na(a)}return null}function Bd(a){var b="";do{a:switch(a.tag){case 3:case 4:case 6:case 7:case 10:case 9:var c="";break a;default:var d=a._debugOwner,e=a._debugSource,f=na(a.type);c=null;d&&(c=na(d.type));d=f;f="";e?f=" (at "+e.fileName.replace(si,"")+":"+e.lineNumber+")":c&&(f=" (created by "+c+")");c="\n    in "+(d||"Unknown")+f}b+=c;a=a.return}while(a);return b}function va(a){switch(typeof a){case "boolean":case "number":case "object":case "string":case "undefined":return a;
default:return""}}function Ff(a){var b=a.type;return(a=a.nodeName)&&"input"===a.toLowerCase()&&("checkbox"===b||"radio"===b)}function ti(a){var b=Ff(a)?"checked":"value",c=Object.getOwnPropertyDescriptor(a.constructor.prototype,b),d=""+a[b];if(!a.hasOwnProperty(b)&&"undefined"!==typeof c&&"function"===typeof c.get&&"function"===typeof c.set){var e=c.get,f=c.set;Object.defineProperty(a,b,{configurable:!0,get:function(){return e.call(this)},set:function(a){d=""+a;f.call(this,a)}});Object.defineProperty(a,
b,{enumerable:c.enumerable});return{getValue:function(){return d},setValue:function(a){d=""+a},stopTracking:function(){a._valueTracker=null;delete a[b]}}}}function mc(a){a._valueTracker||(a._valueTracker=ti(a))}function Gf(a){if(!a)return!1;var b=a._valueTracker;if(!b)return!0;var c=b.getValue();var d="";a&&(d=Ff(a)?a.checked?"true":"false":a.value);a=d;return a!==c?(b.setValue(a),!0):!1}function Cd(a,b){var c=b.checked;return M({},b,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=
c?c:a._wrapperState.initialChecked})}function Hf(a,b){var c=null==b.defaultValue?"":b.defaultValue,d=null!=b.checked?b.checked:b.defaultChecked;c=va(null!=b.value?b.value:c);a._wrapperState={initialChecked:d,initialValue:c,controlled:"checkbox"===b.type||"radio"===b.type?null!=b.checked:null!=b.value}}function If(a,b){b=b.checked;null!=b&&xd(a,"checked",b,!1)}function Dd(a,b){If(a,b);var c=va(b.value),d=b.type;if(null!=c)if("number"===d){if(0===c&&""===a.value||a.value!=c)a.value=""+c}else a.value!==
""+c&&(a.value=""+c);else if("submit"===d||"reset"===d){a.removeAttribute("value");return}b.hasOwnProperty("value")?Ed(a,b.type,c):b.hasOwnProperty("defaultValue")&&Ed(a,b.type,va(b.defaultValue));null==b.checked&&null!=b.defaultChecked&&(a.defaultChecked=!!b.defaultChecked)}function Jf(a,b,c){if(b.hasOwnProperty("value")||b.hasOwnProperty("defaultValue")){var d=b.type;if(!("submit"!==d&&"reset"!==d||void 0!==b.value&&null!==b.value))return;b=""+a._wrapperState.initialValue;c||b===a.value||(a.value=
b);a.defaultValue=b}c=a.name;""!==c&&(a.name="");a.defaultChecked=!!a._wrapperState.initialChecked;""!==c&&(a.name=c)}function Ed(a,b,c){if("number"!==b||a.ownerDocument.activeElement!==a)null==c?a.defaultValue=""+a._wrapperState.initialValue:a.defaultValue!==""+c&&(a.defaultValue=""+c)}function ui(a){var b="";ea.Children.forEach(a,function(a){null!=a&&(b+=a)});return b}function Fd(a,b){a=M({children:void 0},b);if(b=ui(b.children))a.children=b;return a}function hb(a,b,c,d){a=a.options;if(b){b={};
for(var e=0;e<c.length;e++)b["$"+c[e]]=!0;for(c=0;c<a.length;c++)e=b.hasOwnProperty("$"+a[c].value),a[c].selected!==e&&(a[c].selected=e),e&&d&&(a[c].defaultSelected=!0)}else{c=""+va(c);b=null;for(e=0;e<a.length;e++){if(a[e].value===c){a[e].selected=!0;d&&(a[e].defaultSelected=!0);return}null!==b||a[e].disabled||(b=a[e])}null!==b&&(b.selected=!0)}}function Gd(a,b){if(null!=b.dangerouslySetInnerHTML)throw Error(k(91));return M({},b,{value:void 0,defaultValue:void 0,children:""+a._wrapperState.initialValue})}
function Kf(a,b){var c=b.value;if(null==c){c=b.children;b=b.defaultValue;if(null!=c){if(null!=b)throw Error(k(92));if(Array.isArray(c)){if(!(1>=c.length))throw Error(k(93));c=c[0]}b=c}null==b&&(b="");c=b}a._wrapperState={initialValue:va(c)}}function Lf(a,b){var c=va(b.value),d=va(b.defaultValue);null!=c&&(c=""+c,c!==a.value&&(a.value=c),null==b.defaultValue&&a.defaultValue!==c&&(a.defaultValue=c));null!=d&&(a.defaultValue=""+d)}function Mf(a,b){b=a.textContent;b===a._wrapperState.initialValue&&""!==
b&&null!==b&&(a.value=b)}function Nf(a){switch(a){case "svg":return"http://www.w3.org/2000/svg";case "math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Hd(a,b){return null==a||"http://www.w3.org/1999/xhtml"===a?Nf(b):"http://www.w3.org/2000/svg"===a&&"foreignObject"===b?"http://www.w3.org/1999/xhtml":a}function nc(a,b){var c={};c[a.toLowerCase()]=b.toLowerCase();c["Webkit"+a]="webkit"+b;c["Moz"+a]="moz"+b;return c}function oc(a){if(Id[a])return Id[a];
if(!ib[a])return a;var b=ib[a],c;for(c in b)if(b.hasOwnProperty(c)&&c in Of)return Id[a]=b[c];return a}function Jd(a){var b=Pf.get(a);void 0===b&&(b=new Map,Pf.set(a,b));return b}function Na(a){var b=a,c=a;if(a.alternate)for(;b.return;)b=b.return;else{a=b;do b=a,0!==(b.effectTag&1026)&&(c=b.return),a=b.return;while(a)}return 3===b.tag?c:null}function Qf(a){if(13===a.tag){var b=a.memoizedState;null===b&&(a=a.alternate,null!==a&&(b=a.memoizedState));if(null!==b)return b.dehydrated}return null}function Rf(a){if(Na(a)!==
a)throw Error(k(188));}function vi(a){var b=a.alternate;if(!b){b=Na(a);if(null===b)throw Error(k(188));return b!==a?null:a}for(var c=a,d=b;;){var e=c.return;if(null===e)break;var f=e.alternate;if(null===f){d=e.return;if(null!==d){c=d;continue}break}if(e.child===f.child){for(f=e.child;f;){if(f===c)return Rf(e),a;if(f===d)return Rf(e),b;f=f.sibling}throw Error(k(188));}if(c.return!==d.return)c=e,d=f;else{for(var g=!1,h=e.child;h;){if(h===c){g=!0;c=e;d=f;break}if(h===d){g=!0;d=e;c=f;break}h=h.sibling}if(!g){for(h=
f.child;h;){if(h===c){g=!0;c=f;d=e;break}if(h===d){g=!0;d=f;c=e;break}h=h.sibling}if(!g)throw Error(k(189));}}if(c.alternate!==d)throw Error(k(190));}if(3!==c.tag)throw Error(k(188));return c.stateNode.current===c?a:b}function Sf(a){a=vi(a);if(!a)return null;for(var b=a;;){if(5===b.tag||6===b.tag)return b;if(b.child)b.child.return=b,b=b.child;else{if(b===a)break;for(;!b.sibling;){if(!b.return||b.return===a)return null;b=b.return}b.sibling.return=b.return;b=b.sibling}}return null}function jb(a,b){if(null==
b)throw Error(k(30));if(null==a)return b;if(Array.isArray(a)){if(Array.isArray(b))return a.push.apply(a,b),a;a.push(b);return a}return Array.isArray(b)?[a].concat(b):[a,b]}function Kd(a,b,c){Array.isArray(a)?a.forEach(b,c):a&&b.call(c,a)}function pc(a){null!==a&&(Ab=jb(Ab,a));a=Ab;Ab=null;if(a){Kd(a,wi);if(Ab)throw Error(k(95));if(hc)throw a=pd,hc=!1,pd=null,a;}}function Ld(a){a=a.target||a.srcElement||window;a.correspondingUseElement&&(a=a.correspondingUseElement);return 3===a.nodeType?a.parentNode:
a}function Tf(a){if(!wa)return!1;a="on"+a;var b=a in document;b||(b=document.createElement("div"),b.setAttribute(a,"return;"),b="function"===typeof b[a]);return b}function Uf(a){a.topLevelType=null;a.nativeEvent=null;a.targetInst=null;a.ancestors.length=0;10>qc.length&&qc.push(a)}function Vf(a,b,c,d){if(qc.length){var e=qc.pop();e.topLevelType=a;e.eventSystemFlags=d;e.nativeEvent=b;e.targetInst=c;return e}return{topLevelType:a,eventSystemFlags:d,nativeEvent:b,targetInst:c,ancestors:[]}}function Wf(a){var b=
a.targetInst,c=b;do{if(!c){a.ancestors.push(c);break}var d=c;if(3===d.tag)d=d.stateNode.containerInfo;else{for(;d.return;)d=d.return;d=3!==d.tag?null:d.stateNode.containerInfo}if(!d)break;b=c.tag;5!==b&&6!==b||a.ancestors.push(c);c=Bb(d)}while(c);for(c=0;c<a.ancestors.length;c++){b=a.ancestors[c];var e=Ld(a.nativeEvent);d=a.topLevelType;var f=a.nativeEvent,g=a.eventSystemFlags;0===c&&(g|=64);for(var h=null,m=0;m<jc.length;m++){var n=jc[m];n&&(n=n.extractEvents(d,b,f,e,g))&&(h=jb(h,n))}pc(h)}}function Md(a,
b,c){if(!c.has(a)){switch(a){case "scroll":Cb(b,"scroll",!0);break;case "focus":case "blur":Cb(b,"focus",!0);Cb(b,"blur",!0);c.set("blur",null);c.set("focus",null);break;case "cancel":case "close":Tf(a)&&Cb(b,a,!0);break;case "invalid":case "submit":case "reset":break;default:-1===Db.indexOf(a)&&w(a,b)}c.set(a,null)}}function xi(a,b){var c=Jd(b);Nd.forEach(function(a){Md(a,b,c)});yi.forEach(function(a){Md(a,b,c)})}function Od(a,b,c,d,e){return{blockedOn:a,topLevelType:b,eventSystemFlags:c|32,nativeEvent:e,
container:d}}function Xf(a,b){switch(a){case "focus":case "blur":xa=null;break;case "dragenter":case "dragleave":ya=null;break;case "mouseover":case "mouseout":za=null;break;case "pointerover":case "pointerout":Eb.delete(b.pointerId);break;case "gotpointercapture":case "lostpointercapture":Fb.delete(b.pointerId)}}function Gb(a,b,c,d,e,f){if(null===a||a.nativeEvent!==f)return a=Od(b,c,d,e,f),null!==b&&(b=Hb(b),null!==b&&Yf(b)),a;a.eventSystemFlags|=d;return a}function zi(a,b,c,d,e){switch(b){case "focus":return xa=
Gb(xa,a,b,c,d,e),!0;case "dragenter":return ya=Gb(ya,a,b,c,d,e),!0;case "mouseover":return za=Gb(za,a,b,c,d,e),!0;case "pointerover":var f=e.pointerId;Eb.set(f,Gb(Eb.get(f)||null,a,b,c,d,e));return!0;case "gotpointercapture":return f=e.pointerId,Fb.set(f,Gb(Fb.get(f)||null,a,b,c,d,e)),!0}return!1}function Ai(a){var b=Bb(a.target);if(null!==b){var c=Na(b);if(null!==c)if(b=c.tag,13===b){if(b=Qf(c),null!==b){a.blockedOn=b;Pd(a.priority,function(){Bi(c)});return}}else if(3===b&&c.stateNode.hydrate){a.blockedOn=
3===c.tag?c.stateNode.containerInfo:null;return}}a.blockedOn=null}function rc(a){if(null!==a.blockedOn)return!1;var b=Qd(a.topLevelType,a.eventSystemFlags,a.container,a.nativeEvent);if(null!==b){var c=Hb(b);null!==c&&Yf(c);a.blockedOn=b;return!1}return!0}function Zf(a,b,c){rc(a)&&c.delete(b)}function Ci(){for(Rd=!1;0<fa.length;){var a=fa[0];if(null!==a.blockedOn){a=Hb(a.blockedOn);null!==a&&Di(a);break}var b=Qd(a.topLevelType,a.eventSystemFlags,a.container,a.nativeEvent);null!==b?a.blockedOn=b:fa.shift()}null!==
xa&&rc(xa)&&(xa=null);null!==ya&&rc(ya)&&(ya=null);null!==za&&rc(za)&&(za=null);Eb.forEach(Zf);Fb.forEach(Zf)}function Ib(a,b){a.blockedOn===b&&(a.blockedOn=null,Rd||(Rd=!0,$f(ag,Ci)))}function bg(a){if(0<fa.length){Ib(fa[0],a);for(var b=1;b<fa.length;b++){var c=fa[b];c.blockedOn===a&&(c.blockedOn=null)}}null!==xa&&Ib(xa,a);null!==ya&&Ib(ya,a);null!==za&&Ib(za,a);b=function(b){return Ib(b,a)};Eb.forEach(b);Fb.forEach(b);for(b=0;b<Jb.length;b++)c=Jb[b],c.blockedOn===a&&(c.blockedOn=null);for(;0<Jb.length&&
(b=Jb[0],null===b.blockedOn);)Ai(b),null===b.blockedOn&&Jb.shift()}function Sd(a,b){for(var c=0;c<a.length;c+=2){var d=a[c],e=a[c+1],f="on"+(e[0].toUpperCase()+e.slice(1));f={phasedRegistrationNames:{bubbled:f,captured:f+"Capture"},dependencies:[d],eventPriority:b};Td.set(d,b);cg.set(d,f);dg[e]=f}}function w(a,b){Cb(b,a,!1)}function Cb(a,b,c){var d=Td.get(b);switch(void 0===d?2:d){case 0:d=Ei.bind(null,b,1,a);break;case 1:d=Fi.bind(null,b,1,a);break;default:d=sc.bind(null,b,1,a)}c?a.addEventListener(b,
d,!0):a.addEventListener(b,d,!1)}function Ei(a,b,c,d){Oa||vd();var e=sc,f=Oa;Oa=!0;try{eg(e,a,b,c,d)}finally{(Oa=f)||ud()}}function Fi(a,b,c,d){Gi(Hi,sc.bind(null,a,b,c,d))}function sc(a,b,c,d){if(tc)if(0<fa.length&&-1<Nd.indexOf(a))a=Od(null,a,b,c,d),fa.push(a);else{var e=Qd(a,b,c,d);if(null===e)Xf(a,d);else if(-1<Nd.indexOf(a))a=Od(e,a,b,c,d),fa.push(a);else if(!zi(e,a,b,c,d)){Xf(a,d);a=Vf(a,d,null,b);try{uf(Wf,a)}finally{Uf(a)}}}}function Qd(a,b,c,d){c=Ld(d);c=Bb(c);if(null!==c){var e=Na(c);if(null===
e)c=null;else{var f=e.tag;if(13===f){c=Qf(e);if(null!==c)return c;c=null}else if(3===f){if(e.stateNode.hydrate)return 3===e.tag?e.stateNode.containerInfo:null;c=null}else e!==c&&(c=null)}}a=Vf(a,d,c,b);try{uf(Wf,a)}finally{Uf(a)}return null}function fg(a,b,c){return null==b||"boolean"===typeof b||""===b?"":c||"number"!==typeof b||0===b||Kb.hasOwnProperty(a)&&Kb[a]?(""+b).trim():b+"px"}function gg(a,b){a=a.style;for(var c in b)if(b.hasOwnProperty(c)){var d=0===c.indexOf("--"),e=fg(c,b[c],d);"float"===
c&&(c="cssFloat");d?a.setProperty(c,e):a[c]=e}}function Ud(a,b){if(b){if(Ii[a]&&(null!=b.children||null!=b.dangerouslySetInnerHTML))throw Error(k(137,a,""));if(null!=b.dangerouslySetInnerHTML){if(null!=b.children)throw Error(k(60));if(!("object"===typeof b.dangerouslySetInnerHTML&&"__html"in b.dangerouslySetInnerHTML))throw Error(k(61));}if(null!=b.style&&"object"!==typeof b.style)throw Error(k(62,""));}}function Vd(a,b){if(-1===a.indexOf("-"))return"string"===typeof b.is;switch(a){case "annotation-xml":case "color-profile":case "font-face":case "font-face-src":case "font-face-uri":case "font-face-format":case "font-face-name":case "missing-glyph":return!1;
default:return!0}}function oa(a,b){a=9===a.nodeType||11===a.nodeType?a:a.ownerDocument;var c=Jd(a);b=rd[b];for(var d=0;d<b.length;d++)Md(b[d],a,c)}function uc(){}function Wd(a){a=a||("undefined"!==typeof document?document:void 0);if("undefined"===typeof a)return null;try{return a.activeElement||a.body}catch(b){return a.body}}function hg(a){for(;a&&a.firstChild;)a=a.firstChild;return a}function ig(a,b){var c=hg(a);a=0;for(var d;c;){if(3===c.nodeType){d=a+c.textContent.length;if(a<=b&&d>=b)return{node:c,
offset:b-a};a=d}a:{for(;c;){if(c.nextSibling){c=c.nextSibling;break a}c=c.parentNode}c=void 0}c=hg(c)}}function jg(a,b){return a&&b?a===b?!0:a&&3===a.nodeType?!1:b&&3===b.nodeType?jg(a,b.parentNode):"contains"in a?a.contains(b):a.compareDocumentPosition?!!(a.compareDocumentPosition(b)&16):!1:!1}function kg(){for(var a=window,b=Wd();b instanceof a.HTMLIFrameElement;){try{var c="string"===typeof b.contentWindow.location.href}catch(d){c=!1}if(c)a=b.contentWindow;else break;b=Wd(a.document)}return b}
function Xd(a){var b=a&&a.nodeName&&a.nodeName.toLowerCase();return b&&("input"===b&&("text"===a.type||"search"===a.type||"tel"===a.type||"url"===a.type||"password"===a.type)||"textarea"===b||"true"===a.contentEditable)}function lg(a,b){switch(a){case "button":case "input":case "select":case "textarea":return!!b.autoFocus}return!1}function Yd(a,b){return"textarea"===a||"option"===a||"noscript"===a||"string"===typeof b.children||"number"===typeof b.children||"object"===typeof b.dangerouslySetInnerHTML&&
null!==b.dangerouslySetInnerHTML&&null!=b.dangerouslySetInnerHTML.__html}function kb(a){for(;null!=a;a=a.nextSibling){var b=a.nodeType;if(1===b||3===b)break}return a}function mg(a){a=a.previousSibling;for(var b=0;a;){if(8===a.nodeType){var c=a.data;if(c===ng||c===Zd||c===$d){if(0===b)return a;b--}else c===og&&b++}a=a.previousSibling}return null}function Bb(a){var b=a[Aa];if(b)return b;for(var c=a.parentNode;c;){if(b=c[Lb]||c[Aa]){c=b.alternate;if(null!==b.child||null!==c&&null!==c.child)for(a=mg(a);null!==
a;){if(c=a[Aa])return c;a=mg(a)}return b}a=c;c=a.parentNode}return null}function Hb(a){a=a[Aa]||a[Lb];return!a||5!==a.tag&&6!==a.tag&&13!==a.tag&&3!==a.tag?null:a}function Pa(a){if(5===a.tag||6===a.tag)return a.stateNode;throw Error(k(33));}function ae(a){return a[vc]||null}function pa(a){do a=a.return;while(a&&5!==a.tag);return a?a:null}function pg(a,b){var c=a.stateNode;if(!c)return null;var d=td(c);if(!d)return null;c=d[b];a:switch(b){case "onClick":case "onClickCapture":case "onDoubleClick":case "onDoubleClickCapture":case "onMouseDown":case "onMouseDownCapture":case "onMouseMove":case "onMouseMoveCapture":case "onMouseUp":case "onMouseUpCapture":case "onMouseEnter":(d=
!d.disabled)||(a=a.type,d=!("button"===a||"input"===a||"select"===a||"textarea"===a));a=!d;break a;default:a=!1}if(a)return null;if(c&&"function"!==typeof c)throw Error(k(231,b,typeof c));return c}function qg(a,b,c){if(b=pg(a,c.dispatchConfig.phasedRegistrationNames[b]))c._dispatchListeners=jb(c._dispatchListeners,b),c._dispatchInstances=jb(c._dispatchInstances,a)}function Ji(a){if(a&&a.dispatchConfig.phasedRegistrationNames){for(var b=a._targetInst,c=[];b;)c.push(b),b=pa(b);for(b=c.length;0<b--;)qg(c[b],
"captured",a);for(b=0;b<c.length;b++)qg(c[b],"bubbled",a)}}function be(a,b,c){a&&c&&c.dispatchConfig.registrationName&&(b=pg(a,c.dispatchConfig.registrationName))&&(c._dispatchListeners=jb(c._dispatchListeners,b),c._dispatchInstances=jb(c._dispatchInstances,a))}function Ki(a){a&&a.dispatchConfig.registrationName&&be(a._targetInst,null,a)}function lb(a){Kd(a,Ji)}function rg(){if(wc)return wc;var a,b=ce,c=b.length,d,e="value"in Ba?Ba.value:Ba.textContent,f=e.length;for(a=0;a<c&&b[a]===e[a];a++);var g=
c-a;for(d=1;d<=g&&b[c-d]===e[f-d];d++);return wc=e.slice(a,1<d?1-d:void 0)}function xc(){return!0}function yc(){return!1}function R(a,b,c,d){this.dispatchConfig=a;this._targetInst=b;this.nativeEvent=c;a=this.constructor.Interface;for(var e in a)a.hasOwnProperty(e)&&((b=a[e])?this[e]=b(c):"target"===e?this.target=d:this[e]=c[e]);this.isDefaultPrevented=(null!=c.defaultPrevented?c.defaultPrevented:!1===c.returnValue)?xc:yc;this.isPropagationStopped=yc;return this}function Li(a,b,c,d){if(this.eventPool.length){var e=
this.eventPool.pop();this.call(e,a,b,c,d);return e}return new this(a,b,c,d)}function Mi(a){if(!(a instanceof this))throw Error(k(279));a.destructor();10>this.eventPool.length&&this.eventPool.push(a)}function sg(a){a.eventPool=[];a.getPooled=Li;a.release=Mi}function tg(a,b){switch(a){case "keyup":return-1!==Ni.indexOf(b.keyCode);case "keydown":return 229!==b.keyCode;case "keypress":case "mousedown":case "blur":return!0;default:return!1}}function ug(a){a=a.detail;return"object"===typeof a&&"data"in
a?a.data:null}function Oi(a,b){switch(a){case "compositionend":return ug(b);case "keypress":if(32!==b.which)return null;vg=!0;return wg;case "textInput":return a=b.data,a===wg&&vg?null:a;default:return null}}function Pi(a,b){if(mb)return"compositionend"===a||!de&&tg(a,b)?(a=rg(),wc=ce=Ba=null,mb=!1,a):null;switch(a){case "paste":return null;case "keypress":if(!(b.ctrlKey||b.altKey||b.metaKey)||b.ctrlKey&&b.altKey){if(b.char&&1<b.char.length)return b.char;if(b.which)return String.fromCharCode(b.which)}return null;
case "compositionend":return xg&&"ko"!==b.locale?null:b.data;default:return null}}function yg(a){var b=a&&a.nodeName&&a.nodeName.toLowerCase();return"input"===b?!!Qi[a.type]:"textarea"===b?!0:!1}function zg(a,b,c){a=R.getPooled(Ag.change,a,b,c);a.type="change";sf(c);lb(a);return a}function Ri(a){pc(a)}function zc(a){var b=Pa(a);if(Gf(b))return a}function Si(a,b){if("change"===a)return b}function Bg(){Mb&&(Mb.detachEvent("onpropertychange",Cg),Nb=Mb=null)}function Cg(a){if("value"===a.propertyName&&
zc(Nb))if(a=zg(Nb,a,Ld(a)),Oa)pc(a);else{Oa=!0;try{ee(Ri,a)}finally{Oa=!1,ud()}}}function Ti(a,b,c){"focus"===a?(Bg(),Mb=b,Nb=c,Mb.attachEvent("onpropertychange",Cg)):"blur"===a&&Bg()}function Ui(a,b){if("selectionchange"===a||"keyup"===a||"keydown"===a)return zc(Nb)}function Vi(a,b){if("click"===a)return zc(b)}function Wi(a,b){if("input"===a||"change"===a)return zc(b)}function Xi(a){var b=this.nativeEvent;return b.getModifierState?b.getModifierState(a):(a=Yi[a])?!!b[a]:!1}function fe(a){return Xi}
function Zi(a,b){return a===b&&(0!==a||1/a===1/b)||a!==a&&b!==b}function Ob(a,b){if(Qa(a,b))return!0;if("object"!==typeof a||null===a||"object"!==typeof b||null===b)return!1;var c=Object.keys(a),d=Object.keys(b);if(c.length!==d.length)return!1;for(d=0;d<c.length;d++)if(!$i.call(b,c[d])||!Qa(a[c[d]],b[c[d]]))return!1;return!0}function Dg(a,b){var c=b.window===b?b.document:9===b.nodeType?b:b.ownerDocument;if(ge||null==nb||nb!==Wd(c))return null;c=nb;"selectionStart"in c&&Xd(c)?c={start:c.selectionStart,
end:c.selectionEnd}:(c=(c.ownerDocument&&c.ownerDocument.defaultView||window).getSelection(),c={anchorNode:c.anchorNode,anchorOffset:c.anchorOffset,focusNode:c.focusNode,focusOffset:c.focusOffset});return Pb&&Ob(Pb,c)?null:(Pb=c,a=R.getPooled(Eg.select,he,a,b),a.type="select",a.target=nb,lb(a),a)}function Ac(a){var b=a.keyCode;"charCode"in a?(a=a.charCode,0===a&&13===b&&(a=13)):a=b;10===a&&(a=13);return 32<=a||13===a?a:0}function q(a,b){0>ob||(a.current=ie[ob],ie[ob]=null,ob--)}function y(a,b,c){ob++;
ie[ob]=a.current;a.current=b}function pb(a,b){var c=a.type.contextTypes;if(!c)return Ca;var d=a.stateNode;if(d&&d.__reactInternalMemoizedUnmaskedChildContext===b)return d.__reactInternalMemoizedMaskedChildContext;var e={},f;for(f in c)e[f]=b[f];d&&(a=a.stateNode,a.__reactInternalMemoizedUnmaskedChildContext=b,a.__reactInternalMemoizedMaskedChildContext=e);return e}function N(a){a=a.childContextTypes;return null!==a&&void 0!==a}function Fg(a,b,c){if(B.current!==Ca)throw Error(k(168));y(B,b);y(G,c)}
function Gg(a,b,c){var d=a.stateNode;a=b.childContextTypes;if("function"!==typeof d.getChildContext)return c;d=d.getChildContext();for(var e in d)if(!(e in a))throw Error(k(108,na(b)||"Unknown",e));return M({},c,{},d)}function Bc(a){a=(a=a.stateNode)&&a.__reactInternalMemoizedMergedChildContext||Ca;Ra=B.current;y(B,a);y(G,G.current);return!0}function Hg(a,b,c){var d=a.stateNode;if(!d)throw Error(k(169));c?(a=Gg(a,b,Ra),d.__reactInternalMemoizedMergedChildContext=a,q(G),q(B),y(B,a)):q(G);y(G,c)}function Cc(){switch(aj()){case Dc:return 99;
case Ig:return 98;case Jg:return 97;case Kg:return 96;case Lg:return 95;default:throw Error(k(332));}}function Mg(a){switch(a){case 99:return Dc;case 98:return Ig;case 97:return Jg;case 96:return Kg;case 95:return Lg;default:throw Error(k(332));}}function Da(a,b){a=Mg(a);return bj(a,b)}function Ng(a,b,c){a=Mg(a);return je(a,b,c)}function Og(a){null===qa?(qa=[a],Ec=je(Dc,Pg)):qa.push(a);return Qg}function ha(){if(null!==Ec){var a=Ec;Ec=null;Rg(a)}Pg()}function Pg(){if(!ke&&null!==qa){ke=!0;var a=0;
try{var b=qa;Da(99,function(){for(;a<b.length;a++){var c=b[a];do c=c(!0);while(null!==c)}});qa=null}catch(c){throw null!==qa&&(qa=qa.slice(a+1)),je(Dc,ha),c;}finally{ke=!1}}}function Fc(a,b,c){c/=10;return 1073741821-(((1073741821-a+b/10)/c|0)+1)*c}function aa(a,b){if(a&&a.defaultProps){b=M({},b);a=a.defaultProps;for(var c in a)void 0===b[c]&&(b[c]=a[c])}return b}function le(){Gc=qb=Hc=null}function me(a){var b=Ic.current;q(Ic);a.type._context._currentValue=b}function Sg(a,b){for(;null!==a;){var c=
a.alternate;if(a.childExpirationTime<b)a.childExpirationTime=b,null!==c&&c.childExpirationTime<b&&(c.childExpirationTime=b);else if(null!==c&&c.childExpirationTime<b)c.childExpirationTime=b;else break;a=a.return}}function rb(a,b){Hc=a;Gc=qb=null;a=a.dependencies;null!==a&&null!==a.firstContext&&(a.expirationTime>=b&&(ia=!0),a.firstContext=null)}function W(a,b){if(Gc!==a&&!1!==b&&0!==b){if("number"!==typeof b||1073741823===b)Gc=a,b=1073741823;b={context:a,observedBits:b,next:null};if(null===qb){if(null===
Hc)throw Error(k(308));qb=b;Hc.dependencies={expirationTime:0,firstContext:b,responders:null}}else qb=qb.next=b}return a._currentValue}function ne(a){a.updateQueue={baseState:a.memoizedState,baseQueue:null,shared:{pending:null},effects:null}}function oe(a,b){a=a.updateQueue;b.updateQueue===a&&(b.updateQueue={baseState:a.baseState,baseQueue:a.baseQueue,shared:a.shared,effects:a.effects})}function Ea(a,b){a={expirationTime:a,suspenseConfig:b,tag:Tg,payload:null,callback:null,next:null};return a.next=
a}function Fa(a,b){a=a.updateQueue;if(null!==a){a=a.shared;var c=a.pending;null===c?b.next=b:(b.next=c.next,c.next=b);a.pending=b}}function Ug(a,b){var c=a.alternate;null!==c&&oe(c,a);a=a.updateQueue;c=a.baseQueue;null===c?(a.baseQueue=b.next=b,b.next=b):(b.next=c.next,c.next=b)}function Qb(a,b,c,d){var e=a.updateQueue;Ga=!1;var f=e.baseQueue,g=e.shared.pending;if(null!==g){if(null!==f){var h=f.next;f.next=g.next;g.next=h}f=g;e.shared.pending=null;h=a.alternate;null!==h&&(h=h.updateQueue,null!==h&&
(h.baseQueue=g))}if(null!==f){h=f.next;var m=e.baseState,n=0,k=null,ba=null,l=null;if(null!==h){var p=h;do{g=p.expirationTime;if(g<d){var t={expirationTime:p.expirationTime,suspenseConfig:p.suspenseConfig,tag:p.tag,payload:p.payload,callback:p.callback,next:null};null===l?(ba=l=t,k=m):l=l.next=t;g>n&&(n=g)}else{null!==l&&(l=l.next={expirationTime:1073741823,suspenseConfig:p.suspenseConfig,tag:p.tag,payload:p.payload,callback:p.callback,next:null});Vg(g,p.suspenseConfig);a:{var q=a,r=p;g=b;t=c;switch(r.tag){case 1:q=
r.payload;if("function"===typeof q){m=q.call(t,m,g);break a}m=q;break a;case 3:q.effectTag=q.effectTag&-4097|64;case Tg:q=r.payload;g="function"===typeof q?q.call(t,m,g):q;if(null===g||void 0===g)break a;m=M({},m,g);break a;case Jc:Ga=!0}}null!==p.callback&&(a.effectTag|=32,g=e.effects,null===g?e.effects=[p]:g.push(p))}p=p.next;if(null===p||p===h)if(g=e.shared.pending,null===g)break;else p=f.next=g.next,g.next=h,e.baseQueue=f=g,e.shared.pending=null}while(1)}null===l?k=m:l.next=ba;e.baseState=k;e.baseQueue=
l;Kc(n);a.expirationTime=n;a.memoizedState=m}}function Wg(a,b,c){a=b.effects;b.effects=null;if(null!==a)for(b=0;b<a.length;b++){var d=a[b],e=d.callback;if(null!==e){d.callback=null;d=e;e=c;if("function"!==typeof d)throw Error(k(191,d));d.call(e)}}}function Lc(a,b,c,d){b=a.memoizedState;c=c(d,b);c=null===c||void 0===c?b:M({},b,c);a.memoizedState=c;0===a.expirationTime&&(a.updateQueue.baseState=c)}function Xg(a,b,c,d,e,f,g){a=a.stateNode;return"function"===typeof a.shouldComponentUpdate?a.shouldComponentUpdate(d,
f,g):b.prototype&&b.prototype.isPureReactComponent?!Ob(c,d)||!Ob(e,f):!0}function Yg(a,b,c){var d=!1,e=Ca;var f=b.contextType;"object"===typeof f&&null!==f?f=W(f):(e=N(b)?Ra:B.current,d=b.contextTypes,f=(d=null!==d&&void 0!==d)?pb(a,e):Ca);b=new b(c,f);a.memoizedState=null!==b.state&&void 0!==b.state?b.state:null;b.updater=Mc;a.stateNode=b;b._reactInternalFiber=a;d&&(a=a.stateNode,a.__reactInternalMemoizedUnmaskedChildContext=e,a.__reactInternalMemoizedMaskedChildContext=f);return b}function Zg(a,
b,c,d){a=b.state;"function"===typeof b.componentWillReceiveProps&&b.componentWillReceiveProps(c,d);"function"===typeof b.UNSAFE_componentWillReceiveProps&&b.UNSAFE_componentWillReceiveProps(c,d);b.state!==a&&Mc.enqueueReplaceState(b,b.state,null)}function pe(a,b,c,d){var e=a.stateNode;e.props=c;e.state=a.memoizedState;e.refs=$g;ne(a);var f=b.contextType;"object"===typeof f&&null!==f?e.context=W(f):(f=N(b)?Ra:B.current,e.context=pb(a,f));Qb(a,c,e,d);e.state=a.memoizedState;f=b.getDerivedStateFromProps;
"function"===typeof f&&(Lc(a,b,f,c),e.state=a.memoizedState);"function"===typeof b.getDerivedStateFromProps||"function"===typeof e.getSnapshotBeforeUpdate||"function"!==typeof e.UNSAFE_componentWillMount&&"function"!==typeof e.componentWillMount||(b=e.state,"function"===typeof e.componentWillMount&&e.componentWillMount(),"function"===typeof e.UNSAFE_componentWillMount&&e.UNSAFE_componentWillMount(),b!==e.state&&Mc.enqueueReplaceState(e,e.state,null),Qb(a,c,e,d),e.state=a.memoizedState);"function"===
typeof e.componentDidMount&&(a.effectTag|=4)}function Rb(a,b,c){a=c.ref;if(null!==a&&"function"!==typeof a&&"object"!==typeof a){if(c._owner){c=c._owner;if(c){if(1!==c.tag)throw Error(k(309));var d=c.stateNode}if(!d)throw Error(k(147,a));var e=""+a;if(null!==b&&null!==b.ref&&"function"===typeof b.ref&&b.ref._stringRef===e)return b.ref;b=function(a){var b=d.refs;b===$g&&(b=d.refs={});null===a?delete b[e]:b[e]=a};b._stringRef=e;return b}if("string"!==typeof a)throw Error(k(284));if(!c._owner)throw Error(k(290,
a));}return a}function Nc(a,b){if("textarea"!==a.type)throw Error(k(31,"[object Object]"===Object.prototype.toString.call(b)?"object with keys {"+Object.keys(b).join(", ")+"}":b,""));}function ah(a){function b(b,c){if(a){var d=b.lastEffect;null!==d?(d.nextEffect=c,b.lastEffect=c):b.firstEffect=b.lastEffect=c;c.nextEffect=null;c.effectTag=8}}function c(c,d){if(!a)return null;for(;null!==d;)b(c,d),d=d.sibling;return null}function d(a,b){for(a=new Map;null!==b;)null!==b.key?a.set(b.key,b):a.set(b.index,
b),b=b.sibling;return a}function e(a,b){a=Sa(a,b);a.index=0;a.sibling=null;return a}function f(b,c,d){b.index=d;if(!a)return c;d=b.alternate;if(null!==d)return d=d.index,d<c?(b.effectTag=2,c):d;b.effectTag=2;return c}function g(b){a&&null===b.alternate&&(b.effectTag=2);return b}function h(a,b,c,d){if(null===b||6!==b.tag)return b=qe(c,a.mode,d),b.return=a,b;b=e(b,c);b.return=a;return b}function m(a,b,c,d){if(null!==b&&b.elementType===c.type)return d=e(b,c.props),d.ref=Rb(a,b,c),d.return=a,d;d=Oc(c.type,
c.key,c.props,null,a.mode,d);d.ref=Rb(a,b,c);d.return=a;return d}function n(a,b,c,d){if(null===b||4!==b.tag||b.stateNode.containerInfo!==c.containerInfo||b.stateNode.implementation!==c.implementation)return b=re(c,a.mode,d),b.return=a,b;b=e(b,c.children||[]);b.return=a;return b}function l(a,b,c,d,f){if(null===b||7!==b.tag)return b=Ha(c,a.mode,d,f),b.return=a,b;b=e(b,c);b.return=a;return b}function ba(a,b,c){if("string"===typeof b||"number"===typeof b)return b=qe(""+b,a.mode,c),b.return=a,b;if("object"===
typeof b&&null!==b){switch(b.$$typeof){case Pc:return c=Oc(b.type,b.key,b.props,null,a.mode,c),c.ref=Rb(a,null,b),c.return=a,c;case gb:return b=re(b,a.mode,c),b.return=a,b}if(Qc(b)||zb(b))return b=Ha(b,a.mode,c,null),b.return=a,b;Nc(a,b)}return null}function p(a,b,c,d){var e=null!==b?b.key:null;if("string"===typeof c||"number"===typeof c)return null!==e?null:h(a,b,""+c,d);if("object"===typeof c&&null!==c){switch(c.$$typeof){case Pc:return c.key===e?c.type===Ma?l(a,b,c.props.children,d,e):m(a,b,c,
d):null;case gb:return c.key===e?n(a,b,c,d):null}if(Qc(c)||zb(c))return null!==e?null:l(a,b,c,d,null);Nc(a,c)}return null}function t(a,b,c,d,e){if("string"===typeof d||"number"===typeof d)return a=a.get(c)||null,h(b,a,""+d,e);if("object"===typeof d&&null!==d){switch(d.$$typeof){case Pc:return a=a.get(null===d.key?c:d.key)||null,d.type===Ma?l(b,a,d.props.children,e,d.key):m(b,a,d,e);case gb:return a=a.get(null===d.key?c:d.key)||null,n(b,a,d,e)}if(Qc(d)||zb(d))return a=a.get(c)||null,l(b,a,d,e,null);
Nc(b,d)}return null}function q(e,g,h,m){for(var n=null,k=null,l=g,r=g=0,C=null;null!==l&&r<h.length;r++){l.index>r?(C=l,l=null):C=l.sibling;var O=p(e,l,h[r],m);if(null===O){null===l&&(l=C);break}a&&l&&null===O.alternate&&b(e,l);g=f(O,g,r);null===k?n=O:k.sibling=O;k=O;l=C}if(r===h.length)return c(e,l),n;if(null===l){for(;r<h.length;r++)l=ba(e,h[r],m),null!==l&&(g=f(l,g,r),null===k?n=l:k.sibling=l,k=l);return n}for(l=d(e,l);r<h.length;r++)C=t(l,e,r,h[r],m),null!==C&&(a&&null!==C.alternate&&l.delete(null===
C.key?r:C.key),g=f(C,g,r),null===k?n=C:k.sibling=C,k=C);a&&l.forEach(function(a){return b(e,a)});return n}function w(e,g,h,n){var m=zb(h);if("function"!==typeof m)throw Error(k(150));h=m.call(h);if(null==h)throw Error(k(151));for(var l=m=null,r=g,C=g=0,O=null,v=h.next();null!==r&&!v.done;C++,v=h.next()){r.index>C?(O=r,r=null):O=r.sibling;var q=p(e,r,v.value,n);if(null===q){null===r&&(r=O);break}a&&r&&null===q.alternate&&b(e,r);g=f(q,g,C);null===l?m=q:l.sibling=q;l=q;r=O}if(v.done)return c(e,r),m;
if(null===r){for(;!v.done;C++,v=h.next())v=ba(e,v.value,n),null!==v&&(g=f(v,g,C),null===l?m=v:l.sibling=v,l=v);return m}for(r=d(e,r);!v.done;C++,v=h.next())v=t(r,e,C,v.value,n),null!==v&&(a&&null!==v.alternate&&r.delete(null===v.key?C:v.key),g=f(v,g,C),null===l?m=v:l.sibling=v,l=v);a&&r.forEach(function(a){return b(e,a)});return m}return function(a,d,f,h){var m="object"===typeof f&&null!==f&&f.type===Ma&&null===f.key;m&&(f=f.props.children);var n="object"===typeof f&&null!==f;if(n)switch(f.$$typeof){case Pc:a:{n=
f.key;for(m=d;null!==m;){if(m.key===n){switch(m.tag){case 7:if(f.type===Ma){c(a,m.sibling);d=e(m,f.props.children);d.return=a;a=d;break a}break;default:if(m.elementType===f.type){c(a,m.sibling);d=e(m,f.props);d.ref=Rb(a,m,f);d.return=a;a=d;break a}}c(a,m);break}else b(a,m);m=m.sibling}f.type===Ma?(d=Ha(f.props.children,a.mode,h,f.key),d.return=a,a=d):(h=Oc(f.type,f.key,f.props,null,a.mode,h),h.ref=Rb(a,d,f),h.return=a,a=h)}return g(a);case gb:a:{for(m=f.key;null!==d;){if(d.key===m)if(4===d.tag&&d.stateNode.containerInfo===
f.containerInfo&&d.stateNode.implementation===f.implementation){c(a,d.sibling);d=e(d,f.children||[]);d.return=a;a=d;break a}else{c(a,d);break}else b(a,d);d=d.sibling}d=re(f,a.mode,h);d.return=a;a=d}return g(a)}if("string"===typeof f||"number"===typeof f)return f=""+f,null!==d&&6===d.tag?(c(a,d.sibling),d=e(d,f),d.return=a,a=d):(c(a,d),d=qe(f,a.mode,h),d.return=a,a=d),g(a);if(Qc(f))return q(a,d,f,h);if(zb(f))return w(a,d,f,h);n&&Nc(a,f);if("undefined"===typeof f&&!m)switch(a.tag){case 1:case 0:throw a=
a.type,Error(k(152,a.displayName||a.name||"Component"));}return c(a,d)}}function Ta(a){if(a===Sb)throw Error(k(174));return a}function se(a,b){y(Tb,b);y(Ub,a);y(ja,Sb);a=b.nodeType;switch(a){case 9:case 11:b=(b=b.documentElement)?b.namespaceURI:Hd(null,"");break;default:a=8===a?b.parentNode:b,b=a.namespaceURI||null,a=a.tagName,b=Hd(b,a)}q(ja);y(ja,b)}function tb(a){q(ja);q(Ub);q(Tb)}function bh(a){Ta(Tb.current);var b=Ta(ja.current);var c=Hd(b,a.type);b!==c&&(y(Ub,a),y(ja,c))}function te(a){Ub.current===
a&&(q(ja),q(Ub))}function Rc(a){for(var b=a;null!==b;){if(13===b.tag){var c=b.memoizedState;if(null!==c&&(c=c.dehydrated,null===c||c.data===$d||c.data===Zd))return b}else if(19===b.tag&&void 0!==b.memoizedProps.revealOrder){if(0!==(b.effectTag&64))return b}else if(null!==b.child){b.child.return=b;b=b.child;continue}if(b===a)break;for(;null===b.sibling;){if(null===b.return||b.return===a)return null;b=b.return}b.sibling.return=b.return;b=b.sibling}return null}function ue(a,b){return{responder:a,props:b}}
function S(){throw Error(k(321));}function ve(a,b){if(null===b)return!1;for(var c=0;c<b.length&&c<a.length;c++)if(!Qa(a[c],b[c]))return!1;return!0}function we(a,b,c,d,e,f){Ia=f;z=b;b.memoizedState=null;b.updateQueue=null;b.expirationTime=0;Sc.current=null===a||null===a.memoizedState?dj:ej;a=c(d,e);if(b.expirationTime===Ia){f=0;do{b.expirationTime=0;if(!(25>f))throw Error(k(301));f+=1;J=K=null;b.updateQueue=null;Sc.current=fj;a=c(d,e)}while(b.expirationTime===Ia)}Sc.current=Tc;b=null!==K&&null!==K.next;
Ia=0;J=K=z=null;Uc=!1;if(b)throw Error(k(300));return a}function ub(){var a={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};null===J?z.memoizedState=J=a:J=J.next=a;return J}function vb(){if(null===K){var a=z.alternate;a=null!==a?a.memoizedState:null}else a=K.next;var b=null===J?z.memoizedState:J.next;if(null!==b)J=b,K=a;else{if(null===a)throw Error(k(310));K=a;a={memoizedState:K.memoizedState,baseState:K.baseState,baseQueue:K.baseQueue,queue:K.queue,next:null};null===J?z.memoizedState=
J=a:J=J.next=a}return J}function Ua(a,b){return"function"===typeof b?b(a):b}function Vc(a,b,c){b=vb();c=b.queue;if(null===c)throw Error(k(311));c.lastRenderedReducer=a;var d=K,e=d.baseQueue,f=c.pending;if(null!==f){if(null!==e){var g=e.next;e.next=f.next;f.next=g}d.baseQueue=e=f;c.pending=null}if(null!==e){e=e.next;d=d.baseState;var h=g=f=null,m=e;do{var n=m.expirationTime;if(n<Ia){var l={expirationTime:m.expirationTime,suspenseConfig:m.suspenseConfig,action:m.action,eagerReducer:m.eagerReducer,eagerState:m.eagerState,
next:null};null===h?(g=h=l,f=d):h=h.next=l;n>z.expirationTime&&(z.expirationTime=n,Kc(n))}else null!==h&&(h=h.next={expirationTime:1073741823,suspenseConfig:m.suspenseConfig,action:m.action,eagerReducer:m.eagerReducer,eagerState:m.eagerState,next:null}),Vg(n,m.suspenseConfig),d=m.eagerReducer===a?m.eagerState:a(d,m.action);m=m.next}while(null!==m&&m!==e);null===h?f=d:h.next=g;Qa(d,b.memoizedState)||(ia=!0);b.memoizedState=d;b.baseState=f;b.baseQueue=h;c.lastRenderedState=d}return[b.memoizedState,
c.dispatch]}function Wc(a,b,c){b=vb();c=b.queue;if(null===c)throw Error(k(311));c.lastRenderedReducer=a;var d=c.dispatch,e=c.pending,f=b.memoizedState;if(null!==e){c.pending=null;var g=e=e.next;do f=a(f,g.action),g=g.next;while(g!==e);Qa(f,b.memoizedState)||(ia=!0);b.memoizedState=f;null===b.baseQueue&&(b.baseState=f);c.lastRenderedState=f}return[f,d]}function xe(a){var b=ub();"function"===typeof a&&(a=a());b.memoizedState=b.baseState=a;a=b.queue={pending:null,dispatch:null,lastRenderedReducer:Ua,
lastRenderedState:a};a=a.dispatch=ch.bind(null,z,a);return[b.memoizedState,a]}function ye(a,b,c,d){a={tag:a,create:b,destroy:c,deps:d,next:null};b=z.updateQueue;null===b?(b={lastEffect:null},z.updateQueue=b,b.lastEffect=a.next=a):(c=b.lastEffect,null===c?b.lastEffect=a.next=a:(d=c.next,c.next=a,a.next=d,b.lastEffect=a));return a}function dh(a){return vb().memoizedState}function ze(a,b,c,d){var e=ub();z.effectTag|=a;e.memoizedState=ye(1|b,c,void 0,void 0===d?null:d)}function Ae(a,b,c,d){var e=vb();
d=void 0===d?null:d;var f=void 0;if(null!==K){var g=K.memoizedState;f=g.destroy;if(null!==d&&ve(d,g.deps)){ye(b,c,f,d);return}}z.effectTag|=a;e.memoizedState=ye(1|b,c,f,d)}function eh(a,b){return ze(516,4,a,b)}function Xc(a,b){return Ae(516,4,a,b)}function fh(a,b){return Ae(4,2,a,b)}function gh(a,b){if("function"===typeof b)return a=a(),b(a),function(){b(null)};if(null!==b&&void 0!==b)return a=a(),b.current=a,function(){b.current=null}}function hh(a,b,c){c=null!==c&&void 0!==c?c.concat([a]):null;
return Ae(4,2,gh.bind(null,b,a),c)}function Be(a,b){}function ih(a,b){ub().memoizedState=[a,void 0===b?null:b];return a}function Yc(a,b){var c=vb();b=void 0===b?null:b;var d=c.memoizedState;if(null!==d&&null!==b&&ve(b,d[1]))return d[0];c.memoizedState=[a,b];return a}function jh(a,b){var c=vb();b=void 0===b?null:b;var d=c.memoizedState;if(null!==d&&null!==b&&ve(b,d[1]))return d[0];a=a();c.memoizedState=[a,b];return a}function Ce(a,b,c){var d=Cc();Da(98>d?98:d,function(){a(!0)});Da(97<d?97:d,function(){var d=
X.suspense;X.suspense=void 0===b?null:b;try{a(!1),c()}finally{X.suspense=d}})}function ch(a,b,c){var d=ka(),e=Vb.suspense;d=Va(d,a,e);e={expirationTime:d,suspenseConfig:e,action:c,eagerReducer:null,eagerState:null,next:null};var f=b.pending;null===f?e.next=e:(e.next=f.next,f.next=e);b.pending=e;f=a.alternate;if(a===z||null!==f&&f===z)Uc=!0,e.expirationTime=Ia,z.expirationTime=Ia;else{if(0===a.expirationTime&&(null===f||0===f.expirationTime)&&(f=b.lastRenderedReducer,null!==f))try{var g=b.lastRenderedState,
h=f(g,c);e.eagerReducer=f;e.eagerState=h;if(Qa(h,g))return}catch(m){}finally{}Ja(a,d)}}function kh(a,b){var c=la(5,null,null,0);c.elementType="DELETED";c.type="DELETED";c.stateNode=b;c.return=a;c.effectTag=8;null!==a.lastEffect?(a.lastEffect.nextEffect=c,a.lastEffect=c):a.firstEffect=a.lastEffect=c}function lh(a,b){switch(a.tag){case 5:var c=a.type;b=1!==b.nodeType||c.toLowerCase()!==b.nodeName.toLowerCase()?null:b;return null!==b?(a.stateNode=b,!0):!1;case 6:return b=""===a.pendingProps||3!==b.nodeType?
null:b,null!==b?(a.stateNode=b,!0):!1;case 13:return!1;default:return!1}}function De(a){if(Wa){var b=Ka;if(b){var c=b;if(!lh(a,b)){b=kb(c.nextSibling);if(!b||!lh(a,b)){a.effectTag=a.effectTag&-1025|2;Wa=!1;ra=a;return}kh(ra,c)}ra=a;Ka=kb(b.firstChild)}else a.effectTag=a.effectTag&-1025|2,Wa=!1,ra=a}}function mh(a){for(a=a.return;null!==a&&5!==a.tag&&3!==a.tag&&13!==a.tag;)a=a.return;ra=a}function Zc(a){if(a!==ra)return!1;if(!Wa)return mh(a),Wa=!0,!1;var b=a.type;if(5!==a.tag||"head"!==b&&"body"!==
b&&!Yd(b,a.memoizedProps))for(b=Ka;b;)kh(a,b),b=kb(b.nextSibling);mh(a);if(13===a.tag){a=a.memoizedState;a=null!==a?a.dehydrated:null;if(!a)throw Error(k(317));a:{a=a.nextSibling;for(b=0;a;){if(8===a.nodeType){var c=a.data;if(c===og){if(0===b){Ka=kb(a.nextSibling);break a}b--}else c!==ng&&c!==Zd&&c!==$d||b++}a=a.nextSibling}Ka=null}}else Ka=ra?kb(a.stateNode.nextSibling):null;return!0}function Ee(){Ka=ra=null;Wa=!1}function T(a,b,c,d){b.child=null===a?Fe(b,null,c,d):wb(b,a.child,c,d)}function nh(a,
b,c,d,e){c=c.render;var f=b.ref;rb(b,e);d=we(a,b,c,d,f,e);if(null!==a&&!ia)return b.updateQueue=a.updateQueue,b.effectTag&=-517,a.expirationTime<=e&&(a.expirationTime=0),sa(a,b,e);b.effectTag|=1;T(a,b,d,e);return b.child}function oh(a,b,c,d,e,f){if(null===a){var g=c.type;if("function"===typeof g&&!Ge(g)&&void 0===g.defaultProps&&null===c.compare&&void 0===c.defaultProps)return b.tag=15,b.type=g,ph(a,b,g,d,e,f);a=Oc(c.type,null,d,null,b.mode,f);a.ref=b.ref;a.return=b;return b.child=a}g=a.child;if(e<
f&&(e=g.memoizedProps,c=c.compare,c=null!==c?c:Ob,c(e,d)&&a.ref===b.ref))return sa(a,b,f);b.effectTag|=1;a=Sa(g,d);a.ref=b.ref;a.return=b;return b.child=a}function ph(a,b,c,d,e,f){return null!==a&&Ob(a.memoizedProps,d)&&a.ref===b.ref&&(ia=!1,e<f)?(b.expirationTime=a.expirationTime,sa(a,b,f)):He(a,b,c,d,f)}function qh(a,b){var c=b.ref;if(null===a&&null!==c||null!==a&&a.ref!==c)b.effectTag|=128}function He(a,b,c,d,e){var f=N(c)?Ra:B.current;f=pb(b,f);rb(b,e);c=we(a,b,c,d,f,e);if(null!==a&&!ia)return b.updateQueue=
a.updateQueue,b.effectTag&=-517,a.expirationTime<=e&&(a.expirationTime=0),sa(a,b,e);b.effectTag|=1;T(a,b,c,e);return b.child}function rh(a,b,c,d,e){if(N(c)){var f=!0;Bc(b)}else f=!1;rb(b,e);if(null===b.stateNode)null!==a&&(a.alternate=null,b.alternate=null,b.effectTag|=2),Yg(b,c,d),pe(b,c,d,e),d=!0;else if(null===a){var g=b.stateNode,h=b.memoizedProps;g.props=h;var m=g.context,n=c.contextType;"object"===typeof n&&null!==n?n=W(n):(n=N(c)?Ra:B.current,n=pb(b,n));var l=c.getDerivedStateFromProps,k="function"===
typeof l||"function"===typeof g.getSnapshotBeforeUpdate;k||"function"!==typeof g.UNSAFE_componentWillReceiveProps&&"function"!==typeof g.componentWillReceiveProps||(h!==d||m!==n)&&Zg(b,g,d,n);Ga=!1;var p=b.memoizedState;g.state=p;Qb(b,d,g,e);m=b.memoizedState;h!==d||p!==m||G.current||Ga?("function"===typeof l&&(Lc(b,c,l,d),m=b.memoizedState),(h=Ga||Xg(b,c,h,d,p,m,n))?(k||"function"!==typeof g.UNSAFE_componentWillMount&&"function"!==typeof g.componentWillMount||("function"===typeof g.componentWillMount&&
g.componentWillMount(),"function"===typeof g.UNSAFE_componentWillMount&&g.UNSAFE_componentWillMount()),"function"===typeof g.componentDidMount&&(b.effectTag|=4)):("function"===typeof g.componentDidMount&&(b.effectTag|=4),b.memoizedProps=d,b.memoizedState=m),g.props=d,g.state=m,g.context=n,d=h):("function"===typeof g.componentDidMount&&(b.effectTag|=4),d=!1)}else g=b.stateNode,oe(a,b),h=b.memoizedProps,g.props=b.type===b.elementType?h:aa(b.type,h),m=g.context,n=c.contextType,"object"===typeof n&&null!==
n?n=W(n):(n=N(c)?Ra:B.current,n=pb(b,n)),l=c.getDerivedStateFromProps,(k="function"===typeof l||"function"===typeof g.getSnapshotBeforeUpdate)||"function"!==typeof g.UNSAFE_componentWillReceiveProps&&"function"!==typeof g.componentWillReceiveProps||(h!==d||m!==n)&&Zg(b,g,d,n),Ga=!1,m=b.memoizedState,g.state=m,Qb(b,d,g,e),p=b.memoizedState,h!==d||m!==p||G.current||Ga?("function"===typeof l&&(Lc(b,c,l,d),p=b.memoizedState),(l=Ga||Xg(b,c,h,d,m,p,n))?(k||"function"!==typeof g.UNSAFE_componentWillUpdate&&
"function"!==typeof g.componentWillUpdate||("function"===typeof g.componentWillUpdate&&g.componentWillUpdate(d,p,n),"function"===typeof g.UNSAFE_componentWillUpdate&&g.UNSAFE_componentWillUpdate(d,p,n)),"function"===typeof g.componentDidUpdate&&(b.effectTag|=4),"function"===typeof g.getSnapshotBeforeUpdate&&(b.effectTag|=256)):("function"!==typeof g.componentDidUpdate||h===a.memoizedProps&&m===a.memoizedState||(b.effectTag|=4),"function"!==typeof g.getSnapshotBeforeUpdate||h===a.memoizedProps&&m===
a.memoizedState||(b.effectTag|=256),b.memoizedProps=d,b.memoizedState=p),g.props=d,g.state=p,g.context=n,d=l):("function"!==typeof g.componentDidUpdate||h===a.memoizedProps&&m===a.memoizedState||(b.effectTag|=4),"function"!==typeof g.getSnapshotBeforeUpdate||h===a.memoizedProps&&m===a.memoizedState||(b.effectTag|=256),d=!1);return Ie(a,b,c,d,f,e)}function Ie(a,b,c,d,e,f){qh(a,b);var g=0!==(b.effectTag&64);if(!d&&!g)return e&&Hg(b,c,!1),sa(a,b,f);d=b.stateNode;gj.current=b;var h=g&&"function"!==typeof c.getDerivedStateFromError?
null:d.render();b.effectTag|=1;null!==a&&g?(b.child=wb(b,a.child,null,f),b.child=wb(b,null,h,f)):T(a,b,h,f);b.memoizedState=d.state;e&&Hg(b,c,!0);return b.child}function sh(a){var b=a.stateNode;b.pendingContext?Fg(a,b.pendingContext,b.pendingContext!==b.context):b.context&&Fg(a,b.context,!1);se(a,b.containerInfo)}function th(a,b,c){var d=b.mode,e=b.pendingProps,f=D.current,g=!1,h;(h=0!==(b.effectTag&64))||(h=0!==(f&2)&&(null===a||null!==a.memoizedState));h?(g=!0,b.effectTag&=-65):null!==a&&null===
a.memoizedState||void 0===e.fallback||!0===e.unstable_avoidThisFallback||(f|=1);y(D,f&1);if(null===a){void 0!==e.fallback&&De(b);if(g){g=e.fallback;e=Ha(null,d,0,null);e.return=b;if(0===(b.mode&2))for(a=null!==b.memoizedState?b.child.child:b.child,e.child=a;null!==a;)a.return=e,a=a.sibling;c=Ha(g,d,c,null);c.return=b;e.sibling=c;b.memoizedState=Je;b.child=e;return c}d=e.children;b.memoizedState=null;return b.child=Fe(b,null,d,c)}if(null!==a.memoizedState){a=a.child;d=a.sibling;if(g){e=e.fallback;
c=Sa(a,a.pendingProps);c.return=b;if(0===(b.mode&2)&&(g=null!==b.memoizedState?b.child.child:b.child,g!==a.child))for(c.child=g;null!==g;)g.return=c,g=g.sibling;d=Sa(d,e);d.return=b;c.sibling=d;c.childExpirationTime=0;b.memoizedState=Je;b.child=c;return d}c=wb(b,a.child,e.children,c);b.memoizedState=null;return b.child=c}a=a.child;if(g){g=e.fallback;e=Ha(null,d,0,null);e.return=b;e.child=a;null!==a&&(a.return=e);if(0===(b.mode&2))for(a=null!==b.memoizedState?b.child.child:b.child,e.child=a;null!==
a;)a.return=e,a=a.sibling;c=Ha(g,d,c,null);c.return=b;e.sibling=c;c.effectTag|=2;e.childExpirationTime=0;b.memoizedState=Je;b.child=e;return c}b.memoizedState=null;return b.child=wb(b,a,e.children,c)}function uh(a,b){a.expirationTime<b&&(a.expirationTime=b);var c=a.alternate;null!==c&&c.expirationTime<b&&(c.expirationTime=b);Sg(a.return,b)}function Ke(a,b,c,d,e,f){var g=a.memoizedState;null===g?a.memoizedState={isBackwards:b,rendering:null,renderingStartTime:0,last:d,tail:c,tailExpiration:0,tailMode:e,
lastEffect:f}:(g.isBackwards=b,g.rendering=null,g.renderingStartTime=0,g.last=d,g.tail=c,g.tailExpiration=0,g.tailMode=e,g.lastEffect=f)}function vh(a,b,c){var d=b.pendingProps,e=d.revealOrder,f=d.tail;T(a,b,d.children,c);d=D.current;if(0!==(d&2))d=d&1|2,b.effectTag|=64;else{if(null!==a&&0!==(a.effectTag&64))a:for(a=b.child;null!==a;){if(13===a.tag)null!==a.memoizedState&&uh(a,c);else if(19===a.tag)uh(a,c);else if(null!==a.child){a.child.return=a;a=a.child;continue}if(a===b)break a;for(;null===a.sibling;){if(null===
a.return||a.return===b)break a;a=a.return}a.sibling.return=a.return;a=a.sibling}d&=1}y(D,d);if(0===(b.mode&2))b.memoizedState=null;else switch(e){case "forwards":c=b.child;for(e=null;null!==c;)a=c.alternate,null!==a&&null===Rc(a)&&(e=c),c=c.sibling;c=e;null===c?(e=b.child,b.child=null):(e=c.sibling,c.sibling=null);Ke(b,!1,e,c,f,b.lastEffect);break;case "backwards":c=null;e=b.child;for(b.child=null;null!==e;){a=e.alternate;if(null!==a&&null===Rc(a)){b.child=e;break}a=e.sibling;e.sibling=c;c=e;e=a}Ke(b,
!0,c,null,f,b.lastEffect);break;case "together":Ke(b,!1,null,null,void 0,b.lastEffect);break;default:b.memoizedState=null}return b.child}function sa(a,b,c){null!==a&&(b.dependencies=a.dependencies);var d=b.expirationTime;0!==d&&Kc(d);if(b.childExpirationTime<c)return null;if(null!==a&&b.child!==a.child)throw Error(k(153));if(null!==b.child){a=b.child;c=Sa(a,a.pendingProps);b.child=c;for(c.return=b;null!==a.sibling;)a=a.sibling,c=c.sibling=Sa(a,a.pendingProps),c.return=b;c.sibling=null}return b.child}
function $c(a,b){switch(a.tailMode){case "hidden":b=a.tail;for(var c=null;null!==b;)null!==b.alternate&&(c=b),b=b.sibling;null===c?a.tail=null:c.sibling=null;break;case "collapsed":c=a.tail;for(var d=null;null!==c;)null!==c.alternate&&(d=c),c=c.sibling;null===d?b||null===a.tail?a.tail=null:a.tail.sibling=null:d.sibling=null}}function hj(a,b,c){var d=b.pendingProps;switch(b.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return null;case 1:return N(b.type)&&(q(G),q(B)),
null;case 3:return tb(),q(G),q(B),c=b.stateNode,c.pendingContext&&(c.context=c.pendingContext,c.pendingContext=null),null!==a&&null!==a.child||!Zc(b)||(b.effectTag|=4),wh(b),null;case 5:te(b);c=Ta(Tb.current);var e=b.type;if(null!==a&&null!=b.stateNode)ij(a,b,e,d,c),a.ref!==b.ref&&(b.effectTag|=128);else{if(!d){if(null===b.stateNode)throw Error(k(166));return null}a=Ta(ja.current);if(Zc(b)){d=b.stateNode;e=b.type;var f=b.memoizedProps;d[Aa]=b;d[vc]=f;switch(e){case "iframe":case "object":case "embed":w("load",
d);break;case "video":case "audio":for(a=0;a<Db.length;a++)w(Db[a],d);break;case "source":w("error",d);break;case "img":case "image":case "link":w("error",d);w("load",d);break;case "form":w("reset",d);w("submit",d);break;case "details":w("toggle",d);break;case "input":Hf(d,f);w("invalid",d);oa(c,"onChange");break;case "select":d._wrapperState={wasMultiple:!!f.multiple};w("invalid",d);oa(c,"onChange");break;case "textarea":Kf(d,f),w("invalid",d),oa(c,"onChange")}Ud(e,f);a=null;for(var g in f)if(f.hasOwnProperty(g)){var h=
f[g];"children"===g?"string"===typeof h?d.textContent!==h&&(a=["children",h]):"number"===typeof h&&d.textContent!==""+h&&(a=["children",""+h]):db.hasOwnProperty(g)&&null!=h&&oa(c,g)}switch(e){case "input":mc(d);Jf(d,f,!0);break;case "textarea":mc(d);Mf(d);break;case "select":case "option":break;default:"function"===typeof f.onClick&&(d.onclick=uc)}c=a;b.updateQueue=c;null!==c&&(b.effectTag|=4)}else{g=9===c.nodeType?c:c.ownerDocument;"http://www.w3.org/1999/xhtml"===a&&(a=Nf(e));"http://www.w3.org/1999/xhtml"===
a?"script"===e?(a=g.createElement("div"),a.innerHTML="<script>\x3c/script>",a=a.removeChild(a.firstChild)):"string"===typeof d.is?a=g.createElement(e,{is:d.is}):(a=g.createElement(e),"select"===e&&(g=a,d.multiple?g.multiple=!0:d.size&&(g.size=d.size))):a=g.createElementNS(a,e);a[Aa]=b;a[vc]=d;jj(a,b,!1,!1);b.stateNode=a;g=Vd(e,d);switch(e){case "iframe":case "object":case "embed":w("load",a);h=d;break;case "video":case "audio":for(h=0;h<Db.length;h++)w(Db[h],a);h=d;break;case "source":w("error",a);
h=d;break;case "img":case "image":case "link":w("error",a);w("load",a);h=d;break;case "form":w("reset",a);w("submit",a);h=d;break;case "details":w("toggle",a);h=d;break;case "input":Hf(a,d);h=Cd(a,d);w("invalid",a);oa(c,"onChange");break;case "option":h=Fd(a,d);break;case "select":a._wrapperState={wasMultiple:!!d.multiple};h=M({},d,{value:void 0});w("invalid",a);oa(c,"onChange");break;case "textarea":Kf(a,d);h=Gd(a,d);w("invalid",a);oa(c,"onChange");break;default:h=d}Ud(e,h);var m=h;for(f in m)if(m.hasOwnProperty(f)){var n=
m[f];"style"===f?gg(a,n):"dangerouslySetInnerHTML"===f?(n=n?n.__html:void 0,null!=n&&xh(a,n)):"children"===f?"string"===typeof n?("textarea"!==e||""!==n)&&Wb(a,n):"number"===typeof n&&Wb(a,""+n):"suppressContentEditableWarning"!==f&&"suppressHydrationWarning"!==f&&"autoFocus"!==f&&(db.hasOwnProperty(f)?null!=n&&oa(c,f):null!=n&&xd(a,f,n,g))}switch(e){case "input":mc(a);Jf(a,d,!1);break;case "textarea":mc(a);Mf(a);break;case "option":null!=d.value&&a.setAttribute("value",""+va(d.value));break;case "select":a.multiple=
!!d.multiple;c=d.value;null!=c?hb(a,!!d.multiple,c,!1):null!=d.defaultValue&&hb(a,!!d.multiple,d.defaultValue,!0);break;default:"function"===typeof h.onClick&&(a.onclick=uc)}lg(e,d)&&(b.effectTag|=4)}null!==b.ref&&(b.effectTag|=128)}return null;case 6:if(a&&null!=b.stateNode)kj(a,b,a.memoizedProps,d);else{if("string"!==typeof d&&null===b.stateNode)throw Error(k(166));c=Ta(Tb.current);Ta(ja.current);Zc(b)?(c=b.stateNode,d=b.memoizedProps,c[Aa]=b,c.nodeValue!==d&&(b.effectTag|=4)):(c=(9===c.nodeType?
c:c.ownerDocument).createTextNode(d),c[Aa]=b,b.stateNode=c)}return null;case 13:q(D);d=b.memoizedState;if(0!==(b.effectTag&64))return b.expirationTime=c,b;c=null!==d;d=!1;null===a?void 0!==b.memoizedProps.fallback&&Zc(b):(e=a.memoizedState,d=null!==e,c||null===e||(e=a.child.sibling,null!==e&&(f=b.firstEffect,null!==f?(b.firstEffect=e,e.nextEffect=f):(b.firstEffect=b.lastEffect=e,e.nextEffect=null),e.effectTag=8)));if(c&&!d&&0!==(b.mode&2))if(null===a&&!0!==b.memoizedProps.unstable_avoidThisFallback||
0!==(D.current&1))F===Xa&&(F=ad);else{if(F===Xa||F===ad)F=bd;0!==Xb&&null!==U&&(Ya(U,P),yh(U,Xb))}if(c||d)b.effectTag|=4;return null;case 4:return tb(),wh(b),null;case 10:return me(b),null;case 17:return N(b.type)&&(q(G),q(B)),null;case 19:q(D);d=b.memoizedState;if(null===d)return null;e=0!==(b.effectTag&64);f=d.rendering;if(null===f)if(e)$c(d,!1);else{if(F!==Xa||null!==a&&0!==(a.effectTag&64))for(f=b.child;null!==f;){a=Rc(f);if(null!==a){b.effectTag|=64;$c(d,!1);e=a.updateQueue;null!==e&&(b.updateQueue=
e,b.effectTag|=4);null===d.lastEffect&&(b.firstEffect=null);b.lastEffect=d.lastEffect;for(d=b.child;null!==d;)e=d,f=c,e.effectTag&=2,e.nextEffect=null,e.firstEffect=null,e.lastEffect=null,a=e.alternate,null===a?(e.childExpirationTime=0,e.expirationTime=f,e.child=null,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null):(e.childExpirationTime=a.childExpirationTime,e.expirationTime=a.expirationTime,e.child=a.child,e.memoizedProps=a.memoizedProps,e.memoizedState=a.memoizedState,
e.updateQueue=a.updateQueue,f=a.dependencies,e.dependencies=null===f?null:{expirationTime:f.expirationTime,firstContext:f.firstContext,responders:f.responders}),d=d.sibling;y(D,D.current&1|2);return b.child}f=f.sibling}}else{if(!e)if(a=Rc(f),null!==a){if(b.effectTag|=64,e=!0,c=a.updateQueue,null!==c&&(b.updateQueue=c,b.effectTag|=4),$c(d,!0),null===d.tail&&"hidden"===d.tailMode&&!f.alternate)return b=b.lastEffect=d.lastEffect,null!==b&&(b.nextEffect=null),null}else 2*Y()-d.renderingStartTime>d.tailExpiration&&
1<c&&(b.effectTag|=64,e=!0,$c(d,!1),b.expirationTime=b.childExpirationTime=c-1);d.isBackwards?(f.sibling=b.child,b.child=f):(c=d.last,null!==c?c.sibling=f:b.child=f,d.last=f)}return null!==d.tail?(0===d.tailExpiration&&(d.tailExpiration=Y()+500),c=d.tail,d.rendering=c,d.tail=c.sibling,d.lastEffect=b.lastEffect,d.renderingStartTime=Y(),c.sibling=null,b=D.current,y(D,e?b&1|2:b&1),c):null}throw Error(k(156,b.tag));}function lj(a,b){switch(a.tag){case 1:return N(a.type)&&(q(G),q(B)),b=a.effectTag,b&4096?
(a.effectTag=b&-4097|64,a):null;case 3:tb();q(G);q(B);b=a.effectTag;if(0!==(b&64))throw Error(k(285));a.effectTag=b&-4097|64;return a;case 5:return te(a),null;case 13:return q(D),b=a.effectTag,b&4096?(a.effectTag=b&-4097|64,a):null;case 19:return q(D),null;case 4:return tb(),null;case 10:return me(a),null;default:return null}}function Le(a,b){return{value:a,source:b,stack:Bd(b)}}function Me(a,b){var c=b.source,d=b.stack;null===d&&null!==c&&(d=Bd(c));null!==c&&na(c.type);b=b.value;null!==a&&1===a.tag&&
na(a.type);try{console.error(b)}catch(e){setTimeout(function(){throw e;})}}function mj(a,b){try{b.props=a.memoizedProps,b.state=a.memoizedState,b.componentWillUnmount()}catch(c){Za(a,c)}}function zh(a){var b=a.ref;if(null!==b)if("function"===typeof b)try{b(null)}catch(c){Za(a,c)}else b.current=null}function nj(a,b){switch(b.tag){case 0:case 11:case 15:case 22:return;case 1:if(b.effectTag&256&&null!==a){var c=a.memoizedProps,d=a.memoizedState;a=b.stateNode;b=a.getSnapshotBeforeUpdate(b.elementType===
b.type?c:aa(b.type,c),d);a.__reactInternalSnapshotBeforeUpdate=b}return;case 3:case 5:case 6:case 4:case 17:return}throw Error(k(163));}function Ah(a,b){b=b.updateQueue;b=null!==b?b.lastEffect:null;if(null!==b){var c=b=b.next;do{if((c.tag&a)===a){var d=c.destroy;c.destroy=void 0;void 0!==d&&d()}c=c.next}while(c!==b)}}function Bh(a,b){b=b.updateQueue;b=null!==b?b.lastEffect:null;if(null!==b){var c=b=b.next;do{if((c.tag&a)===a){var d=c.create;c.destroy=d()}c=c.next}while(c!==b)}}function oj(a,b,c,d){switch(c.tag){case 0:case 11:case 15:case 22:Bh(3,
c);return;case 1:a=c.stateNode;c.effectTag&4&&(null===b?a.componentDidMount():(d=c.elementType===c.type?b.memoizedProps:aa(c.type,b.memoizedProps),a.componentDidUpdate(d,b.memoizedState,a.__reactInternalSnapshotBeforeUpdate)));b=c.updateQueue;null!==b&&Wg(c,b,a);return;case 3:b=c.updateQueue;if(null!==b){a=null;if(null!==c.child)switch(c.child.tag){case 5:a=c.child.stateNode;break;case 1:a=c.child.stateNode}Wg(c,b,a)}return;case 5:a=c.stateNode;null===b&&c.effectTag&4&&lg(c.type,c.memoizedProps)&&
a.focus();return;case 6:return;case 4:return;case 12:return;case 13:null===c.memoizedState&&(c=c.alternate,null!==c&&(c=c.memoizedState,null!==c&&(c=c.dehydrated,null!==c&&bg(c))));return;case 19:case 17:case 20:case 21:return}throw Error(k(163));}function Ch(a,b,c){"function"===typeof Ne&&Ne(b);switch(b.tag){case 0:case 11:case 14:case 15:case 22:a=b.updateQueue;if(null!==a&&(a=a.lastEffect,null!==a)){var d=a.next;Da(97<c?97:c,function(){var a=d;do{var c=a.destroy;if(void 0!==c){var g=b;try{c()}catch(h){Za(g,
h)}}a=a.next}while(a!==d)})}break;case 1:zh(b);c=b.stateNode;"function"===typeof c.componentWillUnmount&&mj(b,c);break;case 5:zh(b);break;case 4:Dh(a,b,c)}}function Eh(a){var b=a.alternate;a.return=null;a.child=null;a.memoizedState=null;a.updateQueue=null;a.dependencies=null;a.alternate=null;a.firstEffect=null;a.lastEffect=null;a.pendingProps=null;a.memoizedProps=null;a.stateNode=null;null!==b&&Eh(b)}function Fh(a){return 5===a.tag||3===a.tag||4===a.tag}function Gh(a){a:{for(var b=a.return;null!==
b;){if(Fh(b)){var c=b;break a}b=b.return}throw Error(k(160));}b=c.stateNode;switch(c.tag){case 5:var d=!1;break;case 3:b=b.containerInfo;d=!0;break;case 4:b=b.containerInfo;d=!0;break;default:throw Error(k(161));}c.effectTag&16&&(Wb(b,""),c.effectTag&=-17);a:b:for(c=a;;){for(;null===c.sibling;){if(null===c.return||Fh(c.return)){c=null;break a}c=c.return}c.sibling.return=c.return;for(c=c.sibling;5!==c.tag&&6!==c.tag&&18!==c.tag;){if(c.effectTag&2)continue b;if(null===c.child||4===c.tag)continue b;
else c.child.return=c,c=c.child}if(!(c.effectTag&2)){c=c.stateNode;break a}}d?Oe(a,c,b):Pe(a,c,b)}function Oe(a,b,c){var d=a.tag,e=5===d||6===d;if(e)a=e?a.stateNode:a.stateNode.instance,b?8===c.nodeType?c.parentNode.insertBefore(a,b):c.insertBefore(a,b):(8===c.nodeType?(b=c.parentNode,b.insertBefore(a,c)):(b=c,b.appendChild(a)),c=c._reactRootContainer,null!==c&&void 0!==c||null!==b.onclick||(b.onclick=uc));else if(4!==d&&(a=a.child,null!==a))for(Oe(a,b,c),a=a.sibling;null!==a;)Oe(a,b,c),a=a.sibling}
function Pe(a,b,c){var d=a.tag,e=5===d||6===d;if(e)a=e?a.stateNode:a.stateNode.instance,b?c.insertBefore(a,b):c.appendChild(a);else if(4!==d&&(a=a.child,null!==a))for(Pe(a,b,c),a=a.sibling;null!==a;)Pe(a,b,c),a=a.sibling}function Dh(a,b,c){for(var d=b,e=!1,f,g;;){if(!e){e=d.return;a:for(;;){if(null===e)throw Error(k(160));f=e.stateNode;switch(e.tag){case 5:g=!1;break a;case 3:f=f.containerInfo;g=!0;break a;case 4:f=f.containerInfo;g=!0;break a}e=e.return}e=!0}if(5===d.tag||6===d.tag){a:for(var h=
a,m=d,n=c,l=m;;)if(Ch(h,l,n),null!==l.child&&4!==l.tag)l.child.return=l,l=l.child;else{if(l===m)break a;for(;null===l.sibling;){if(null===l.return||l.return===m)break a;l=l.return}l.sibling.return=l.return;l=l.sibling}g?(h=f,m=d.stateNode,8===h.nodeType?h.parentNode.removeChild(m):h.removeChild(m)):f.removeChild(d.stateNode)}else if(4===d.tag){if(null!==d.child){f=d.stateNode.containerInfo;g=!0;d.child.return=d;d=d.child;continue}}else if(Ch(a,d,c),null!==d.child){d.child.return=d;d=d.child;continue}if(d===
b)break;for(;null===d.sibling;){if(null===d.return||d.return===b)return;d=d.return;4===d.tag&&(e=!1)}d.sibling.return=d.return;d=d.sibling}}function Qe(a,b){switch(b.tag){case 0:case 11:case 14:case 15:case 22:Ah(3,b);return;case 1:return;case 5:var c=b.stateNode;if(null!=c){var d=b.memoizedProps,e=null!==a?a.memoizedProps:d;a=b.type;var f=b.updateQueue;b.updateQueue=null;if(null!==f){c[vc]=d;"input"===a&&"radio"===d.type&&null!=d.name&&If(c,d);Vd(a,e);b=Vd(a,d);for(e=0;e<f.length;e+=2){var g=f[e],
h=f[e+1];"style"===g?gg(c,h):"dangerouslySetInnerHTML"===g?xh(c,h):"children"===g?Wb(c,h):xd(c,g,h,b)}switch(a){case "input":Dd(c,d);break;case "textarea":Lf(c,d);break;case "select":b=c._wrapperState.wasMultiple,c._wrapperState.wasMultiple=!!d.multiple,a=d.value,null!=a?hb(c,!!d.multiple,a,!1):b!==!!d.multiple&&(null!=d.defaultValue?hb(c,!!d.multiple,d.defaultValue,!0):hb(c,!!d.multiple,d.multiple?[]:"",!1))}}}return;case 6:if(null===b.stateNode)throw Error(k(162));b.stateNode.nodeValue=b.memoizedProps;
return;case 3:b=b.stateNode;b.hydrate&&(b.hydrate=!1,bg(b.containerInfo));return;case 12:return;case 13:c=b;null===b.memoizedState?d=!1:(d=!0,c=b.child,Re=Y());if(null!==c)a:for(a=c;;){if(5===a.tag)f=a.stateNode,d?(f=f.style,"function"===typeof f.setProperty?f.setProperty("display","none","important"):f.display="none"):(f=a.stateNode,e=a.memoizedProps.style,e=void 0!==e&&null!==e&&e.hasOwnProperty("display")?e.display:null,f.style.display=fg("display",e));else if(6===a.tag)a.stateNode.nodeValue=d?
"":a.memoizedProps;else if(13===a.tag&&null!==a.memoizedState&&null===a.memoizedState.dehydrated){f=a.child.sibling;f.return=a;a=f;continue}else if(null!==a.child){a.child.return=a;a=a.child;continue}if(a===c)break;for(;null===a.sibling;){if(null===a.return||a.return===c)break a;a=a.return}a.sibling.return=a.return;a=a.sibling}Hh(b);return;case 19:Hh(b);return;case 17:return}throw Error(k(163));}function Hh(a){var b=a.updateQueue;if(null!==b){a.updateQueue=null;var c=a.stateNode;null===c&&(c=a.stateNode=
new pj);b.forEach(function(b){var d=qj.bind(null,a,b);c.has(b)||(c.add(b),b.then(d,d))})}}function Ih(a,b,c){c=Ea(c,null);c.tag=3;c.payload={element:null};var d=b.value;c.callback=function(){cd||(cd=!0,Se=d);Me(a,b)};return c}function Jh(a,b,c){c=Ea(c,null);c.tag=3;var d=a.type.getDerivedStateFromError;if("function"===typeof d){var e=b.value;c.payload=function(){Me(a,b);return d(e)}}var f=a.stateNode;null!==f&&"function"===typeof f.componentDidCatch&&(c.callback=function(){"function"!==typeof d&&
(null===La?La=new Set([this]):La.add(this),Me(a,b));var c=b.stack;this.componentDidCatch(b.value,{componentStack:null!==c?c:""})});return c}function ka(){return(p&(ca|ma))!==H?1073741821-(Y()/10|0):0!==dd?dd:dd=1073741821-(Y()/10|0)}function Va(a,b,c){b=b.mode;if(0===(b&2))return 1073741823;var d=Cc();if(0===(b&4))return 99===d?1073741823:1073741822;if((p&ca)!==H)return P;if(null!==c)a=Fc(a,c.timeoutMs|0||5E3,250);else switch(d){case 99:a=1073741823;break;case 98:a=Fc(a,150,100);break;case 97:case 96:a=
Fc(a,5E3,250);break;case 95:a=2;break;default:throw Error(k(326));}null!==U&&a===P&&--a;return a}function ed(a,b){a.expirationTime<b&&(a.expirationTime=b);var c=a.alternate;null!==c&&c.expirationTime<b&&(c.expirationTime=b);var d=a.return,e=null;if(null===d&&3===a.tag)e=a.stateNode;else for(;null!==d;){c=d.alternate;d.childExpirationTime<b&&(d.childExpirationTime=b);null!==c&&c.childExpirationTime<b&&(c.childExpirationTime=b);if(null===d.return&&3===d.tag){e=d.stateNode;break}d=d.return}null!==e&&
(U===e&&(Kc(b),F===bd&&Ya(e,P)),yh(e,b));return e}function fd(a){var b=a.lastExpiredTime;if(0!==b)return b;b=a.firstPendingTime;if(!Kh(a,b))return b;var c=a.lastPingedTime;a=a.nextKnownPendingLevel;a=c>a?c:a;return 2>=a&&b!==a?0:a}function V(a){if(0!==a.lastExpiredTime)a.callbackExpirationTime=1073741823,a.callbackPriority=99,a.callbackNode=Og(Te.bind(null,a));else{var b=fd(a),c=a.callbackNode;if(0===b)null!==c&&(a.callbackNode=null,a.callbackExpirationTime=0,a.callbackPriority=90);else{var d=ka();
1073741823===b?d=99:1===b||2===b?d=95:(d=10*(1073741821-b)-10*(1073741821-d),d=0>=d?99:250>=d?98:5250>=d?97:95);if(null!==c){var e=a.callbackPriority;if(a.callbackExpirationTime===b&&e>=d)return;c!==Qg&&Rg(c)}a.callbackExpirationTime=b;a.callbackPriority=d;b=1073741823===b?Og(Te.bind(null,a)):Ng(d,Lh.bind(null,a),{timeout:10*(1073741821-b)-Y()});a.callbackNode=b}}}function Lh(a,b){dd=0;if(b)return b=ka(),Ue(a,b),V(a),null;var c=fd(a);if(0!==c){b=a.callbackNode;if((p&(ca|ma))!==H)throw Error(k(327));
xb();a===U&&c===P||$a(a,c);if(null!==t){var d=p;p|=ca;var e=Mh();do try{rj();break}catch(h){Nh(a,h)}while(1);le();p=d;gd.current=e;if(F===hd)throw b=id,$a(a,c),Ya(a,c),V(a),b;if(null===t)switch(e=a.finishedWork=a.current.alternate,a.finishedExpirationTime=c,d=F,U=null,d){case Xa:case hd:throw Error(k(345));case Oh:Ue(a,2<c?2:c);break;case ad:Ya(a,c);d=a.lastSuspendedTime;c===d&&(a.nextKnownPendingLevel=Ve(e));if(1073741823===ta&&(e=Re+Ph-Y(),10<e)){if(jd){var f=a.lastPingedTime;if(0===f||f>=c){a.lastPingedTime=
c;$a(a,c);break}}f=fd(a);if(0!==f&&f!==c)break;if(0!==d&&d!==c){a.lastPingedTime=d;break}a.timeoutHandle=We(ab.bind(null,a),e);break}ab(a);break;case bd:Ya(a,c);d=a.lastSuspendedTime;c===d&&(a.nextKnownPendingLevel=Ve(e));if(jd&&(e=a.lastPingedTime,0===e||e>=c)){a.lastPingedTime=c;$a(a,c);break}e=fd(a);if(0!==e&&e!==c)break;if(0!==d&&d!==c){a.lastPingedTime=d;break}1073741823!==Yb?d=10*(1073741821-Yb)-Y():1073741823===ta?d=0:(d=10*(1073741821-ta)-5E3,e=Y(),c=10*(1073741821-c)-e,d=e-d,0>d&&(d=0),d=
(120>d?120:480>d?480:1080>d?1080:1920>d?1920:3E3>d?3E3:4320>d?4320:1960*sj(d/1960))-d,c<d&&(d=c));if(10<d){a.timeoutHandle=We(ab.bind(null,a),d);break}ab(a);break;case Xe:if(1073741823!==ta&&null!==kd){f=ta;var g=kd;d=g.busyMinDurationMs|0;0>=d?d=0:(e=g.busyDelayMs|0,f=Y()-(10*(1073741821-f)-(g.timeoutMs|0||5E3)),d=f<=e?0:e+d-f);if(10<d){Ya(a,c);a.timeoutHandle=We(ab.bind(null,a),d);break}}ab(a);break;default:throw Error(k(329));}V(a);if(a.callbackNode===b)return Lh.bind(null,a)}}return null}function Te(a){var b=
a.lastExpiredTime;b=0!==b?b:1073741823;if((p&(ca|ma))!==H)throw Error(k(327));xb();a===U&&b===P||$a(a,b);if(null!==t){var c=p;p|=ca;var d=Mh();do try{tj();break}catch(e){Nh(a,e)}while(1);le();p=c;gd.current=d;if(F===hd)throw c=id,$a(a,b),Ya(a,b),V(a),c;if(null!==t)throw Error(k(261));a.finishedWork=a.current.alternate;a.finishedExpirationTime=b;U=null;ab(a);V(a)}return null}function uj(){if(null!==bb){var a=bb;bb=null;a.forEach(function(a,c){Ue(c,a);V(c)});ha()}}function Qh(a,b){var c=p;p|=1;try{return a(b)}finally{p=
c,p===H&&ha()}}function Rh(a,b){var c=p;p&=-2;p|=Ye;try{return a(b)}finally{p=c,p===H&&ha()}}function $a(a,b){a.finishedWork=null;a.finishedExpirationTime=0;var c=a.timeoutHandle;-1!==c&&(a.timeoutHandle=-1,vj(c));if(null!==t)for(c=t.return;null!==c;){var d=c;switch(d.tag){case 1:d=d.type.childContextTypes;null!==d&&void 0!==d&&(q(G),q(B));break;case 3:tb();q(G);q(B);break;case 5:te(d);break;case 4:tb();break;case 13:q(D);break;case 19:q(D);break;case 10:me(d)}c=c.return}U=a;t=Sa(a.current,null);
P=b;F=Xa;id=null;Yb=ta=1073741823;kd=null;Xb=0;jd=!1}function Nh(a,b){do{try{le();Sc.current=Tc;if(Uc)for(var c=z.memoizedState;null!==c;){var d=c.queue;null!==d&&(d.pending=null);c=c.next}Ia=0;J=K=z=null;Uc=!1;if(null===t||null===t.return)return F=hd,id=b,t=null;a:{var e=a,f=t.return,g=t,h=b;b=P;g.effectTag|=2048;g.firstEffect=g.lastEffect=null;if(null!==h&&"object"===typeof h&&"function"===typeof h.then){var m=h;if(0===(g.mode&2)){var n=g.alternate;n?(g.updateQueue=n.updateQueue,g.memoizedState=
n.memoizedState,g.expirationTime=n.expirationTime):(g.updateQueue=null,g.memoizedState=null)}var l=0!==(D.current&1),k=f;do{var p;if(p=13===k.tag){var q=k.memoizedState;if(null!==q)p=null!==q.dehydrated?!0:!1;else{var w=k.memoizedProps;p=void 0===w.fallback?!1:!0!==w.unstable_avoidThisFallback?!0:l?!1:!0}}if(p){var y=k.updateQueue;if(null===y){var r=new Set;r.add(m);k.updateQueue=r}else y.add(m);if(0===(k.mode&2)){k.effectTag|=64;g.effectTag&=-2981;if(1===g.tag)if(null===g.alternate)g.tag=17;else{var O=
Ea(1073741823,null);O.tag=Jc;Fa(g,O)}g.expirationTime=1073741823;break a}h=void 0;g=b;var v=e.pingCache;null===v?(v=e.pingCache=new wj,h=new Set,v.set(m,h)):(h=v.get(m),void 0===h&&(h=new Set,v.set(m,h)));if(!h.has(g)){h.add(g);var x=xj.bind(null,e,m,g);m.then(x,x)}k.effectTag|=4096;k.expirationTime=b;break a}k=k.return}while(null!==k);h=Error((na(g.type)||"A React component")+" suspended while rendering, but no fallback UI was specified.\n\nAdd a <Suspense fallback=...> component higher in the tree to provide a loading indicator or placeholder to display."+
Bd(g))}F!==Xe&&(F=Oh);h=Le(h,g);k=f;do{switch(k.tag){case 3:m=h;k.effectTag|=4096;k.expirationTime=b;var A=Ih(k,m,b);Ug(k,A);break a;case 1:m=h;var u=k.type,B=k.stateNode;if(0===(k.effectTag&64)&&("function"===typeof u.getDerivedStateFromError||null!==B&&"function"===typeof B.componentDidCatch&&(null===La||!La.has(B)))){k.effectTag|=4096;k.expirationTime=b;var H=Jh(k,m,b);Ug(k,H);break a}}k=k.return}while(null!==k)}t=Sh(t)}catch(cj){b=cj;continue}break}while(1)}function Mh(a){a=gd.current;gd.current=
Tc;return null===a?Tc:a}function Vg(a,b){a<ta&&2<a&&(ta=a);null!==b&&a<Yb&&2<a&&(Yb=a,kd=b)}function Kc(a){a>Xb&&(Xb=a)}function tj(){for(;null!==t;)t=Th(t)}function rj(){for(;null!==t&&!yj();)t=Th(t)}function Th(a){var b=zj(a.alternate,a,P);a.memoizedProps=a.pendingProps;null===b&&(b=Sh(a));Uh.current=null;return b}function Sh(a){t=a;do{var b=t.alternate;a=t.return;if(0===(t.effectTag&2048)){b=hj(b,t,P);if(1===P||1!==t.childExpirationTime){for(var c=0,d=t.child;null!==d;){var e=d.expirationTime,
f=d.childExpirationTime;e>c&&(c=e);f>c&&(c=f);d=d.sibling}t.childExpirationTime=c}if(null!==b)return b;null!==a&&0===(a.effectTag&2048)&&(null===a.firstEffect&&(a.firstEffect=t.firstEffect),null!==t.lastEffect&&(null!==a.lastEffect&&(a.lastEffect.nextEffect=t.firstEffect),a.lastEffect=t.lastEffect),1<t.effectTag&&(null!==a.lastEffect?a.lastEffect.nextEffect=t:a.firstEffect=t,a.lastEffect=t))}else{b=lj(t);if(null!==b)return b.effectTag&=2047,b;null!==a&&(a.firstEffect=a.lastEffect=null,a.effectTag|=
2048)}b=t.sibling;if(null!==b)return b;t=a}while(null!==t);F===Xa&&(F=Xe);return null}function Ve(a){var b=a.expirationTime;a=a.childExpirationTime;return b>a?b:a}function ab(a){var b=Cc();Da(99,Aj.bind(null,a,b));return null}function Aj(a,b){do xb();while(null!==Zb);if((p&(ca|ma))!==H)throw Error(k(327));var c=a.finishedWork,d=a.finishedExpirationTime;if(null===c)return null;a.finishedWork=null;a.finishedExpirationTime=0;if(c===a.current)throw Error(k(177));a.callbackNode=null;a.callbackExpirationTime=
0;a.callbackPriority=90;a.nextKnownPendingLevel=0;var e=Ve(c);a.firstPendingTime=e;d<=a.lastSuspendedTime?a.firstSuspendedTime=a.lastSuspendedTime=a.nextKnownPendingLevel=0:d<=a.firstSuspendedTime&&(a.firstSuspendedTime=d-1);d<=a.lastPingedTime&&(a.lastPingedTime=0);d<=a.lastExpiredTime&&(a.lastExpiredTime=0);a===U&&(t=U=null,P=0);1<c.effectTag?null!==c.lastEffect?(c.lastEffect.nextEffect=c,e=c.firstEffect):e=c:e=c.firstEffect;if(null!==e){var f=p;p|=ma;Uh.current=null;Ze=tc;var g=kg();if(Xd(g)){if("selectionStart"in
g)var h={start:g.selectionStart,end:g.selectionEnd};else a:{h=(h=g.ownerDocument)&&h.defaultView||window;var m=h.getSelection&&h.getSelection();if(m&&0!==m.rangeCount){h=m.anchorNode;var n=m.anchorOffset,q=m.focusNode;m=m.focusOffset;try{h.nodeType,q.nodeType}catch(sb){h=null;break a}var ba=0,w=-1,y=-1,B=0,D=0,r=g,z=null;b:for(;;){for(var v;;){r!==h||0!==n&&3!==r.nodeType||(w=ba+n);r!==q||0!==m&&3!==r.nodeType||(y=ba+m);3===r.nodeType&&(ba+=r.nodeValue.length);if(null===(v=r.firstChild))break;z=r;
r=v}for(;;){if(r===g)break b;z===h&&++B===n&&(w=ba);z===q&&++D===m&&(y=ba);if(null!==(v=r.nextSibling))break;r=z;z=r.parentNode}r=v}h=-1===w||-1===y?null:{start:w,end:y}}else h=null}h=h||{start:0,end:0}}else h=null;$e={activeElementDetached:null,focusedElem:g,selectionRange:h};tc=!1;l=e;do try{Bj()}catch(sb){if(null===l)throw Error(k(330));Za(l,sb);l=l.nextEffect}while(null!==l);l=e;do try{for(g=a,h=b;null!==l;){var x=l.effectTag;x&16&&Wb(l.stateNode,"");if(x&128){var A=l.alternate;if(null!==A){var u=
A.ref;null!==u&&("function"===typeof u?u(null):u.current=null)}}switch(x&1038){case 2:Gh(l);l.effectTag&=-3;break;case 6:Gh(l);l.effectTag&=-3;Qe(l.alternate,l);break;case 1024:l.effectTag&=-1025;break;case 1028:l.effectTag&=-1025;Qe(l.alternate,l);break;case 4:Qe(l.alternate,l);break;case 8:n=l,Dh(g,n,h),Eh(n)}l=l.nextEffect}}catch(sb){if(null===l)throw Error(k(330));Za(l,sb);l=l.nextEffect}while(null!==l);u=$e;A=kg();x=u.focusedElem;h=u.selectionRange;if(A!==x&&x&&x.ownerDocument&&jg(x.ownerDocument.documentElement,
x)){null!==h&&Xd(x)&&(A=h.start,u=h.end,void 0===u&&(u=A),"selectionStart"in x?(x.selectionStart=A,x.selectionEnd=Math.min(u,x.value.length)):(u=(A=x.ownerDocument||document)&&A.defaultView||window,u.getSelection&&(u=u.getSelection(),n=x.textContent.length,g=Math.min(h.start,n),h=void 0===h.end?g:Math.min(h.end,n),!u.extend&&g>h&&(n=h,h=g,g=n),n=ig(x,g),q=ig(x,h),n&&q&&(1!==u.rangeCount||u.anchorNode!==n.node||u.anchorOffset!==n.offset||u.focusNode!==q.node||u.focusOffset!==q.offset)&&(A=A.createRange(),
A.setStart(n.node,n.offset),u.removeAllRanges(),g>h?(u.addRange(A),u.extend(q.node,q.offset)):(A.setEnd(q.node,q.offset),u.addRange(A))))));A=[];for(u=x;u=u.parentNode;)1===u.nodeType&&A.push({element:u,left:u.scrollLeft,top:u.scrollTop});"function"===typeof x.focus&&x.focus();for(x=0;x<A.length;x++)u=A[x],u.element.scrollLeft=u.left,u.element.scrollTop=u.top}tc=!!Ze;$e=Ze=null;a.current=c;l=e;do try{for(x=a;null!==l;){var F=l.effectTag;F&36&&oj(x,l.alternate,l);if(F&128){A=void 0;var E=l.ref;if(null!==
E){var G=l.stateNode;switch(l.tag){case 5:A=G;break;default:A=G}"function"===typeof E?E(A):E.current=A}}l=l.nextEffect}}catch(sb){if(null===l)throw Error(k(330));Za(l,sb);l=l.nextEffect}while(null!==l);l=null;Cj();p=f}else a.current=c;if(ld)ld=!1,Zb=a,$b=b;else for(l=e;null!==l;)b=l.nextEffect,l.nextEffect=null,l=b;b=a.firstPendingTime;0===b&&(La=null);1073741823===b?a===af?ac++:(ac=0,af=a):ac=0;"function"===typeof bf&&bf(c.stateNode,d);V(a);if(cd)throw cd=!1,a=Se,Se=null,a;if((p&Ye)!==H)return null;
ha();return null}function Bj(){for(;null!==l;){var a=l.effectTag;0!==(a&256)&&nj(l.alternate,l);0===(a&512)||ld||(ld=!0,Ng(97,function(){xb();return null}));l=l.nextEffect}}function xb(){if(90!==$b){var a=97<$b?97:$b;$b=90;return Da(a,Dj)}}function Dj(){if(null===Zb)return!1;var a=Zb;Zb=null;if((p&(ca|ma))!==H)throw Error(k(331));var b=p;p|=ma;for(a=a.current.firstEffect;null!==a;){try{var c=a;if(0!==(c.effectTag&512))switch(c.tag){case 0:case 11:case 15:case 22:Ah(5,c),Bh(5,c)}}catch(d){if(null===
a)throw Error(k(330));Za(a,d)}c=a.nextEffect;a.nextEffect=null;a=c}p=b;ha();return!0}function Vh(a,b,c){b=Le(c,b);b=Ih(a,b,1073741823);Fa(a,b);a=ed(a,1073741823);null!==a&&V(a)}function Za(a,b){if(3===a.tag)Vh(a,a,b);else for(var c=a.return;null!==c;){if(3===c.tag){Vh(c,a,b);break}else if(1===c.tag){var d=c.stateNode;if("function"===typeof c.type.getDerivedStateFromError||"function"===typeof d.componentDidCatch&&(null===La||!La.has(d))){a=Le(b,a);a=Jh(c,a,1073741823);Fa(c,a);c=ed(c,1073741823);null!==
c&&V(c);break}}c=c.return}}function xj(a,b,c){var d=a.pingCache;null!==d&&d.delete(b);U===a&&P===c?F===bd||F===ad&&1073741823===ta&&Y()-Re<Ph?$a(a,P):jd=!0:Kh(a,c)&&(b=a.lastPingedTime,0!==b&&b<c||(a.lastPingedTime=c,V(a)))}function qj(a,b){var c=a.stateNode;null!==c&&c.delete(b);b=0;0===b&&(b=ka(),b=Va(b,a,null));a=ed(a,b);null!==a&&V(a)}function Ej(a){if("undefined"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__)return!1;var b=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(b.isDisabled||!b.supportsFiber)return!0;try{var c=
b.inject(a);bf=function(a,e){try{b.onCommitFiberRoot(c,a,void 0,64===(a.current.effectTag&64))}catch(f){}};Ne=function(a){try{b.onCommitFiberUnmount(c,a)}catch(e){}}}catch(d){}return!0}function Fj(a,b,c,d){this.tag=a;this.key=c;this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null;this.index=0;this.ref=null;this.pendingProps=b;this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null;this.mode=d;this.effectTag=0;this.lastEffect=this.firstEffect=this.nextEffect=
null;this.childExpirationTime=this.expirationTime=0;this.alternate=null}function Ge(a){a=a.prototype;return!(!a||!a.isReactComponent)}function Gj(a){if("function"===typeof a)return Ge(a)?1:0;if(void 0!==a&&null!==a){a=a.$$typeof;if(a===zd)return 11;if(a===Ad)return 14}return 2}function Sa(a,b){var c=a.alternate;null===c?(c=la(a.tag,b,a.key,a.mode),c.elementType=a.elementType,c.type=a.type,c.stateNode=a.stateNode,c.alternate=a,a.alternate=c):(c.pendingProps=b,c.effectTag=0,c.nextEffect=null,c.firstEffect=
null,c.lastEffect=null);c.childExpirationTime=a.childExpirationTime;c.expirationTime=a.expirationTime;c.child=a.child;c.memoizedProps=a.memoizedProps;c.memoizedState=a.memoizedState;c.updateQueue=a.updateQueue;b=a.dependencies;c.dependencies=null===b?null:{expirationTime:b.expirationTime,firstContext:b.firstContext,responders:b.responders};c.sibling=a.sibling;c.index=a.index;c.ref=a.ref;return c}function Oc(a,b,c,d,e,f){var g=2;d=a;if("function"===typeof a)Ge(a)&&(g=1);else if("string"===typeof a)g=
5;else a:switch(a){case Ma:return Ha(c.children,e,f,b);case Hj:g=8;e|=7;break;case Af:g=8;e|=1;break;case kc:return a=la(12,c,b,e|8),a.elementType=kc,a.type=kc,a.expirationTime=f,a;case lc:return a=la(13,c,b,e),a.type=lc,a.elementType=lc,a.expirationTime=f,a;case yd:return a=la(19,c,b,e),a.elementType=yd,a.expirationTime=f,a;default:if("object"===typeof a&&null!==a)switch(a.$$typeof){case Cf:g=10;break a;case Bf:g=9;break a;case zd:g=11;break a;case Ad:g=14;break a;case Ef:g=16;d=null;break a;case Df:g=
22;break a}throw Error(k(130,null==a?a:typeof a,""));}b=la(g,c,b,e);b.elementType=a;b.type=d;b.expirationTime=f;return b}function Ha(a,b,c,d){a=la(7,a,d,b);a.expirationTime=c;return a}function qe(a,b,c){a=la(6,a,null,b);a.expirationTime=c;return a}function re(a,b,c){b=la(4,null!==a.children?a.children:[],a.key,b);b.expirationTime=c;b.stateNode={containerInfo:a.containerInfo,pendingChildren:null,implementation:a.implementation};return b}function Ij(a,b,c){this.tag=b;this.current=null;this.containerInfo=
a;this.pingCache=this.pendingChildren=null;this.finishedExpirationTime=0;this.finishedWork=null;this.timeoutHandle=-1;this.pendingContext=this.context=null;this.hydrate=c;this.callbackNode=null;this.callbackPriority=90;this.lastExpiredTime=this.lastPingedTime=this.nextKnownPendingLevel=this.lastSuspendedTime=this.firstSuspendedTime=this.firstPendingTime=0}function Kh(a,b){var c=a.firstSuspendedTime;a=a.lastSuspendedTime;return 0!==c&&c>=b&&a<=b}function Ya(a,b){var c=a.firstSuspendedTime,d=a.lastSuspendedTime;
c<b&&(a.firstSuspendedTime=b);if(d>b||0===c)a.lastSuspendedTime=b;b<=a.lastPingedTime&&(a.lastPingedTime=0);b<=a.lastExpiredTime&&(a.lastExpiredTime=0)}function yh(a,b){b>a.firstPendingTime&&(a.firstPendingTime=b);var c=a.firstSuspendedTime;0!==c&&(b>=c?a.firstSuspendedTime=a.lastSuspendedTime=a.nextKnownPendingLevel=0:b>=a.lastSuspendedTime&&(a.lastSuspendedTime=b+1),b>a.nextKnownPendingLevel&&(a.nextKnownPendingLevel=b))}function Ue(a,b){var c=a.lastExpiredTime;if(0===c||c>b)a.lastExpiredTime=b}
function md(a,b,c,d){var e=b.current,f=ka(),g=Vb.suspense;f=Va(f,e,g);a:if(c){c=c._reactInternalFiber;b:{if(Na(c)!==c||1!==c.tag)throw Error(k(170));var h=c;do{switch(h.tag){case 3:h=h.stateNode.context;break b;case 1:if(N(h.type)){h=h.stateNode.__reactInternalMemoizedMergedChildContext;break b}}h=h.return}while(null!==h);throw Error(k(171));}if(1===c.tag){var m=c.type;if(N(m)){c=Gg(c,m,h);break a}}c=h}else c=Ca;null===b.context?b.context=c:b.pendingContext=c;b=Ea(f,g);b.payload={element:a};d=void 0===
d?null:d;null!==d&&(b.callback=d);Fa(e,b);Ja(e,f);return f}function cf(a){a=a.current;if(!a.child)return null;switch(a.child.tag){case 5:return a.child.stateNode;default:return a.child.stateNode}}function Wh(a,b){a=a.memoizedState;null!==a&&null!==a.dehydrated&&a.retryTime<b&&(a.retryTime=b)}function df(a,b){Wh(a,b);(a=a.alternate)&&Wh(a,b)}function ef(a,b,c){c=null!=c&&!0===c.hydrate;var d=new Ij(a,b,c),e=la(3,null,null,2===b?7:1===b?3:0);d.current=e;e.stateNode=d;ne(e);a[Lb]=d.current;c&&0!==b&&
xi(a,9===a.nodeType?a:a.ownerDocument);this._internalRoot=d}function bc(a){return!(!a||1!==a.nodeType&&9!==a.nodeType&&11!==a.nodeType&&(8!==a.nodeType||" react-mount-point-unstable "!==a.nodeValue))}function Jj(a,b){b||(b=a?9===a.nodeType?a.documentElement:a.firstChild:null,b=!(!b||1!==b.nodeType||!b.hasAttribute("data-reactroot")));if(!b)for(var c;c=a.lastChild;)a.removeChild(c);return new ef(a,0,b?{hydrate:!0}:void 0)}function nd(a,b,c,d,e){var f=c._reactRootContainer;if(f){var g=f._internalRoot;
if("function"===typeof e){var h=e;e=function(){var a=cf(g);h.call(a)}}md(b,g,a,e)}else{f=c._reactRootContainer=Jj(c,d);g=f._internalRoot;if("function"===typeof e){var m=e;e=function(){var a=cf(g);m.call(a)}}Rh(function(){md(b,g,a,e)})}return cf(g)}function Kj(a,b,c){var d=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:gb,key:null==d?null:""+d,children:a,containerInfo:b,implementation:c}}function Xh(a,b){var c=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;
if(!bc(b))throw Error(k(200));return Kj(a,b,null,c)}if(!ea)throw Error(k(227));var ki=function(a,b,c,d,e,f,g,h,m){var n=Array.prototype.slice.call(arguments,3);try{b.apply(c,n)}catch(C){this.onError(C)}},yb=!1,gc=null,hc=!1,pd=null,li={onError:function(a){yb=!0;gc=a}},td=null,rf=null,mf=null,ic=null,cb={},jc=[],qd={},db={},rd={},wa=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),M=ea.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.assign,
sd=null,eb=null,fb=null,ee=function(a,b){return a(b)},eg=function(a,b,c,d,e){return a(b,c,d,e)},vd=function(){},vf=ee,Oa=!1,wd=!1,Z=ea.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.Scheduler,Lj=Z.unstable_cancelCallback,ff=Z.unstable_now,$f=Z.unstable_scheduleCallback,Mj=Z.unstable_shouldYield,Yh=Z.unstable_requestPaint,Pd=Z.unstable_runWithPriority,Nj=Z.unstable_getCurrentPriorityLevel,Oj=Z.unstable_ImmediatePriority,Zh=Z.unstable_UserBlockingPriority,ag=Z.unstable_NormalPriority,Pj=Z.unstable_LowPriority,
Qj=Z.unstable_IdlePriority,oi=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,wf=Object.prototype.hasOwnProperty,yf={},xf={},E={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(a){E[a]=
new L(a,0,!1,a,null,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(a){var b=a[0];E[b]=new L(b,1,!1,a[1],null,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(a){E[a]=new L(a,2,!1,a.toLowerCase(),null,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(a){E[a]=new L(a,2,!1,a,null,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(a){E[a]=
new L(a,3,!1,a.toLowerCase(),null,!1)});["checked","multiple","muted","selected"].forEach(function(a){E[a]=new L(a,3,!0,a,null,!1)});["capture","download"].forEach(function(a){E[a]=new L(a,4,!1,a,null,!1)});["cols","rows","size","span"].forEach(function(a){E[a]=new L(a,6,!1,a,null,!1)});["rowSpan","start"].forEach(function(a){E[a]=new L(a,5,!1,a.toLowerCase(),null,!1)});var gf=/[\-:]([a-z])/g,hf=function(a){return a[1].toUpperCase()};"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(a){var b=
a.replace(gf,hf);E[b]=new L(b,1,!1,a,null,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(a){var b=a.replace(gf,hf);E[b]=new L(b,1,!1,a,"http://www.w3.org/1999/xlink",!1)});["xml:base","xml:lang","xml:space"].forEach(function(a){var b=a.replace(gf,hf);E[b]=new L(b,1,!1,a,"http://www.w3.org/XML/1998/namespace",!1)});["tabIndex","crossOrigin"].forEach(function(a){E[a]=new L(a,1,!1,a.toLowerCase(),null,!1)});E.xlinkHref=new L("xlinkHref",1,
!1,"xlink:href","http://www.w3.org/1999/xlink",!0);["src","href","action","formAction"].forEach(function(a){E[a]=new L(a,1,!1,a.toLowerCase(),null,!0)});var da=ea.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;da.hasOwnProperty("ReactCurrentDispatcher")||(da.ReactCurrentDispatcher={current:null});da.hasOwnProperty("ReactCurrentBatchConfig")||(da.ReactCurrentBatchConfig={suspense:null});var si=/^(.*)[\\\/]/,Q="function"===typeof Symbol&&Symbol.for,Pc=Q?Symbol.for("react.element"):60103,gb=Q?Symbol.for("react.portal"):
60106,Ma=Q?Symbol.for("react.fragment"):60107,Af=Q?Symbol.for("react.strict_mode"):60108,kc=Q?Symbol.for("react.profiler"):60114,Cf=Q?Symbol.for("react.provider"):60109,Bf=Q?Symbol.for("react.context"):60110,Hj=Q?Symbol.for("react.concurrent_mode"):60111,zd=Q?Symbol.for("react.forward_ref"):60112,lc=Q?Symbol.for("react.suspense"):60113,yd=Q?Symbol.for("react.suspense_list"):60120,Ad=Q?Symbol.for("react.memo"):60115,Ef=Q?Symbol.for("react.lazy"):60116,Df=Q?Symbol.for("react.block"):60121,zf="function"===
typeof Symbol&&Symbol.iterator,od,xh=function(a){return"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(b,c,d,e){MSApp.execUnsafeLocalFunction(function(){return a(b,c,d,e)})}:a}(function(a,b){if("http://www.w3.org/2000/svg"!==a.namespaceURI||"innerHTML"in a)a.innerHTML=b;else{od=od||document.createElement("div");od.innerHTML="<svg>"+b.valueOf().toString()+"</svg>";for(b=od.firstChild;a.firstChild;)a.removeChild(a.firstChild);for(;b.firstChild;)a.appendChild(b.firstChild)}}),Wb=function(a,
b){if(b){var c=a.firstChild;if(c&&c===a.lastChild&&3===c.nodeType){c.nodeValue=b;return}}a.textContent=b},ib={animationend:nc("Animation","AnimationEnd"),animationiteration:nc("Animation","AnimationIteration"),animationstart:nc("Animation","AnimationStart"),transitionend:nc("Transition","TransitionEnd")},Id={},Of={};wa&&(Of=document.createElement("div").style,"AnimationEvent"in window||(delete ib.animationend.animation,delete ib.animationiteration.animation,delete ib.animationstart.animation),"TransitionEvent"in
window||delete ib.transitionend.transition);var $h=oc("animationend"),ai=oc("animationiteration"),bi=oc("animationstart"),ci=oc("transitionend"),Db="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Pf=new ("function"===typeof WeakMap?WeakMap:Map),Ab=null,wi=function(a){if(a){var b=a._dispatchListeners,c=a._dispatchInstances;
if(Array.isArray(b))for(var d=0;d<b.length&&!a.isPropagationStopped();d++)lf(a,b[d],c[d]);else b&&lf(a,b,c);a._dispatchListeners=null;a._dispatchInstances=null;a.isPersistent()||a.constructor.release(a)}},qc=[],Rd=!1,fa=[],xa=null,ya=null,za=null,Eb=new Map,Fb=new Map,Jb=[],Nd="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput close cancel copy cut paste click change contextmenu reset submit".split(" "),
yi="focus blur dragenter dragleave mouseover mouseout pointerover pointerout gotpointercapture lostpointercapture".split(" "),dg={},cg=new Map,Td=new Map,Rj=["abort","abort",$h,"animationEnd",ai,"animationIteration",bi,"animationStart","canplay","canPlay","canplaythrough","canPlayThrough","durationchange","durationChange","emptied","emptied","encrypted","encrypted","ended","ended","error","error","gotpointercapture","gotPointerCapture","load","load","loadeddata","loadedData","loadedmetadata","loadedMetadata",
"loadstart","loadStart","lostpointercapture","lostPointerCapture","playing","playing","progress","progress","seeking","seeking","stalled","stalled","suspend","suspend","timeupdate","timeUpdate",ci,"transitionEnd","waiting","waiting"];Sd("blur blur cancel cancel click click close close contextmenu contextMenu copy copy cut cut auxclick auxClick dblclick doubleClick dragend dragEnd dragstart dragStart drop drop focus focus input input invalid invalid keydown keyDown keypress keyPress keyup keyUp mousedown mouseDown mouseup mouseUp paste paste pause pause play play pointercancel pointerCancel pointerdown pointerDown pointerup pointerUp ratechange rateChange reset reset seeked seeked submit submit touchcancel touchCancel touchend touchEnd touchstart touchStart volumechange volumeChange".split(" "),
0);Sd("drag drag dragenter dragEnter dragexit dragExit dragleave dragLeave dragover dragOver mousemove mouseMove mouseout mouseOut mouseover mouseOver pointermove pointerMove pointerout pointerOut pointerover pointerOver scroll scroll toggle toggle touchmove touchMove wheel wheel".split(" "),1);Sd(Rj,2);(function(a,b){for(var c=0;c<a.length;c++)Td.set(a[c],b)})("change selectionchange textInput compositionstart compositionend compositionupdate".split(" "),0);var Hi=Zh,Gi=Pd,tc=!0,Kb={animationIterationCount:!0,
borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,
strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Sj=["Webkit","ms","Moz","O"];Object.keys(Kb).forEach(function(a){Sj.forEach(function(b){b=b+a.charAt(0).toUpperCase()+a.substring(1);Kb[b]=Kb[a]})});var Ii=M({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0}),ng="$",og="/$",$d="$?",Zd="$!",Ze=null,$e=null,We="function"===typeof setTimeout?setTimeout:void 0,vj="function"===
typeof clearTimeout?clearTimeout:void 0,jf=Math.random().toString(36).slice(2),Aa="__reactInternalInstance$"+jf,vc="__reactEventHandlers$"+jf,Lb="__reactContainere$"+jf,Ba=null,ce=null,wc=null;M(R.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():"unknown"!==typeof a.returnValue&&(a.returnValue=!1),this.isDefaultPrevented=xc)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():"unknown"!==
typeof a.cancelBubble&&(a.cancelBubble=!0),this.isPropagationStopped=xc)},persist:function(){this.isPersistent=xc},isPersistent:yc,destructor:function(){var a=this.constructor.Interface,b;for(b in a)this[b]=null;this.nativeEvent=this._targetInst=this.dispatchConfig=null;this.isPropagationStopped=this.isDefaultPrevented=yc;this._dispatchInstances=this._dispatchListeners=null}});R.Interface={type:null,target:null,currentTarget:function(){return null},eventPhase:null,bubbles:null,cancelable:null,timeStamp:function(a){return a.timeStamp||
Date.now()},defaultPrevented:null,isTrusted:null};R.extend=function(a){function b(){return c.apply(this,arguments)}var c=this,d=function(){};d.prototype=c.prototype;d=new d;M(d,b.prototype);b.prototype=d;b.prototype.constructor=b;b.Interface=M({},c.Interface,a);b.extend=c.extend;sg(b);return b};sg(R);var Tj=R.extend({data:null}),Uj=R.extend({data:null}),Ni=[9,13,27,32],de=wa&&"CompositionEvent"in window,cc=null;wa&&"documentMode"in document&&(cc=document.documentMode);var Vj=wa&&"TextEvent"in window&&
!cc,xg=wa&&(!de||cc&&8<cc&&11>=cc),wg=String.fromCharCode(32),ua={beforeInput:{phasedRegistrationNames:{bubbled:"onBeforeInput",captured:"onBeforeInputCapture"},dependencies:["compositionend","keypress","textInput","paste"]},compositionEnd:{phasedRegistrationNames:{bubbled:"onCompositionEnd",captured:"onCompositionEndCapture"},dependencies:"blur compositionend keydown keypress keyup mousedown".split(" ")},compositionStart:{phasedRegistrationNames:{bubbled:"onCompositionStart",captured:"onCompositionStartCapture"},
dependencies:"blur compositionstart keydown keypress keyup mousedown".split(" ")},compositionUpdate:{phasedRegistrationNames:{bubbled:"onCompositionUpdate",captured:"onCompositionUpdateCapture"},dependencies:"blur compositionupdate keydown keypress keyup mousedown".split(" ")}},vg=!1,mb=!1,Wj={eventTypes:ua,extractEvents:function(a,b,c,d,e){var f;if(de)b:{switch(a){case "compositionstart":var g=ua.compositionStart;break b;case "compositionend":g=ua.compositionEnd;break b;case "compositionupdate":g=
ua.compositionUpdate;break b}g=void 0}else mb?tg(a,c)&&(g=ua.compositionEnd):"keydown"===a&&229===c.keyCode&&(g=ua.compositionStart);g?(xg&&"ko"!==c.locale&&(mb||g!==ua.compositionStart?g===ua.compositionEnd&&mb&&(f=rg()):(Ba=d,ce="value"in Ba?Ba.value:Ba.textContent,mb=!0)),e=Tj.getPooled(g,b,c,d),f?e.data=f:(f=ug(c),null!==f&&(e.data=f)),lb(e),f=e):f=null;(a=Vj?Oi(a,c):Pi(a,c))?(b=Uj.getPooled(ua.beforeInput,b,c,d),b.data=a,lb(b)):b=null;return null===f?b:null===b?f:[f,b]}},Qi={color:!0,date:!0,
datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0},Ag={change:{phasedRegistrationNames:{bubbled:"onChange",captured:"onChangeCapture"},dependencies:"blur change click focus input keydown keyup selectionchange".split(" ")}},Mb=null,Nb=null,kf=!1;wa&&(kf=Tf("input")&&(!document.documentMode||9<document.documentMode));var Xj={eventTypes:Ag,_isInputEventSupported:kf,extractEvents:function(a,b,c,d,e){e=b?Pa(b):window;var f=
e.nodeName&&e.nodeName.toLowerCase();if("select"===f||"input"===f&&"file"===e.type)var g=Si;else if(yg(e))if(kf)g=Wi;else{g=Ui;var h=Ti}else(f=e.nodeName)&&"input"===f.toLowerCase()&&("checkbox"===e.type||"radio"===e.type)&&(g=Vi);if(g&&(g=g(a,b)))return zg(g,c,d);h&&h(a,e,b);"blur"===a&&(a=e._wrapperState)&&a.controlled&&"number"===e.type&&Ed(e,"number",e.value)}},dc=R.extend({view:null,detail:null}),Yi={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"},di=0,ei=0,fi=!1,gi=!1,ec=dc.extend({screenX:null,
screenY:null,clientX:null,clientY:null,pageX:null,pageY:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,getModifierState:fe,button:null,buttons:null,relatedTarget:function(a){return a.relatedTarget||(a.fromElement===a.srcElement?a.toElement:a.fromElement)},movementX:function(a){if("movementX"in a)return a.movementX;var b=di;di=a.screenX;return fi?"mousemove"===a.type?a.screenX-b:0:(fi=!0,0)},movementY:function(a){if("movementY"in a)return a.movementY;var b=ei;ei=a.screenY;return gi?"mousemove"===
a.type?a.screenY-b:0:(gi=!0,0)}}),hi=ec.extend({pointerId:null,width:null,height:null,pressure:null,tangentialPressure:null,tiltX:null,tiltY:null,twist:null,pointerType:null,isPrimary:null}),fc={mouseEnter:{registrationName:"onMouseEnter",dependencies:["mouseout","mouseover"]},mouseLeave:{registrationName:"onMouseLeave",dependencies:["mouseout","mouseover"]},pointerEnter:{registrationName:"onPointerEnter",dependencies:["pointerout","pointerover"]},pointerLeave:{registrationName:"onPointerLeave",dependencies:["pointerout",
"pointerover"]}},Yj={eventTypes:fc,extractEvents:function(a,b,c,d,e){var f="mouseover"===a||"pointerover"===a,g="mouseout"===a||"pointerout"===a;if(f&&0===(e&32)&&(c.relatedTarget||c.fromElement)||!g&&!f)return null;f=d.window===d?d:(f=d.ownerDocument)?f.defaultView||f.parentWindow:window;if(g){if(g=b,b=(b=c.relatedTarget||c.toElement)?Bb(b):null,null!==b){var h=Na(b);if(b!==h||5!==b.tag&&6!==b.tag)b=null}}else g=null;if(g===b)return null;if("mouseout"===a||"mouseover"===a){var m=ec;var n=fc.mouseLeave;
var l=fc.mouseEnter;var k="mouse"}else if("pointerout"===a||"pointerover"===a)m=hi,n=fc.pointerLeave,l=fc.pointerEnter,k="pointer";a=null==g?f:Pa(g);f=null==b?f:Pa(b);n=m.getPooled(n,g,c,d);n.type=k+"leave";n.target=a;n.relatedTarget=f;c=m.getPooled(l,b,c,d);c.type=k+"enter";c.target=f;c.relatedTarget=a;d=g;k=b;if(d&&k)a:{m=d;l=k;g=0;for(a=m;a;a=pa(a))g++;a=0;for(b=l;b;b=pa(b))a++;for(;0<g-a;)m=pa(m),g--;for(;0<a-g;)l=pa(l),a--;for(;g--;){if(m===l||m===l.alternate)break a;m=pa(m);l=pa(l)}m=null}else m=
null;l=m;for(m=[];d&&d!==l;){g=d.alternate;if(null!==g&&g===l)break;m.push(d);d=pa(d)}for(d=[];k&&k!==l;){g=k.alternate;if(null!==g&&g===l)break;d.push(k);k=pa(k)}for(k=0;k<m.length;k++)be(m[k],"bubbled",n);for(k=d.length;0<k--;)be(d[k],"captured",c);return 0===(e&64)?[n]:[n,c]}},Qa="function"===typeof Object.is?Object.is:Zi,$i=Object.prototype.hasOwnProperty,Zj=wa&&"documentMode"in document&&11>=document.documentMode,Eg={select:{phasedRegistrationNames:{bubbled:"onSelect",captured:"onSelectCapture"},
dependencies:"blur contextmenu dragend focus keydown keyup mousedown mouseup selectionchange".split(" ")}},nb=null,he=null,Pb=null,ge=!1,ak={eventTypes:Eg,extractEvents:function(a,b,c,d,e,f){e=f||(d.window===d?d.document:9===d.nodeType?d:d.ownerDocument);if(!(f=!e)){a:{e=Jd(e);f=rd.onSelect;for(var g=0;g<f.length;g++)if(!e.has(f[g])){e=!1;break a}e=!0}f=!e}if(f)return null;e=b?Pa(b):window;switch(a){case "focus":if(yg(e)||"true"===e.contentEditable)nb=e,he=b,Pb=null;break;case "blur":Pb=he=nb=null;
break;case "mousedown":ge=!0;break;case "contextmenu":case "mouseup":case "dragend":return ge=!1,Dg(c,d);case "selectionchange":if(Zj)break;case "keydown":case "keyup":return Dg(c,d)}return null}},bk=R.extend({animationName:null,elapsedTime:null,pseudoElement:null}),ck=R.extend({clipboardData:function(a){return"clipboardData"in a?a.clipboardData:window.clipboardData}}),dk=dc.extend({relatedTarget:null}),ek={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",
Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},fk={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",
224:"Meta"},gk=dc.extend({key:function(a){if(a.key){var b=ek[a.key]||a.key;if("Unidentified"!==b)return b}return"keypress"===a.type?(a=Ac(a),13===a?"Enter":String.fromCharCode(a)):"keydown"===a.type||"keyup"===a.type?fk[a.keyCode]||"Unidentified":""},location:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,repeat:null,locale:null,getModifierState:fe,charCode:function(a){return"keypress"===a.type?Ac(a):0},keyCode:function(a){return"keydown"===a.type||"keyup"===a.type?a.keyCode:0},which:function(a){return"keypress"===
a.type?Ac(a):"keydown"===a.type||"keyup"===a.type?a.keyCode:0}}),hk=ec.extend({dataTransfer:null}),ik=dc.extend({touches:null,targetTouches:null,changedTouches:null,altKey:null,metaKey:null,ctrlKey:null,shiftKey:null,getModifierState:fe}),jk=R.extend({propertyName:null,elapsedTime:null,pseudoElement:null}),kk=ec.extend({deltaX:function(a){return"deltaX"in a?a.deltaX:"wheelDeltaX"in a?-a.wheelDeltaX:0},deltaY:function(a){return"deltaY"in a?a.deltaY:"wheelDeltaY"in a?-a.wheelDeltaY:"wheelDelta"in a?
-a.wheelDelta:0},deltaZ:null,deltaMode:null}),lk={eventTypes:dg,extractEvents:function(a,b,c,d,e){e=cg.get(a);if(!e)return null;switch(a){case "keypress":if(0===Ac(c))return null;case "keydown":case "keyup":a=gk;break;case "blur":case "focus":a=dk;break;case "click":if(2===c.button)return null;case "auxclick":case "dblclick":case "mousedown":case "mousemove":case "mouseup":case "mouseout":case "mouseover":case "contextmenu":a=ec;break;case "drag":case "dragend":case "dragenter":case "dragexit":case "dragleave":case "dragover":case "dragstart":case "drop":a=
hk;break;case "touchcancel":case "touchend":case "touchmove":case "touchstart":a=ik;break;case $h:case ai:case bi:a=bk;break;case ci:a=jk;break;case "scroll":a=dc;break;case "wheel":a=kk;break;case "copy":case "cut":case "paste":a=ck;break;case "gotpointercapture":case "lostpointercapture":case "pointercancel":case "pointerdown":case "pointermove":case "pointerout":case "pointerover":case "pointerup":a=hi;break;default:a=R}b=a.getPooled(e,b,c,d);lb(b);return b}};(function(a){if(ic)throw Error(k(101));
ic=Array.prototype.slice.call(a);nf()})("ResponderEventPlugin SimpleEventPlugin EnterLeaveEventPlugin ChangeEventPlugin SelectEventPlugin BeforeInputEventPlugin".split(" "));(function(a,b,c){td=a;rf=b;mf=c})(ae,Hb,Pa);pf({SimpleEventPlugin:lk,EnterLeaveEventPlugin:Yj,ChangeEventPlugin:Xj,SelectEventPlugin:ak,BeforeInputEventPlugin:Wj});var ie=[],ob=-1,Ca={},B={current:Ca},G={current:!1},Ra=Ca,bj=Pd,je=$f,Rg=Lj,aj=Nj,Dc=Oj,Ig=Zh,Jg=ag,Kg=Pj,Lg=Qj,Qg={},yj=Mj,Cj=void 0!==Yh?Yh:function(){},qa=null,
Ec=null,ke=!1,ii=ff(),Y=1E4>ii?ff:function(){return ff()-ii},Ic={current:null},Hc=null,qb=null,Gc=null,Tg=0,Jc=2,Ga=!1,Vb=da.ReactCurrentBatchConfig,$g=(new ea.Component).refs,Mc={isMounted:function(a){return(a=a._reactInternalFiber)?Na(a)===a:!1},enqueueSetState:function(a,b,c){a=a._reactInternalFiber;var d=ka(),e=Vb.suspense;d=Va(d,a,e);e=Ea(d,e);e.payload=b;void 0!==c&&null!==c&&(e.callback=c);Fa(a,e);Ja(a,d)},enqueueReplaceState:function(a,b,c){a=a._reactInternalFiber;var d=ka(),e=Vb.suspense;
d=Va(d,a,e);e=Ea(d,e);e.tag=1;e.payload=b;void 0!==c&&null!==c&&(e.callback=c);Fa(a,e);Ja(a,d)},enqueueForceUpdate:function(a,b){a=a._reactInternalFiber;var c=ka(),d=Vb.suspense;c=Va(c,a,d);d=Ea(c,d);d.tag=Jc;void 0!==b&&null!==b&&(d.callback=b);Fa(a,d);Ja(a,c)}},Qc=Array.isArray,wb=ah(!0),Fe=ah(!1),Sb={},ja={current:Sb},Ub={current:Sb},Tb={current:Sb},D={current:0},Sc=da.ReactCurrentDispatcher,X=da.ReactCurrentBatchConfig,Ia=0,z=null,K=null,J=null,Uc=!1,Tc={readContext:W,useCallback:S,useContext:S,
useEffect:S,useImperativeHandle:S,useLayoutEffect:S,useMemo:S,useReducer:S,useRef:S,useState:S,useDebugValue:S,useResponder:S,useDeferredValue:S,useTransition:S},dj={readContext:W,useCallback:ih,useContext:W,useEffect:eh,useImperativeHandle:function(a,b,c){c=null!==c&&void 0!==c?c.concat([a]):null;return ze(4,2,gh.bind(null,b,a),c)},useLayoutEffect:function(a,b){return ze(4,2,a,b)},useMemo:function(a,b){var c=ub();b=void 0===b?null:b;a=a();c.memoizedState=[a,b];return a},useReducer:function(a,b,c){var d=
ub();b=void 0!==c?c(b):b;d.memoizedState=d.baseState=b;a=d.queue={pending:null,dispatch:null,lastRenderedReducer:a,lastRenderedState:b};a=a.dispatch=ch.bind(null,z,a);return[d.memoizedState,a]},useRef:function(a){var b=ub();a={current:a};return b.memoizedState=a},useState:xe,useDebugValue:Be,useResponder:ue,useDeferredValue:function(a,b){var c=xe(a),d=c[0],e=c[1];eh(function(){var c=X.suspense;X.suspense=void 0===b?null:b;try{e(a)}finally{X.suspense=c}},[a,b]);return d},useTransition:function(a){var b=
xe(!1),c=b[0];b=b[1];return[ih(Ce.bind(null,b,a),[b,a]),c]}},ej={readContext:W,useCallback:Yc,useContext:W,useEffect:Xc,useImperativeHandle:hh,useLayoutEffect:fh,useMemo:jh,useReducer:Vc,useRef:dh,useState:function(a){return Vc(Ua)},useDebugValue:Be,useResponder:ue,useDeferredValue:function(a,b){var c=Vc(Ua),d=c[0],e=c[1];Xc(function(){var c=X.suspense;X.suspense=void 0===b?null:b;try{e(a)}finally{X.suspense=c}},[a,b]);return d},useTransition:function(a){var b=Vc(Ua),c=b[0];b=b[1];return[Yc(Ce.bind(null,
b,a),[b,a]),c]}},fj={readContext:W,useCallback:Yc,useContext:W,useEffect:Xc,useImperativeHandle:hh,useLayoutEffect:fh,useMemo:jh,useReducer:Wc,useRef:dh,useState:function(a){return Wc(Ua)},useDebugValue:Be,useResponder:ue,useDeferredValue:function(a,b){var c=Wc(Ua),d=c[0],e=c[1];Xc(function(){var c=X.suspense;X.suspense=void 0===b?null:b;try{e(a)}finally{X.suspense=c}},[a,b]);return d},useTransition:function(a){var b=Wc(Ua),c=b[0];b=b[1];return[Yc(Ce.bind(null,b,a),[b,a]),c]}},ra=null,Ka=null,Wa=
!1,gj=da.ReactCurrentOwner,ia=!1,Je={dehydrated:null,retryTime:0};var jj=function(a,b,c,d){for(c=b.child;null!==c;){if(5===c.tag||6===c.tag)a.appendChild(c.stateNode);else if(4!==c.tag&&null!==c.child){c.child.return=c;c=c.child;continue}if(c===b)break;for(;null===c.sibling;){if(null===c.return||c.return===b)return;c=c.return}c.sibling.return=c.return;c=c.sibling}};var wh=function(a){};var ij=function(a,b,c,d,e){var f=a.memoizedProps;if(f!==d){var g=b.stateNode;Ta(ja.current);a=null;switch(c){case "input":f=
Cd(g,f);d=Cd(g,d);a=[];break;case "option":f=Fd(g,f);d=Fd(g,d);a=[];break;case "select":f=M({},f,{value:void 0});d=M({},d,{value:void 0});a=[];break;case "textarea":f=Gd(g,f);d=Gd(g,d);a=[];break;default:"function"!==typeof f.onClick&&"function"===typeof d.onClick&&(g.onclick=uc)}Ud(c,d);var h,m;c=null;for(h in f)if(!d.hasOwnProperty(h)&&f.hasOwnProperty(h)&&null!=f[h])if("style"===h)for(m in g=f[h],g)g.hasOwnProperty(m)&&(c||(c={}),c[m]="");else"dangerouslySetInnerHTML"!==h&&"children"!==h&&"suppressContentEditableWarning"!==
h&&"suppressHydrationWarning"!==h&&"autoFocus"!==h&&(db.hasOwnProperty(h)?a||(a=[]):(a=a||[]).push(h,null));for(h in d){var k=d[h];g=null!=f?f[h]:void 0;if(d.hasOwnProperty(h)&&k!==g&&(null!=k||null!=g))if("style"===h)if(g){for(m in g)!g.hasOwnProperty(m)||k&&k.hasOwnProperty(m)||(c||(c={}),c[m]="");for(m in k)k.hasOwnProperty(m)&&g[m]!==k[m]&&(c||(c={}),c[m]=k[m])}else c||(a||(a=[]),a.push(h,c)),c=k;else"dangerouslySetInnerHTML"===h?(k=k?k.__html:void 0,g=g?g.__html:void 0,null!=k&&g!==k&&(a=a||
[]).push(h,k)):"children"===h?g===k||"string"!==typeof k&&"number"!==typeof k||(a=a||[]).push(h,""+k):"suppressContentEditableWarning"!==h&&"suppressHydrationWarning"!==h&&(db.hasOwnProperty(h)?(null!=k&&oa(e,h),a||g===k||(a=[])):(a=a||[]).push(h,k))}c&&(a=a||[]).push("style",c);e=a;if(b.updateQueue=e)b.effectTag|=4}};var kj=function(a,b,c,d){c!==d&&(b.effectTag|=4)};var pj="function"===typeof WeakSet?WeakSet:Set,wj="function"===typeof WeakMap?WeakMap:Map,sj=Math.ceil,gd=da.ReactCurrentDispatcher,
Uh=da.ReactCurrentOwner,H=0,Ye=8,ca=16,ma=32,Xa=0,hd=1,Oh=2,ad=3,bd=4,Xe=5,p=H,U=null,t=null,P=0,F=Xa,id=null,ta=1073741823,Yb=1073741823,kd=null,Xb=0,jd=!1,Re=0,Ph=500,l=null,cd=!1,Se=null,La=null,ld=!1,Zb=null,$b=90,bb=null,ac=0,af=null,dd=0,Ja=function(a,b){if(50<ac)throw ac=0,af=null,Error(k(185));a=ed(a,b);if(null!==a){var c=Cc();1073741823===b?(p&Ye)!==H&&(p&(ca|ma))===H?Te(a):(V(a),p===H&&ha()):V(a);(p&4)===H||98!==c&&99!==c||(null===bb?bb=new Map([[a,b]]):(c=bb.get(a),(void 0===c||c>b)&&bb.set(a,
b)))}};var zj=function(a,b,c){var d=b.expirationTime;if(null!==a){var e=b.pendingProps;if(a.memoizedProps!==e||G.current)ia=!0;else{if(d<c){ia=!1;switch(b.tag){case 3:sh(b);Ee();break;case 5:bh(b);if(b.mode&4&&1!==c&&e.hidden)return b.expirationTime=b.childExpirationTime=1,null;break;case 1:N(b.type)&&Bc(b);break;case 4:se(b,b.stateNode.containerInfo);break;case 10:d=b.memoizedProps.value;e=b.type._context;y(Ic,e._currentValue);e._currentValue=d;break;case 13:if(null!==b.memoizedState){d=b.child.childExpirationTime;
if(0!==d&&d>=c)return th(a,b,c);y(D,D.current&1);b=sa(a,b,c);return null!==b?b.sibling:null}y(D,D.current&1);break;case 19:d=b.childExpirationTime>=c;if(0!==(a.effectTag&64)){if(d)return vh(a,b,c);b.effectTag|=64}e=b.memoizedState;null!==e&&(e.rendering=null,e.tail=null);y(D,D.current);if(!d)return null}return sa(a,b,c)}ia=!1}}else ia=!1;b.expirationTime=0;switch(b.tag){case 2:d=b.type;null!==a&&(a.alternate=null,b.alternate=null,b.effectTag|=2);a=b.pendingProps;e=pb(b,B.current);rb(b,c);e=we(null,
b,d,a,e,c);b.effectTag|=1;if("object"===typeof e&&null!==e&&"function"===typeof e.render&&void 0===e.$$typeof){b.tag=1;b.memoizedState=null;b.updateQueue=null;if(N(d)){var f=!0;Bc(b)}else f=!1;b.memoizedState=null!==e.state&&void 0!==e.state?e.state:null;ne(b);var g=d.getDerivedStateFromProps;"function"===typeof g&&Lc(b,d,g,a);e.updater=Mc;b.stateNode=e;e._reactInternalFiber=b;pe(b,d,a,c);b=Ie(null,b,d,!0,f,c)}else b.tag=0,T(null,b,e,c),b=b.child;return b;case 16:a:{e=b.elementType;null!==a&&(a.alternate=
null,b.alternate=null,b.effectTag|=2);a=b.pendingProps;ri(e);if(1!==e._status)throw e._result;e=e._result;b.type=e;f=b.tag=Gj(e);a=aa(e,a);switch(f){case 0:b=He(null,b,e,a,c);break a;case 1:b=rh(null,b,e,a,c);break a;case 11:b=nh(null,b,e,a,c);break a;case 14:b=oh(null,b,e,aa(e.type,a),d,c);break a}throw Error(k(306,e,""));}return b;case 0:return d=b.type,e=b.pendingProps,e=b.elementType===d?e:aa(d,e),He(a,b,d,e,c);case 1:return d=b.type,e=b.pendingProps,e=b.elementType===d?e:aa(d,e),rh(a,b,d,e,c);
case 3:sh(b);d=b.updateQueue;if(null===a||null===d)throw Error(k(282));d=b.pendingProps;e=b.memoizedState;e=null!==e?e.element:null;oe(a,b);Qb(b,d,null,c);d=b.memoizedState.element;if(d===e)Ee(),b=sa(a,b,c);else{if(e=b.stateNode.hydrate)Ka=kb(b.stateNode.containerInfo.firstChild),ra=b,e=Wa=!0;if(e)for(c=Fe(b,null,d,c),b.child=c;c;)c.effectTag=c.effectTag&-3|1024,c=c.sibling;else T(a,b,d,c),Ee();b=b.child}return b;case 5:return bh(b),null===a&&De(b),d=b.type,e=b.pendingProps,f=null!==a?a.memoizedProps:
null,g=e.children,Yd(d,e)?g=null:null!==f&&Yd(d,f)&&(b.effectTag|=16),qh(a,b),b.mode&4&&1!==c&&e.hidden?(b.expirationTime=b.childExpirationTime=1,b=null):(T(a,b,g,c),b=b.child),b;case 6:return null===a&&De(b),null;case 13:return th(a,b,c);case 4:return se(b,b.stateNode.containerInfo),d=b.pendingProps,null===a?b.child=wb(b,null,d,c):T(a,b,d,c),b.child;case 11:return d=b.type,e=b.pendingProps,e=b.elementType===d?e:aa(d,e),nh(a,b,d,e,c);case 7:return T(a,b,b.pendingProps,c),b.child;case 8:return T(a,
b,b.pendingProps.children,c),b.child;case 12:return T(a,b,b.pendingProps.children,c),b.child;case 10:a:{d=b.type._context;e=b.pendingProps;g=b.memoizedProps;f=e.value;var h=b.type._context;y(Ic,h._currentValue);h._currentValue=f;if(null!==g)if(h=g.value,f=Qa(h,f)?0:("function"===typeof d._calculateChangedBits?d._calculateChangedBits(h,f):1073741823)|0,0===f){if(g.children===e.children&&!G.current){b=sa(a,b,c);break a}}else for(h=b.child,null!==h&&(h.return=b);null!==h;){var m=h.dependencies;if(null!==
m){g=h.child;for(var l=m.firstContext;null!==l;){if(l.context===d&&0!==(l.observedBits&f)){1===h.tag&&(l=Ea(c,null),l.tag=Jc,Fa(h,l));h.expirationTime<c&&(h.expirationTime=c);l=h.alternate;null!==l&&l.expirationTime<c&&(l.expirationTime=c);Sg(h.return,c);m.expirationTime<c&&(m.expirationTime=c);break}l=l.next}}else g=10===h.tag?h.type===b.type?null:h.child:h.child;if(null!==g)g.return=h;else for(g=h;null!==g;){if(g===b){g=null;break}h=g.sibling;if(null!==h){h.return=g.return;g=h;break}g=g.return}h=
g}T(a,b,e.children,c);b=b.child}return b;case 9:return e=b.type,f=b.pendingProps,d=f.children,rb(b,c),e=W(e,f.unstable_observedBits),d=d(e),b.effectTag|=1,T(a,b,d,c),b.child;case 14:return e=b.type,f=aa(e,b.pendingProps),f=aa(e.type,f),oh(a,b,e,f,d,c);case 15:return ph(a,b,b.type,b.pendingProps,d,c);case 17:return d=b.type,e=b.pendingProps,e=b.elementType===d?e:aa(d,e),null!==a&&(a.alternate=null,b.alternate=null,b.effectTag|=2),b.tag=1,N(d)?(a=!0,Bc(b)):a=!1,rb(b,c),Yg(b,d,e),pe(b,d,e,c),Ie(null,
b,d,!0,a,c);case 19:return vh(a,b,c)}throw Error(k(156,b.tag));};var bf=null,Ne=null,la=function(a,b,c,d){return new Fj(a,b,c,d)};ef.prototype.render=function(a){md(a,this._internalRoot,null,null)};ef.prototype.unmount=function(){var a=this._internalRoot,b=a.containerInfo;md(null,a,null,function(){b[Lb]=null})};var Di=function(a){if(13===a.tag){var b=Fc(ka(),150,100);Ja(a,b);df(a,b)}};var Yf=function(a){13===a.tag&&(Ja(a,3),df(a,3))};var Bi=function(a){if(13===a.tag){var b=ka();b=Va(b,a,null);Ja(a,
b);df(a,b)}};sd=function(a,b,c){switch(b){case "input":Dd(a,c);b=c.name;if("radio"===c.type&&null!=b){for(c=a;c.parentNode;)c=c.parentNode;c=c.querySelectorAll("input[name="+JSON.stringify(""+b)+'][type="radio"]');for(b=0;b<c.length;b++){var d=c[b];if(d!==a&&d.form===a.form){var e=ae(d);if(!e)throw Error(k(90));Gf(d);Dd(d,e)}}}break;case "textarea":Lf(a,c);break;case "select":b=c.value,null!=b&&hb(a,!!c.multiple,b,!1)}};(function(a,b,c,d){ee=a;eg=b;vd=c;vf=d})(Qh,function(a,b,c,d,e){var f=p;p|=4;
try{return Da(98,a.bind(null,b,c,d,e))}finally{p=f,p===H&&ha()}},function(){(p&(1|ca|ma))===H&&(uj(),xb())},function(a,b){var c=p;p|=2;try{return a(b)}finally{p=c,p===H&&ha()}});var mk={Events:[Hb,Pa,ae,pf,qd,lb,function(a){Kd(a,Ki)},sf,tf,sc,pc,xb,{current:!1}]};(function(a){var b=a.findFiberByHostInstance;return Ej(M({},a,{overrideHookState:null,overrideProps:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:da.ReactCurrentDispatcher,findHostInstanceByFiber:function(a){a=Sf(a);
return null===a?null:a.stateNode},findFiberByHostInstance:function(a){return b?b(a):null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null}))})({findFiberByHostInstance:Bb,bundleType:0,version:"16.13.1",rendererPackageName:"react-dom"});I.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=mk;I.createPortal=Xh;I.findDOMNode=function(a){if(null==a)return null;if(1===a.nodeType)return a;var b=a._reactInternalFiber;if(void 0===
b){if("function"===typeof a.render)throw Error(k(188));throw Error(k(268,Object.keys(a)));}a=Sf(b);a=null===a?null:a.stateNode;return a};I.flushSync=function(a,b){if((p&(ca|ma))!==H)throw Error(k(187));var c=p;p|=1;try{return Da(99,a.bind(null,b))}finally{p=c,ha()}};I.hydrate=function(a,b,c){if(!bc(b))throw Error(k(200));return nd(null,a,b,!0,c)};I.render=function(a,b,c){if(!bc(b))throw Error(k(200));return nd(null,a,b,!1,c)};I.unmountComponentAtNode=function(a){if(!bc(a))throw Error(k(40));return a._reactRootContainer?
(Rh(function(){nd(null,null,a,!1,function(){a._reactRootContainer=null;a[Lb]=null})}),!0):!1};I.unstable_batchedUpdates=Qh;I.unstable_createPortal=function(a,b){return Xh(a,b,2<arguments.length&&void 0!==arguments[2]?arguments[2]:null)};I.unstable_renderSubtreeIntoContainer=function(a,b,c,d){if(!bc(c))throw Error(k(200));if(null==a||void 0===a._reactInternalFiber)throw Error(k(38));return nd(a,b,c,!1,d)};I.version="16.13.1"});
</script>
    <script>const e = React.createElement;

function pathToString(path) {
  if (path[0] === '/') {
    return '/' + path.slice(1).join('/');
  } else {
    return path.join('/');
  }
}

function findCommonPath(files) {
  if (!files || !files.length) {
    return [];
  }

  function isPrefix(arr, prefix) {
    if (arr.length < prefix.length) {
      return false;
    }
    for (let i = prefix.length - 1; i >= 0; --i) {
      if (arr[i] !== prefix[i]) {
        return false;
      }
    }
    return true;
  }

  let commonPath = files[0].path.slice(0, -1);
  while (commonPath.length) {
    if (files.every(file => isPrefix(file.path, commonPath))) {
      break;
    }
    commonPath.pop();
  }
  return commonPath;
}

function findFolders(files) {
  if (!files || !files.length) {
    return [];
  }

  let folders = files.filter(file => file.path.length > 1).map(file => file.path[0]);
  folders = [...new Set(folders)]; // unique
  folders.sort();

  folders = folders.map(folder => {
    let filesInFolder = files
      .filter(file => file.path[0] === folder)
      .map(file => ({
        ...file,
        path: file.path.slice(1),
        parent: [...file.parent, file.path[0]],
      }));

    const children = findFolders(filesInFolder); // recursion

    return {
      is_folder: true,
      path: [folder],
      parent: files[0].parent,
      children,
      covered: children.reduce((sum, file) => sum + file.covered, 0),
      coverable: children.reduce((sum, file) => sum + file.coverable, 0),
      prevRun: {
        covered: children.reduce((sum, file) => sum + file.prevRun.covered, 0),
        coverable: children.reduce((sum, file) => sum + file.prevRun.coverable, 0),
      },
    };
  });

  return [...folders, ...files.filter(file => file.path.length === 1)];
}

class App extends React.Component {
  constructor(...args) {
    super(...args);

    this.state = {
      current: [],
    };
  }

  componentDidMount() {
    this.updateStateFromLocation();
    window.addEventListener('hashchange', () => this.updateStateFromLocation(), false);
  }

  updateStateFromLocation() {
    if (window.location.hash.length > 1) {
      const current = window.location.hash.slice(1).split('/');
      this.setState({current});
    } else {
      this.setState({current: []});
    }
  }

  getCurrentPath() {
    let file = this.props.root;
    let path = [file];
    for (let p of this.state.current) {
      file = file.children.find(file => file.path[0] === p);
      if (!file) {
        return path;
      }
      path.push(file);
    }
    return path;
  }

  render() {
    const path = this.getCurrentPath();
    const file = path[path.length - 1];

    let w = null;
    if (file.is_folder) {
      w = e(FilesList, {
        folder: file,
        onSelectFile: this.selectFile.bind(this),
        onBack: path.length > 1 ? this.back.bind(this) : null,
      });
    } else {
      w = e(DisplayFile, {
        file,
        onBack: this.back.bind(this),
      });
    }

    return e('div', {className: 'app'}, w);
  }

  selectFile(file) {
    this.setState(
      ({current}) => {
        return {current: [...current, file.path[0]]};
      },
      () => this.updateHash(),
    );
  }

  back(file) {
    this.setState(
      ({current}) => {
        return {current: current.slice(0, current.length - 1)};
      },
      () => this.updateHash(),
    );
  }

  updateHash() {
    if (!this.state.current || !this.state.current.length) {
      window.location = '#';
    } else {
      window.location = '#' + this.state.current.join('/');
    }
  }
}

function FilesList({folder, onSelectFile, onBack}) {
  let files = folder.children;
  return e(
    'div',
    {className: 'display-folder'},
    e(FileHeader, {file: folder, onBack}),
    e(
      'table',
      {className: 'files-list'},
      e('thead', {className: 'files-list__head'}, e('tr', null, e('th', null, 'Path'), e('th', null, 'Coverage'))),
      e(
        'tbody',
        {className: 'files-list__body'},
        files.map(file => e(File, {file, onClick: onSelectFile})),
      ),
    ),
  );
}

function File({file, onClick}) {
  const coverage = file.coverable ? (file.covered / file.coverable) * 100 : -1;
  const coverageDelta =
    file.prevRun && (file.covered / file.coverable) * 100 - (file.prevRun.covered / file.prevRun.coverable) * 100;

  return e(
    'tr',
    {
      className:
        'files-list__file' +
        (coverage >= 0 && coverage < 50 ? ' files-list__file_low' : '') +
        (coverage >= 50 && coverage < 80 ? ' files-list__file_medium' : '') +
        (coverage >= 80 ? ' files-list__file_high' : '') +
        (file.is_folder ? ' files-list__file_folder' : ''),
      onClick: () => onClick(file),
    },
    e('td', null, e('a', null, pathToString(file.path))),
    e(
      'td',
      null,
      file.covered + ' / ' + file.coverable + (coverage >= 0 ? ' (' + coverage.toFixed(2) + '%)' : ''),
      e(
        'span',
        {title: 'Change from the previous run'},
        coverageDelta ? ` (${coverageDelta > 0 ? '+' : ''}${coverageDelta.toFixed(2)}%)` : '',
      ),
    ),
  );
}

function DisplayFile({file, onBack}) {
  return e('div', {className: 'display-file'}, e(FileHeader, {file, onBack}), e(FileContent, {file}));
}

function FileHeader({file, onBack}) {
  const coverage = (file.covered / file.coverable) * 100;
  const coverageDelta = file.prevRun && coverage - (file.prevRun.covered / file.prevRun.coverable) * 100;

  return e(
    'div',
    {className: 'file-header'},
    onBack ? e('a', {className: 'file-header__back', onClick: onBack}, 'Back') : null,
    e('div', {className: 'file-header__name'}, pathToString([...file.parent, ...file.path])),
    e(
      'div',
      {className: 'file-header__stat'},
      'Covered: ' + file.covered + ' of ' + file.coverable + (file.coverable ? ' (' + coverage.toFixed(2) + '%)' : ''),
      e(
        'span',
        {title: 'Change from the previous run'},
        coverageDelta ? ` (${coverageDelta > 0 ? '+' : ''}${coverageDelta.toFixed(2)}%)` : '',
      ),
      e('input', {id: 'theme-toggle', type: 'checkbox', hidden: true}),
      e('label', {for: 'theme-toggle', id: 'theme-toggle-label'}, '🌙'),
    ),
  );
}

function FileContent({file}) {
  return e(
    'pre',
    {className: 'file-content'},
    file.content.split(/\r?\n/).map((line, index) => {
      const trace = file.traces.find(trace => trace.line === index + 1);
      const covered = trace && trace.stats.Line;
      const uncovered = trace && !trace.stats.Line;
      const nbHit = covered? trace.stats.Line: 0;
      return e(
        'div',
        { className: 'code-text-container' },
        e(
          'code',
          {
            className: 'code-line' + (covered ? ' code-line_covered' : '') + (uncovered ? ' code-line_uncovered' : ''),
          },
          line
        ),
        e(
          'div',
          { className: 'cover-indicator' + (covered? ' check-cover': '') + (uncovered? ' no-cover': '')},
          e(
            'div',
            { className: (covered? 'stat-line-hit': '')},
            covered? nbHit: ""
          )
        )
      );
    }),
  );
}

(function () {
  const commonPath = findCommonPath(data.files);
  const prevFilesMap = new Map();

  previousData &&
    previousData.files.forEach(file => {
      const path = file.path.slice(commonPath.length).join('/');
      prevFilesMap.set(path, file);
    });

  const files = data.files.map(file => {
    const path = file.path.slice(commonPath.length);
    const {covered = 0, coverable = 0} = prevFilesMap.get(path.join('/')) || {};
    return {
      ...file,
      path,
      parent: commonPath,
      prevRun: {covered, coverable},
    };
  });

  const children = findFolders(files);

  const root = {
    is_folder: true,
    children,
    path: commonPath,
    parent: [],
    covered: children.reduce((sum, file) => sum + file.covered, 0),
    coverable: children.reduce((sum, file) => sum + file.coverable, 0),
    prevRun: {
      covered: children.reduce((sum, file) => sum + file.prevRun.covered, 0),
      coverable: children.reduce((sum, file) => sum + file.prevRun.coverable, 0),
    },
  };

  ReactDOM.render(e(App, {root, prevFilesMap}), document.getElementById('root'));

  const toggle = document.getElementById('theme-toggle');
  const label = document.getElementById('theme-toggle-label');
  label.textContent = '🌙';

  toggle.addEventListener('change', () => {
    if (toggle.checked) {
      document.documentElement.setAttribute('data-theme', 'dark');
      label.textContent = '☀️';
    } else {
      document.documentElement.removeAttribute('data-theme');
      label.textContent = '🌙';
    }
  });
})();
</script>
</body>
</html>